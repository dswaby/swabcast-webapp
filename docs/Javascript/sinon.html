<!DOCTYPE html>

<html>
<head>
  <title>sinon.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="SpecRunner.html">
                SpecRunner.js
              </a>
            
              
              <a class="source" href="app.html">
                app.js
              </a>
            
              
              <a class="source" href="dialog.html">
                dialog.js
              </a>
            
              
              <a class="source" href="modal.html">
                modal.js
              </a>
            
              
              <a class="source" href="revealoptions.html">
                revealoptions.js
              </a>
            
              
              <a class="source" href="localstorage.html">
                localstorage.js
              </a>
            
              
              <a class="source" href="alert_controller.html">
                alert_controller.js
              </a>
            
              
              <a class="source" href="alert_view.html">
                alert_view.js
              </a>
            
              
              <a class="source" href="edit_controller.html">
                edit_controller.js
              </a>
            
              
              <a class="source" href="edit_view.html">
                edit_view.js
              </a>
            
              
              <a class="source" href="episodes_app.html">
                episodes_app.js
              </a>
            
              
              <a class="source" href="feed_controller.html">
                feed_controller.js
              </a>
            
              
              <a class="source" href="feed_view.html">
                feed_view.js
              </a>
            
              
              <a class="source" href="list_controller.html">
                list_controller.js
              </a>
            
              
              <a class="source" href="list_view.html">
                list_view.js
              </a>
            
              
              <a class="source" href="nav_controller.html">
                nav_controller.js
              </a>
            
              
              <a class="source" href="nav_view.html">
                nav_view.js
              </a>
            
              
              <a class="source" href="new_view.html">
                new_view.js
              </a>
            
              
              <a class="source" href="player_controller.html">
                player_controller.js
              </a>
            
              
              <a class="source" href="player_view.html">
                player_view.js
              </a>
            
              
              <a class="source" href="playlist_controller.html">
                playlist_controller.js
              </a>
            
              
              <a class="source" href="playlist_view.html">
                playlist_view.js
              </a>
            
              
              <a class="source" href="show_controller.html">
                show_controller.js
              </a>
            
              
              <a class="source" href="show_view.html">
                show_view.js
              </a>
            
              
              <a class="source" href="FeedSpec.html">
                FeedSpec.js
              </a>
            
              
              <a class="source" href="async.html">
                async.js
              </a>
            
              
              <a class="source" href="list_controller.html">
                list_controller.js
              </a>
            
              
              <a class="source" href="list_view.html">
                list_view.js
              </a>
            
              
              <a class="source" href="show_controller.html">
                show_controller.js
              </a>
            
              
              <a class="source" href="show_view.html">
                show_view.js
              </a>
            
              
              <a class="source" href="subscriptions_app.html">
                subscriptions_app.js
              </a>
            
              
              <a class="source" href="build.html">
                build.js
              </a>
            
              
              <a class="source" href="modal.html">
                modal.js
              </a>
            
              
              <a class="source" href="utils.html">
                utils.js
              </a>
            
              
              <a class="source" href="view.html">
                view.js
              </a>
            
              
              <a class="source" href="views.html">
                views.js
              </a>
            
              
              <a class="source" href="episode.html">
                episode.js
              </a>
            
              
              <a class="source" href="feed.html">
                feed.js
              </a>
            
              
              <a class="source" href="player.html">
                player.js
              </a>
            
              
              <a class="source" href="playlist.html">
                playlist.js
              </a>
            
              
              <a class="source" href="subscriptions.html">
                subscriptions.js
              </a>
            
              
              <a class="source" href="topics.html">
                topics.js
              </a>
            
              
              <a class="source" href="require_main.html">
                require_main.js
              </a>
            
              
              <a class="source" href="require_main_built.html">
                require_main_built.js
              </a>
            
              
              <a class="source" href="almond.html">
                almond.js
              </a>
            
              
              <a class="source" href="backbone.babysitter.html">
                backbone.babysitter.js
              </a>
            
              
              <a class="source" href="backbone.html">
                backbone.js
              </a>
            
              
              <a class="source" href="backbone.localstorage.html">
                backbone.localstorage.js
              </a>
            
              
              <a class="source" href="backbone.localstorage.min.html">
                backbone.localstorage.min.js
              </a>
            
              
              <a class="source" href="backbone.marionette.html">
                backbone.marionette.js
              </a>
            
              
              <a class="source" href="backbone.marionette.min.html">
                backbone.marionette.min.js
              </a>
            
              
              <a class="source" href="backbone.picky.html">
                backbone.picky.js
              </a>
            
              
              <a class="source" href="backbone.syphon.html">
                backbone.syphon.js
              </a>
            
              
              <a class="source" href="backbone.wreqr.html">
                backbone.wreqr.js
              </a>
            
              
              <a class="source" href="foundation.fastclick.html">
                foundation.fastclick.js
              </a>
            
              
              <a class="source" href="foundation.html">
                foundation.js
              </a>
            
              
              <a class="source" href="foundation.min.html">
                foundation.min.js
              </a>
            
              
              <a class="source" href="foundation.offcanvas.html">
                foundation.offcanvas.js
              </a>
            
              
              <a class="source" href="foundation.reveal.html">
                foundation.reveal.js
              </a>
            
              
              <a class="source" href="jasmine-html.html">
                jasmine-html.js
              </a>
            
              
              <a class="source" href="jasmine.html">
                jasmine.js
              </a>
            
              
              <a class="source" href="jasmine-html.html">
                jasmine-html.js
              </a>
            
              
              <a class="source" href="jasmine.html">
                jasmine.js
              </a>
            
              
              <a class="source" href="jquery-ui-1.10.3.min.html">
                jquery-ui-1.10.3.min.js
              </a>
            
              
              <a class="source" href="jquery-ui.html">
                jquery-ui.js
              </a>
            
              
              <a class="source" href="jquery.html">
                jquery.js
              </a>
            
              
              <a class="source" href="jquery.transit.html">
                jquery.transit.js
              </a>
            
              
              <a class="source" href="jquery.transmit.html">
                jquery.transmit.js
              </a>
            
              
              <a class="source" href="json2.html">
                json2.js
              </a>
            
              
              <a class="source" href="log.html">
                log.js
              </a>
            
              
              <a class="source" href="modernizr.html">
                modernizr.js
              </a>
            
              
              <a class="source" href="require.html">
                require.js
              </a>
            
              
              <a class="source" href="jasmine-sinon.html">
                jasmine-sinon.js
              </a>
            
              
              <a class="source" href="sinon.html">
                sinon.js
              </a>
            
              
              <a class="source" href="spin.jquery.html">
                spin.jquery.js
              </a>
            
              
              <a class="source" href="spin.html">
                spin.js
              </a>
            
              
              <a class="source" href="tpl.html">
                tpl.js
              </a>
            
              
              <a class="source" href="underscore.html">
                underscore.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>sinon.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*jslint eqeqeq: false, onevar: false, forin: true, nomen: false, regexp: false, plusplus: false*/</span>
<span class="hljs-comment">/*global module, require, __dirname, document*/</span>
<span class="hljs-comment">/**
 * Sinon core utilities. For internal use only.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */</span>
<span class="hljs-pi">"use strict"</span>;

<span class="hljs-keyword">var</span> sinon = (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(buster)</span> {</span>
    <span class="hljs-keyword">var</span> div = <span class="hljs-keyword">typeof</span> document != <span class="hljs-string">"undefined"</span> &amp;&amp; document.createElement(<span class="hljs-string">"div"</span>);
    <span class="hljs-keyword">var</span> hasOwn = <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDOMNode</span><span class="hljs-params">(obj)</span> {</span>
        <span class="hljs-keyword">var</span> success = <span class="hljs-literal">false</span>;

        <span class="hljs-keyword">try</span> {
            obj.appendChild(div);
            success = div.parentNode == obj;
        } <span class="hljs-keyword">catch</span> (e) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">try</span> {
                obj.removeChild(div);
            } <span class="hljs-keyword">catch</span> (e) {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Remove failed, not much we can do about that</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            }
        }

        <span class="hljs-keyword">return</span> success;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isElement</span><span class="hljs-params">(obj)</span> {</span>
        <span class="hljs-keyword">return</span> div &amp;&amp; obj &amp;&amp; obj.nodeType === <span class="hljs-number">1</span> &amp;&amp; isDOMNode(obj);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isFunction</span><span class="hljs-params">(obj)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">"function"</span> || !!(obj &amp;&amp; obj.constructor &amp;&amp; obj.call &amp;&amp; obj.apply);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mirrorProperties</span><span class="hljs-params">(target, source)</span> {</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> source) {
            <span class="hljs-keyword">if</span> (!hasOwn.call(target, prop)) {
                target[prop] = source[prop];
            }
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isRestorable</span> <span class="hljs-params">(obj)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">"function"</span> &amp;&amp; <span class="hljs-keyword">typeof</span> obj.restore === <span class="hljs-string">"function"</span> &amp;&amp; obj.restore.sinon;
    }

    <span class="hljs-keyword">var</span> sinon = {
        wrapMethod: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wrapMethod</span><span class="hljs-params">(object, property, method)</span> {</span>
            <span class="hljs-keyword">if</span> (!object) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Should wrap property of object"</span>);
            }

            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> method != <span class="hljs-string">"function"</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Method wrapper should be function"</span>);
            }

            <span class="hljs-keyword">var</span> wrappedMethod = object[property],
                error;

            <span class="hljs-keyword">if</span> (!isFunction(wrappedMethod)) {
                error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Attempted to wrap "</span> + (<span class="hljs-keyword">typeof</span> wrappedMethod) + <span class="hljs-string">" property "</span> +
                                    property + <span class="hljs-string">" as function"</span>);
            }

            <span class="hljs-keyword">if</span> (wrappedMethod.restore &amp;&amp; wrappedMethod.restore.sinon) {
                error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Attempted to wrap "</span> + property + <span class="hljs-string">" which is already wrapped"</span>);
            }

            <span class="hljs-keyword">if</span> (wrappedMethod.calledBefore) {
                <span class="hljs-keyword">var</span> verb = !!wrappedMethod.returns ? <span class="hljs-string">"stubbed"</span> : <span class="hljs-string">"spied on"</span>;
                error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Attempted to wrap "</span> + property + <span class="hljs-string">" which is already "</span> + verb);
            }

            <span class="hljs-keyword">if</span> (error) {
                <span class="hljs-keyword">if</span> (wrappedMethod._stack) {
                    error.stack += <span class="hljs-string">'\n--------------\n'</span> + wrappedMethod._stack;
                }
                <span class="hljs-keyword">throw</span> error;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>IE 8 does not support hasOwnProperty on the window object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> owned = hasOwn.call(object, property);
            object[property] = method;
            method.displayName = property;</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Set up a stack trace which can be used later to find what line of
code the original method was created on.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            method._stack = (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Stack Trace for original'</span>)).stack;

            method.restore = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>For prototype properties try to reset by delete first.
If this fails (ex: localStorage on mobile safari) then force a reset
via direct assignment.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">if</span> (!owned) {
                    <span class="hljs-keyword">delete</span> object[property];
                }
                <span class="hljs-keyword">if</span> (object[property] === method) {
                    object[property] = wrappedMethod;
                }
            };

            method.restore.sinon = <span class="hljs-literal">true</span>;
            mirrorProperties(method, wrappedMethod);

            <span class="hljs-keyword">return</span> method;
        },

        extend: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extend</span><span class="hljs-params">(target)</span> {</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>, l = <span class="hljs-built_in">arguments</span>.length; i &lt; l; i += <span class="hljs-number">1</span>) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> <span class="hljs-built_in">arguments</span>[i]) {
                    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>[i].hasOwnProperty(prop)) {
                        target[prop] = <span class="hljs-built_in">arguments</span>[i][prop];
                    }</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>DONT ENUM bug, only care about toString</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>[i].hasOwnProperty(<span class="hljs-string">"toString"</span>) &amp;&amp;
                        <span class="hljs-built_in">arguments</span>[i].toString != target.toString) {
                        target.toString = <span class="hljs-built_in">arguments</span>[i].toString;
                    }
                }
            }

            <span class="hljs-keyword">return</span> target;
        },

        create: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span><span class="hljs-params">(proto)</span> {</span>
            <span class="hljs-keyword">var</span> F = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>};
            F.prototype = proto;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> F();
        },

        deepEqual: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deepEqual</span><span class="hljs-params">(a, b)</span> {</span>
            <span class="hljs-keyword">if</span> (sinon.match &amp;&amp; sinon.match.isMatcher(a)) {
                <span class="hljs-keyword">return</span> a.test(b);
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> a != <span class="hljs-string">"object"</span> || <span class="hljs-keyword">typeof</span> b != <span class="hljs-string">"object"</span>) {
                <span class="hljs-keyword">return</span> a === b;
            }

            <span class="hljs-keyword">if</span> (isElement(a) || isElement(b)) {
                <span class="hljs-keyword">return</span> a === b;
            }

            <span class="hljs-keyword">if</span> (a === b) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }

            <span class="hljs-keyword">if</span> ((a === <span class="hljs-literal">null</span> &amp;&amp; b !== <span class="hljs-literal">null</span>) || (a !== <span class="hljs-literal">null</span> &amp;&amp; b === <span class="hljs-literal">null</span>)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }

            <span class="hljs-keyword">var</span> aString = <span class="hljs-built_in">Object</span>.prototype.toString.call(a);
            <span class="hljs-keyword">if</span> (aString != <span class="hljs-built_in">Object</span>.prototype.toString.call(b)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }

            <span class="hljs-keyword">if</span> (aString == <span class="hljs-string">"[object Date]"</span>) {
                <span class="hljs-keyword">return</span> a.valueOf() === b.valueOf();
            }

            <span class="hljs-keyword">var</span> prop, aLength = <span class="hljs-number">0</span>, bLength = <span class="hljs-number">0</span>;

            <span class="hljs-keyword">if</span> (aString == <span class="hljs-string">"[object Array]"</span> &amp;&amp; a.length !== b.length) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }

            <span class="hljs-keyword">for</span> (prop <span class="hljs-keyword">in</span> a) {
                aLength += <span class="hljs-number">1</span>;

                <span class="hljs-keyword">if</span> (!deepEqual(a[prop], b[prop])) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
            }

            <span class="hljs-keyword">for</span> (prop <span class="hljs-keyword">in</span> b) {
                bLength += <span class="hljs-number">1</span>;
            }

            <span class="hljs-keyword">return</span> aLength == bLength;
        },

        functionName: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">functionName</span><span class="hljs-params">(func)</span> {</span>
            <span class="hljs-keyword">var</span> name = func.displayName || func.name;</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Use function decomposition as a last resort to get function
name. Does not rely on function decomposition to work - if it
doesn’t debugging will be slightly less informative
(i.e. toString will say ‘spy’ rather than ‘myFunc’).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (!name) {
                <span class="hljs-keyword">var</span> matches = func.toString().match(<span class="hljs-regexp">/function ([^\s\(]+)/</span>);
                name = matches &amp;&amp; matches[<span class="hljs-number">1</span>];
            }

            <span class="hljs-keyword">return</span> name;
        },

        functionToString: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toString</span><span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.getCall &amp;&amp; <span class="hljs-keyword">this</span>.callCount) {
                <span class="hljs-keyword">var</span> thisValue, prop, i = <span class="hljs-keyword">this</span>.callCount;

                <span class="hljs-keyword">while</span> (i--) {
                    thisValue = <span class="hljs-keyword">this</span>.getCall(i).thisValue;

                    <span class="hljs-keyword">for</span> (prop <span class="hljs-keyword">in</span> thisValue) {
                        <span class="hljs-keyword">if</span> (thisValue[prop] === <span class="hljs-keyword">this</span>) {
                            <span class="hljs-keyword">return</span> prop;
                        }
                    }
                }
            }

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.displayName || <span class="hljs-string">"sinon fake"</span>;
        },

        getConfig: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(custom)</span> {</span>
            <span class="hljs-keyword">var</span> config = {};
            custom = custom || {};
            <span class="hljs-keyword">var</span> defaults = sinon.defaultConfig;

            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> defaults) {
                <span class="hljs-keyword">if</span> (defaults.hasOwnProperty(prop)) {
                    config[prop] = custom.hasOwnProperty(prop) ? custom[prop] : defaults[prop];
                }
            }

            <span class="hljs-keyword">return</span> config;
        },

        format: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(val)</span> {</span>
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span> + val;
        },

        defaultConfig: {
            injectIntoThis: <span class="hljs-literal">true</span>,
            injectInto: <span class="hljs-literal">null</span>,
            properties: [<span class="hljs-string">"spy"</span>, <span class="hljs-string">"stub"</span>, <span class="hljs-string">"mock"</span>, <span class="hljs-string">"clock"</span>, <span class="hljs-string">"server"</span>, <span class="hljs-string">"requests"</span>],
            useFakeTimers: <span class="hljs-literal">true</span>,
            useFakeServer: <span class="hljs-literal">true</span>
        },

        timesInWords: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timesInWords</span><span class="hljs-params">(count)</span> {</span>
            <span class="hljs-keyword">return</span> count == <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-string">"once"</span> ||
                count == <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-string">"twice"</span> ||
                count == <span class="hljs-number">3</span> &amp;&amp; <span class="hljs-string">"thrice"</span> ||
                (count || <span class="hljs-number">0</span>) + <span class="hljs-string">" times"</span>;
        },

        calledInOrder: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(spies)</span> {</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>, l = spies.length; i &lt; l; i++) {
                <span class="hljs-keyword">if</span> (!spies[i - <span class="hljs-number">1</span>].calledBefore(spies[i]) || !spies[i].called) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
            }

            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        },

        orderByFirstCall: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(spies)</span> {</span>
            <span class="hljs-keyword">return</span> spies.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>uuid, won’t ever be equal</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">var</span> aCall = a.getCall(<span class="hljs-number">0</span>);
                <span class="hljs-keyword">var</span> bCall = b.getCall(<span class="hljs-number">0</span>);
                <span class="hljs-keyword">var</span> aId = aCall &amp;&amp; aCall.callId || -<span class="hljs-number">1</span>;
                <span class="hljs-keyword">var</span> bId = bCall &amp;&amp; bCall.callId || -<span class="hljs-number">1</span>;

                <span class="hljs-keyword">return</span> aId &lt; bId ? -<span class="hljs-number">1</span> : <span class="hljs-number">1</span>;
            });
        },

        log: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>},

        logError: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(label, err)</span> {</span>
            <span class="hljs-keyword">var</span> msg = label + <span class="hljs-string">" threw exception: "</span>
            sinon.log(msg + <span class="hljs-string">"["</span> + err.name + <span class="hljs-string">"] "</span> + err.message);
            <span class="hljs-keyword">if</span> (err.stack) { sinon.log(err.stack); }

            setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                err.message = msg + err.message;
                <span class="hljs-keyword">throw</span> err;
            }, <span class="hljs-number">0</span>);
        },

        typeOf: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> {</span>
            <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"null"</span>;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">undefined</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"undefined"</span>;
            }
            <span class="hljs-keyword">var</span> string = <span class="hljs-built_in">Object</span>.prototype.toString.call(value);
            <span class="hljs-keyword">return</span> string.substring(<span class="hljs-number">8</span>, string.length - <span class="hljs-number">1</span>).toLowerCase();
        },

        createStubInstance: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(constructor)</span> {</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> constructor !== <span class="hljs-string">"function"</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"The constructor should be a function."</span>);
            }
            <span class="hljs-keyword">return</span> sinon.stub(sinon.create(constructor.prototype));
        },

        restore: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(object)</span> {</span>
            <span class="hljs-keyword">if</span> (object !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-keyword">typeof</span> object === <span class="hljs-string">"object"</span>) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> prop <span class="hljs-keyword">in</span> object) {
                    <span class="hljs-keyword">if</span> (isRestorable(object[prop])) {
                        object[prop].restore();
                    }
                }
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isRestorable(object)) {
                object.restore();
            }
        }
    };

    <span class="hljs-keyword">var</span> isNode = <span class="hljs-keyword">typeof</span> module !== <span class="hljs-string">"undefined"</span> &amp;&amp; module.exports;
    <span class="hljs-keyword">var</span> isAMD = <span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> define.amd === <span class="hljs-string">'object'</span> &amp;&amp; define.amd;

    <span class="hljs-keyword">if</span> (isAMD) {
        define(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
            <span class="hljs-keyword">return</span> sinon;
        });
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isNode) {
        <span class="hljs-keyword">try</span> {
            buster = { format: <span class="hljs-built_in">require</span>(<span class="hljs-string">"buster-format"</span>) };
        } <span class="hljs-keyword">catch</span> (e) {}
        module.exports = sinon;
        module.exports.spy = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./sinon/spy"</span>);
        module.exports.spyCall = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./sinon/call"</span>);
        module.exports.behavior = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./sinon/behavior"</span>);
        module.exports.stub = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./sinon/stub"</span>);
        module.exports.mock = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./sinon/mock"</span>);
        module.exports.collection = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./sinon/collection"</span>);
        module.exports.assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./sinon/assert"</span>);
        module.exports.sandbox = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./sinon/sandbox"</span>);
        module.exports.test = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./sinon/test"</span>);
        module.exports.testCase = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./sinon/test_case"</span>);
        module.exports.assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./sinon/assert"</span>);
        module.exports.match = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./sinon/match"</span>);
    }

    <span class="hljs-keyword">if</span> (buster) {
        <span class="hljs-keyword">var</span> formatter = sinon.create(buster.format);
        formatter.quoteStrings = <span class="hljs-literal">false</span>;
        sinon.format = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> formatter.ascii.apply(formatter, <span class="hljs-built_in">arguments</span>);
        };
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isNode) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">var</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">"util"</span>);
            sinon.format = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> {</span>
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> value == <span class="hljs-string">"object"</span> &amp;&amp; value.toString === <span class="hljs-built_in">Object</span>.prototype.toString ? util.inspect(value) : value;
            };
        } <span class="hljs-keyword">catch</span> (e) {
            <span class="hljs-comment">/* Node, but no util module - would be very old, but better safe than
             sorry */</span>
        }
    }

    <span class="hljs-keyword">return</span> sinon;
}(<span class="hljs-keyword">typeof</span> buster == <span class="hljs-string">"object"</span> &amp;&amp; buster));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
