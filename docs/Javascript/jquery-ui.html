<!DOCTYPE html>

<html>
<head>
  <title>jquery-ui.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="SpecRunner.html">
                SpecRunner.js
              </a>
            
              
              <a class="source" href="app.html">
                app.js
              </a>
            
              
              <a class="source" href="dialog.html">
                dialog.js
              </a>
            
              
              <a class="source" href="modal.html">
                modal.js
              </a>
            
              
              <a class="source" href="revealoptions.html">
                revealoptions.js
              </a>
            
              
              <a class="source" href="localstorage.html">
                localstorage.js
              </a>
            
              
              <a class="source" href="alert_controller.html">
                alert_controller.js
              </a>
            
              
              <a class="source" href="alert_view.html">
                alert_view.js
              </a>
            
              
              <a class="source" href="edit_controller.html">
                edit_controller.js
              </a>
            
              
              <a class="source" href="edit_view.html">
                edit_view.js
              </a>
            
              
              <a class="source" href="episodes_app.html">
                episodes_app.js
              </a>
            
              
              <a class="source" href="feed_controller.html">
                feed_controller.js
              </a>
            
              
              <a class="source" href="feed_view.html">
                feed_view.js
              </a>
            
              
              <a class="source" href="list_controller.html">
                list_controller.js
              </a>
            
              
              <a class="source" href="list_view.html">
                list_view.js
              </a>
            
              
              <a class="source" href="nav_controller.html">
                nav_controller.js
              </a>
            
              
              <a class="source" href="nav_view.html">
                nav_view.js
              </a>
            
              
              <a class="source" href="new_view.html">
                new_view.js
              </a>
            
              
              <a class="source" href="player_controller.html">
                player_controller.js
              </a>
            
              
              <a class="source" href="player_view.html">
                player_view.js
              </a>
            
              
              <a class="source" href="playlist_controller.html">
                playlist_controller.js
              </a>
            
              
              <a class="source" href="playlist_view.html">
                playlist_view.js
              </a>
            
              
              <a class="source" href="show_controller.html">
                show_controller.js
              </a>
            
              
              <a class="source" href="show_view.html">
                show_view.js
              </a>
            
              
              <a class="source" href="FeedSpec.html">
                FeedSpec.js
              </a>
            
              
              <a class="source" href="async.html">
                async.js
              </a>
            
              
              <a class="source" href="list_controller.html">
                list_controller.js
              </a>
            
              
              <a class="source" href="list_view.html">
                list_view.js
              </a>
            
              
              <a class="source" href="show_controller.html">
                show_controller.js
              </a>
            
              
              <a class="source" href="show_view.html">
                show_view.js
              </a>
            
              
              <a class="source" href="subscriptions_app.html">
                subscriptions_app.js
              </a>
            
              
              <a class="source" href="build.html">
                build.js
              </a>
            
              
              <a class="source" href="modal.html">
                modal.js
              </a>
            
              
              <a class="source" href="utils.html">
                utils.js
              </a>
            
              
              <a class="source" href="view.html">
                view.js
              </a>
            
              
              <a class="source" href="views.html">
                views.js
              </a>
            
              
              <a class="source" href="episode.html">
                episode.js
              </a>
            
              
              <a class="source" href="feed.html">
                feed.js
              </a>
            
              
              <a class="source" href="player.html">
                player.js
              </a>
            
              
              <a class="source" href="playlist.html">
                playlist.js
              </a>
            
              
              <a class="source" href="subscriptions.html">
                subscriptions.js
              </a>
            
              
              <a class="source" href="topics.html">
                topics.js
              </a>
            
              
              <a class="source" href="require_main.html">
                require_main.js
              </a>
            
              
              <a class="source" href="require_main_built.html">
                require_main_built.js
              </a>
            
              
              <a class="source" href="almond.html">
                almond.js
              </a>
            
              
              <a class="source" href="backbone.babysitter.html">
                backbone.babysitter.js
              </a>
            
              
              <a class="source" href="backbone.html">
                backbone.js
              </a>
            
              
              <a class="source" href="backbone.localstorage.html">
                backbone.localstorage.js
              </a>
            
              
              <a class="source" href="backbone.localstorage.min.html">
                backbone.localstorage.min.js
              </a>
            
              
              <a class="source" href="backbone.marionette.html">
                backbone.marionette.js
              </a>
            
              
              <a class="source" href="backbone.marionette.min.html">
                backbone.marionette.min.js
              </a>
            
              
              <a class="source" href="backbone.picky.html">
                backbone.picky.js
              </a>
            
              
              <a class="source" href="backbone.syphon.html">
                backbone.syphon.js
              </a>
            
              
              <a class="source" href="backbone.wreqr.html">
                backbone.wreqr.js
              </a>
            
              
              <a class="source" href="foundation.fastclick.html">
                foundation.fastclick.js
              </a>
            
              
              <a class="source" href="foundation.html">
                foundation.js
              </a>
            
              
              <a class="source" href="foundation.min.html">
                foundation.min.js
              </a>
            
              
              <a class="source" href="foundation.offcanvas.html">
                foundation.offcanvas.js
              </a>
            
              
              <a class="source" href="foundation.reveal.html">
                foundation.reveal.js
              </a>
            
              
              <a class="source" href="jasmine-html.html">
                jasmine-html.js
              </a>
            
              
              <a class="source" href="jasmine.html">
                jasmine.js
              </a>
            
              
              <a class="source" href="jasmine-html.html">
                jasmine-html.js
              </a>
            
              
              <a class="source" href="jasmine.html">
                jasmine.js
              </a>
            
              
              <a class="source" href="jquery-ui-1.10.3.min.html">
                jquery-ui-1.10.3.min.js
              </a>
            
              
              <a class="source" href="jquery-ui.html">
                jquery-ui.js
              </a>
            
              
              <a class="source" href="jquery.html">
                jquery.js
              </a>
            
              
              <a class="source" href="jquery.transit.html">
                jquery.transit.js
              </a>
            
              
              <a class="source" href="jquery.transmit.html">
                jquery.transmit.js
              </a>
            
              
              <a class="source" href="json2.html">
                json2.js
              </a>
            
              
              <a class="source" href="log.html">
                log.js
              </a>
            
              
              <a class="source" href="modernizr.html">
                modernizr.js
              </a>
            
              
              <a class="source" href="require.html">
                require.js
              </a>
            
              
              <a class="source" href="jasmine-sinon.html">
                jasmine-sinon.js
              </a>
            
              
              <a class="source" href="sinon.html">
                sinon.js
              </a>
            
              
              <a class="source" href="spin.jquery.html">
                spin.jquery.js
              </a>
            
              
              <a class="source" href="spin.html">
                spin.js
              </a>
            
              
              <a class="source" href="tpl.html">
                tpl.js
              </a>
            
              
              <a class="source" href="underscore.html">
                underscore.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>jquery-ui.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*! jQuery UI - v1.10.3 - 2013-05-27
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */</span>

(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

<span class="hljs-keyword">var</span> uuid = <span class="hljs-number">0</span>,
	runiqueId = <span class="hljs-regexp">/^ui-id-\d+$/</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>$.ui might exist from components with no dependencies, e.g., $.ui.position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>$.ui = $.ui || {};

$.extend( $.ui, {
	version: <span class="hljs-string">"1.10.3"</span>,

	keyCode: {
		BACKSPACE: <span class="hljs-number">8</span>,
		COMMA: <span class="hljs-number">188</span>,
		DELETE: <span class="hljs-number">46</span>,
		DOWN: <span class="hljs-number">40</span>,
		END: <span class="hljs-number">35</span>,
		ENTER: <span class="hljs-number">13</span>,
		ESCAPE: <span class="hljs-number">27</span>,
		HOME: <span class="hljs-number">36</span>,
		LEFT: <span class="hljs-number">37</span>,
		NUMPAD_ADD: <span class="hljs-number">107</span>,
		NUMPAD_DECIMAL: <span class="hljs-number">110</span>,
		NUMPAD_DIVIDE: <span class="hljs-number">111</span>,
		NUMPAD_ENTER: <span class="hljs-number">108</span>,
		NUMPAD_MULTIPLY: <span class="hljs-number">106</span>,
		NUMPAD_SUBTRACT: <span class="hljs-number">109</span>,
		PAGE_DOWN: <span class="hljs-number">34</span>,
		PAGE_UP: <span class="hljs-number">33</span>,
		PERIOD: <span class="hljs-number">190</span>,
		RIGHT: <span class="hljs-number">39</span>,
		SPACE: <span class="hljs-number">32</span>,
		TAB: <span class="hljs-number">9</span>,
		UP: <span class="hljs-number">38</span>
	}
});</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>plugins</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>$.fn.extend({
	focus: (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( orig )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( delay, fn )</span> {</span>
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> delay === <span class="hljs-string">"number"</span> ?
				<span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">var</span> elem = <span class="hljs-keyword">this</span>;
					setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
						$( elem ).focus();
						<span class="hljs-keyword">if</span> ( fn ) {
							fn.call( elem );
						}
					}, delay );
				}) :
				orig.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
		};
	})( $.fn.focus ),

	scrollParent: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> scrollParent;
		<span class="hljs-keyword">if</span> (($.ui.ie &amp;&amp; (<span class="hljs-regexp">/(static|relative)/</span>).test(<span class="hljs-keyword">this</span>.css(<span class="hljs-string">"position"</span>))) || (<span class="hljs-regexp">/absolute/</span>).test(<span class="hljs-keyword">this</span>.css(<span class="hljs-string">"position"</span>))) {
			scrollParent = <span class="hljs-keyword">this</span>.parents().filter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">return</span> (<span class="hljs-regexp">/(relative|absolute|fixed)/</span>).test($.css(<span class="hljs-keyword">this</span>,<span class="hljs-string">"position"</span>)) &amp;&amp; (<span class="hljs-regexp">/(auto|scroll)/</span>).test($.css(<span class="hljs-keyword">this</span>,<span class="hljs-string">"overflow"</span>)+$.css(<span class="hljs-keyword">this</span>,<span class="hljs-string">"overflow-y"</span>)+$.css(<span class="hljs-keyword">this</span>,<span class="hljs-string">"overflow-x"</span>));
			}).eq(<span class="hljs-number">0</span>);
		} <span class="hljs-keyword">else</span> {
			scrollParent = <span class="hljs-keyword">this</span>.parents().filter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">return</span> (<span class="hljs-regexp">/(auto|scroll)/</span>).test($.css(<span class="hljs-keyword">this</span>,<span class="hljs-string">"overflow"</span>)+$.css(<span class="hljs-keyword">this</span>,<span class="hljs-string">"overflow-y"</span>)+$.css(<span class="hljs-keyword">this</span>,<span class="hljs-string">"overflow-x"</span>));
			}).eq(<span class="hljs-number">0</span>);
		}

		<span class="hljs-keyword">return</span> (<span class="hljs-regexp">/fixed/</span>).test(<span class="hljs-keyword">this</span>.css(<span class="hljs-string">"position"</span>)) || !scrollParent.length ? $(document) : scrollParent;
	},

	zIndex: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( zIndex )</span> {</span>
		<span class="hljs-keyword">if</span> ( zIndex !== <span class="hljs-literal">undefined</span> ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.css( <span class="hljs-string">"zIndex"</span>, zIndex );
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.length ) {
			<span class="hljs-keyword">var</span> elem = $( <span class="hljs-keyword">this</span>[ <span class="hljs-number">0</span> ] ), position, value;
			<span class="hljs-keyword">while</span> ( elem.length &amp;&amp; elem[ <span class="hljs-number">0</span> ] !== document ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Ignore z-index if position is set to a value where z-index is ignored by the browser
This makes behavior of this function consistent across browsers
WebKit always returns auto if the element is positioned</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				position = elem.css( <span class="hljs-string">"position"</span> );
				<span class="hljs-keyword">if</span> ( position === <span class="hljs-string">"absolute"</span> || position === <span class="hljs-string">"relative"</span> || position === <span class="hljs-string">"fixed"</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>IE returns 0 when zIndex is not specified
other browsers return a string
we ignore the case of nested elements with an explicit value of 0</p>
<div style="z-index: -10;"><div style="z-index: 0;"></div></div>

            </div>
            
            <div class="content"><div class='highlight'><pre>					value = <span class="hljs-built_in">parseInt</span>( elem.css( <span class="hljs-string">"zIndex"</span> ), <span class="hljs-number">10</span> );
					<span class="hljs-keyword">if</span> ( !<span class="hljs-built_in">isNaN</span>( value ) &amp;&amp; value !== <span class="hljs-number">0</span> ) {
						<span class="hljs-keyword">return</span> value;
					}
				}
				elem = elem.parent();
			}
		}

		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
	},

	uniqueId: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.id ) {
				<span class="hljs-keyword">this</span>.id = <span class="hljs-string">"ui-id-"</span> + (++uuid);
			}
		});
	},

	removeUniqueId: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span> ( runiqueId.test( <span class="hljs-keyword">this</span>.id ) ) {
				$( <span class="hljs-keyword">this</span> ).removeAttr( <span class="hljs-string">"id"</span> );
			}
		});
	}
});</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>selectors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">focusable</span><span class="hljs-params">( element, isTabIndexNotNaN )</span> {</span>
	<span class="hljs-keyword">var</span> map, mapName, img,
		nodeName = element.nodeName.toLowerCase();
	<span class="hljs-keyword">if</span> ( <span class="hljs-string">"area"</span> === nodeName ) {
		map = element.parentNode;
		mapName = map.name;
		<span class="hljs-keyword">if</span> ( !element.href || !mapName || map.nodeName.toLowerCase() !== <span class="hljs-string">"map"</span> ) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}
		img = $( <span class="hljs-string">"img[usemap=#"</span> + mapName + <span class="hljs-string">"]"</span> )[<span class="hljs-number">0</span>];
		<span class="hljs-keyword">return</span> !!img &amp;&amp; visible( img );
	}
	<span class="hljs-keyword">return</span> ( <span class="hljs-regexp">/input|select|textarea|button|object/</span>.test( nodeName ) ?
		!element.disabled :
		<span class="hljs-string">"a"</span> === nodeName ?
			element.href || isTabIndexNotNaN :
			isTabIndexNotNaN) &amp;&amp;</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>the element and all of its ancestors must be visible</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		visible( element );
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">visible</span><span class="hljs-params">( element )</span> {</span>
	<span class="hljs-keyword">return</span> $.expr.filters.visible( element ) &amp;&amp;
		!$( element ).parents().addBack().filter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">return</span> $.css( <span class="hljs-keyword">this</span>, <span class="hljs-string">"visibility"</span> ) === <span class="hljs-string">"hidden"</span>;
		}).length;
}

$.extend( $.expr[ <span class="hljs-string">":"</span> ], {
	data: $.expr.createPseudo ?
		$.expr.createPseudo(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( dataName )</span> {</span>
			<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( elem )</span> {</span>
				<span class="hljs-keyword">return</span> !!$.data( elem, dataName );
			};
		}) :</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>support: jQuery &lt;1.8</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( elem, i, match )</span> {</span>
			<span class="hljs-keyword">return</span> !!$.data( elem, match[ <span class="hljs-number">3</span> ] );
		},

	focusable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> {</span>
		<span class="hljs-keyword">return</span> focusable( element, !<span class="hljs-built_in">isNaN</span>( $.attr( element, <span class="hljs-string">"tabindex"</span> ) ) );
	},

	tabbable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> {</span>
		<span class="hljs-keyword">var</span> tabIndex = $.attr( element, <span class="hljs-string">"tabindex"</span> ),
			isTabIndexNaN = <span class="hljs-built_in">isNaN</span>( tabIndex );
		<span class="hljs-keyword">return</span> ( isTabIndexNaN || tabIndex &gt;= <span class="hljs-number">0</span> ) &amp;&amp; focusable( element, !isTabIndexNaN );
	}
});</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>support: jQuery &lt;1.8</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">if</span> ( !$( <span class="hljs-string">"&lt;a&gt;"</span> ).outerWidth( <span class="hljs-number">1</span> ).jquery ) {
	$.each( [ <span class="hljs-string">"Width"</span>, <span class="hljs-string">"Height"</span> ], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, name )</span> {</span>
		<span class="hljs-keyword">var</span> side = name === <span class="hljs-string">"Width"</span> ? [ <span class="hljs-string">"Left"</span>, <span class="hljs-string">"Right"</span> ] : [ <span class="hljs-string">"Top"</span>, <span class="hljs-string">"Bottom"</span> ],
			type = name.toLowerCase(),
			orig = {
				innerWidth: $.fn.innerWidth,
				innerHeight: $.fn.innerHeight,
				outerWidth: $.fn.outerWidth,
				outerHeight: $.fn.outerHeight
			};

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reduce</span><span class="hljs-params">( elem, size, border, margin )</span> {</span>
			$.each( side, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				size -= <span class="hljs-built_in">parseFloat</span>( $.css( elem, <span class="hljs-string">"padding"</span> + <span class="hljs-keyword">this</span> ) ) || <span class="hljs-number">0</span>;
				<span class="hljs-keyword">if</span> ( border ) {
					size -= <span class="hljs-built_in">parseFloat</span>( $.css( elem, <span class="hljs-string">"border"</span> + <span class="hljs-keyword">this</span> + <span class="hljs-string">"Width"</span> ) ) || <span class="hljs-number">0</span>;
				}
				<span class="hljs-keyword">if</span> ( margin ) {
					size -= <span class="hljs-built_in">parseFloat</span>( $.css( elem, <span class="hljs-string">"margin"</span> + <span class="hljs-keyword">this</span> ) ) || <span class="hljs-number">0</span>;
				}
			});
			<span class="hljs-keyword">return</span> size;
		}

		$.fn[ <span class="hljs-string">"inner"</span> + name ] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( size )</span> {</span>
			<span class="hljs-keyword">if</span> ( size === <span class="hljs-literal">undefined</span> ) {
				<span class="hljs-keyword">return</span> orig[ <span class="hljs-string">"inner"</span> + name ].call( <span class="hljs-keyword">this</span> );
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				$( <span class="hljs-keyword">this</span> ).css( type, reduce( <span class="hljs-keyword">this</span>, size ) + <span class="hljs-string">"px"</span> );
			});
		};

		$.fn[ <span class="hljs-string">"outer"</span> + name] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( size, margin )</span> {</span>
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> size !== <span class="hljs-string">"number"</span> ) {
				<span class="hljs-keyword">return</span> orig[ <span class="hljs-string">"outer"</span> + name ].call( <span class="hljs-keyword">this</span>, size );
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				$( <span class="hljs-keyword">this</span>).css( type, reduce( <span class="hljs-keyword">this</span>, size, <span class="hljs-literal">true</span>, margin ) + <span class="hljs-string">"px"</span> );
			});
		};
	});
}</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>support: jQuery &lt;1.8</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">if</span> ( !$.fn.addBack ) {
	$.fn.addBack = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( selector )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.add( selector == <span class="hljs-literal">null</span> ?
			<span class="hljs-keyword">this</span>.prevObject : <span class="hljs-keyword">this</span>.prevObject.filter( selector )
		);
	};
}</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>support: jQuery 1.6.1, 1.6.2 (<a href="http://bugs.jquery.com/ticket/9413">http://bugs.jquery.com/ticket/9413</a>)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">if</span> ( $( <span class="hljs-string">"&lt;a&gt;"</span> ).data( <span class="hljs-string">"a-b"</span>, <span class="hljs-string">"a"</span> ).removeData( <span class="hljs-string">"a-b"</span> ).data( <span class="hljs-string">"a-b"</span> ) ) {
	$.fn.removeData = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( removeData )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key )</span> {</span>
			<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">arguments</span>.length ) {
				<span class="hljs-keyword">return</span> removeData.call( <span class="hljs-keyword">this</span>, $.camelCase( key ) );
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">return</span> removeData.call( <span class="hljs-keyword">this</span> );
			}
		};
	})( $.fn.removeData );
}</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>deprecated</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>$.ui.ie = !!<span class="hljs-regexp">/msie [\w.]+/</span>.exec( navigator.userAgent.toLowerCase() );

$.support.selectstart = <span class="hljs-string">"onselectstart"</span> <span class="hljs-keyword">in</span> document.createElement( <span class="hljs-string">"div"</span> );
$.fn.extend({
	disableSelection: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.bind( ( $.support.selectstart ? <span class="hljs-string">"selectstart"</span> : <span class="hljs-string">"mousedown"</span> ) +
			<span class="hljs-string">".ui-disableSelection"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				event.preventDefault();
			});
	},

	enableSelection: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.unbind( <span class="hljs-string">".ui-disableSelection"</span> );
	}
});

$.extend( $.ui, {</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>$.ui.plugin is deprecated. Use $.widget() extensions instead.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	plugin: {
		add: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( module, option, set )</span> {</span>
			<span class="hljs-keyword">var</span> i,
				proto = $.ui[ module ].prototype;
			<span class="hljs-keyword">for</span> ( i <span class="hljs-keyword">in</span> set ) {
				proto.plugins[ i ] = proto.plugins[ i ] || [];
				proto.plugins[ i ].push( [ option, set[ i ] ] );
			}
		},
		call: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( instance, name, args )</span> {</span>
			<span class="hljs-keyword">var</span> i,
				set = instance.plugins[ name ];
			<span class="hljs-keyword">if</span> ( !set || !instance.element[ <span class="hljs-number">0</span> ].parentNode || instance.element[ <span class="hljs-number">0</span> ].parentNode.nodeType === <span class="hljs-number">11</span> ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i &lt; set.length; i++ ) {
				<span class="hljs-keyword">if</span> ( instance.options[ set[ i ][ <span class="hljs-number">0</span> ] ] ) {
					set[ i ][ <span class="hljs-number">1</span> ].apply( instance.element, args );
				}
			}
		}
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>only used by resizable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	hasScroll: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( el, a )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>If overflow is hidden, the element might have extra content, but the user wants to hide it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( $( el ).css( <span class="hljs-string">"overflow"</span> ) === <span class="hljs-string">"hidden"</span>) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		<span class="hljs-keyword">var</span> scroll = ( a &amp;&amp; a === <span class="hljs-string">"left"</span> ) ? <span class="hljs-string">"scrollLeft"</span> : <span class="hljs-string">"scrollTop"</span>,
			has = <span class="hljs-literal">false</span>;

		<span class="hljs-keyword">if</span> ( el[ scroll ] &gt; <span class="hljs-number">0</span> ) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>TODO: determine which cases actually cause this to happen
if the element doesn’t have the scroll set, see if it’s possible to
set the scroll</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		el[ scroll ] = <span class="hljs-number">1</span>;
		has = ( el[ scroll ] &gt; <span class="hljs-number">0</span> );
		el[ scroll ] = <span class="hljs-number">0</span>;
		<span class="hljs-keyword">return</span> has;
	}
});

})( jQuery );
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

<span class="hljs-keyword">var</span> uuid = <span class="hljs-number">0</span>,
	slice = <span class="hljs-built_in">Array</span>.prototype.slice,
	_cleanData = $.cleanData;
$.cleanData = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( elems )</span> {</span>
	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, elem; (elem = elems[i]) != <span class="hljs-literal">null</span>; i++ ) {
		<span class="hljs-keyword">try</span> {
			$( elem ).triggerHandler( <span class="hljs-string">"remove"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p><a href="http://bugs.jquery.com/ticket/8235">http://bugs.jquery.com/ticket/8235</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		} <span class="hljs-keyword">catch</span>( e ) {}
	}
	_cleanData( elems );
};

$.widget = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( name, base, prototype )</span> {</span>
	<span class="hljs-keyword">var</span> fullName, existingConstructor, constructor, basePrototype,</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>proxiedPrototype allows the provided prototype to remain unmodified
so that it can be used as a mixin for multiple widgets (#8876)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		proxiedPrototype = {},
		namespace = name.split( <span class="hljs-string">"."</span> )[ <span class="hljs-number">0</span> ];

	name = name.split( <span class="hljs-string">"."</span> )[ <span class="hljs-number">1</span> ];
	fullName = namespace + <span class="hljs-string">"-"</span> + name;

	<span class="hljs-keyword">if</span> ( !prototype ) {
		prototype = base;
		base = $.Widget;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>create selector for plugin</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	$.expr[ <span class="hljs-string">":"</span> ][ fullName.toLowerCase() ] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( elem )</span> {</span>
		<span class="hljs-keyword">return</span> !!$.data( elem, fullName );
	};

	$[ namespace ] = $[ namespace ] || {};
	existingConstructor = $[ namespace ][ name ];
	constructor = $[ namespace ][ name ] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options, element )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>allow instantiation without “new” keyword</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._createWidget ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> constructor( options, element );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>allow instantiation without initializing for simple inheritance
must use “new” keyword (the code above always passes args)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">arguments</span>.length ) {
			<span class="hljs-keyword">this</span>._createWidget( options, element );
		}
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>extend with the existing constructor to carry over any static properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	$.extend( constructor, existingConstructor, {
		version: prototype.version,</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>copy the object used to create the prototype in case we need to
redefine the widget later</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		_proto: $.extend( {}, prototype ),</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>track widgets that inherit from this widget in case this widget is
redefined after a widget inherits from it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		_childConstructors: []
	});

	basePrototype = <span class="hljs-keyword">new</span> base();</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>we need to make the options hash a property directly on the new instance
otherwise we’ll modify the options hash on the prototype that we’re
inheriting from</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	basePrototype.options = $.widget.extend( {}, basePrototype.options );
	$.each( prototype, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( prop, value )</span> {</span>
		<span class="hljs-keyword">if</span> ( !$.isFunction( value ) ) {
			proxiedPrototype[ prop ] = value;
			<span class="hljs-keyword">return</span>;
		}
		proxiedPrototype[ prop ] = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> _super = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">return</span> base.prototype[ prop ].apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
				},
				_superApply = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( args )</span> {</span>
					<span class="hljs-keyword">return</span> base.prototype[ prop ].apply( <span class="hljs-keyword">this</span>, args );
				};
			<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">var</span> __super = <span class="hljs-keyword">this</span>._super,
					__superApply = <span class="hljs-keyword">this</span>._superApply,
					returnValue;

				<span class="hljs-keyword">this</span>._super = _super;
				<span class="hljs-keyword">this</span>._superApply = _superApply;

				returnValue = value.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );

				<span class="hljs-keyword">this</span>._super = __super;
				<span class="hljs-keyword">this</span>._superApply = __superApply;

				<span class="hljs-keyword">return</span> returnValue;
			};
		})();
	});
	constructor.prototype = $.widget.extend( basePrototype, {</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>TODO: remove support for widgetEventPrefix
always use the name + a colon as the prefix, e.g., draggable:start
don’t prefix for widgets that aren’t DOM-based</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		widgetEventPrefix: existingConstructor ? basePrototype.widgetEventPrefix : name
	}, proxiedPrototype, {
		constructor: constructor,
		namespace: namespace,
		widgetName: name,
		widgetFullName: fullName
	});</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>If this widget is being redefined then we need to find all widgets that
are inheriting from it and redefine all of them so that they inherit from
the new version of this widget. We’re essentially trying to replace one
level in the prototype chain.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( existingConstructor ) {
		$.each( existingConstructor._childConstructors, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, child )</span> {</span>
			<span class="hljs-keyword">var</span> childPrototype = child.prototype;</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>redefine the child widget using the same prototype that was
originally used, but inherit from the new version of the base</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$.widget( childPrototype.namespace + <span class="hljs-string">"."</span> + childPrototype.widgetName, constructor, child._proto );
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>remove the list of existing child constructors from the old constructor
so the old child constructors can be garbage collected</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">delete</span> existingConstructor._childConstructors;
	} <span class="hljs-keyword">else</span> {
		base._childConstructors.push( constructor );
	}

	$.widget.bridge( name, constructor );
};

$.widget.extend = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( target )</span> {</span>
	<span class="hljs-keyword">var</span> input = slice.call( <span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span> ),
		inputIndex = <span class="hljs-number">0</span>,
		inputLength = input.length,
		key,
		value;
	<span class="hljs-keyword">for</span> ( ; inputIndex &lt; inputLength; inputIndex++ ) {
		<span class="hljs-keyword">for</span> ( key <span class="hljs-keyword">in</span> input[ inputIndex ] ) {
			value = input[ inputIndex ][ key ];
			<span class="hljs-keyword">if</span> ( input[ inputIndex ].hasOwnProperty( key ) &amp;&amp; value !== <span class="hljs-literal">undefined</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Clone objects</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( $.isPlainObject( value ) ) {
					target[ key ] = $.isPlainObject( target[ key ] ) ?
						$.widget.extend( {}, target[ key ], value ) :</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Don’t extend strings, arrays, etc. with objects</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						$.widget.extend( {}, value );</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Copy everything else by reference</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				} <span class="hljs-keyword">else</span> {
					target[ key ] = value;
				}
			}
		}
	}
	<span class="hljs-keyword">return</span> target;
};

$.widget.bridge = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( name, object )</span> {</span>
	<span class="hljs-keyword">var</span> fullName = object.prototype.widgetFullName || name;
	$.fn[ name ] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span> {</span>
		<span class="hljs-keyword">var</span> isMethodCall = <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">"string"</span>,
			args = slice.call( <span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span> ),
			returnValue = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>allow multiple hashes to be passed on init</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		options = !isMethodCall &amp;&amp; args.length ?
			$.widget.extend.apply( <span class="hljs-literal">null</span>, [ options ].concat(args) ) :
			options;

		<span class="hljs-keyword">if</span> ( isMethodCall ) {
			<span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">var</span> methodValue,
					instance = $.data( <span class="hljs-keyword">this</span>, fullName );
				<span class="hljs-keyword">if</span> ( !instance ) {
					<span class="hljs-keyword">return</span> $.error( <span class="hljs-string">"cannot call methods on "</span> + name + <span class="hljs-string">" prior to initialization; "</span> +
						<span class="hljs-string">"attempted to call method '"</span> + options + <span class="hljs-string">"'"</span> );
				}
				<span class="hljs-keyword">if</span> ( !$.isFunction( instance[options] ) || options.charAt( <span class="hljs-number">0</span> ) === <span class="hljs-string">"_"</span> ) {
					<span class="hljs-keyword">return</span> $.error( <span class="hljs-string">"no such method '"</span> + options + <span class="hljs-string">"' for "</span> + name + <span class="hljs-string">" widget instance"</span> );
				}
				methodValue = instance[ options ].apply( instance, args );
				<span class="hljs-keyword">if</span> ( methodValue !== instance &amp;&amp; methodValue !== <span class="hljs-literal">undefined</span> ) {
					returnValue = methodValue &amp;&amp; methodValue.jquery ?
						returnValue.pushStack( methodValue.get() ) :
						methodValue;
					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				}
			});
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">var</span> instance = $.data( <span class="hljs-keyword">this</span>, fullName );
				<span class="hljs-keyword">if</span> ( instance ) {
					instance.option( options || {} )._init();
				} <span class="hljs-keyword">else</span> {
					$.data( <span class="hljs-keyword">this</span>, fullName, <span class="hljs-keyword">new</span> object( options, <span class="hljs-keyword">this</span> ) );
				}
			});
		}

		<span class="hljs-keyword">return</span> returnValue;
	};
};

$.Widget = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( <span class="hljs-comment">/* options, element */</span> )</span> {</span>};
$.Widget._childConstructors = [];

$.Widget.prototype = {
	widgetName: <span class="hljs-string">"widget"</span>,
	widgetEventPrefix: <span class="hljs-string">""</span>,
	defaultElement: <span class="hljs-string">"&lt;div&gt;"</span>,
	options: {
		disabled: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		create: <span class="hljs-literal">null</span>
	},
	_createWidget: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options, element )</span> {</span>
		element = $( element || <span class="hljs-keyword">this</span>.defaultElement || <span class="hljs-keyword">this</span> )[ <span class="hljs-number">0</span> ];
		<span class="hljs-keyword">this</span>.element = $( element );
		<span class="hljs-keyword">this</span>.uuid = uuid++;
		<span class="hljs-keyword">this</span>.eventNamespace = <span class="hljs-string">"."</span> + <span class="hljs-keyword">this</span>.widgetName + <span class="hljs-keyword">this</span>.uuid;
		<span class="hljs-keyword">this</span>.options = $.widget.extend( {},
			<span class="hljs-keyword">this</span>.options,
			<span class="hljs-keyword">this</span>._getCreateOptions(),
			options );

		<span class="hljs-keyword">this</span>.bindings = $();
		<span class="hljs-keyword">this</span>.hoverable = $();
		<span class="hljs-keyword">this</span>.focusable = $();

		<span class="hljs-keyword">if</span> ( element !== <span class="hljs-keyword">this</span> ) {
			$.data( element, <span class="hljs-keyword">this</span>.widgetFullName, <span class="hljs-keyword">this</span> );
			<span class="hljs-keyword">this</span>._on( <span class="hljs-literal">true</span>, <span class="hljs-keyword">this</span>.element, {
				remove: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
					<span class="hljs-keyword">if</span> ( event.target === element ) {
						<span class="hljs-keyword">this</span>.destroy();
					}
				}
			});
			<span class="hljs-keyword">this</span>.document = $( element.style ?</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>element within the document</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				element.ownerDocument :</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>element is window or document</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				element.document || element );
			<span class="hljs-keyword">this</span>.window = $( <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].defaultView || <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].parentWindow );
		}

		<span class="hljs-keyword">this</span>._create();
		<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"create"</span>, <span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span>._getCreateEventData() );
		<span class="hljs-keyword">this</span>._init();
	},
	_getCreateOptions: $.noop,
	_getCreateEventData: $.noop,
	_create: $.noop,
	_init: $.noop,

	destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>._destroy();</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>we can probably remove the unbind calls in 2.0
all event bindings should go through this._on()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.element
			.unbind( <span class="hljs-keyword">this</span>.eventNamespace )</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>1.9 BC for #7810
TODO remove dual storage</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			.removeData( <span class="hljs-keyword">this</span>.widgetName )
			.removeData( <span class="hljs-keyword">this</span>.widgetFullName )</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>support: jquery &lt;1.6.3
<a href="http://bugs.jquery.com/ticket/9413">http://bugs.jquery.com/ticket/9413</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			.removeData( $.camelCase( <span class="hljs-keyword">this</span>.widgetFullName ) );
		<span class="hljs-keyword">this</span>.widget()
			.unbind( <span class="hljs-keyword">this</span>.eventNamespace )
			.removeAttr( <span class="hljs-string">"aria-disabled"</span> )
			.removeClass(
				<span class="hljs-keyword">this</span>.widgetFullName + <span class="hljs-string">"-disabled "</span> +
				<span class="hljs-string">"ui-state-disabled"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>clean up events and states</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.bindings.unbind( <span class="hljs-keyword">this</span>.eventNamespace );
		<span class="hljs-keyword">this</span>.hoverable.removeClass( <span class="hljs-string">"ui-state-hover"</span> );
		<span class="hljs-keyword">this</span>.focusable.removeClass( <span class="hljs-string">"ui-state-focus"</span> );
	},
	_destroy: $.noop,

	widget: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.element;
	},

	option: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
		<span class="hljs-keyword">var</span> options = key,
			parts,
			curOption,
			i;

		<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">arguments</span>.length === <span class="hljs-number">0</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>don’t return a reference to the internal hash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">return</span> $.widget.extend( {}, <span class="hljs-keyword">this</span>.options );
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> key === <span class="hljs-string">"string"</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>handle nested keys, e.g., “foo.bar” =&gt; { foo: { bar: <em>_</em> } }</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			options = {};
			parts = key.split( <span class="hljs-string">"."</span> );
			key = parts.shift();
			<span class="hljs-keyword">if</span> ( parts.length ) {
				curOption = options[ key ] = $.widget.extend( {}, <span class="hljs-keyword">this</span>.options[ key ] );
				<span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i &lt; parts.length - <span class="hljs-number">1</span>; i++ ) {
					curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
					curOption = curOption[ parts[ i ] ];
				}
				key = parts.pop();
				<span class="hljs-keyword">if</span> ( value === <span class="hljs-literal">undefined</span> ) {
					<span class="hljs-keyword">return</span> curOption[ key ] === <span class="hljs-literal">undefined</span> ? <span class="hljs-literal">null</span> : curOption[ key ];
				}
				curOption[ key ] = value;
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">if</span> ( value === <span class="hljs-literal">undefined</span> ) {
					<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options[ key ] === <span class="hljs-literal">undefined</span> ? <span class="hljs-literal">null</span> : <span class="hljs-keyword">this</span>.options[ key ];
				}
				options[ key ] = value;
			}
		}

		<span class="hljs-keyword">this</span>._setOptions( options );

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},
	_setOptions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span> {</span>
		<span class="hljs-keyword">var</span> key;

		<span class="hljs-keyword">for</span> ( key <span class="hljs-keyword">in</span> options ) {
			<span class="hljs-keyword">this</span>._setOption( key, options[ key ] );
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},
	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
		<span class="hljs-keyword">this</span>.options[ key ] = value;

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"disabled"</span> ) {
			<span class="hljs-keyword">this</span>.widget()
				.toggleClass( <span class="hljs-keyword">this</span>.widgetFullName + <span class="hljs-string">"-disabled ui-state-disabled"</span>, !!value )
				.attr( <span class="hljs-string">"aria-disabled"</span>, value );
			<span class="hljs-keyword">this</span>.hoverable.removeClass( <span class="hljs-string">"ui-state-hover"</span> );
			<span class="hljs-keyword">this</span>.focusable.removeClass( <span class="hljs-string">"ui-state-focus"</span> );
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},

	enable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._setOption( <span class="hljs-string">"disabled"</span>, <span class="hljs-literal">false</span> );
	},
	disable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._setOption( <span class="hljs-string">"disabled"</span>, <span class="hljs-literal">true</span> );
	},

	_on: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( suppressDisabledCheck, element, handlers )</span> {</span>
		<span class="hljs-keyword">var</span> delegateElement,
			instance = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>no suppressDisabledCheck flag, shuffle arguments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> suppressDisabledCheck !== <span class="hljs-string">"boolean"</span> ) {
			handlers = element;
			element = suppressDisabledCheck;
			suppressDisabledCheck = <span class="hljs-literal">false</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>no element argument, shuffle and use this.element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( !handlers ) {
			handlers = element;
			element = <span class="hljs-keyword">this</span>.element;
			delegateElement = <span class="hljs-keyword">this</span>.widget();
		} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>accept selectors, DOM elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			element = delegateElement = $( element );
			<span class="hljs-keyword">this</span>.bindings = <span class="hljs-keyword">this</span>.bindings.add( element );
		}

		$.each( handlers, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, handler )</span> {</span>
			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handlerProxy</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>allow widgets to customize the disabled handling</p>
<ul>
<li>disabled as an array instead of boolean</li>
<li>disabled class as method for disabling individual parts</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( !suppressDisabledCheck &amp;&amp;
						( instance.options.disabled === <span class="hljs-literal">true</span> ||
							$( <span class="hljs-keyword">this</span> ).hasClass( <span class="hljs-string">"ui-state-disabled"</span> ) ) ) {
					<span class="hljs-keyword">return</span>;
				}
				<span class="hljs-keyword">return</span> ( <span class="hljs-keyword">typeof</span> handler === <span class="hljs-string">"string"</span> ? instance[ handler ] : handler )
					.apply( instance, <span class="hljs-built_in">arguments</span> );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>copy the guid so direct unbinding works</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> handler !== <span class="hljs-string">"string"</span> ) {
				handlerProxy.guid = handler.guid =
					handler.guid || handlerProxy.guid || $.guid++;
			}

			<span class="hljs-keyword">var</span> match = event.match( <span class="hljs-regexp">/^(\w+)\s*(.*)$/</span> ),
				eventName = match[<span class="hljs-number">1</span>] + instance.eventNamespace,
				selector = match[<span class="hljs-number">2</span>];
			<span class="hljs-keyword">if</span> ( selector ) {
				delegateElement.delegate( selector, eventName, handlerProxy );
			} <span class="hljs-keyword">else</span> {
				element.bind( eventName, handlerProxy );
			}
		});
	},

	_off: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element, eventName )</span> {</span>
		eventName = (eventName || <span class="hljs-string">""</span>).split( <span class="hljs-string">" "</span> ).join( <span class="hljs-keyword">this</span>.eventNamespace + <span class="hljs-string">" "</span> ) + <span class="hljs-keyword">this</span>.eventNamespace;
		element.unbind( eventName ).undelegate( eventName );
	},

	_delay: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( handler, delay )</span> {</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handlerProxy</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">return</span> ( <span class="hljs-keyword">typeof</span> handler === <span class="hljs-string">"string"</span> ? instance[ handler ] : handler )
				.apply( instance, <span class="hljs-built_in">arguments</span> );
		}
		<span class="hljs-keyword">var</span> instance = <span class="hljs-keyword">this</span>;
		<span class="hljs-keyword">return</span> setTimeout( handlerProxy, delay || <span class="hljs-number">0</span> );
	},

	_hoverable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> {</span>
		<span class="hljs-keyword">this</span>.hoverable = <span class="hljs-keyword">this</span>.hoverable.add( element );
		<span class="hljs-keyword">this</span>._on( element, {
			mouseenter: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				$( event.currentTarget ).addClass( <span class="hljs-string">"ui-state-hover"</span> );
			},
			mouseleave: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				$( event.currentTarget ).removeClass( <span class="hljs-string">"ui-state-hover"</span> );
			}
		});
	},

	_focusable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> {</span>
		<span class="hljs-keyword">this</span>.focusable = <span class="hljs-keyword">this</span>.focusable.add( element );
		<span class="hljs-keyword">this</span>._on( element, {
			focusin: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				$( event.currentTarget ).addClass( <span class="hljs-string">"ui-state-focus"</span> );
			},
			focusout: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				$( event.currentTarget ).removeClass( <span class="hljs-string">"ui-state-focus"</span> );
			}
		});
	},

	_trigger: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( type, event, data )</span> {</span>
		<span class="hljs-keyword">var</span> prop, orig,
			callback = <span class="hljs-keyword">this</span>.options[ type ];

		data = data || {};
		event = $.Event( event );
		event.type = ( type === <span class="hljs-keyword">this</span>.widgetEventPrefix ?
			type :
			<span class="hljs-keyword">this</span>.widgetEventPrefix + type ).toLowerCase();</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>the original event may come from any element
so we need to reset the target on the new event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		event.target = <span class="hljs-keyword">this</span>.element[ <span class="hljs-number">0</span> ];</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>copy original event properties over to the new event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		orig = event.originalEvent;
		<span class="hljs-keyword">if</span> ( orig ) {
			<span class="hljs-keyword">for</span> ( prop <span class="hljs-keyword">in</span> orig ) {
				<span class="hljs-keyword">if</span> ( !( prop <span class="hljs-keyword">in</span> event ) ) {
					event[ prop ] = orig[ prop ];
				}
			}
		}

		<span class="hljs-keyword">this</span>.element.trigger( event, data );
		<span class="hljs-keyword">return</span> !( $.isFunction( callback ) &amp;&amp;
			callback.apply( <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>], [ event ].concat( data ) ) === <span class="hljs-literal">false</span> ||
			event.isDefaultPrevented() );
	}
};

$.each( { show: <span class="hljs-string">"fadeIn"</span>, hide: <span class="hljs-string">"fadeOut"</span> }, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( method, defaultEffect )</span> {</span>
	$.Widget.prototype[ <span class="hljs-string">"_"</span> + method ] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element, options, callback )</span> {</span>
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">"string"</span> ) {
			options = { effect: options };
		}
		<span class="hljs-keyword">var</span> hasOptions,
			effectName = !options ?
				method :
				options === <span class="hljs-literal">true</span> || <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">"number"</span> ?
					defaultEffect :
					options.effect || defaultEffect;
		options = options || {};
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">"number"</span> ) {
			options = { duration: options };
		}
		hasOptions = !$.isEmptyObject( options );
		options.complete = callback;
		<span class="hljs-keyword">if</span> ( options.delay ) {
			element.delay( options.delay );
		}
		<span class="hljs-keyword">if</span> ( hasOptions &amp;&amp; $.effects &amp;&amp; $.effects.effect[ effectName ] ) {
			element[ method ]( options );
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( effectName !== method &amp;&amp; element[ effectName ] ) {
			element[ effectName ]( options.duration, options.easing, callback );
		} <span class="hljs-keyword">else</span> {
			element.queue(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( next )</span> {</span>
				$( <span class="hljs-keyword">this</span> )[ method ]();
				<span class="hljs-keyword">if</span> ( callback ) {
					callback.call( element[ <span class="hljs-number">0</span> ] );
				}
				next();
			});
		}
	};
});

})( jQuery );
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

<span class="hljs-keyword">var</span> mouseHandled = <span class="hljs-literal">false</span>;
$( document ).mouseup( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
	mouseHandled = <span class="hljs-literal">false</span>;
});

$.widget(<span class="hljs-string">"ui.mouse"</span>, {
	version: <span class="hljs-string">"1.10.3"</span>,
	options: {
		cancel: <span class="hljs-string">"input,textarea,button,select,option"</span>,
		distance: <span class="hljs-number">1</span>,
		delay: <span class="hljs-number">0</span>
	},
	_mouseInit: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;

		<span class="hljs-keyword">this</span>.element
			.bind(<span class="hljs-string">"mousedown."</span>+<span class="hljs-keyword">this</span>.widgetName, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
				<span class="hljs-keyword">return</span> that._mouseDown(event);
			})
			.bind(<span class="hljs-string">"click."</span>+<span class="hljs-keyword">this</span>.widgetName, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
				<span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span> === $.data(event.target, that.widgetName + <span class="hljs-string">".preventClickEvent"</span>)) {
					$.removeData(event.target, that.widgetName + <span class="hljs-string">".preventClickEvent"</span>);
					event.stopImmediatePropagation();
					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				}
			});

		<span class="hljs-keyword">this</span>.started = <span class="hljs-literal">false</span>;
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>TODO: make sure destroying one instance of mouse doesn’t mess with
other instances of mouse</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_mouseDestroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.element.unbind(<span class="hljs-string">"."</span>+<span class="hljs-keyword">this</span>.widgetName);
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._mouseMoveDelegate ) {
			$(document)
				.unbind(<span class="hljs-string">"mousemove."</span>+<span class="hljs-keyword">this</span>.widgetName, <span class="hljs-keyword">this</span>._mouseMoveDelegate)
				.unbind(<span class="hljs-string">"mouseup."</span>+<span class="hljs-keyword">this</span>.widgetName, <span class="hljs-keyword">this</span>._mouseUpDelegate);
		}
	},

	_mouseDown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>don’t let more than one widget handle mouseStart</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>( mouseHandled ) { <span class="hljs-keyword">return</span>; }</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>we may have missed mouseup (out of window)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		(<span class="hljs-keyword">this</span>._mouseStarted &amp;&amp; <span class="hljs-keyword">this</span>._mouseUp(event));

		<span class="hljs-keyword">this</span>._mouseDownEvent = event;

		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			btnIsLeft = (event.which === <span class="hljs-number">1</span>),</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>event.target.nodeName works around a bug in IE 8 with
disabled inputs (#7620)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			elIsCancel = (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.options.cancel === <span class="hljs-string">"string"</span> &amp;&amp; event.target.nodeName ? $(event.target).closest(<span class="hljs-keyword">this</span>.options.cancel).length : <span class="hljs-literal">false</span>);
		<span class="hljs-keyword">if</span> (!btnIsLeft || elIsCancel || !<span class="hljs-keyword">this</span>._mouseCapture(event)) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		}

		<span class="hljs-keyword">this</span>.mouseDelayMet = !<span class="hljs-keyword">this</span>.options.delay;
		<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.mouseDelayMet) {
			<span class="hljs-keyword">this</span>._mouseDelayTimer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				that.mouseDelayMet = <span class="hljs-literal">true</span>;
			}, <span class="hljs-keyword">this</span>.options.delay);
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._mouseDistanceMet(event) &amp;&amp; <span class="hljs-keyword">this</span>._mouseDelayMet(event)) {
			<span class="hljs-keyword">this</span>._mouseStarted = (<span class="hljs-keyword">this</span>._mouseStart(event) !== <span class="hljs-literal">false</span>);
			<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._mouseStarted) {
				event.preventDefault();
				<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Click event may never have fired (Gecko &amp; Opera)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span> === $.data(event.target, <span class="hljs-keyword">this</span>.widgetName + <span class="hljs-string">".preventClickEvent"</span>)) {
			$.removeData(event.target, <span class="hljs-keyword">this</span>.widgetName + <span class="hljs-string">".preventClickEvent"</span>);
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>these delegates are required to keep context</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._mouseMoveDelegate = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
			<span class="hljs-keyword">return</span> that._mouseMove(event);
		};
		<span class="hljs-keyword">this</span>._mouseUpDelegate = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
			<span class="hljs-keyword">return</span> that._mouseUp(event);
		};
		$(document)
			.bind(<span class="hljs-string">"mousemove."</span>+<span class="hljs-keyword">this</span>.widgetName, <span class="hljs-keyword">this</span>._mouseMoveDelegate)
			.bind(<span class="hljs-string">"mouseup."</span>+<span class="hljs-keyword">this</span>.widgetName, <span class="hljs-keyword">this</span>._mouseUpDelegate);

		event.preventDefault();

		mouseHandled = <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	},

	_mouseMove: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>IE mouseup check - mouseup happened when mouse was out of window</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ($.ui.ie &amp;&amp; ( !document.documentMode || document.documentMode &lt; <span class="hljs-number">9</span> ) &amp;&amp; !event.button) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._mouseUp(event);
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._mouseStarted) {
			<span class="hljs-keyword">this</span>._mouseDrag(event);
			<span class="hljs-keyword">return</span> event.preventDefault();
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._mouseDistanceMet(event) &amp;&amp; <span class="hljs-keyword">this</span>._mouseDelayMet(event)) {
			<span class="hljs-keyword">this</span>._mouseStarted =
				(<span class="hljs-keyword">this</span>._mouseStart(<span class="hljs-keyword">this</span>._mouseDownEvent, event) !== <span class="hljs-literal">false</span>);
			(<span class="hljs-keyword">this</span>._mouseStarted ? <span class="hljs-keyword">this</span>._mouseDrag(event) : <span class="hljs-keyword">this</span>._mouseUp(event));
		}

		<span class="hljs-keyword">return</span> !<span class="hljs-keyword">this</span>._mouseStarted;
	},

	_mouseUp: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		$(document)
			.unbind(<span class="hljs-string">"mousemove."</span>+<span class="hljs-keyword">this</span>.widgetName, <span class="hljs-keyword">this</span>._mouseMoveDelegate)
			.unbind(<span class="hljs-string">"mouseup."</span>+<span class="hljs-keyword">this</span>.widgetName, <span class="hljs-keyword">this</span>._mouseUpDelegate);

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._mouseStarted) {
			<span class="hljs-keyword">this</span>._mouseStarted = <span class="hljs-literal">false</span>;

			<span class="hljs-keyword">if</span> (event.target === <span class="hljs-keyword">this</span>._mouseDownEvent.target) {
				$.data(event.target, <span class="hljs-keyword">this</span>.widgetName + <span class="hljs-string">".preventClickEvent"</span>, <span class="hljs-literal">true</span>);
			}

			<span class="hljs-keyword">this</span>._mouseStop(event);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	},

	_mouseDistanceMet: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">return</span> (<span class="hljs-built_in">Math</span>.max(
				<span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>._mouseDownEvent.pageX - event.pageX),
				<span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>._mouseDownEvent.pageY - event.pageY)
			) &gt;= <span class="hljs-keyword">this</span>.options.distance
		);
	},

	_mouseDelayMet: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-comment">/* event */</span>)</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.mouseDelayMet;
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>These are placeholder methods, to be overriden by extending plugin</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_mouseStart: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-comment">/* event */</span>)</span> {</span>},
	_mouseDrag: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-comment">/* event */</span>)</span> {</span>},
	_mouseStop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-comment">/* event */</span>)</span> {</span>},
	_mouseCapture: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-comment">/* event */</span>)</span> {</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; }
});

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.ui = $.ui || {};

<span class="hljs-keyword">var</span> cachedScrollbarWidth,
	max = <span class="hljs-built_in">Math</span>.max,
	abs = <span class="hljs-built_in">Math</span>.abs,
	round = <span class="hljs-built_in">Math</span>.round,
	rhorizontal = <span class="hljs-regexp">/left|center|right/</span>,
	rvertical = <span class="hljs-regexp">/top|center|bottom/</span>,
	roffset = <span class="hljs-regexp">/[\+\-]\d+(\.[\d]+)?%?/</span>,
	rposition = <span class="hljs-regexp">/^\w+/</span>,
	rpercent = <span class="hljs-regexp">/%$/</span>,
	_position = $.fn.position;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getOffsets</span><span class="hljs-params">( offsets, width, height )</span> {</span>
	<span class="hljs-keyword">return</span> [
		<span class="hljs-built_in">parseFloat</span>( offsets[ <span class="hljs-number">0</span> ] ) * ( rpercent.test( offsets[ <span class="hljs-number">0</span> ] ) ? width / <span class="hljs-number">100</span> : <span class="hljs-number">1</span> ),
		<span class="hljs-built_in">parseFloat</span>( offsets[ <span class="hljs-number">1</span> ] ) * ( rpercent.test( offsets[ <span class="hljs-number">1</span> ] ) ? height / <span class="hljs-number">100</span> : <span class="hljs-number">1</span> )
	];
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseCss</span><span class="hljs-params">( element, property )</span> {</span>
	<span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>( $.css( element, property ), <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDimensions</span><span class="hljs-params">( elem )</span> {</span>
	<span class="hljs-keyword">var</span> raw = elem[<span class="hljs-number">0</span>];
	<span class="hljs-keyword">if</span> ( raw.nodeType === <span class="hljs-number">9</span> ) {
		<span class="hljs-keyword">return</span> {
			width: elem.width(),
			height: elem.height(),
			offset: { top: <span class="hljs-number">0</span>, left: <span class="hljs-number">0</span> }
		};
	}
	<span class="hljs-keyword">if</span> ( $.isWindow( raw ) ) {
		<span class="hljs-keyword">return</span> {
			width: elem.width(),
			height: elem.height(),
			offset: { top: elem.scrollTop(), left: elem.scrollLeft() }
		};
	}
	<span class="hljs-keyword">if</span> ( raw.preventDefault ) {
		<span class="hljs-keyword">return</span> {
			width: <span class="hljs-number">0</span>,
			height: <span class="hljs-number">0</span>,
			offset: { top: raw.pageY, left: raw.pageX }
		};
	}
	<span class="hljs-keyword">return</span> {
		width: elem.outerWidth(),
		height: elem.outerHeight(),
		offset: elem.offset()
	};
}

$.position = {
	scrollbarWidth: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">if</span> ( cachedScrollbarWidth !== <span class="hljs-literal">undefined</span> ) {
			<span class="hljs-keyword">return</span> cachedScrollbarWidth;
		}
		<span class="hljs-keyword">var</span> w1, w2,
			div = $( <span class="hljs-string">"&lt;div style='display:block;width:50px;height:50px;overflow:hidden;'&gt;&lt;div style='height:100px;width:auto;'&gt;&lt;/div&gt;&lt;/div&gt;"</span> ),
			innerDiv = div.children()[<span class="hljs-number">0</span>];

		$( <span class="hljs-string">"body"</span> ).append( div );
		w1 = innerDiv.offsetWidth;
		div.css( <span class="hljs-string">"overflow"</span>, <span class="hljs-string">"scroll"</span> );

		w2 = innerDiv.offsetWidth;

		<span class="hljs-keyword">if</span> ( w1 === w2 ) {
			w2 = div[<span class="hljs-number">0</span>].clientWidth;
		}

		div.remove();

		<span class="hljs-keyword">return</span> (cachedScrollbarWidth = w1 - w2);
	},
	getScrollInfo: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( within )</span> {</span>
		<span class="hljs-keyword">var</span> overflowX = within.isWindow ? <span class="hljs-string">""</span> : within.element.css( <span class="hljs-string">"overflow-x"</span> ),
			overflowY = within.isWindow ? <span class="hljs-string">""</span> : within.element.css( <span class="hljs-string">"overflow-y"</span> ),
			hasOverflowX = overflowX === <span class="hljs-string">"scroll"</span> ||
				( overflowX === <span class="hljs-string">"auto"</span> &amp;&amp; within.width &lt; within.element[<span class="hljs-number">0</span>].scrollWidth ),
			hasOverflowY = overflowY === <span class="hljs-string">"scroll"</span> ||
				( overflowY === <span class="hljs-string">"auto"</span> &amp;&amp; within.height &lt; within.element[<span class="hljs-number">0</span>].scrollHeight );
		<span class="hljs-keyword">return</span> {
			width: hasOverflowY ? $.position.scrollbarWidth() : <span class="hljs-number">0</span>,
			height: hasOverflowX ? $.position.scrollbarWidth() : <span class="hljs-number">0</span>
		};
	},
	getWithinInfo: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> {</span>
		<span class="hljs-keyword">var</span> withinElement = $( element || window ),
			isWindow = $.isWindow( withinElement[<span class="hljs-number">0</span>] );
		<span class="hljs-keyword">return</span> {
			element: withinElement,
			isWindow: isWindow,
			offset: withinElement.offset() || { left: <span class="hljs-number">0</span>, top: <span class="hljs-number">0</span> },
			scrollLeft: withinElement.scrollLeft(),
			scrollTop: withinElement.scrollTop(),
			width: isWindow ? withinElement.width() : withinElement.outerWidth(),
			height: isWindow ? withinElement.height() : withinElement.outerHeight()
		};
	}
};

$.fn.position = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span> {</span>
	<span class="hljs-keyword">if</span> ( !options || !options.of ) {
		<span class="hljs-keyword">return</span> _position.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>make a copy, we don’t want to modify arguments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	options = $.extend( {}, options );

	<span class="hljs-keyword">var</span> atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,
		target = $( options.of ),
		within = $.position.getWithinInfo( options.within ),
		scrollInfo = $.position.getScrollInfo( within ),
		collision = ( options.collision || <span class="hljs-string">"flip"</span> ).split( <span class="hljs-string">" "</span> ),
		offsets = {};

	dimensions = getDimensions( target );
	<span class="hljs-keyword">if</span> ( target[<span class="hljs-number">0</span>].preventDefault ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>force left top to allow flipping</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		options.at = <span class="hljs-string">"left top"</span>;
	}
	targetWidth = dimensions.width;
	targetHeight = dimensions.height;
	targetOffset = dimensions.offset;</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>clone to reuse original targetOffset later</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	basePosition = $.extend( {}, targetOffset );</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>force my and at to have valid horizontal and vertical positions
if a value is missing or invalid, it will be converted to center</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	$.each( [ <span class="hljs-string">"my"</span>, <span class="hljs-string">"at"</span> ], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> pos = ( options[ <span class="hljs-keyword">this</span> ] || <span class="hljs-string">""</span> ).split( <span class="hljs-string">" "</span> ),
			horizontalOffset,
			verticalOffset;

		<span class="hljs-keyword">if</span> ( pos.length === <span class="hljs-number">1</span>) {
			pos = rhorizontal.test( pos[ <span class="hljs-number">0</span> ] ) ?
				pos.concat( [ <span class="hljs-string">"center"</span> ] ) :
				rvertical.test( pos[ <span class="hljs-number">0</span> ] ) ?
					[ <span class="hljs-string">"center"</span> ].concat( pos ) :
					[ <span class="hljs-string">"center"</span>, <span class="hljs-string">"center"</span> ];
		}
		pos[ <span class="hljs-number">0</span> ] = rhorizontal.test( pos[ <span class="hljs-number">0</span> ] ) ? pos[ <span class="hljs-number">0</span> ] : <span class="hljs-string">"center"</span>;
		pos[ <span class="hljs-number">1</span> ] = rvertical.test( pos[ <span class="hljs-number">1</span> ] ) ? pos[ <span class="hljs-number">1</span> ] : <span class="hljs-string">"center"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>calculate offsets</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		horizontalOffset = roffset.exec( pos[ <span class="hljs-number">0</span> ] );
		verticalOffset = roffset.exec( pos[ <span class="hljs-number">1</span> ] );
		offsets[ <span class="hljs-keyword">this</span> ] = [
			horizontalOffset ? horizontalOffset[ <span class="hljs-number">0</span> ] : <span class="hljs-number">0</span>,
			verticalOffset ? verticalOffset[ <span class="hljs-number">0</span> ] : <span class="hljs-number">0</span>
		];</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>reduce to just the positions without the offsets</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		options[ <span class="hljs-keyword">this</span> ] = [
			rposition.exec( pos[ <span class="hljs-number">0</span> ] )[ <span class="hljs-number">0</span> ],
			rposition.exec( pos[ <span class="hljs-number">1</span> ] )[ <span class="hljs-number">0</span> ]
		];
	});</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>normalize collision option</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( collision.length === <span class="hljs-number">1</span> ) {
		collision[ <span class="hljs-number">1</span> ] = collision[ <span class="hljs-number">0</span> ];
	}

	<span class="hljs-keyword">if</span> ( options.at[ <span class="hljs-number">0</span> ] === <span class="hljs-string">"right"</span> ) {
		basePosition.left += targetWidth;
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( options.at[ <span class="hljs-number">0</span> ] === <span class="hljs-string">"center"</span> ) {
		basePosition.left += targetWidth / <span class="hljs-number">2</span>;
	}

	<span class="hljs-keyword">if</span> ( options.at[ <span class="hljs-number">1</span> ] === <span class="hljs-string">"bottom"</span> ) {
		basePosition.top += targetHeight;
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( options.at[ <span class="hljs-number">1</span> ] === <span class="hljs-string">"center"</span> ) {
		basePosition.top += targetHeight / <span class="hljs-number">2</span>;
	}

	atOffset = getOffsets( offsets.at, targetWidth, targetHeight );
	basePosition.left += atOffset[ <span class="hljs-number">0</span> ];
	basePosition.top += atOffset[ <span class="hljs-number">1</span> ];

	<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> collisionPosition, using,
			elem = $( <span class="hljs-keyword">this</span> ),
			elemWidth = elem.outerWidth(),
			elemHeight = elem.outerHeight(),
			marginLeft = parseCss( <span class="hljs-keyword">this</span>, <span class="hljs-string">"marginLeft"</span> ),
			marginTop = parseCss( <span class="hljs-keyword">this</span>, <span class="hljs-string">"marginTop"</span> ),
			collisionWidth = elemWidth + marginLeft + parseCss( <span class="hljs-keyword">this</span>, <span class="hljs-string">"marginRight"</span> ) + scrollInfo.width,
			collisionHeight = elemHeight + marginTop + parseCss( <span class="hljs-keyword">this</span>, <span class="hljs-string">"marginBottom"</span> ) + scrollInfo.height,
			position = $.extend( {}, basePosition ),
			myOffset = getOffsets( offsets.my, elem.outerWidth(), elem.outerHeight() );

		<span class="hljs-keyword">if</span> ( options.my[ <span class="hljs-number">0</span> ] === <span class="hljs-string">"right"</span> ) {
			position.left -= elemWidth;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( options.my[ <span class="hljs-number">0</span> ] === <span class="hljs-string">"center"</span> ) {
			position.left -= elemWidth / <span class="hljs-number">2</span>;
		}

		<span class="hljs-keyword">if</span> ( options.my[ <span class="hljs-number">1</span> ] === <span class="hljs-string">"bottom"</span> ) {
			position.top -= elemHeight;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( options.my[ <span class="hljs-number">1</span> ] === <span class="hljs-string">"center"</span> ) {
			position.top -= elemHeight / <span class="hljs-number">2</span>;
		}

		position.left += myOffset[ <span class="hljs-number">0</span> ];
		position.top += myOffset[ <span class="hljs-number">1</span> ];</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>if the browser doesn’t support fractions, then round for consistent results</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( !$.support.offsetFractions ) {
			position.left = round( position.left );
			position.top = round( position.top );
		}

		collisionPosition = {
			marginLeft: marginLeft,
			marginTop: marginTop
		};

		$.each( [ <span class="hljs-string">"left"</span>, <span class="hljs-string">"top"</span> ], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, dir )</span> {</span>
			<span class="hljs-keyword">if</span> ( $.ui.position[ collision[ i ] ] ) {
				$.ui.position[ collision[ i ] ][ dir ]( position, {
					targetWidth: targetWidth,
					targetHeight: targetHeight,
					elemWidth: elemWidth,
					elemHeight: elemHeight,
					collisionPosition: collisionPosition,
					collisionWidth: collisionWidth,
					collisionHeight: collisionHeight,
					offset: [ atOffset[ <span class="hljs-number">0</span> ] + myOffset[ <span class="hljs-number">0</span> ], atOffset [ <span class="hljs-number">1</span> ] + myOffset[ <span class="hljs-number">1</span> ] ],
					my: options.my,
					at: options.at,
					within: within,
					elem : elem
				});
			}
		});

		<span class="hljs-keyword">if</span> ( options.using ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>adds feedback as second argument to using callback, if present</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			using = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( props )</span> {</span>
				<span class="hljs-keyword">var</span> left = targetOffset.left - position.left,
					right = left + targetWidth - elemWidth,
					top = targetOffset.top - position.top,
					bottom = top + targetHeight - elemHeight,
					feedback = {
						target: {
							element: target,
							left: targetOffset.left,
							top: targetOffset.top,
							width: targetWidth,
							height: targetHeight
						},
						element: {
							element: elem,
							left: position.left,
							top: position.top,
							width: elemWidth,
							height: elemHeight
						},
						horizontal: right &lt; <span class="hljs-number">0</span> ? <span class="hljs-string">"left"</span> : left &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">"right"</span> : <span class="hljs-string">"center"</span>,
						vertical: bottom &lt; <span class="hljs-number">0</span> ? <span class="hljs-string">"top"</span> : top &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">"bottom"</span> : <span class="hljs-string">"middle"</span>
					};
				<span class="hljs-keyword">if</span> ( targetWidth &lt; elemWidth &amp;&amp; abs( left + right ) &lt; targetWidth ) {
					feedback.horizontal = <span class="hljs-string">"center"</span>;
				}
				<span class="hljs-keyword">if</span> ( targetHeight &lt; elemHeight &amp;&amp; abs( top + bottom ) &lt; targetHeight ) {
					feedback.vertical = <span class="hljs-string">"middle"</span>;
				}
				<span class="hljs-keyword">if</span> ( max( abs( left ), abs( right ) ) &gt; max( abs( top ), abs( bottom ) ) ) {
					feedback.important = <span class="hljs-string">"horizontal"</span>;
				} <span class="hljs-keyword">else</span> {
					feedback.important = <span class="hljs-string">"vertical"</span>;
				}
				options.using.call( <span class="hljs-keyword">this</span>, props, feedback );
			};
		}

		elem.offset( $.extend( position, { using: using } ) );
	});
};

$.ui.position = {
	fit: {
		left: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( position, data )</span> {</span>
			<span class="hljs-keyword">var</span> within = data.within,
				withinOffset = within.isWindow ? within.scrollLeft : within.offset.left,
				outerWidth = within.width,
				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
				overLeft = withinOffset - collisionPosLeft,
				overRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,
				newOverRight;</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>element is wider than within</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( data.collisionWidth &gt; outerWidth ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>element is initially over the left side of within</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( overLeft &gt; <span class="hljs-number">0</span> &amp;&amp; overRight &lt;= <span class="hljs-number">0</span> ) {
					newOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;
					position.left += overLeft - newOverRight;</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>element is initially over right side of within</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( overRight &gt; <span class="hljs-number">0</span> &amp;&amp; overLeft &lt;= <span class="hljs-number">0</span> ) {
					position.left = withinOffset;</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>element is initially over both left and right sides of within</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">if</span> ( overLeft &gt; overRight ) {
						position.left = withinOffset + outerWidth - data.collisionWidth;
					} <span class="hljs-keyword">else</span> {
						position.left = withinOffset;
					}
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>too far left -&gt; align with left edge</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( overLeft &gt; <span class="hljs-number">0</span> ) {
				position.left += overLeft;</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>too far right -&gt; align with right edge</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( overRight &gt; <span class="hljs-number">0</span> ) {
				position.left -= overRight;</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>adjust based on position and margin</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			} <span class="hljs-keyword">else</span> {
				position.left = max( position.left - collisionPosLeft, position.left );
			}
		},
		top: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( position, data )</span> {</span>
			<span class="hljs-keyword">var</span> within = data.within,
				withinOffset = within.isWindow ? within.scrollTop : within.offset.top,
				outerHeight = data.within.height,
				collisionPosTop = position.top - data.collisionPosition.marginTop,
				overTop = withinOffset - collisionPosTop,
				overBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,
				newOverBottom;</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>element is taller than within</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( data.collisionHeight &gt; outerHeight ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>element is initially over the top of within</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( overTop &gt; <span class="hljs-number">0</span> &amp;&amp; overBottom &lt;= <span class="hljs-number">0</span> ) {
					newOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;
					position.top += overTop - newOverBottom;</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>element is initially over bottom of within</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( overBottom &gt; <span class="hljs-number">0</span> &amp;&amp; overTop &lt;= <span class="hljs-number">0</span> ) {
					position.top = withinOffset;</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>element is initially over both top and bottom of within</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">if</span> ( overTop &gt; overBottom ) {
						position.top = withinOffset + outerHeight - data.collisionHeight;
					} <span class="hljs-keyword">else</span> {
						position.top = withinOffset;
					}
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>too far up -&gt; align with top</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( overTop &gt; <span class="hljs-number">0</span> ) {
				position.top += overTop;</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>too far down -&gt; align with bottom edge</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( overBottom &gt; <span class="hljs-number">0</span> ) {
				position.top -= overBottom;</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>adjust based on position and margin</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			} <span class="hljs-keyword">else</span> {
				position.top = max( position.top - collisionPosTop, position.top );
			}
		}
	},
	flip: {
		left: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( position, data )</span> {</span>
			<span class="hljs-keyword">var</span> within = data.within,
				withinOffset = within.offset.left + within.scrollLeft,
				outerWidth = within.width,
				offsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,
				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
				overLeft = collisionPosLeft - offsetLeft,
				overRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,
				myOffset = data.my[ <span class="hljs-number">0</span> ] === <span class="hljs-string">"left"</span> ?
					-data.elemWidth :
					data.my[ <span class="hljs-number">0</span> ] === <span class="hljs-string">"right"</span> ?
						data.elemWidth :
						<span class="hljs-number">0</span>,
				atOffset = data.at[ <span class="hljs-number">0</span> ] === <span class="hljs-string">"left"</span> ?
					data.targetWidth :
					data.at[ <span class="hljs-number">0</span> ] === <span class="hljs-string">"right"</span> ?
						-data.targetWidth :
						<span class="hljs-number">0</span>,
				offset = -<span class="hljs-number">2</span> * data.offset[ <span class="hljs-number">0</span> ],
				newOverRight,
				newOverLeft;

			<span class="hljs-keyword">if</span> ( overLeft &lt; <span class="hljs-number">0</span> ) {
				newOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;
				<span class="hljs-keyword">if</span> ( newOverRight &lt; <span class="hljs-number">0</span> || newOverRight &lt; abs( overLeft ) ) {
					position.left += myOffset + atOffset + offset;
				}
			}
			<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( overRight &gt; <span class="hljs-number">0</span> ) {
				newOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;
				<span class="hljs-keyword">if</span> ( newOverLeft &gt; <span class="hljs-number">0</span> || abs( newOverLeft ) &lt; overRight ) {
					position.left += myOffset + atOffset + offset;
				}
			}
		},
		top: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( position, data )</span> {</span>
			<span class="hljs-keyword">var</span> within = data.within,
				withinOffset = within.offset.top + within.scrollTop,
				outerHeight = within.height,
				offsetTop = within.isWindow ? within.scrollTop : within.offset.top,
				collisionPosTop = position.top - data.collisionPosition.marginTop,
				overTop = collisionPosTop - offsetTop,
				overBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,
				top = data.my[ <span class="hljs-number">1</span> ] === <span class="hljs-string">"top"</span>,
				myOffset = top ?
					-data.elemHeight :
					data.my[ <span class="hljs-number">1</span> ] === <span class="hljs-string">"bottom"</span> ?
						data.elemHeight :
						<span class="hljs-number">0</span>,
				atOffset = data.at[ <span class="hljs-number">1</span> ] === <span class="hljs-string">"top"</span> ?
					data.targetHeight :
					data.at[ <span class="hljs-number">1</span> ] === <span class="hljs-string">"bottom"</span> ?
						-data.targetHeight :
						<span class="hljs-number">0</span>,
				offset = -<span class="hljs-number">2</span> * data.offset[ <span class="hljs-number">1</span> ],
				newOverTop,
				newOverBottom;
			<span class="hljs-keyword">if</span> ( overTop &lt; <span class="hljs-number">0</span> ) {
				newOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;
				<span class="hljs-keyword">if</span> ( ( position.top + myOffset + atOffset + offset) &gt; overTop &amp;&amp; ( newOverBottom &lt; <span class="hljs-number">0</span> || newOverBottom &lt; abs( overTop ) ) ) {
					position.top += myOffset + atOffset + offset;
				}
			}
			<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( overBottom &gt; <span class="hljs-number">0</span> ) {
				newOverTop = position.top -  data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;
				<span class="hljs-keyword">if</span> ( ( position.top + myOffset + atOffset + offset) &gt; overBottom &amp;&amp; ( newOverTop &gt; <span class="hljs-number">0</span> || abs( newOverTop ) &lt; overBottom ) ) {
					position.top += myOffset + atOffset + offset;
				}
			}
		}
	},
	flipfit: {
		left: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			$.ui.position.flip.left.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
			$.ui.position.fit.left.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
		},
		top: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			$.ui.position.flip.top.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
			$.ui.position.fit.top.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
		}
	}
};</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>fraction support test</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
	<span class="hljs-keyword">var</span> testElement, testElementParent, testElementStyle, offsetLeft, i,
		body = document.getElementsByTagName( <span class="hljs-string">"body"</span> )[ <span class="hljs-number">0</span> ],
		div = document.createElement( <span class="hljs-string">"div"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>Create a “fake body” for testing based on method used in jQuery.support</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	testElement = document.createElement( body ? <span class="hljs-string">"div"</span> : <span class="hljs-string">"body"</span> );
	testElementStyle = {
		visibility: <span class="hljs-string">"hidden"</span>,
		width: <span class="hljs-number">0</span>,
		height: <span class="hljs-number">0</span>,
		border: <span class="hljs-number">0</span>,
		margin: <span class="hljs-number">0</span>,
		background: <span class="hljs-string">"none"</span>
	};
	<span class="hljs-keyword">if</span> ( body ) {
		$.extend( testElementStyle, {
			position: <span class="hljs-string">"absolute"</span>,
			left: <span class="hljs-string">"-1000px"</span>,
			top: <span class="hljs-string">"-1000px"</span>
		});
	}
	<span class="hljs-keyword">for</span> ( i <span class="hljs-keyword">in</span> testElementStyle ) {
		testElement.style[ i ] = testElementStyle[ i ];
	}
	testElement.appendChild( div );
	testElementParent = body || document.documentElement;
	testElementParent.insertBefore( testElement, testElementParent.firstChild );

	div.style.cssText = <span class="hljs-string">"position: absolute; left: 10.7432222px;"</span>;

	offsetLeft = $( div ).offset().left;
	$.support.offsetFractions = offsetLeft &gt; <span class="hljs-number">10</span> &amp;&amp; offsetLeft &lt; <span class="hljs-number">11</span>;

	testElement.innerHTML = <span class="hljs-string">""</span>;
	testElementParent.removeChild( testElement );
})();

}( jQuery ) );
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.widget(<span class="hljs-string">"ui.draggable"</span>, $.ui.mouse, {
	version: <span class="hljs-string">"1.10.3"</span>,
	widgetEventPrefix: <span class="hljs-string">"drag"</span>,
	options: {
		addClasses: <span class="hljs-literal">true</span>,
		appendTo: <span class="hljs-string">"parent"</span>,
		axis: <span class="hljs-literal">false</span>,
		connectToSortable: <span class="hljs-literal">false</span>,
		containment: <span class="hljs-literal">false</span>,
		cursor: <span class="hljs-string">"auto"</span>,
		cursorAt: <span class="hljs-literal">false</span>,
		grid: <span class="hljs-literal">false</span>,
		handle: <span class="hljs-literal">false</span>,
		helper: <span class="hljs-string">"original"</span>,
		iframeFix: <span class="hljs-literal">false</span>,
		opacity: <span class="hljs-literal">false</span>,
		refreshPositions: <span class="hljs-literal">false</span>,
		revert: <span class="hljs-literal">false</span>,
		revertDuration: <span class="hljs-number">500</span>,
		scope: <span class="hljs-string">"default"</span>,
		scroll: <span class="hljs-literal">true</span>,
		scrollSensitivity: <span class="hljs-number">20</span>,
		scrollSpeed: <span class="hljs-number">20</span>,
		snap: <span class="hljs-literal">false</span>,
		snapMode: <span class="hljs-string">"both"</span>,
		snapTolerance: <span class="hljs-number">20</span>,
		stack: <span class="hljs-literal">false</span>,
		zIndex: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		drag: <span class="hljs-literal">null</span>,
		start: <span class="hljs-literal">null</span>,
		stop: <span class="hljs-literal">null</span>
	},
	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.helper === <span class="hljs-string">"original"</span> &amp;&amp; !(<span class="hljs-regexp">/^(?:r|a|f)/</span>).test(<span class="hljs-keyword">this</span>.element.css(<span class="hljs-string">"position"</span>))) {
			<span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>].style.position = <span class="hljs-string">"relative"</span>;
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.addClasses){
			<span class="hljs-keyword">this</span>.element.addClass(<span class="hljs-string">"ui-draggable"</span>);
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.disabled){
			<span class="hljs-keyword">this</span>.element.addClass(<span class="hljs-string">"ui-draggable-disabled"</span>);
		}

		<span class="hljs-keyword">this</span>._mouseInit();

	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.element.removeClass( <span class="hljs-string">"ui-draggable ui-draggable-dragging ui-draggable-disabled"</span> );
		<span class="hljs-keyword">this</span>._mouseDestroy();
	},

	_mouseCapture: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>

		<span class="hljs-keyword">var</span> o = <span class="hljs-keyword">this</span>.options;</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>among others, prevent a drag on a resizable-handle</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.helper || o.disabled || $(event.target).closest(<span class="hljs-string">".ui-resizable-handle"</span>).length &gt; <span class="hljs-number">0</span>) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>Quit if we’re not on a valid handle</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.handle = <span class="hljs-keyword">this</span>._getHandle(event);
		<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.handle) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		$(o.iframeFix === <span class="hljs-literal">true</span> ? <span class="hljs-string">"iframe"</span> : o.iframeFix).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			$(<span class="hljs-string">"&lt;div class='ui-draggable-iframeFix' style='background: #fff;'&gt;&lt;/div&gt;"</span>)
			.css({
				width: <span class="hljs-keyword">this</span>.offsetWidth+<span class="hljs-string">"px"</span>, height: <span class="hljs-keyword">this</span>.offsetHeight+<span class="hljs-string">"px"</span>,
				position: <span class="hljs-string">"absolute"</span>, opacity: <span class="hljs-string">"0.001"</span>, zIndex: <span class="hljs-number">1000</span>
			})
			.css($(<span class="hljs-keyword">this</span>).offset())
			.appendTo(<span class="hljs-string">"body"</span>);
		});

		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

	},

	_mouseStart: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>

		<span class="hljs-keyword">var</span> o = <span class="hljs-keyword">this</span>.options;</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>Create and append the visible helper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.helper = <span class="hljs-keyword">this</span>._createHelper(event);

		<span class="hljs-keyword">this</span>.helper.addClass(<span class="hljs-string">"ui-draggable-dragging"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>Cache the helper size</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._cacheHelperProportions();</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>If ddmanager is used for droppables, set the global draggable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>($.ui.ddmanager) {
			$.ui.ddmanager.current = <span class="hljs-keyword">this</span>;
		}

		<span class="hljs-comment">/*
		 * - Position generation -
		 * This block generates everything position related - it's the core of draggables.
		 */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>Cache the margins of the original element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._cacheMargins();</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>Store the helper’s css position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.cssPosition = <span class="hljs-keyword">this</span>.helper.css( <span class="hljs-string">"position"</span> );
		<span class="hljs-keyword">this</span>.scrollParent = <span class="hljs-keyword">this</span>.helper.scrollParent();
		<span class="hljs-keyword">this</span>.offsetParent = <span class="hljs-keyword">this</span>.helper.offsetParent();
		<span class="hljs-keyword">this</span>.offsetParentCssPosition = <span class="hljs-keyword">this</span>.offsetParent.css( <span class="hljs-string">"position"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>The element’s absolute position on the page minus margins</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.offset = <span class="hljs-keyword">this</span>.positionAbs = <span class="hljs-keyword">this</span>.element.offset();
		<span class="hljs-keyword">this</span>.offset = {
			top: <span class="hljs-keyword">this</span>.offset.top - <span class="hljs-keyword">this</span>.margins.top,
			left: <span class="hljs-keyword">this</span>.offset.left - <span class="hljs-keyword">this</span>.margins.left
		};</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>Reset scroll cache</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.offset.scroll = <span class="hljs-literal">false</span>;

		$.extend(<span class="hljs-keyword">this</span>.offset, {
			click: { <span class="hljs-comment">//Where the click happened, relative to the element</span>
				left: event.pageX - <span class="hljs-keyword">this</span>.offset.left,
				top: event.pageY - <span class="hljs-keyword">this</span>.offset.top
			},
			parent: <span class="hljs-keyword">this</span>._getParentOffset(),
			relative: <span class="hljs-keyword">this</span>._getRelativeOffset() <span class="hljs-comment">//This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper</span>
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>Generate the original position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.originalPosition = <span class="hljs-keyword">this</span>.position = <span class="hljs-keyword">this</span>._generatePosition(event);
		<span class="hljs-keyword">this</span>.originalPageX = event.pageX;
		<span class="hljs-keyword">this</span>.originalPageY = event.pageY;</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>Adjust the mouse offset relative to the helper if “cursorAt” is supplied</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		(o.cursorAt &amp;&amp; <span class="hljs-keyword">this</span>._adjustOffsetFromHelper(o.cursorAt));</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>Set a containment if given in the options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._setContainment();</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>Trigger event + callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"start"</span>, event) === <span class="hljs-literal">false</span>) {
			<span class="hljs-keyword">this</span>._clear();
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>Recache the helper size</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._cacheHelperProportions();</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>Prepare the droppable offsets</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ($.ui.ddmanager &amp;&amp; !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(<span class="hljs-keyword">this</span>, event);
		}


		<span class="hljs-keyword">this</span>._mouseDrag(event, <span class="hljs-literal">true</span>); <span class="hljs-comment">//Execute the drag once - this causes the helper not to be visible before getting its correct position</span></pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>If the ddmanager is used for droppables, inform the manager that dragging has started (see #5003)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( $.ui.ddmanager ) {
			$.ui.ddmanager.dragStart(<span class="hljs-keyword">this</span>, event);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	},

	_mouseDrag: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, noPropagation)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>reset any necessary cached properties (see #5009)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.offsetParentCssPosition === <span class="hljs-string">"fixed"</span> ) {
			<span class="hljs-keyword">this</span>.offset.parent = <span class="hljs-keyword">this</span>._getParentOffset();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>Compute the helpers position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.position = <span class="hljs-keyword">this</span>._generatePosition(event);
		<span class="hljs-keyword">this</span>.positionAbs = <span class="hljs-keyword">this</span>._convertPositionTo(<span class="hljs-string">"absolute"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>Call plugins and callbacks and use the resulting position if something is returned</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (!noPropagation) {
			<span class="hljs-keyword">var</span> ui = <span class="hljs-keyword">this</span>._uiHash();
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"drag"</span>, event, ui) === <span class="hljs-literal">false</span>) {
				<span class="hljs-keyword">this</span>._mouseUp({});
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}
			<span class="hljs-keyword">this</span>.position = ui.position;
		}

		<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.options.axis || <span class="hljs-keyword">this</span>.options.axis !== <span class="hljs-string">"y"</span>) {
			<span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>].style.left = <span class="hljs-keyword">this</span>.position.left+<span class="hljs-string">"px"</span>;
		}
		<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.options.axis || <span class="hljs-keyword">this</span>.options.axis !== <span class="hljs-string">"x"</span>) {
			<span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>].style.top = <span class="hljs-keyword">this</span>.position.top+<span class="hljs-string">"px"</span>;
		}
		<span class="hljs-keyword">if</span>($.ui.ddmanager) {
			$.ui.ddmanager.drag(<span class="hljs-keyword">this</span>, event);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	},

	_mouseStop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>If we are using droppables, inform the manager about the drop</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			dropped = <span class="hljs-literal">false</span>;
		<span class="hljs-keyword">if</span> ($.ui.ddmanager &amp;&amp; !<span class="hljs-keyword">this</span>.options.dropBehaviour) {
			dropped = $.ui.ddmanager.drop(<span class="hljs-keyword">this</span>, event);
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>if a drop comes from outside (a sortable)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.dropped) {
			dropped = <span class="hljs-keyword">this</span>.dropped;
			<span class="hljs-keyword">this</span>.dropped = <span class="hljs-literal">false</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>if the original element is no longer in the DOM don’t bother to continue (see #8269)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.helper === <span class="hljs-string">"original"</span> &amp;&amp; !$.contains( <span class="hljs-keyword">this</span>.element[ <span class="hljs-number">0</span> ].ownerDocument, <span class="hljs-keyword">this</span>.element[ <span class="hljs-number">0</span> ] ) ) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		<span class="hljs-keyword">if</span>((<span class="hljs-keyword">this</span>.options.revert === <span class="hljs-string">"invalid"</span> &amp;&amp; !dropped) || (<span class="hljs-keyword">this</span>.options.revert === <span class="hljs-string">"valid"</span> &amp;&amp; dropped) || <span class="hljs-keyword">this</span>.options.revert === <span class="hljs-literal">true</span> || ($.isFunction(<span class="hljs-keyword">this</span>.options.revert) &amp;&amp; <span class="hljs-keyword">this</span>.options.revert.call(<span class="hljs-keyword">this</span>.element, dropped))) {
			$(<span class="hljs-keyword">this</span>.helper).animate(<span class="hljs-keyword">this</span>.originalPosition, <span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.options.revertDuration, <span class="hljs-number">10</span>), <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span>(that._trigger(<span class="hljs-string">"stop"</span>, event) !== <span class="hljs-literal">false</span>) {
					that._clear();
				}
			});
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"stop"</span>, event) !== <span class="hljs-literal">false</span>) {
				<span class="hljs-keyword">this</span>._clear();
			}
		}

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	},

	_mouseUp: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>Remove frame helpers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$(<span class="hljs-string">"div.ui-draggable-iframeFix"</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">this</span>.parentNode.removeChild(<span class="hljs-keyword">this</span>);
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>If the ddmanager is used for droppables, inform the manager that dragging has stopped (see #5003)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>( $.ui.ddmanager ) {
			$.ui.ddmanager.dragStop(<span class="hljs-keyword">this</span>, event);
		}

		<span class="hljs-keyword">return</span> $.ui.mouse.prototype._mouseUp.call(<span class="hljs-keyword">this</span>, event);
	},

	cancel: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.helper.is(<span class="hljs-string">".ui-draggable-dragging"</span>)) {
			<span class="hljs-keyword">this</span>._mouseUp({});
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>._clear();
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

	},

	_getHandle: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.handle ?
			!!$( event.target ).closest( <span class="hljs-keyword">this</span>.element.find( <span class="hljs-keyword">this</span>.options.handle ) ).length :
			<span class="hljs-literal">true</span>;
	},

	_createHelper: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>

		<span class="hljs-keyword">var</span> o = <span class="hljs-keyword">this</span>.options,
			helper = $.isFunction(o.helper) ? $(o.helper.apply(<span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>], [event])) : (o.helper === <span class="hljs-string">"clone"</span> ? <span class="hljs-keyword">this</span>.element.clone().removeAttr(<span class="hljs-string">"id"</span>) : <span class="hljs-keyword">this</span>.element);

		<span class="hljs-keyword">if</span>(!helper.parents(<span class="hljs-string">"body"</span>).length) {
			helper.appendTo((o.appendTo === <span class="hljs-string">"parent"</span> ? <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>].parentNode : o.appendTo));
		}

		<span class="hljs-keyword">if</span>(helper[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>] &amp;&amp; !(<span class="hljs-regexp">/(fixed|absolute)/</span>).test(helper.css(<span class="hljs-string">"position"</span>))) {
			helper.css(<span class="hljs-string">"position"</span>, <span class="hljs-string">"absolute"</span>);
		}

		<span class="hljs-keyword">return</span> helper;

	},

	_adjustOffsetFromHelper: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(obj)</span> {</span>
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">"string"</span>) {
			obj = obj.split(<span class="hljs-string">" "</span>);
		}
		<span class="hljs-keyword">if</span> ($.isArray(obj)) {
			obj = {left: +obj[<span class="hljs-number">0</span>], top: +obj[<span class="hljs-number">1</span>] || <span class="hljs-number">0</span>};
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-string">"left"</span> <span class="hljs-keyword">in</span> obj) {
			<span class="hljs-keyword">this</span>.offset.click.left = obj.left + <span class="hljs-keyword">this</span>.margins.left;
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-string">"right"</span> <span class="hljs-keyword">in</span> obj) {
			<span class="hljs-keyword">this</span>.offset.click.left = <span class="hljs-keyword">this</span>.helperProportions.width - obj.right + <span class="hljs-keyword">this</span>.margins.left;
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-string">"top"</span> <span class="hljs-keyword">in</span> obj) {
			<span class="hljs-keyword">this</span>.offset.click.top = obj.top + <span class="hljs-keyword">this</span>.margins.top;
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-string">"bottom"</span> <span class="hljs-keyword">in</span> obj) {
			<span class="hljs-keyword">this</span>.offset.click.top = <span class="hljs-keyword">this</span>.helperProportions.height - obj.bottom + <span class="hljs-keyword">this</span>.margins.top;
		}
	},

	_getParentOffset: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>Get the offsetParent and cache its position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> po = <span class="hljs-keyword">this</span>.offsetParent.offset();</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <p>This is a special case where we need to modify a offset calculated on start, since the following happened:</p>
<ol>
<li>The position of the helper is absolute, so it’s position is calculated based on the next positioned parent</li>
<li>The actual offset parent is a child of the scroll parent, and the scroll parent isn’t the document, which means that
the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"absolute"</span> &amp;&amp; <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== document &amp;&amp; $.contains(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>])) {
			po.left += <span class="hljs-keyword">this</span>.scrollParent.scrollLeft();
			po.top += <span class="hljs-keyword">this</span>.scrollParent.scrollTop();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>This needs to be actually done for all browsers, since pageX/pageY includes this information
Ugly IE fix</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>((<span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>] === document.body) ||
			(<span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>].tagName &amp;&amp; <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>].tagName.toLowerCase() === <span class="hljs-string">"html"</span> &amp;&amp; $.ui.ie)) {
			po = { top: <span class="hljs-number">0</span>, left: <span class="hljs-number">0</span> };
		}

		<span class="hljs-keyword">return</span> {
			top: po.top + (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.offsetParent.css(<span class="hljs-string">"borderTopWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>),
			left: po.left + (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.offsetParent.css(<span class="hljs-string">"borderLeftWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>)
		};

	},

	_getRelativeOffset: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"relative"</span>) {
			<span class="hljs-keyword">var</span> p = <span class="hljs-keyword">this</span>.element.position();
			<span class="hljs-keyword">return</span> {
				top: p.top - (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"top"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) + <span class="hljs-keyword">this</span>.scrollParent.scrollTop(),
				left: p.left - (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"left"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) + <span class="hljs-keyword">this</span>.scrollParent.scrollLeft()
			};
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">return</span> { top: <span class="hljs-number">0</span>, left: <span class="hljs-number">0</span> };
		}

	},

	_cacheMargins: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.margins = {
			left: (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.element.css(<span class="hljs-string">"marginLeft"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>),
			top: (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.element.css(<span class="hljs-string">"marginTop"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>),
			right: (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.element.css(<span class="hljs-string">"marginRight"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>),
			bottom: (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.element.css(<span class="hljs-string">"marginBottom"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>)
		};
	},

	_cacheHelperProportions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.helperProportions = {
			width: <span class="hljs-keyword">this</span>.helper.outerWidth(),
			height: <span class="hljs-keyword">this</span>.helper.outerHeight()
		};
	},

	_setContainment: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">var</span> over, c, ce,
			o = <span class="hljs-keyword">this</span>.options;

		<span class="hljs-keyword">if</span> ( !o.containment ) {
			<span class="hljs-keyword">this</span>.containment = <span class="hljs-literal">null</span>;
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( o.containment === <span class="hljs-string">"window"</span> ) {
			<span class="hljs-keyword">this</span>.containment = [
				$( window ).scrollLeft() - <span class="hljs-keyword">this</span>.offset.relative.left - <span class="hljs-keyword">this</span>.offset.parent.left,
				$( window ).scrollTop() - <span class="hljs-keyword">this</span>.offset.relative.top - <span class="hljs-keyword">this</span>.offset.parent.top,
				$( window ).scrollLeft() + $( window ).width() - <span class="hljs-keyword">this</span>.helperProportions.width - <span class="hljs-keyword">this</span>.margins.left,
				$( window ).scrollTop() + ( $( window ).height() || document.body.parentNode.scrollHeight ) - <span class="hljs-keyword">this</span>.helperProportions.height - <span class="hljs-keyword">this</span>.margins.top
			];
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( o.containment === <span class="hljs-string">"document"</span>) {
			<span class="hljs-keyword">this</span>.containment = [
				<span class="hljs-number">0</span>,
				<span class="hljs-number">0</span>,
				$( document ).width() - <span class="hljs-keyword">this</span>.helperProportions.width - <span class="hljs-keyword">this</span>.margins.left,
				( $( document ).height() || document.body.parentNode.scrollHeight ) - <span class="hljs-keyword">this</span>.helperProportions.height - <span class="hljs-keyword">this</span>.margins.top
			];
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( o.containment.constructor === <span class="hljs-built_in">Array</span> ) {
			<span class="hljs-keyword">this</span>.containment = o.containment;
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( o.containment === <span class="hljs-string">"parent"</span> ) {
			o.containment = <span class="hljs-keyword">this</span>.helper[ <span class="hljs-number">0</span> ].parentNode;
		}

		c = $( o.containment );
		ce = c[ <span class="hljs-number">0</span> ];

		<span class="hljs-keyword">if</span>( !ce ) {
			<span class="hljs-keyword">return</span>;
		}

		over = c.css( <span class="hljs-string">"overflow"</span> ) !== <span class="hljs-string">"hidden"</span>;

		<span class="hljs-keyword">this</span>.containment = [
			( <span class="hljs-built_in">parseInt</span>( c.css( <span class="hljs-string">"borderLeftWidth"</span> ), <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span> ) + ( <span class="hljs-built_in">parseInt</span>( c.css( <span class="hljs-string">"paddingLeft"</span> ), <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span> ),
			( <span class="hljs-built_in">parseInt</span>( c.css( <span class="hljs-string">"borderTopWidth"</span> ), <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span> ) + ( <span class="hljs-built_in">parseInt</span>( c.css( <span class="hljs-string">"paddingTop"</span> ), <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span> ) ,
			( over ? <span class="hljs-built_in">Math</span>.max( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) - ( <span class="hljs-built_in">parseInt</span>( c.css( <span class="hljs-string">"borderRightWidth"</span> ), <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span> ) - ( <span class="hljs-built_in">parseInt</span>( c.css( <span class="hljs-string">"paddingRight"</span> ), <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span> ) - <span class="hljs-keyword">this</span>.helperProportions.width - <span class="hljs-keyword">this</span>.margins.left - <span class="hljs-keyword">this</span>.margins.right,
			( over ? <span class="hljs-built_in">Math</span>.max( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) - ( <span class="hljs-built_in">parseInt</span>( c.css( <span class="hljs-string">"borderBottomWidth"</span> ), <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span> ) - ( <span class="hljs-built_in">parseInt</span>( c.css( <span class="hljs-string">"paddingBottom"</span> ), <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span> ) - <span class="hljs-keyword">this</span>.helperProportions.height - <span class="hljs-keyword">this</span>.margins.top  - <span class="hljs-keyword">this</span>.margins.bottom
		];
		<span class="hljs-keyword">this</span>.relative_container = c;
	},

	_convertPositionTo: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d, pos)</span> {</span>

		<span class="hljs-keyword">if</span>(!pos) {
			pos = <span class="hljs-keyword">this</span>.position;
		}

		<span class="hljs-keyword">var</span> mod = d === <span class="hljs-string">"absolute"</span> ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>,
			scroll = <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"absolute"</span> &amp;&amp; !( <span class="hljs-keyword">this</span>.scrollParent[ <span class="hljs-number">0</span> ] !== document &amp;&amp; $.contains( <span class="hljs-keyword">this</span>.scrollParent[ <span class="hljs-number">0</span> ], <span class="hljs-keyword">this</span>.offsetParent[ <span class="hljs-number">0</span> ] ) ) ? <span class="hljs-keyword">this</span>.offsetParent : <span class="hljs-keyword">this</span>.scrollParent;</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>Cache the scroll</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.offset.scroll) {
			<span class="hljs-keyword">this</span>.offset.scroll = {top : scroll.scrollTop(), left : scroll.scrollLeft()};
		}

		<span class="hljs-keyword">return</span> {
			top: (
				pos.top	+																<span class="hljs-comment">// The absolute mouse position</span>
				<span class="hljs-keyword">this</span>.offset.relative.top * mod +										<span class="hljs-comment">// Only for relative positioned nodes: Relative offset from element to offset parent</span>
				<span class="hljs-keyword">this</span>.offset.parent.top * mod -										<span class="hljs-comment">// The offsetParent's offset without borders (offset + border)</span>
				( ( <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"fixed"</span> ? -<span class="hljs-keyword">this</span>.scrollParent.scrollTop() : <span class="hljs-keyword">this</span>.offset.scroll.top ) * mod )
			),
			left: (
				pos.left +																<span class="hljs-comment">// The absolute mouse position</span>
				<span class="hljs-keyword">this</span>.offset.relative.left * mod +										<span class="hljs-comment">// Only for relative positioned nodes: Relative offset from element to offset parent</span>
				<span class="hljs-keyword">this</span>.offset.parent.left * mod	-										<span class="hljs-comment">// The offsetParent's offset without borders (offset + border)</span>
				( ( <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"fixed"</span> ? -<span class="hljs-keyword">this</span>.scrollParent.scrollLeft() : <span class="hljs-keyword">this</span>.offset.scroll.left ) * mod )
			)
		};

	},

	_generatePosition: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>

		<span class="hljs-keyword">var</span> containment, co, top, left,
			o = <span class="hljs-keyword">this</span>.options,
			scroll = <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"absolute"</span> &amp;&amp; !( <span class="hljs-keyword">this</span>.scrollParent[ <span class="hljs-number">0</span> ] !== document &amp;&amp; $.contains( <span class="hljs-keyword">this</span>.scrollParent[ <span class="hljs-number">0</span> ], <span class="hljs-keyword">this</span>.offsetParent[ <span class="hljs-number">0</span> ] ) ) ? <span class="hljs-keyword">this</span>.offsetParent : <span class="hljs-keyword">this</span>.scrollParent,
			pageX = event.pageX,
			pageY = event.pageY;</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>Cache the scroll</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.offset.scroll) {
			<span class="hljs-keyword">this</span>.offset.scroll = {top : scroll.scrollTop(), left : scroll.scrollLeft()};
		}

		<span class="hljs-comment">/*
		 * - Position constraining -
		 * Constrain the position to a mix of grid, containment.
		 */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <p>If we are not dragging yet, we won’t check for options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.originalPosition ) {
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.containment ) {
				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.relative_container ){
					co = <span class="hljs-keyword">this</span>.relative_container.offset();
					containment = [
						<span class="hljs-keyword">this</span>.containment[ <span class="hljs-number">0</span> ] + co.left,
						<span class="hljs-keyword">this</span>.containment[ <span class="hljs-number">1</span> ] + co.top,
						<span class="hljs-keyword">this</span>.containment[ <span class="hljs-number">2</span> ] + co.left,
						<span class="hljs-keyword">this</span>.containment[ <span class="hljs-number">3</span> ] + co.top
					];
				}
				<span class="hljs-keyword">else</span> {
					containment = <span class="hljs-keyword">this</span>.containment;
				}

				<span class="hljs-keyword">if</span>(event.pageX - <span class="hljs-keyword">this</span>.offset.click.left &lt; containment[<span class="hljs-number">0</span>]) {
					pageX = containment[<span class="hljs-number">0</span>] + <span class="hljs-keyword">this</span>.offset.click.left;
				}
				<span class="hljs-keyword">if</span>(event.pageY - <span class="hljs-keyword">this</span>.offset.click.top &lt; containment[<span class="hljs-number">1</span>]) {
					pageY = containment[<span class="hljs-number">1</span>] + <span class="hljs-keyword">this</span>.offset.click.top;
				}
				<span class="hljs-keyword">if</span>(event.pageX - <span class="hljs-keyword">this</span>.offset.click.left &gt; containment[<span class="hljs-number">2</span>]) {
					pageX = containment[<span class="hljs-number">2</span>] + <span class="hljs-keyword">this</span>.offset.click.left;
				}
				<span class="hljs-keyword">if</span>(event.pageY - <span class="hljs-keyword">this</span>.offset.click.top &gt; containment[<span class="hljs-number">3</span>]) {
					pageY = containment[<span class="hljs-number">3</span>] + <span class="hljs-keyword">this</span>.offset.click.top;
				}
			}

			<span class="hljs-keyword">if</span>(o.grid) {</pre></div></div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p>Check for grid elements set to 0 to prevent divide by 0 error causing invalid argument errors in IE (see ticket #6950)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				top = o.grid[<span class="hljs-number">1</span>] ? <span class="hljs-keyword">this</span>.originalPageY + <span class="hljs-built_in">Math</span>.round((pageY - <span class="hljs-keyword">this</span>.originalPageY) / o.grid[<span class="hljs-number">1</span>]) * o.grid[<span class="hljs-number">1</span>] : <span class="hljs-keyword">this</span>.originalPageY;
				pageY = containment ? ((top - <span class="hljs-keyword">this</span>.offset.click.top &gt;= containment[<span class="hljs-number">1</span>] || top - <span class="hljs-keyword">this</span>.offset.click.top &gt; containment[<span class="hljs-number">3</span>]) ? top : ((top - <span class="hljs-keyword">this</span>.offset.click.top &gt;= containment[<span class="hljs-number">1</span>]) ? top - o.grid[<span class="hljs-number">1</span>] : top + o.grid[<span class="hljs-number">1</span>])) : top;

				left = o.grid[<span class="hljs-number">0</span>] ? <span class="hljs-keyword">this</span>.originalPageX + <span class="hljs-built_in">Math</span>.round((pageX - <span class="hljs-keyword">this</span>.originalPageX) / o.grid[<span class="hljs-number">0</span>]) * o.grid[<span class="hljs-number">0</span>] : <span class="hljs-keyword">this</span>.originalPageX;
				pageX = containment ? ((left - <span class="hljs-keyword">this</span>.offset.click.left &gt;= containment[<span class="hljs-number">0</span>] || left - <span class="hljs-keyword">this</span>.offset.click.left &gt; containment[<span class="hljs-number">2</span>]) ? left : ((left - <span class="hljs-keyword">this</span>.offset.click.left &gt;= containment[<span class="hljs-number">0</span>]) ? left - o.grid[<span class="hljs-number">0</span>] : left + o.grid[<span class="hljs-number">0</span>])) : left;
			}

		}

		<span class="hljs-keyword">return</span> {
			top: (
				pageY -																	<span class="hljs-comment">// The absolute mouse position</span>
				<span class="hljs-keyword">this</span>.offset.click.top	-												<span class="hljs-comment">// Click offset (relative to the element)</span>
				<span class="hljs-keyword">this</span>.offset.relative.top -												<span class="hljs-comment">// Only for relative positioned nodes: Relative offset from element to offset parent</span>
				<span class="hljs-keyword">this</span>.offset.parent.top +												<span class="hljs-comment">// The offsetParent's offset without borders (offset + border)</span>
				( <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"fixed"</span> ? -<span class="hljs-keyword">this</span>.scrollParent.scrollTop() : <span class="hljs-keyword">this</span>.offset.scroll.top )
			),
			left: (
				pageX -																	<span class="hljs-comment">// The absolute mouse position</span>
				<span class="hljs-keyword">this</span>.offset.click.left -												<span class="hljs-comment">// Click offset (relative to the element)</span>
				<span class="hljs-keyword">this</span>.offset.relative.left -												<span class="hljs-comment">// Only for relative positioned nodes: Relative offset from element to offset parent</span>
				<span class="hljs-keyword">this</span>.offset.parent.left +												<span class="hljs-comment">// The offsetParent's offset without borders (offset + border)</span>
				( <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"fixed"</span> ? -<span class="hljs-keyword">this</span>.scrollParent.scrollLeft() : <span class="hljs-keyword">this</span>.offset.scroll.left )
			)
		};

	},

	_clear: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.helper.removeClass(<span class="hljs-string">"ui-draggable-dragging"</span>);
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>] &amp;&amp; !<span class="hljs-keyword">this</span>.cancelHelperRemoval) {
			<span class="hljs-keyword">this</span>.helper.remove();
		}
		<span class="hljs-keyword">this</span>.helper = <span class="hljs-literal">null</span>;
		<span class="hljs-keyword">this</span>.cancelHelperRemoval = <span class="hljs-literal">false</span>;
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <p>From now on bulk stuff - mainly helpers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
	_trigger: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(type, event, ui)</span> {</span>
		ui = ui || <span class="hljs-keyword">this</span>._uiHash();
		$.ui.plugin.call(<span class="hljs-keyword">this</span>, type, [event, ui]);</pre></div></div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              <p>The absolute position has to be recalculated after plugins</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(type === <span class="hljs-string">"drag"</span>) {
			<span class="hljs-keyword">this</span>.positionAbs = <span class="hljs-keyword">this</span>._convertPositionTo(<span class="hljs-string">"absolute"</span>);
		}
		<span class="hljs-keyword">return</span> $.Widget.prototype._trigger.call(<span class="hljs-keyword">this</span>, type, event, ui);
	},

	plugins: {},

	_uiHash: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> {
			helper: <span class="hljs-keyword">this</span>.helper,
			position: <span class="hljs-keyword">this</span>.position,
			originalPosition: <span class="hljs-keyword">this</span>.originalPosition,
			offset: <span class="hljs-keyword">this</span>.positionAbs
		};
	}

});

$.ui.plugin.add(<span class="hljs-string">"draggable"</span>, <span class="hljs-string">"connectToSortable"</span>, {
	start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, ui)</span> {</span>

		<span class="hljs-keyword">var</span> inst = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-draggable"</span>), o = inst.options,
			uiSortable = $.extend({}, ui, { item: inst.element });
		inst.sortables = [];
		$(o.connectToSortable).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> sortable = $.data(<span class="hljs-keyword">this</span>, <span class="hljs-string">"ui-sortable"</span>);
			<span class="hljs-keyword">if</span> (sortable &amp;&amp; !sortable.options.disabled) {
				inst.sortables.push({
					instance: sortable,
					shouldRevert: sortable.options.revert
				});
				sortable.refreshPositions();	<span class="hljs-comment">// Call the sortable's refreshPositions at drag start to refresh the containerCache since the sortable container cache is used in drag and needs to be up to date (this will ensure it's initialised as well as being kept in step with any changes that might have happened on the page).</span>
				sortable._trigger(<span class="hljs-string">"activate"</span>, event, uiSortable);
			}
		});

	},
	stop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, ui)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p>If we are still over the sortable, we fake the stop event of the sortable, but also remove helper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> inst = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-draggable"</span>),
			uiSortable = $.extend({}, ui, { item: inst.element });

		$.each(inst.sortables, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.instance.isOver) {

				<span class="hljs-keyword">this</span>.instance.isOver = <span class="hljs-number">0</span>;

				inst.cancelHelperRemoval = <span class="hljs-literal">true</span>; <span class="hljs-comment">//Don't remove the helper in the draggable instance</span>
				<span class="hljs-keyword">this</span>.instance.cancelHelperRemoval = <span class="hljs-literal">false</span>; <span class="hljs-comment">//Remove it in the sortable instance (so sortable plugins like revert still work)</span></pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              <p>The sortable revert is supported, and we have to set a temporary dropped variable on the draggable to support revert: “valid/invalid”</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.shouldRevert) {
					<span class="hljs-keyword">this</span>.instance.options.revert = <span class="hljs-keyword">this</span>.shouldRevert;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <p>Trigger the stop of the sortable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">this</span>.instance._mouseStop(event);

				<span class="hljs-keyword">this</span>.instance.options.helper = <span class="hljs-keyword">this</span>.instance.options._helper;</pre></div></div>
            
        </li>
        
        
        <li id="section-120">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              <p>If the helper has been the original item, restore properties in the sortable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>(inst.options.helper === <span class="hljs-string">"original"</span>) {
					<span class="hljs-keyword">this</span>.instance.currentItem.css({ top: <span class="hljs-string">"auto"</span>, left: <span class="hljs-string">"auto"</span> });
				}

			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>.instance.cancelHelperRemoval = <span class="hljs-literal">false</span>; <span class="hljs-comment">//Remove the helper in the sortable instance</span>
				<span class="hljs-keyword">this</span>.instance._trigger(<span class="hljs-string">"deactivate"</span>, event, uiSortable);
			}

		});

	},
	drag: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, ui)</span> {</span>

		<span class="hljs-keyword">var</span> inst = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-draggable"</span>), that = <span class="hljs-keyword">this</span>;

		$.each(inst.sortables, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

			<span class="hljs-keyword">var</span> innermostIntersecting = <span class="hljs-literal">false</span>,
				thisSortable = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-121">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-121">&#182;</a>
              </div>
              <p>Copy over some variables to allow calling the sortable’s native _intersectsWith</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.instance.positionAbs = inst.positionAbs;
			<span class="hljs-keyword">this</span>.instance.helperProportions = inst.helperProportions;
			<span class="hljs-keyword">this</span>.instance.offset.click = inst.offset.click;

			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.instance._intersectsWith(<span class="hljs-keyword">this</span>.instance.containerCache)) {
				innermostIntersecting = <span class="hljs-literal">true</span>;
				$.each(inst.sortables, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">this</span>.instance.positionAbs = inst.positionAbs;
					<span class="hljs-keyword">this</span>.instance.helperProportions = inst.helperProportions;
					<span class="hljs-keyword">this</span>.instance.offset.click = inst.offset.click;
					<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> !== thisSortable &amp;&amp;
						<span class="hljs-keyword">this</span>.instance._intersectsWith(<span class="hljs-keyword">this</span>.instance.containerCache) &amp;&amp;
						$.contains(thisSortable.instance.element[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.instance.element[<span class="hljs-number">0</span>])
					) {
						innermostIntersecting = <span class="hljs-literal">false</span>;
					}
					<span class="hljs-keyword">return</span> innermostIntersecting;
				});
			}


			<span class="hljs-keyword">if</span>(innermostIntersecting) {</pre></div></div>
            
        </li>
        
        
        <li id="section-122">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-122">&#182;</a>
              </div>
              <p>If it intersects, we use a little isOver variable and set it once, so our move-in stuff gets fired only once</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.instance.isOver) {

					<span class="hljs-keyword">this</span>.instance.isOver = <span class="hljs-number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-123">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-123">&#182;</a>
              </div>
              <p>Now we fake the start of dragging for the sortable instance,
by cloning the list group item, appending it to the sortable and using it as inst.currentItem
We can then fire the start event of the sortable with our passed browser event, and our own helper (so it doesn’t create a new one)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">this</span>.instance.currentItem = $(that).clone().removeAttr(<span class="hljs-string">"id"</span>).appendTo(<span class="hljs-keyword">this</span>.instance.element).data(<span class="hljs-string">"ui-sortable-item"</span>, <span class="hljs-literal">true</span>);
					<span class="hljs-keyword">this</span>.instance.options._helper = <span class="hljs-keyword">this</span>.instance.options.helper; <span class="hljs-comment">//Store helper option to later restore it</span>
					<span class="hljs-keyword">this</span>.instance.options.helper = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span> <span class="hljs-keyword">return</span> ui.helper[<span class="hljs-number">0</span>]; };

					event.target = <span class="hljs-keyword">this</span>.instance.currentItem[<span class="hljs-number">0</span>];
					<span class="hljs-keyword">this</span>.instance._mouseCapture(event, <span class="hljs-literal">true</span>);
					<span class="hljs-keyword">this</span>.instance._mouseStart(event, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-124">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-124">&#182;</a>
              </div>
              <p>Because the browser event is way off the new appended portlet, we modify a couple of variables to reflect the changes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">this</span>.instance.offset.click.top = inst.offset.click.top;
					<span class="hljs-keyword">this</span>.instance.offset.click.left = inst.offset.click.left;
					<span class="hljs-keyword">this</span>.instance.offset.parent.left -= inst.offset.parent.left - <span class="hljs-keyword">this</span>.instance.offset.parent.left;
					<span class="hljs-keyword">this</span>.instance.offset.parent.top -= inst.offset.parent.top - <span class="hljs-keyword">this</span>.instance.offset.parent.top;

					inst._trigger(<span class="hljs-string">"toSortable"</span>, event);
					inst.dropped = <span class="hljs-keyword">this</span>.instance.element; <span class="hljs-comment">//draggable revert needs that</span></pre></div></div>
            
        </li>
        
        
        <li id="section-125">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-125">&#182;</a>
              </div>
              <p>hack so receive/update callbacks work (mostly)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					inst.currentItem = inst.element;
					<span class="hljs-keyword">this</span>.instance.fromOutside = inst;

				}</pre></div></div>
            
        </li>
        
        
        <li id="section-126">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-126">&#182;</a>
              </div>
              <p>Provided we did all the previous steps, we can fire the drag event of the sortable on every draggable drag, when it intersects with the sortable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.instance.currentItem) {
					<span class="hljs-keyword">this</span>.instance._mouseDrag(event);
				}

			} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-127">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-127">&#182;</a>
              </div>
              <p>If it doesn’t intersect with the sortable, and it intersected before,
we fake the drag stop of the sortable, but make sure it doesn’t remove the helper by using cancelHelperRemoval</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.instance.isOver) {

					<span class="hljs-keyword">this</span>.instance.isOver = <span class="hljs-number">0</span>;
					<span class="hljs-keyword">this</span>.instance.cancelHelperRemoval = <span class="hljs-literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-128">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-128">&#182;</a>
              </div>
              <p>Prevent reverting on this forced stop</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">this</span>.instance.options.revert = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-129">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-129">&#182;</a>
              </div>
              <p>The out event needs to be triggered independently</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">this</span>.instance._trigger(<span class="hljs-string">"out"</span>, event, <span class="hljs-keyword">this</span>.instance._uiHash(<span class="hljs-keyword">this</span>.instance));

					<span class="hljs-keyword">this</span>.instance._mouseStop(event, <span class="hljs-literal">true</span>);
					<span class="hljs-keyword">this</span>.instance.options.helper = <span class="hljs-keyword">this</span>.instance.options._helper;</pre></div></div>
            
        </li>
        
        
        <li id="section-130">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-130">&#182;</a>
              </div>
              <p>Now we remove our currentItem, the list group clone again, and the placeholder, and animate the helper back to it’s original size</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">this</span>.instance.currentItem.remove();
					<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.instance.placeholder) {
						<span class="hljs-keyword">this</span>.instance.placeholder.remove();
					}

					inst._trigger(<span class="hljs-string">"fromSortable"</span>, event);
					inst.dropped = <span class="hljs-literal">false</span>; <span class="hljs-comment">//draggable revert needs that</span>
				}

			}

		});

	}
});

$.ui.plugin.add(<span class="hljs-string">"draggable"</span>, <span class="hljs-string">"cursor"</span>, {
	start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> t = $(<span class="hljs-string">"body"</span>), o = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-draggable"</span>).options;
		<span class="hljs-keyword">if</span> (t.css(<span class="hljs-string">"cursor"</span>)) {
			o._cursor = t.css(<span class="hljs-string">"cursor"</span>);
		}
		t.css(<span class="hljs-string">"cursor"</span>, o.cursor);
	},
	stop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> o = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-draggable"</span>).options;
		<span class="hljs-keyword">if</span> (o._cursor) {
			$(<span class="hljs-string">"body"</span>).css(<span class="hljs-string">"cursor"</span>, o._cursor);
		}
	}
});

$.ui.plugin.add(<span class="hljs-string">"draggable"</span>, <span class="hljs-string">"opacity"</span>, {
	start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, ui)</span> {</span>
		<span class="hljs-keyword">var</span> t = $(ui.helper), o = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-draggable"</span>).options;
		<span class="hljs-keyword">if</span>(t.css(<span class="hljs-string">"opacity"</span>)) {
			o._opacity = t.css(<span class="hljs-string">"opacity"</span>);
		}
		t.css(<span class="hljs-string">"opacity"</span>, o.opacity);
	},
	stop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, ui)</span> {</span>
		<span class="hljs-keyword">var</span> o = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-draggable"</span>).options;
		<span class="hljs-keyword">if</span>(o._opacity) {
			$(ui.helper).css(<span class="hljs-string">"opacity"</span>, o._opacity);
		}
	}
});

$.ui.plugin.add(<span class="hljs-string">"draggable"</span>, <span class="hljs-string">"scroll"</span>, {
	start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> i = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-draggable"</span>);
		<span class="hljs-keyword">if</span>(i.scrollParent[<span class="hljs-number">0</span>] !== document &amp;&amp; i.scrollParent[<span class="hljs-number">0</span>].tagName !== <span class="hljs-string">"HTML"</span>) {
			i.overflowOffset = i.scrollParent.offset();
		}
	},
	drag: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>

		<span class="hljs-keyword">var</span> i = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-draggable"</span>), o = i.options, scrolled = <span class="hljs-literal">false</span>;

		<span class="hljs-keyword">if</span>(i.scrollParent[<span class="hljs-number">0</span>] !== document &amp;&amp; i.scrollParent[<span class="hljs-number">0</span>].tagName !== <span class="hljs-string">"HTML"</span>) {

			<span class="hljs-keyword">if</span>(!o.axis || o.axis !== <span class="hljs-string">"x"</span>) {
				<span class="hljs-keyword">if</span>((i.overflowOffset.top + i.scrollParent[<span class="hljs-number">0</span>].offsetHeight) - event.pageY &lt; o.scrollSensitivity) {
					i.scrollParent[<span class="hljs-number">0</span>].scrollTop = scrolled = i.scrollParent[<span class="hljs-number">0</span>].scrollTop + o.scrollSpeed;
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.pageY - i.overflowOffset.top &lt; o.scrollSensitivity) {
					i.scrollParent[<span class="hljs-number">0</span>].scrollTop = scrolled = i.scrollParent[<span class="hljs-number">0</span>].scrollTop - o.scrollSpeed;
				}
			}

			<span class="hljs-keyword">if</span>(!o.axis || o.axis !== <span class="hljs-string">"y"</span>) {
				<span class="hljs-keyword">if</span>((i.overflowOffset.left + i.scrollParent[<span class="hljs-number">0</span>].offsetWidth) - event.pageX &lt; o.scrollSensitivity) {
					i.scrollParent[<span class="hljs-number">0</span>].scrollLeft = scrolled = i.scrollParent[<span class="hljs-number">0</span>].scrollLeft + o.scrollSpeed;
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.pageX - i.overflowOffset.left &lt; o.scrollSensitivity) {
					i.scrollParent[<span class="hljs-number">0</span>].scrollLeft = scrolled = i.scrollParent[<span class="hljs-number">0</span>].scrollLeft - o.scrollSpeed;
				}
			}

		} <span class="hljs-keyword">else</span> {

			<span class="hljs-keyword">if</span>(!o.axis || o.axis !== <span class="hljs-string">"x"</span>) {
				<span class="hljs-keyword">if</span>(event.pageY - $(document).scrollTop() &lt; o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>($(window).height() - (event.pageY - $(document).scrollTop()) &lt; o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
				}
			}

			<span class="hljs-keyword">if</span>(!o.axis || o.axis !== <span class="hljs-string">"y"</span>) {
				<span class="hljs-keyword">if</span>(event.pageX - $(document).scrollLeft() &lt; o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>($(window).width() - (event.pageX - $(document).scrollLeft()) &lt; o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
				}
			}

		}

		<span class="hljs-keyword">if</span>(scrolled !== <span class="hljs-literal">false</span> &amp;&amp; $.ui.ddmanager &amp;&amp; !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(i, event);
		}

	}
});

$.ui.plugin.add(<span class="hljs-string">"draggable"</span>, <span class="hljs-string">"snap"</span>, {
	start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">var</span> i = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-draggable"</span>),
			o = i.options;

		i.snapElements = [];

		$(o.snap.constructor !== <span class="hljs-built_in">String</span> ? ( o.snap.items || <span class="hljs-string">":data(ui-draggable)"</span> ) : o.snap).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> $t = $(<span class="hljs-keyword">this</span>),
				$o = $t.offset();
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span> !== i.element[<span class="hljs-number">0</span>]) {
				i.snapElements.push({
					item: <span class="hljs-keyword">this</span>,
					width: $t.outerWidth(), height: $t.outerHeight(),
					top: $o.top, left: $o.left
				});
			}
		});

	},
	drag: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, ui)</span> {</span>

		<span class="hljs-keyword">var</span> ts, bs, ls, rs, l, r, t, b, i, first,
			inst = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-draggable"</span>),
			o = inst.options,
			d = o.snapTolerance,
			x1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,
			y1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;

		<span class="hljs-keyword">for</span> (i = inst.snapElements.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){

			l = inst.snapElements[i].left;
			r = l + inst.snapElements[i].width;
			t = inst.snapElements[i].top;
			b = t + inst.snapElements[i].height;

			<span class="hljs-keyword">if</span> ( x2 &lt; l - d || x1 &gt; r + d || y2 &lt; t - d || y1 &gt; b + d || !$.contains( inst.snapElements[ i ].item.ownerDocument, inst.snapElements[ i ].item ) ) {
				<span class="hljs-keyword">if</span>(inst.snapElements[i].snapping) {
					(inst.options.snap.release &amp;&amp; inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
				}
				inst.snapElements[i].snapping = <span class="hljs-literal">false</span>;
				<span class="hljs-keyword">continue</span>;
			}

			<span class="hljs-keyword">if</span>(o.snapMode !== <span class="hljs-string">"inner"</span>) {
				ts = <span class="hljs-built_in">Math</span>.abs(t - y2) &lt;= d;
				bs = <span class="hljs-built_in">Math</span>.abs(b - y1) &lt;= d;
				ls = <span class="hljs-built_in">Math</span>.abs(l - x2) &lt;= d;
				rs = <span class="hljs-built_in">Math</span>.abs(r - x1) &lt;= d;
				<span class="hljs-keyword">if</span>(ts) {
					ui.position.top = inst._convertPositionTo(<span class="hljs-string">"relative"</span>, { top: t - inst.helperProportions.height, left: <span class="hljs-number">0</span> }).top - inst.margins.top;
				}
				<span class="hljs-keyword">if</span>(bs) {
					ui.position.top = inst._convertPositionTo(<span class="hljs-string">"relative"</span>, { top: b, left: <span class="hljs-number">0</span> }).top - inst.margins.top;
				}
				<span class="hljs-keyword">if</span>(ls) {
					ui.position.left = inst._convertPositionTo(<span class="hljs-string">"relative"</span>, { top: <span class="hljs-number">0</span>, left: l - inst.helperProportions.width }).left - inst.margins.left;
				}
				<span class="hljs-keyword">if</span>(rs) {
					ui.position.left = inst._convertPositionTo(<span class="hljs-string">"relative"</span>, { top: <span class="hljs-number">0</span>, left: r }).left - inst.margins.left;
				}
			}

			first = (ts || bs || ls || rs);

			<span class="hljs-keyword">if</span>(o.snapMode !== <span class="hljs-string">"outer"</span>) {
				ts = <span class="hljs-built_in">Math</span>.abs(t - y1) &lt;= d;
				bs = <span class="hljs-built_in">Math</span>.abs(b - y2) &lt;= d;
				ls = <span class="hljs-built_in">Math</span>.abs(l - x1) &lt;= d;
				rs = <span class="hljs-built_in">Math</span>.abs(r - x2) &lt;= d;
				<span class="hljs-keyword">if</span>(ts) {
					ui.position.top = inst._convertPositionTo(<span class="hljs-string">"relative"</span>, { top: t, left: <span class="hljs-number">0</span> }).top - inst.margins.top;
				}
				<span class="hljs-keyword">if</span>(bs) {
					ui.position.top = inst._convertPositionTo(<span class="hljs-string">"relative"</span>, { top: b - inst.helperProportions.height, left: <span class="hljs-number">0</span> }).top - inst.margins.top;
				}
				<span class="hljs-keyword">if</span>(ls) {
					ui.position.left = inst._convertPositionTo(<span class="hljs-string">"relative"</span>, { top: <span class="hljs-number">0</span>, left: l }).left - inst.margins.left;
				}
				<span class="hljs-keyword">if</span>(rs) {
					ui.position.left = inst._convertPositionTo(<span class="hljs-string">"relative"</span>, { top: <span class="hljs-number">0</span>, left: r - inst.helperProportions.width }).left - inst.margins.left;
				}
			}

			<span class="hljs-keyword">if</span>(!inst.snapElements[i].snapping &amp;&amp; (ts || bs || ls || rs || first)) {
				(inst.options.snap.snap &amp;&amp; inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));
			}
			inst.snapElements[i].snapping = (ts || bs || ls || rs || first);

		}

	}
});

$.ui.plugin.add(<span class="hljs-string">"draggable"</span>, <span class="hljs-string">"stack"</span>, {
	start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> min,
			o = <span class="hljs-keyword">this</span>.data(<span class="hljs-string">"ui-draggable"</span>).options,
			group = $.makeArray($(o.stack)).sort(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(a,b)</span> {</span>
				<span class="hljs-keyword">return</span> (<span class="hljs-built_in">parseInt</span>($(a).css(<span class="hljs-string">"zIndex"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) - (<span class="hljs-built_in">parseInt</span>($(b).css(<span class="hljs-string">"zIndex"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>);
			});

		<span class="hljs-keyword">if</span> (!group.length) { <span class="hljs-keyword">return</span>; }

		min = <span class="hljs-built_in">parseInt</span>($(group[<span class="hljs-number">0</span>]).css(<span class="hljs-string">"zIndex"</span>), <span class="hljs-number">10</span>) || <span class="hljs-number">0</span>;
		$(group).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(i)</span> {</span>
			$(<span class="hljs-keyword">this</span>).css(<span class="hljs-string">"zIndex"</span>, min + i);
		});
		<span class="hljs-keyword">this</span>.css(<span class="hljs-string">"zIndex"</span>, (min + group.length));
	}
});

$.ui.plugin.add(<span class="hljs-string">"draggable"</span>, <span class="hljs-string">"zIndex"</span>, {
	start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, ui)</span> {</span>
		<span class="hljs-keyword">var</span> t = $(ui.helper), o = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-draggable"</span>).options;
		<span class="hljs-keyword">if</span>(t.css(<span class="hljs-string">"zIndex"</span>)) {
			o._zIndex = t.css(<span class="hljs-string">"zIndex"</span>);
		}
		t.css(<span class="hljs-string">"zIndex"</span>, o.zIndex);
	},
	stop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, ui)</span> {</span>
		<span class="hljs-keyword">var</span> o = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-draggable"</span>).options;
		<span class="hljs-keyword">if</span>(o._zIndex) {
			$(ui.helper).css(<span class="hljs-string">"zIndex"</span>, o._zIndex);
		}
	}
});

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isOverAxis</span><span class="hljs-params">( x, reference, size )</span> {</span>
	<span class="hljs-keyword">return</span> ( x &gt; reference ) &amp;&amp; ( x &lt; ( reference + size ) );
}

$.widget(<span class="hljs-string">"ui.droppable"</span>, {
	version: <span class="hljs-string">"1.10.3"</span>,
	widgetEventPrefix: <span class="hljs-string">"drop"</span>,
	options: {
		accept: <span class="hljs-string">"*"</span>,
		activeClass: <span class="hljs-literal">false</span>,
		addClasses: <span class="hljs-literal">true</span>,
		greedy: <span class="hljs-literal">false</span>,
		hoverClass: <span class="hljs-literal">false</span>,
		scope: <span class="hljs-string">"default"</span>,
		tolerance: <span class="hljs-string">"intersect"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-131">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-131">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		activate: <span class="hljs-literal">null</span>,
		deactivate: <span class="hljs-literal">null</span>,
		drop: <span class="hljs-literal">null</span>,
		out: <span class="hljs-literal">null</span>,
		over: <span class="hljs-literal">null</span>
	},
	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">var</span> o = <span class="hljs-keyword">this</span>.options,
			accept = o.accept;

		<span class="hljs-keyword">this</span>.isover = <span class="hljs-literal">false</span>;
		<span class="hljs-keyword">this</span>.isout = <span class="hljs-literal">true</span>;

		<span class="hljs-keyword">this</span>.accept = $.isFunction(accept) ? accept : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
			<span class="hljs-keyword">return</span> d.is(accept);
		};</pre></div></div>
            
        </li>
        
        
        <li id="section-132">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-132">&#182;</a>
              </div>
              <p>Store the droppable’s proportions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.proportions = { width: <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>].offsetWidth, height: <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>].offsetHeight };</pre></div></div>
            
        </li>
        
        
        <li id="section-133">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-133">&#182;</a>
              </div>
              <p>Add the reference and positions to the manager</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$.ui.ddmanager.droppables[o.scope] = $.ui.ddmanager.droppables[o.scope] || [];
		$.ui.ddmanager.droppables[o.scope].push(<span class="hljs-keyword">this</span>);

		(o.addClasses &amp;&amp; <span class="hljs-keyword">this</span>.element.addClass(<span class="hljs-string">"ui-droppable"</span>));

	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>,
			drop = $.ui.ddmanager.droppables[<span class="hljs-keyword">this</span>.options.scope];

		<span class="hljs-keyword">for</span> ( ; i &lt; drop.length; i++ ) {
			<span class="hljs-keyword">if</span> ( drop[i] === <span class="hljs-keyword">this</span> ) {
				drop.splice(i, <span class="hljs-number">1</span>);
			}
		}

		<span class="hljs-keyword">this</span>.element.removeClass(<span class="hljs-string">"ui-droppable ui-droppable-disabled"</span>);
	},

	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(key, value)</span> {</span>

		<span class="hljs-keyword">if</span>(key === <span class="hljs-string">"accept"</span>) {
			<span class="hljs-keyword">this</span>.accept = $.isFunction(value) ? value : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> {</span>
				<span class="hljs-keyword">return</span> d.is(value);
			};
		}
		$.Widget.prototype._setOption.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
	},

	_activate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">var</span> draggable = $.ui.ddmanager.current;
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.activeClass) {
			<span class="hljs-keyword">this</span>.element.addClass(<span class="hljs-keyword">this</span>.options.activeClass);
		}
		<span class="hljs-keyword">if</span>(draggable){
			<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"activate"</span>, event, <span class="hljs-keyword">this</span>.ui(draggable));
		}
	},

	_deactivate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">var</span> draggable = $.ui.ddmanager.current;
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.activeClass) {
			<span class="hljs-keyword">this</span>.element.removeClass(<span class="hljs-keyword">this</span>.options.activeClass);
		}
		<span class="hljs-keyword">if</span>(draggable){
			<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"deactivate"</span>, event, <span class="hljs-keyword">this</span>.ui(draggable));
		}
	},

	_over: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>

		<span class="hljs-keyword">var</span> draggable = $.ui.ddmanager.current;</pre></div></div>
            
        </li>
        
        
        <li id="section-134">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-134">&#182;</a>
              </div>
              <p>Bail if draggable and droppable are same element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (!draggable || (draggable.currentItem || draggable.element)[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>]) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.accept.call(<span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>],(draggable.currentItem || draggable.element))) {
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.hoverClass) {
				<span class="hljs-keyword">this</span>.element.addClass(<span class="hljs-keyword">this</span>.options.hoverClass);
			}
			<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"over"</span>, event, <span class="hljs-keyword">this</span>.ui(draggable));
		}

	},

	_out: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>

		<span class="hljs-keyword">var</span> draggable = $.ui.ddmanager.current;</pre></div></div>
            
        </li>
        
        
        <li id="section-135">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-135">&#182;</a>
              </div>
              <p>Bail if draggable and droppable are same element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (!draggable || (draggable.currentItem || draggable.element)[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>]) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.accept.call(<span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>],(draggable.currentItem || draggable.element))) {
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.hoverClass) {
				<span class="hljs-keyword">this</span>.element.removeClass(<span class="hljs-keyword">this</span>.options.hoverClass);
			}
			<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"out"</span>, event, <span class="hljs-keyword">this</span>.ui(draggable));
		}

	},

	_drop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event,custom)</span> {</span>

		<span class="hljs-keyword">var</span> draggable = custom || $.ui.ddmanager.current,
			childrenIntersection = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-136">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-136">&#182;</a>
              </div>
              <p>Bail if draggable and droppable are same element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (!draggable || (draggable.currentItem || draggable.element)[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>]) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		<span class="hljs-keyword">this</span>.element.find(<span class="hljs-string">":data(ui-droppable)"</span>).not(<span class="hljs-string">".ui-draggable-dragging"</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> inst = $.data(<span class="hljs-keyword">this</span>, <span class="hljs-string">"ui-droppable"</span>);
			<span class="hljs-keyword">if</span>(
				inst.options.greedy &amp;&amp;
				!inst.options.disabled &amp;&amp;
				inst.options.scope === draggable.options.scope &amp;&amp;
				inst.accept.call(inst.element[<span class="hljs-number">0</span>], (draggable.currentItem || draggable.element)) &amp;&amp;
				$.ui.intersect(draggable, $.extend(inst, { offset: inst.element.offset() }), inst.options.tolerance)
			) { childrenIntersection = <span class="hljs-literal">true</span>; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; }
		});
		<span class="hljs-keyword">if</span>(childrenIntersection) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.accept.call(<span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>],(draggable.currentItem || draggable.element))) {
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.activeClass) {
				<span class="hljs-keyword">this</span>.element.removeClass(<span class="hljs-keyword">this</span>.options.activeClass);
			}
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.hoverClass) {
				<span class="hljs-keyword">this</span>.element.removeClass(<span class="hljs-keyword">this</span>.options.hoverClass);
			}
			<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"drop"</span>, event, <span class="hljs-keyword">this</span>.ui(draggable));
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.element;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

	},

	ui: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(c)</span> {</span>
		<span class="hljs-keyword">return</span> {
			draggable: (c.currentItem || c.element),
			helper: c.helper,
			position: c.position,
			offset: c.positionAbs
		};
	}

});

$.ui.intersect = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(draggable, droppable, toleranceMode)</span> {</span>

	<span class="hljs-keyword">if</span> (!droppable.offset) {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	}

	<span class="hljs-keyword">var</span> draggableLeft, draggableTop,
		x1 = (draggable.positionAbs || draggable.position.absolute).left, x2 = x1 + draggable.helperProportions.width,
		y1 = (draggable.positionAbs || draggable.position.absolute).top, y2 = y1 + draggable.helperProportions.height,
		l = droppable.offset.left, r = l + droppable.proportions.width,
		t = droppable.offset.top, b = t + droppable.proportions.height;

	<span class="hljs-keyword">switch</span> (toleranceMode) {
		<span class="hljs-keyword">case</span> <span class="hljs-string">"fit"</span>:
			<span class="hljs-keyword">return</span> (l &lt;= x1 &amp;&amp; x2 &lt;= r &amp;&amp; t &lt;= y1 &amp;&amp; y2 &lt;= b);
		<span class="hljs-keyword">case</span> <span class="hljs-string">"intersect"</span>:
			<span class="hljs-keyword">return</span> (l &lt; x1 + (draggable.helperProportions.width / <span class="hljs-number">2</span>) &amp;&amp; <span class="hljs-comment">// Right Half</span>
				x2 - (draggable.helperProportions.width / <span class="hljs-number">2</span>) &lt; r &amp;&amp; <span class="hljs-comment">// Left Half</span>
				t &lt; y1 + (draggable.helperProportions.height / <span class="hljs-number">2</span>) &amp;&amp; <span class="hljs-comment">// Bottom Half</span>
				y2 - (draggable.helperProportions.height / <span class="hljs-number">2</span>) &lt; b ); <span class="hljs-comment">// Top Half</span>
		<span class="hljs-keyword">case</span> <span class="hljs-string">"pointer"</span>:
			draggableLeft = ((draggable.positionAbs || draggable.position.absolute).left + (draggable.clickOffset || draggable.offset.click).left);
			draggableTop = ((draggable.positionAbs || draggable.position.absolute).top + (draggable.clickOffset || draggable.offset.click).top);
			<span class="hljs-keyword">return</span> isOverAxis( draggableTop, t, droppable.proportions.height ) &amp;&amp; isOverAxis( draggableLeft, l, droppable.proportions.width );
		<span class="hljs-keyword">case</span> <span class="hljs-string">"touch"</span>:
			<span class="hljs-keyword">return</span> (
				(y1 &gt;= t &amp;&amp; y1 &lt;= b) ||	<span class="hljs-comment">// Top edge touching</span>
				(y2 &gt;= t &amp;&amp; y2 &lt;= b) ||	<span class="hljs-comment">// Bottom edge touching</span>
				(y1 &lt; t &amp;&amp; y2 &gt; b)		<span class="hljs-comment">// Surrounded vertically</span>
			) &amp;&amp; (
				(x1 &gt;= l &amp;&amp; x1 &lt;= r) ||	<span class="hljs-comment">// Left edge touching</span>
				(x2 &gt;= l &amp;&amp; x2 &lt;= r) ||	<span class="hljs-comment">// Right edge touching</span>
				(x1 &lt; l &amp;&amp; x2 &gt; r)		<span class="hljs-comment">// Surrounded horizontally</span>
			);
		<span class="hljs-keyword">default</span>:
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

};

<span class="hljs-comment">/*
	This manager tracks offsets of draggables and droppables
*/</span>
$.ui.ddmanager = {
	current: <span class="hljs-literal">null</span>,
	droppables: { <span class="hljs-string">"default"</span>: [] },
	prepareOffsets: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(t, event)</span> {</span>

		<span class="hljs-keyword">var</span> i, j,
			m = $.ui.ddmanager.droppables[t.options.scope] || [],
			type = event ? event.type : <span class="hljs-literal">null</span>, <span class="hljs-comment">// workaround for #2317</span>
			list = (t.currentItem || t.element).find(<span class="hljs-string">":data(ui-droppable)"</span>).addBack();

		droppablesLoop: <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; m.length; i++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-137">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-137">&#182;</a>
              </div>
              <p>No disabled and non-accepted</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>(m[i].options.disabled || (t &amp;&amp; !m[i].accept.call(m[i].element[<span class="hljs-number">0</span>],(t.currentItem || t.element)))) {
				<span class="hljs-keyword">continue</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-138">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-138">&#182;</a>
              </div>
              <p>Filter out elements in the current dragged item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">for</span> (j=<span class="hljs-number">0</span>; j &lt; list.length; j++) {
				<span class="hljs-keyword">if</span>(list[j] === m[i].element[<span class="hljs-number">0</span>]) {
					m[i].proportions.height = <span class="hljs-number">0</span>;
					<span class="hljs-keyword">continue</span> droppablesLoop;
				}
			}

			m[i].visible = m[i].element.css(<span class="hljs-string">"display"</span>) !== <span class="hljs-string">"none"</span>;
			<span class="hljs-keyword">if</span>(!m[i].visible) {
				<span class="hljs-keyword">continue</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-139">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-139">&#182;</a>
              </div>
              <p>Activate the droppable if used directly from draggables</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>(type === <span class="hljs-string">"mousedown"</span>) {
				m[i]._activate.call(m[i], event);
			}

			m[i].offset = m[i].element.offset();
			m[i].proportions = { width: m[i].element[<span class="hljs-number">0</span>].offsetWidth, height: m[i].element[<span class="hljs-number">0</span>].offsetHeight };

		}

	},
	drop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(draggable, event)</span> {</span>

		<span class="hljs-keyword">var</span> dropped = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-140">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-140">&#182;</a>
              </div>
              <p>Create a copy of the droppables in case the list changes during the drop (#9116)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$.each(($.ui.ddmanager.droppables[draggable.options.scope] || []).slice(), <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

			<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.options) {
				<span class="hljs-keyword">return</span>;
			}
			<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.options.disabled &amp;&amp; <span class="hljs-keyword">this</span>.visible &amp;&amp; $.ui.intersect(draggable, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.options.tolerance)) {
				dropped = <span class="hljs-keyword">this</span>._drop.call(<span class="hljs-keyword">this</span>, event) || dropped;
			}

			<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.options.disabled &amp;&amp; <span class="hljs-keyword">this</span>.visible &amp;&amp; <span class="hljs-keyword">this</span>.accept.call(<span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>],(draggable.currentItem || draggable.element))) {
				<span class="hljs-keyword">this</span>.isout = <span class="hljs-literal">true</span>;
				<span class="hljs-keyword">this</span>.isover = <span class="hljs-literal">false</span>;
				<span class="hljs-keyword">this</span>._deactivate.call(<span class="hljs-keyword">this</span>, event);
			}

		});
		<span class="hljs-keyword">return</span> dropped;

	},
	dragStart: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( draggable, event )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-141">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-141">&#182;</a>
              </div>
              <p>Listen for scrolling so that if the dragging causes scrolling the position of the droppables can be recalculated (see #5003)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		draggable.element.parentsUntil( <span class="hljs-string">"body"</span> ).bind( <span class="hljs-string">"scroll.droppable"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span>( !draggable.options.refreshPositions ) {
				$.ui.ddmanager.prepareOffsets( draggable, event );
			}
		});
	},
	drag: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(draggable, event)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-142">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-142">&#182;</a>
              </div>
              <p>If you have a highly dynamic page, you might try this option. It renders positions every time you move the mouse.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(draggable.options.refreshPositions) {
			$.ui.ddmanager.prepareOffsets(draggable, event);
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-143">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-143">&#182;</a>
              </div>
              <p>Run through all droppables and check their positions based on specific tolerance options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$.each($.ui.ddmanager.droppables[draggable.options.scope] || [], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.disabled || <span class="hljs-keyword">this</span>.greedyChild || !<span class="hljs-keyword">this</span>.visible) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">var</span> parentInstance, scope, parent,
				intersects = $.ui.intersect(draggable, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.options.tolerance),
				c = !intersects &amp;&amp; <span class="hljs-keyword">this</span>.isover ? <span class="hljs-string">"isout"</span> : (intersects &amp;&amp; !<span class="hljs-keyword">this</span>.isover ? <span class="hljs-string">"isover"</span> : <span class="hljs-literal">null</span>);
			<span class="hljs-keyword">if</span>(!c) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.greedy) {</pre></div></div>
            
        </li>
        
        
        <li id="section-144">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-144">&#182;</a>
              </div>
              <p>find droppable parents with same scope</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				scope = <span class="hljs-keyword">this</span>.options.scope;
				parent = <span class="hljs-keyword">this</span>.element.parents(<span class="hljs-string">":data(ui-droppable)"</span>).filter(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">return</span> $.data(<span class="hljs-keyword">this</span>, <span class="hljs-string">"ui-droppable"</span>).options.scope === scope;
				});

				<span class="hljs-keyword">if</span> (parent.length) {
					parentInstance = $.data(parent[<span class="hljs-number">0</span>], <span class="hljs-string">"ui-droppable"</span>);
					parentInstance.greedyChild = (c === <span class="hljs-string">"isover"</span>);
				}
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-145">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-145">&#182;</a>
              </div>
              <p>we just moved into a greedy child</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (parentInstance &amp;&amp; c === <span class="hljs-string">"isover"</span>) {
				parentInstance.isover = <span class="hljs-literal">false</span>;
				parentInstance.isout = <span class="hljs-literal">true</span>;
				parentInstance._out.call(parentInstance, event);
			}

			<span class="hljs-keyword">this</span>[c] = <span class="hljs-literal">true</span>;
			<span class="hljs-keyword">this</span>[c === <span class="hljs-string">"isout"</span> ? <span class="hljs-string">"isover"</span> : <span class="hljs-string">"isout"</span>] = <span class="hljs-literal">false</span>;
			<span class="hljs-keyword">this</span>[c === <span class="hljs-string">"isover"</span> ? <span class="hljs-string">"_over"</span> : <span class="hljs-string">"_out"</span>].call(<span class="hljs-keyword">this</span>, event);</pre></div></div>
            
        </li>
        
        
        <li id="section-146">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-146">&#182;</a>
              </div>
              <p>we just moved out of a greedy child</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (parentInstance &amp;&amp; c === <span class="hljs-string">"isout"</span>) {
				parentInstance.isout = <span class="hljs-literal">false</span>;
				parentInstance.isover = <span class="hljs-literal">true</span>;
				parentInstance._over.call(parentInstance, event);
			}
		});

	},
	dragStop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( draggable, event )</span> {</span>
		draggable.element.parentsUntil( <span class="hljs-string">"body"</span> ).unbind( <span class="hljs-string">"scroll.droppable"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-147">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-147">&#182;</a>
              </div>
              <p>Call prepareOffsets one final time since IE does not fire return scroll events when overflow was caused by drag (see #5003)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>( !draggable.options.refreshPositions ) {
			$.ui.ddmanager.prepareOffsets( draggable, event );
		}
	}
};

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">num</span><span class="hljs-params">(v)</span> {</span>
	<span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(v, <span class="hljs-number">10</span>) || <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumber</span><span class="hljs-params">(value)</span> {</span>
	<span class="hljs-keyword">return</span> !<span class="hljs-built_in">isNaN</span>(<span class="hljs-built_in">parseInt</span>(value, <span class="hljs-number">10</span>));
}

$.widget(<span class="hljs-string">"ui.resizable"</span>, $.ui.mouse, {
	version: <span class="hljs-string">"1.10.3"</span>,
	widgetEventPrefix: <span class="hljs-string">"resize"</span>,
	options: {
		alsoResize: <span class="hljs-literal">false</span>,
		animate: <span class="hljs-literal">false</span>,
		animateDuration: <span class="hljs-string">"slow"</span>,
		animateEasing: <span class="hljs-string">"swing"</span>,
		aspectRatio: <span class="hljs-literal">false</span>,
		autoHide: <span class="hljs-literal">false</span>,
		containment: <span class="hljs-literal">false</span>,
		ghost: <span class="hljs-literal">false</span>,
		grid: <span class="hljs-literal">false</span>,
		handles: <span class="hljs-string">"e,s,se"</span>,
		helper: <span class="hljs-literal">false</span>,
		maxHeight: <span class="hljs-literal">null</span>,
		maxWidth: <span class="hljs-literal">null</span>,
		minHeight: <span class="hljs-number">10</span>,
		minWidth: <span class="hljs-number">10</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-148">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-148">&#182;</a>
              </div>
              <p>See #7960</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		zIndex: <span class="hljs-number">90</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-149">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-149">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		resize: <span class="hljs-literal">null</span>,
		start: <span class="hljs-literal">null</span>,
		stop: <span class="hljs-literal">null</span>
	},
	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">var</span> n, i, handle, axis, hname,
			that = <span class="hljs-keyword">this</span>,
			o = <span class="hljs-keyword">this</span>.options;
		<span class="hljs-keyword">this</span>.element.addClass(<span class="hljs-string">"ui-resizable"</span>);

		$.extend(<span class="hljs-keyword">this</span>, {
			_aspectRatio: !!(o.aspectRatio),
			aspectRatio: o.aspectRatio,
			originalElement: <span class="hljs-keyword">this</span>.element,
			_proportionallyResizeElements: [],
			_helper: o.helper || o.ghost || o.animate ? o.helper || <span class="hljs-string">"ui-resizable-helper"</span> : <span class="hljs-literal">null</span>
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-150">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-150">&#182;</a>
              </div>
              <p>Wrap the element if it cannot hold child nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>].nodeName.match(<span class="hljs-regexp">/canvas|textarea|input|select|button|img/i</span>)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-151">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-151">&#182;</a>
              </div>
              <p>Create a wrapper element and set the wrapper to the new current internal element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.element.wrap(
				$(<span class="hljs-string">"&lt;div class='ui-wrapper' style='overflow: hidden;'&gt;&lt;/div&gt;"</span>).css({
					position: <span class="hljs-keyword">this</span>.element.css(<span class="hljs-string">"position"</span>),
					width: <span class="hljs-keyword">this</span>.element.outerWidth(),
					height: <span class="hljs-keyword">this</span>.element.outerHeight(),
					top: <span class="hljs-keyword">this</span>.element.css(<span class="hljs-string">"top"</span>),
					left: <span class="hljs-keyword">this</span>.element.css(<span class="hljs-string">"left"</span>)
				})
			);</pre></div></div>
            
        </li>
        
        
        <li id="section-152">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-152">&#182;</a>
              </div>
              <p>Overwrite the original this.element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.element = <span class="hljs-keyword">this</span>.element.parent().data(
				<span class="hljs-string">"ui-resizable"</span>, <span class="hljs-keyword">this</span>.element.data(<span class="hljs-string">"ui-resizable"</span>)
			);

			<span class="hljs-keyword">this</span>.elementIsWrapper = <span class="hljs-literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-153">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-153">&#182;</a>
              </div>
              <p>Move margins to the wrapper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.element.css({ marginLeft: <span class="hljs-keyword">this</span>.originalElement.css(<span class="hljs-string">"marginLeft"</span>), marginTop: <span class="hljs-keyword">this</span>.originalElement.css(<span class="hljs-string">"marginTop"</span>), marginRight: <span class="hljs-keyword">this</span>.originalElement.css(<span class="hljs-string">"marginRight"</span>), marginBottom: <span class="hljs-keyword">this</span>.originalElement.css(<span class="hljs-string">"marginBottom"</span>) });
			<span class="hljs-keyword">this</span>.originalElement.css({ marginLeft: <span class="hljs-number">0</span>, marginTop: <span class="hljs-number">0</span>, marginRight: <span class="hljs-number">0</span>, marginBottom: <span class="hljs-number">0</span>});</pre></div></div>
            
        </li>
        
        
        <li id="section-154">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-154">&#182;</a>
              </div>
              <p>Prevent Safari textarea resize</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.originalResizeStyle = <span class="hljs-keyword">this</span>.originalElement.css(<span class="hljs-string">"resize"</span>);
			<span class="hljs-keyword">this</span>.originalElement.css(<span class="hljs-string">"resize"</span>, <span class="hljs-string">"none"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-155">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-155">&#182;</a>
              </div>
              <p>Push the actual element to our proportionallyResize internal array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>._proportionallyResizeElements.push(<span class="hljs-keyword">this</span>.originalElement.css({ position: <span class="hljs-string">"static"</span>, zoom: <span class="hljs-number">1</span>, display: <span class="hljs-string">"block"</span> }));</pre></div></div>
            
        </li>
        
        
        <li id="section-156">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-156">&#182;</a>
              </div>
              <p>avoid IE jump (hard set the margin)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.originalElement.css({ margin: <span class="hljs-keyword">this</span>.originalElement.css(<span class="hljs-string">"margin"</span>) });</pre></div></div>
            
        </li>
        
        
        <li id="section-157">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-157">&#182;</a>
              </div>
              <p>fix handlers offset</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>._proportionallyResize();

		}

		<span class="hljs-keyword">this</span>.handles = o.handles || (!$(<span class="hljs-string">".ui-resizable-handle"</span>, <span class="hljs-keyword">this</span>.element).length ? <span class="hljs-string">"e,s,se"</span> : { n: <span class="hljs-string">".ui-resizable-n"</span>, e: <span class="hljs-string">".ui-resizable-e"</span>, s: <span class="hljs-string">".ui-resizable-s"</span>, w: <span class="hljs-string">".ui-resizable-w"</span>, se: <span class="hljs-string">".ui-resizable-se"</span>, sw: <span class="hljs-string">".ui-resizable-sw"</span>, ne: <span class="hljs-string">".ui-resizable-ne"</span>, nw: <span class="hljs-string">".ui-resizable-nw"</span> });
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.handles.constructor === <span class="hljs-built_in">String</span>) {

			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.handles === <span class="hljs-string">"all"</span>) {
				<span class="hljs-keyword">this</span>.handles = <span class="hljs-string">"n,e,s,w,se,sw,ne,nw"</span>;
			}

			n = <span class="hljs-keyword">this</span>.handles.split(<span class="hljs-string">","</span>);
			<span class="hljs-keyword">this</span>.handles = {};

			<span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; n.length; i++) {

				handle = $.trim(n[i]);
				hname = <span class="hljs-string">"ui-resizable-"</span>+handle;
				axis = $(<span class="hljs-string">"&lt;div class='ui-resizable-handle "</span> + hname + <span class="hljs-string">"'&gt;&lt;/div&gt;"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-158">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-158">&#182;</a>
              </div>
              <p>Apply zIndex to all handles - see #7960</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				axis.css({ zIndex: o.zIndex });</pre></div></div>
            
        </li>
        
        
        <li id="section-159">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-159">&#182;</a>
              </div>
              <p>TODO : What’s going on here?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> (<span class="hljs-string">"se"</span> === handle) {
					axis.addClass(<span class="hljs-string">"ui-icon ui-icon-gripsmall-diagonal-se"</span>);
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-160">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-160">&#182;</a>
              </div>
              <p>Insert into internal handles object and append to element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">this</span>.handles[handle] = <span class="hljs-string">".ui-resizable-"</span>+handle;
				<span class="hljs-keyword">this</span>.element.append(axis);
			}

		}

		<span class="hljs-keyword">this</span>._renderAxis = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target)</span> {</span>

			<span class="hljs-keyword">var</span> i, axis, padPos, padWrapper;

			target = target || <span class="hljs-keyword">this</span>.element;

			<span class="hljs-keyword">for</span>(i <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.handles) {

				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.handles[i].constructor === <span class="hljs-built_in">String</span>) {
					<span class="hljs-keyword">this</span>.handles[i] = $(<span class="hljs-keyword">this</span>.handles[i], <span class="hljs-keyword">this</span>.element).show();
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-161">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-161">&#182;</a>
              </div>
              <p>Apply pad to wrapper element, needed to fix axis position (textarea, inputs, scrolls)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementIsWrapper &amp;&amp; <span class="hljs-keyword">this</span>.originalElement[<span class="hljs-number">0</span>].nodeName.match(<span class="hljs-regexp">/textarea|input|select|button/i</span>)) {

					axis = $(<span class="hljs-keyword">this</span>.handles[i], <span class="hljs-keyword">this</span>.element);</pre></div></div>
            
        </li>
        
        
        <li id="section-162">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-162">&#182;</a>
              </div>
              <p>Checking the correct pad and border</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					padWrapper = <span class="hljs-regexp">/sw|ne|nw|se|n|s/</span>.test(i) ? axis.outerHeight() : axis.outerWidth();</pre></div></div>
            
        </li>
        
        
        <li id="section-163">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-163">&#182;</a>
              </div>
              <p>The padding type i have to apply…</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					padPos = [ <span class="hljs-string">"padding"</span>,
						<span class="hljs-regexp">/ne|nw|n/</span>.test(i) ? <span class="hljs-string">"Top"</span> :
						<span class="hljs-regexp">/se|sw|s/</span>.test(i) ? <span class="hljs-string">"Bottom"</span> :
						<span class="hljs-regexp">/^e$/</span>.test(i) ? <span class="hljs-string">"Right"</span> : <span class="hljs-string">"Left"</span> ].join(<span class="hljs-string">""</span>);

					target.css(padPos, padWrapper);

					<span class="hljs-keyword">this</span>._proportionallyResize();

				}</pre></div></div>
            
        </li>
        
        
        <li id="section-164">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-164">&#182;</a>
              </div>
              <p>TODO: What’s that good for? There’s not anything to be executed left</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>(!$(<span class="hljs-keyword">this</span>.handles[i]).length) {
					<span class="hljs-keyword">continue</span>;
				}
			}
		};</pre></div></div>
            
        </li>
        
        
        <li id="section-165">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-165">&#182;</a>
              </div>
              <p>TODO: make renderAxis a prototype function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._renderAxis(<span class="hljs-keyword">this</span>.element);

		<span class="hljs-keyword">this</span>._handles = $(<span class="hljs-string">".ui-resizable-handle"</span>, <span class="hljs-keyword">this</span>.element)
			.disableSelection();</pre></div></div>
            
        </li>
        
        
        <li id="section-166">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-166">&#182;</a>
              </div>
              <p>Matching axis name</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._handles.mouseover(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span> (!that.resizing) {
				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.className) {
					axis = <span class="hljs-keyword">this</span>.className.match(<span class="hljs-regexp">/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i</span>);
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-167">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-167">&#182;</a>
              </div>
              <p>Axis, default = se</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				that.axis = axis &amp;&amp; axis[<span class="hljs-number">1</span>] ? axis[<span class="hljs-number">1</span>] : <span class="hljs-string">"se"</span>;
			}
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-168">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-168">&#182;</a>
              </div>
              <p>If we want to auto hide the elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (o.autoHide) {
			<span class="hljs-keyword">this</span>._handles.hide();
			$(<span class="hljs-keyword">this</span>.element)
				.addClass(<span class="hljs-string">"ui-resizable-autohide"</span>)
				.mouseenter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">if</span> (o.disabled) {
						<span class="hljs-keyword">return</span>;
					}
					$(<span class="hljs-keyword">this</span>).removeClass(<span class="hljs-string">"ui-resizable-autohide"</span>);
					that._handles.show();
				})
				.mouseleave(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
					<span class="hljs-keyword">if</span> (o.disabled) {
						<span class="hljs-keyword">return</span>;
					}
					<span class="hljs-keyword">if</span> (!that.resizing) {
						$(<span class="hljs-keyword">this</span>).addClass(<span class="hljs-string">"ui-resizable-autohide"</span>);
						that._handles.hide();
					}
				});
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-169">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-169">&#182;</a>
              </div>
              <p>Initialize the mouse interaction</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._mouseInit();

	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">this</span>._mouseDestroy();

		<span class="hljs-keyword">var</span> wrapper,
			_destroy = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(exp)</span> {</span>
				$(exp).removeClass(<span class="hljs-string">"ui-resizable ui-resizable-disabled ui-resizable-resizing"</span>)
					.removeData(<span class="hljs-string">"resizable"</span>).removeData(<span class="hljs-string">"ui-resizable"</span>).unbind(<span class="hljs-string">".resizable"</span>).find(<span class="hljs-string">".ui-resizable-handle"</span>).remove();
			};</pre></div></div>
            
        </li>
        
        
        <li id="section-170">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-170">&#182;</a>
              </div>
              <p>TODO: Unwrap at same DOM position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.elementIsWrapper) {
			_destroy(<span class="hljs-keyword">this</span>.element);
			wrapper = <span class="hljs-keyword">this</span>.element;
			<span class="hljs-keyword">this</span>.originalElement.css({
				position: wrapper.css(<span class="hljs-string">"position"</span>),
				width: wrapper.outerWidth(),
				height: wrapper.outerHeight(),
				top: wrapper.css(<span class="hljs-string">"top"</span>),
				left: wrapper.css(<span class="hljs-string">"left"</span>)
			}).insertAfter( wrapper );
			wrapper.remove();
		}

		<span class="hljs-keyword">this</span>.originalElement.css(<span class="hljs-string">"resize"</span>, <span class="hljs-keyword">this</span>.originalResizeStyle);
		_destroy(<span class="hljs-keyword">this</span>.originalElement);

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},

	_mouseCapture: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">var</span> i, handle,
			capture = <span class="hljs-literal">false</span>;

		<span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.handles) {
			handle = $(<span class="hljs-keyword">this</span>.handles[i])[<span class="hljs-number">0</span>];
			<span class="hljs-keyword">if</span> (handle === event.target || $.contains(handle, event.target)) {
				capture = <span class="hljs-literal">true</span>;
			}
		}

		<span class="hljs-keyword">return</span> !<span class="hljs-keyword">this</span>.options.disabled &amp;&amp; capture;
	},

	_mouseStart: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>

		<span class="hljs-keyword">var</span> curleft, curtop, cursor,
			o = <span class="hljs-keyword">this</span>.options,
			iniPos = <span class="hljs-keyword">this</span>.element.position(),
			el = <span class="hljs-keyword">this</span>.element;

		<span class="hljs-keyword">this</span>.resizing = <span class="hljs-literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-171">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-171">&#182;</a>
              </div>
              <p>bugfix for <a href="http://dev.jquery.com/ticket/1749">http://dev.jquery.com/ticket/1749</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( (<span class="hljs-regexp">/absolute/</span>).test( el.css(<span class="hljs-string">"position"</span>) ) ) {
			el.css({ position: <span class="hljs-string">"absolute"</span>, top: el.css(<span class="hljs-string">"top"</span>), left: el.css(<span class="hljs-string">"left"</span>) });
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (el.is(<span class="hljs-string">".ui-draggable"</span>)) {
			el.css({ position: <span class="hljs-string">"absolute"</span>, top: iniPos.top, left: iniPos.left });
		}

		<span class="hljs-keyword">this</span>._renderProxy();

		curleft = num(<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"left"</span>));
		curtop = num(<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"top"</span>));

		<span class="hljs-keyword">if</span> (o.containment) {
			curleft += $(o.containment).scrollLeft() || <span class="hljs-number">0</span>;
			curtop += $(o.containment).scrollTop() || <span class="hljs-number">0</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-172">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-172">&#182;</a>
              </div>
              <p>Store needed variables</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.offset = <span class="hljs-keyword">this</span>.helper.offset();
		<span class="hljs-keyword">this</span>.position = { left: curleft, top: curtop };
		<span class="hljs-keyword">this</span>.size = <span class="hljs-keyword">this</span>._helper ? { width: el.outerWidth(), height: el.outerHeight() } : { width: el.width(), height: el.height() };
		<span class="hljs-keyword">this</span>.originalSize = <span class="hljs-keyword">this</span>._helper ? { width: el.outerWidth(), height: el.outerHeight() } : { width: el.width(), height: el.height() };
		<span class="hljs-keyword">this</span>.originalPosition = { left: curleft, top: curtop };
		<span class="hljs-keyword">this</span>.sizeDiff = { width: el.outerWidth() - el.width(), height: el.outerHeight() - el.height() };
		<span class="hljs-keyword">this</span>.originalMousePosition = { left: event.pageX, top: event.pageY };</pre></div></div>
            
        </li>
        
        
        <li id="section-173">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-173">&#182;</a>
              </div>
              <p>Aspect Ratio</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.aspectRatio = (<span class="hljs-keyword">typeof</span> o.aspectRatio === <span class="hljs-string">"number"</span>) ? o.aspectRatio : ((<span class="hljs-keyword">this</span>.originalSize.width / <span class="hljs-keyword">this</span>.originalSize.height) || <span class="hljs-number">1</span>);

		cursor = $(<span class="hljs-string">".ui-resizable-"</span> + <span class="hljs-keyword">this</span>.axis).css(<span class="hljs-string">"cursor"</span>);
		$(<span class="hljs-string">"body"</span>).css(<span class="hljs-string">"cursor"</span>, cursor === <span class="hljs-string">"auto"</span> ? <span class="hljs-keyword">this</span>.axis + <span class="hljs-string">"-resize"</span> : cursor);

		el.addClass(<span class="hljs-string">"ui-resizable-resizing"</span>);
		<span class="hljs-keyword">this</span>._propagate(<span class="hljs-string">"start"</span>, event);
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	},

	_mouseDrag: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-174">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-174">&#182;</a>
              </div>
              <p>Increase performance, avoid regex</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> data,
			el = <span class="hljs-keyword">this</span>.helper, props = {},
			smp = <span class="hljs-keyword">this</span>.originalMousePosition,
			a = <span class="hljs-keyword">this</span>.axis,
			prevTop = <span class="hljs-keyword">this</span>.position.top,
			prevLeft = <span class="hljs-keyword">this</span>.position.left,
			prevWidth = <span class="hljs-keyword">this</span>.size.width,
			prevHeight = <span class="hljs-keyword">this</span>.size.height,
			dx = (event.pageX-smp.left)||<span class="hljs-number">0</span>,
			dy = (event.pageY-smp.top)||<span class="hljs-number">0</span>,
			trigger = <span class="hljs-keyword">this</span>._change[a];

		<span class="hljs-keyword">if</span> (!trigger) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-175">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-175">&#182;</a>
              </div>
              <p>Calculate the attrs that will be change</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		data = trigger.apply(<span class="hljs-keyword">this</span>, [event, dx, dy]);</pre></div></div>
            
        </li>
        
        
        <li id="section-176">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-176">&#182;</a>
              </div>
              <p>Put this in the mouseDrag handler since the user can start pressing shift while resizing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._updateVirtualBoundaries(event.shiftKey);
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._aspectRatio || event.shiftKey) {
			data = <span class="hljs-keyword">this</span>._updateRatio(data, event);
		}

		data = <span class="hljs-keyword">this</span>._respectSize(data, event);

		<span class="hljs-keyword">this</span>._updateCache(data);</pre></div></div>
            
        </li>
        
        
        <li id="section-177">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-177">&#182;</a>
              </div>
              <p>plugins callbacks need to be called first</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._propagate(<span class="hljs-string">"resize"</span>, event);

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.position.top !== prevTop) {
			props.top = <span class="hljs-keyword">this</span>.position.top + <span class="hljs-string">"px"</span>;
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.position.left !== prevLeft) {
			props.left = <span class="hljs-keyword">this</span>.position.left + <span class="hljs-string">"px"</span>;
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.size.width !== prevWidth) {
			props.width = <span class="hljs-keyword">this</span>.size.width + <span class="hljs-string">"px"</span>;
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.size.height !== prevHeight) {
			props.height = <span class="hljs-keyword">this</span>.size.height + <span class="hljs-string">"px"</span>;
		}
		el.css(props);

		<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._helper &amp;&amp; <span class="hljs-keyword">this</span>._proportionallyResizeElements.length) {
			<span class="hljs-keyword">this</span>._proportionallyResize();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-178">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-178">&#182;</a>
              </div>
              <p>Call the user callback if the element was resized</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ! $.isEmptyObject(props) ) {
			<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"resize"</span>, event, <span class="hljs-keyword">this</span>.ui());
		}

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	},

	_mouseStop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>

		<span class="hljs-keyword">this</span>.resizing = <span class="hljs-literal">false</span>;
		<span class="hljs-keyword">var</span> pr, ista, soffseth, soffsetw, s, left, top,
			o = <span class="hljs-keyword">this</span>.options, that = <span class="hljs-keyword">this</span>;

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._helper) {

			pr = <span class="hljs-keyword">this</span>._proportionallyResizeElements;
			ista = pr.length &amp;&amp; (<span class="hljs-regexp">/textarea/i</span>).test(pr[<span class="hljs-number">0</span>].nodeName);
			soffseth = ista &amp;&amp; $.ui.hasScroll(pr[<span class="hljs-number">0</span>], <span class="hljs-string">"left"</span>) <span class="hljs-comment">/* TODO - jump height */</span> ? <span class="hljs-number">0</span> : that.sizeDiff.height;
			soffsetw = ista ? <span class="hljs-number">0</span> : that.sizeDiff.width;

			s = { width: (that.helper.width()  - soffsetw), height: (that.helper.height() - soffseth) };
			left = (<span class="hljs-built_in">parseInt</span>(that.element.css(<span class="hljs-string">"left"</span>), <span class="hljs-number">10</span>) + (that.position.left - that.originalPosition.left)) || <span class="hljs-literal">null</span>;
			top = (<span class="hljs-built_in">parseInt</span>(that.element.css(<span class="hljs-string">"top"</span>), <span class="hljs-number">10</span>) + (that.position.top - that.originalPosition.top)) || <span class="hljs-literal">null</span>;

			<span class="hljs-keyword">if</span> (!o.animate) {
				<span class="hljs-keyword">this</span>.element.css($.extend(s, { top: top, left: left }));
			}

			that.helper.height(that.size.height);
			that.helper.width(that.size.width);

			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._helper &amp;&amp; !o.animate) {
				<span class="hljs-keyword">this</span>._proportionallyResize();
			}
		}

		$(<span class="hljs-string">"body"</span>).css(<span class="hljs-string">"cursor"</span>, <span class="hljs-string">"auto"</span>);

		<span class="hljs-keyword">this</span>.element.removeClass(<span class="hljs-string">"ui-resizable-resizing"</span>);

		<span class="hljs-keyword">this</span>._propagate(<span class="hljs-string">"stop"</span>, event);

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._helper) {
			<span class="hljs-keyword">this</span>.helper.remove();
		}

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

	},

	_updateVirtualBoundaries: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(forceAspectRatio)</span> {</span>
		<span class="hljs-keyword">var</span> pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b,
			o = <span class="hljs-keyword">this</span>.options;

		b = {
			minWidth: isNumber(o.minWidth) ? o.minWidth : <span class="hljs-number">0</span>,
			maxWidth: isNumber(o.maxWidth) ? o.maxWidth : <span class="hljs-literal">Infinity</span>,
			minHeight: isNumber(o.minHeight) ? o.minHeight : <span class="hljs-number">0</span>,
			maxHeight: isNumber(o.maxHeight) ? o.maxHeight : <span class="hljs-literal">Infinity</span>
		};

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._aspectRatio || forceAspectRatio) {</pre></div></div>
            
        </li>
        
        
        <li id="section-179">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-179">&#182;</a>
              </div>
              <p>We want to create an enclosing box whose aspect ration is the requested one
First, compute the “projected” size for each dimension based on the aspect ratio and other dimension</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			pMinWidth = b.minHeight * <span class="hljs-keyword">this</span>.aspectRatio;
			pMinHeight = b.minWidth / <span class="hljs-keyword">this</span>.aspectRatio;
			pMaxWidth = b.maxHeight * <span class="hljs-keyword">this</span>.aspectRatio;
			pMaxHeight = b.maxWidth / <span class="hljs-keyword">this</span>.aspectRatio;

			<span class="hljs-keyword">if</span>(pMinWidth &gt; b.minWidth) {
				b.minWidth = pMinWidth;
			}
			<span class="hljs-keyword">if</span>(pMinHeight &gt; b.minHeight) {
				b.minHeight = pMinHeight;
			}
			<span class="hljs-keyword">if</span>(pMaxWidth &lt; b.maxWidth) {
				b.maxWidth = pMaxWidth;
			}
			<span class="hljs-keyword">if</span>(pMaxHeight &lt; b.maxHeight) {
				b.maxHeight = pMaxHeight;
			}
		}
		<span class="hljs-keyword">this</span>._vBoundaries = b;
	},

	_updateCache: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> {</span>
		<span class="hljs-keyword">this</span>.offset = <span class="hljs-keyword">this</span>.helper.offset();
		<span class="hljs-keyword">if</span> (isNumber(data.left)) {
			<span class="hljs-keyword">this</span>.position.left = data.left;
		}
		<span class="hljs-keyword">if</span> (isNumber(data.top)) {
			<span class="hljs-keyword">this</span>.position.top = data.top;
		}
		<span class="hljs-keyword">if</span> (isNumber(data.height)) {
			<span class="hljs-keyword">this</span>.size.height = data.height;
		}
		<span class="hljs-keyword">if</span> (isNumber(data.width)) {
			<span class="hljs-keyword">this</span>.size.width = data.width;
		}
	},

	_updateRatio: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( data )</span> {</span>

		<span class="hljs-keyword">var</span> cpos = <span class="hljs-keyword">this</span>.position,
			csize = <span class="hljs-keyword">this</span>.size,
			a = <span class="hljs-keyword">this</span>.axis;

		<span class="hljs-keyword">if</span> (isNumber(data.height)) {
			data.width = (data.height * <span class="hljs-keyword">this</span>.aspectRatio);
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isNumber(data.width)) {
			data.height = (data.width / <span class="hljs-keyword">this</span>.aspectRatio);
		}

		<span class="hljs-keyword">if</span> (a === <span class="hljs-string">"sw"</span>) {
			data.left = cpos.left + (csize.width - data.width);
			data.top = <span class="hljs-literal">null</span>;
		}
		<span class="hljs-keyword">if</span> (a === <span class="hljs-string">"nw"</span>) {
			data.top = cpos.top + (csize.height - data.height);
			data.left = cpos.left + (csize.width - data.width);
		}

		<span class="hljs-keyword">return</span> data;
	},

	_respectSize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( data )</span> {</span>

		<span class="hljs-keyword">var</span> o = <span class="hljs-keyword">this</span>._vBoundaries,
			a = <span class="hljs-keyword">this</span>.axis,
			ismaxw = isNumber(data.width) &amp;&amp; o.maxWidth &amp;&amp; (o.maxWidth &lt; data.width), ismaxh = isNumber(data.height) &amp;&amp; o.maxHeight &amp;&amp; (o.maxHeight &lt; data.height),
			isminw = isNumber(data.width) &amp;&amp; o.minWidth &amp;&amp; (o.minWidth &gt; data.width), isminh = isNumber(data.height) &amp;&amp; o.minHeight &amp;&amp; (o.minHeight &gt; data.height),
			dw = <span class="hljs-keyword">this</span>.originalPosition.left + <span class="hljs-keyword">this</span>.originalSize.width,
			dh = <span class="hljs-keyword">this</span>.position.top + <span class="hljs-keyword">this</span>.size.height,
			cw = <span class="hljs-regexp">/sw|nw|w/</span>.test(a), ch = <span class="hljs-regexp">/nw|ne|n/</span>.test(a);
		<span class="hljs-keyword">if</span> (isminw) {
			data.width = o.minWidth;
		}
		<span class="hljs-keyword">if</span> (isminh) {
			data.height = o.minHeight;
		}
		<span class="hljs-keyword">if</span> (ismaxw) {
			data.width = o.maxWidth;
		}
		<span class="hljs-keyword">if</span> (ismaxh) {
			data.height = o.maxHeight;
		}

		<span class="hljs-keyword">if</span> (isminw &amp;&amp; cw) {
			data.left = dw - o.minWidth;
		}
		<span class="hljs-keyword">if</span> (ismaxw &amp;&amp; cw) {
			data.left = dw - o.maxWidth;
		}
		<span class="hljs-keyword">if</span> (isminh &amp;&amp; ch) {
			data.top = dh - o.minHeight;
		}
		<span class="hljs-keyword">if</span> (ismaxh &amp;&amp; ch) {
			data.top = dh - o.maxHeight;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-180">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-180">&#182;</a>
              </div>
              <p>fixing jump error on top/left - bug #2330</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (!data.width &amp;&amp; !data.height &amp;&amp; !data.left &amp;&amp; data.top) {
			data.top = <span class="hljs-literal">null</span>;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!data.width &amp;&amp; !data.height &amp;&amp; !data.top &amp;&amp; data.left) {
			data.left = <span class="hljs-literal">null</span>;
		}

		<span class="hljs-keyword">return</span> data;
	},

	_proportionallyResize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._proportionallyResizeElements.length) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">var</span> i, j, borders, paddings, prel,
			element = <span class="hljs-keyword">this</span>.helper || <span class="hljs-keyword">this</span>.element;

		<span class="hljs-keyword">for</span> ( i=<span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>._proportionallyResizeElements.length; i++) {

			prel = <span class="hljs-keyword">this</span>._proportionallyResizeElements[i];

			<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.borderDif) {
				<span class="hljs-keyword">this</span>.borderDif = [];
				borders = [prel.css(<span class="hljs-string">"borderTopWidth"</span>), prel.css(<span class="hljs-string">"borderRightWidth"</span>), prel.css(<span class="hljs-string">"borderBottomWidth"</span>), prel.css(<span class="hljs-string">"borderLeftWidth"</span>)];
				paddings = [prel.css(<span class="hljs-string">"paddingTop"</span>), prel.css(<span class="hljs-string">"paddingRight"</span>), prel.css(<span class="hljs-string">"paddingBottom"</span>), prel.css(<span class="hljs-string">"paddingLeft"</span>)];

				<span class="hljs-keyword">for</span> ( j = <span class="hljs-number">0</span>; j &lt; borders.length; j++ ) {
					<span class="hljs-keyword">this</span>.borderDif[ j ] = ( <span class="hljs-built_in">parseInt</span>( borders[ j ], <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span> ) + ( <span class="hljs-built_in">parseInt</span>( paddings[ j ], <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span> );
				}
			}

			prel.css({
				height: (element.height() - <span class="hljs-keyword">this</span>.borderDif[<span class="hljs-number">0</span>] - <span class="hljs-keyword">this</span>.borderDif[<span class="hljs-number">2</span>]) || <span class="hljs-number">0</span>,
				width: (element.width() - <span class="hljs-keyword">this</span>.borderDif[<span class="hljs-number">1</span>] - <span class="hljs-keyword">this</span>.borderDif[<span class="hljs-number">3</span>]) || <span class="hljs-number">0</span>
			});

		}

	},

	_renderProxy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">var</span> el = <span class="hljs-keyword">this</span>.element, o = <span class="hljs-keyword">this</span>.options;
		<span class="hljs-keyword">this</span>.elementOffset = el.offset();

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._helper) {

			<span class="hljs-keyword">this</span>.helper = <span class="hljs-keyword">this</span>.helper || $(<span class="hljs-string">"&lt;div style='overflow:hidden;'&gt;&lt;/div&gt;"</span>);

			<span class="hljs-keyword">this</span>.helper.addClass(<span class="hljs-keyword">this</span>._helper).css({
				width: <span class="hljs-keyword">this</span>.element.outerWidth() - <span class="hljs-number">1</span>,
				height: <span class="hljs-keyword">this</span>.element.outerHeight() - <span class="hljs-number">1</span>,
				position: <span class="hljs-string">"absolute"</span>,
				left: <span class="hljs-keyword">this</span>.elementOffset.left +<span class="hljs-string">"px"</span>,
				top: <span class="hljs-keyword">this</span>.elementOffset.top +<span class="hljs-string">"px"</span>,
				zIndex: ++o.zIndex <span class="hljs-comment">//TODO: Don't modify option</span>
			});

			<span class="hljs-keyword">this</span>.helper
				.appendTo(<span class="hljs-string">"body"</span>)
				.disableSelection();

		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.helper = <span class="hljs-keyword">this</span>.element;
		}

	},

	_change: {
		e: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, dx)</span> {</span>
			<span class="hljs-keyword">return</span> { width: <span class="hljs-keyword">this</span>.originalSize.width + dx };
		},
		w: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, dx)</span> {</span>
			<span class="hljs-keyword">var</span> cs = <span class="hljs-keyword">this</span>.originalSize, sp = <span class="hljs-keyword">this</span>.originalPosition;
			<span class="hljs-keyword">return</span> { left: sp.left + dx, width: cs.width - dx };
		},
		n: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, dx, dy)</span> {</span>
			<span class="hljs-keyword">var</span> cs = <span class="hljs-keyword">this</span>.originalSize, sp = <span class="hljs-keyword">this</span>.originalPosition;
			<span class="hljs-keyword">return</span> { top: sp.top + dy, height: cs.height - dy };
		},
		s: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, dx, dy)</span> {</span>
			<span class="hljs-keyword">return</span> { height: <span class="hljs-keyword">this</span>.originalSize.height + dy };
		},
		se: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, dx, dy)</span> {</span>
			<span class="hljs-keyword">return</span> $.extend(<span class="hljs-keyword">this</span>._change.s.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>), <span class="hljs-keyword">this</span>._change.e.apply(<span class="hljs-keyword">this</span>, [event, dx, dy]));
		},
		sw: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, dx, dy)</span> {</span>
			<span class="hljs-keyword">return</span> $.extend(<span class="hljs-keyword">this</span>._change.s.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>), <span class="hljs-keyword">this</span>._change.w.apply(<span class="hljs-keyword">this</span>, [event, dx, dy]));
		},
		ne: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, dx, dy)</span> {</span>
			<span class="hljs-keyword">return</span> $.extend(<span class="hljs-keyword">this</span>._change.n.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>), <span class="hljs-keyword">this</span>._change.e.apply(<span class="hljs-keyword">this</span>, [event, dx, dy]));
		},
		nw: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, dx, dy)</span> {</span>
			<span class="hljs-keyword">return</span> $.extend(<span class="hljs-keyword">this</span>._change.n.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>), <span class="hljs-keyword">this</span>._change.w.apply(<span class="hljs-keyword">this</span>, [event, dx, dy]));
		}
	},

	_propagate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(n, event)</span> {</span>
		$.ui.plugin.call(<span class="hljs-keyword">this</span>, n, [event, <span class="hljs-keyword">this</span>.ui()]);
		(n !== <span class="hljs-string">"resize"</span> &amp;&amp; <span class="hljs-keyword">this</span>._trigger(n, event, <span class="hljs-keyword">this</span>.ui()));
	},

	plugins: {},

	ui: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> {
			originalElement: <span class="hljs-keyword">this</span>.originalElement,
			element: <span class="hljs-keyword">this</span>.element,
			helper: <span class="hljs-keyword">this</span>.helper,
			position: <span class="hljs-keyword">this</span>.position,
			size: <span class="hljs-keyword">this</span>.size,
			originalSize: <span class="hljs-keyword">this</span>.originalSize,
			originalPosition: <span class="hljs-keyword">this</span>.originalPosition
		};
	}

});

<span class="hljs-comment">/*
 * Resizable Extensions
 */</span>

$.ui.plugin.add(<span class="hljs-string">"resizable"</span>, <span class="hljs-string">"animate"</span>, {

	stop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> that = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-resizable"</span>),
			o = that.options,
			pr = that._proportionallyResizeElements,
			ista = pr.length &amp;&amp; (<span class="hljs-regexp">/textarea/i</span>).test(pr[<span class="hljs-number">0</span>].nodeName),
			soffseth = ista &amp;&amp; $.ui.hasScroll(pr[<span class="hljs-number">0</span>], <span class="hljs-string">"left"</span>) <span class="hljs-comment">/* TODO - jump height */</span> ? <span class="hljs-number">0</span> : that.sizeDiff.height,
			soffsetw = ista ? <span class="hljs-number">0</span> : that.sizeDiff.width,
			style = { width: (that.size.width - soffsetw), height: (that.size.height - soffseth) },
			left = (<span class="hljs-built_in">parseInt</span>(that.element.css(<span class="hljs-string">"left"</span>), <span class="hljs-number">10</span>) + (that.position.left - that.originalPosition.left)) || <span class="hljs-literal">null</span>,
			top = (<span class="hljs-built_in">parseInt</span>(that.element.css(<span class="hljs-string">"top"</span>), <span class="hljs-number">10</span>) + (that.position.top - that.originalPosition.top)) || <span class="hljs-literal">null</span>;

		that.element.animate(
			$.extend(style, top &amp;&amp; left ? { top: top, left: left } : {}), {
				duration: o.animateDuration,
				easing: o.animateEasing,
				step: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

					<span class="hljs-keyword">var</span> data = {
						width: <span class="hljs-built_in">parseInt</span>(that.element.css(<span class="hljs-string">"width"</span>), <span class="hljs-number">10</span>),
						height: <span class="hljs-built_in">parseInt</span>(that.element.css(<span class="hljs-string">"height"</span>), <span class="hljs-number">10</span>),
						top: <span class="hljs-built_in">parseInt</span>(that.element.css(<span class="hljs-string">"top"</span>), <span class="hljs-number">10</span>),
						left: <span class="hljs-built_in">parseInt</span>(that.element.css(<span class="hljs-string">"left"</span>), <span class="hljs-number">10</span>)
					};

					<span class="hljs-keyword">if</span> (pr &amp;&amp; pr.length) {
						$(pr[<span class="hljs-number">0</span>]).css({ width: data.width, height: data.height });
					}</pre></div></div>
            
        </li>
        
        
        <li id="section-181">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-181">&#182;</a>
              </div>
              <p>propagating resize, and updating values for each animation step</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					that._updateCache(data);
					that._propagate(<span class="hljs-string">"resize"</span>, event);

				}
			}
		);
	}

});

$.ui.plugin.add(<span class="hljs-string">"resizable"</span>, <span class="hljs-string">"containment"</span>, {

	start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> element, p, co, ch, cw, width, height,
			that = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-resizable"</span>),
			o = that.options,
			el = that.element,
			oc = o.containment,
			ce = (oc <span class="hljs-keyword">instanceof</span> $) ? oc.get(<span class="hljs-number">0</span>) : (<span class="hljs-regexp">/parent/</span>.test(oc)) ? el.parent().get(<span class="hljs-number">0</span>) : oc;

		<span class="hljs-keyword">if</span> (!ce) {
			<span class="hljs-keyword">return</span>;
		}

		that.containerElement = $(ce);

		<span class="hljs-keyword">if</span> (<span class="hljs-regexp">/document/</span>.test(oc) || oc === document) {
			that.containerOffset = { left: <span class="hljs-number">0</span>, top: <span class="hljs-number">0</span> };
			that.containerPosition = { left: <span class="hljs-number">0</span>, top: <span class="hljs-number">0</span> };

			that.parentData = {
				element: $(document), left: <span class="hljs-number">0</span>, top: <span class="hljs-number">0</span>,
				width: $(document).width(), height: $(document).height() || document.body.parentNode.scrollHeight
			};
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-182">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-182">&#182;</a>
              </div>
              <p>i’m a node, so compute top, left, right, bottom</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">else</span> {
			element = $(ce);
			p = [];
			$([ <span class="hljs-string">"Top"</span>, <span class="hljs-string">"Right"</span>, <span class="hljs-string">"Left"</span>, <span class="hljs-string">"Bottom"</span> ]).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(i, name)</span> {</span> p[i] = num(element.css(<span class="hljs-string">"padding"</span> + name)); });

			that.containerOffset = element.offset();
			that.containerPosition = element.position();
			that.containerSize = { height: (element.innerHeight() - p[<span class="hljs-number">3</span>]), width: (element.innerWidth() - p[<span class="hljs-number">1</span>]) };

			co = that.containerOffset;
			ch = that.containerSize.height;
			cw = that.containerSize.width;
			width = ($.ui.hasScroll(ce, <span class="hljs-string">"left"</span>) ? ce.scrollWidth : cw );
			height = ($.ui.hasScroll(ce) ? ce.scrollHeight : ch);

			that.parentData = {
				element: ce, left: co.left, top: co.top, width: width, height: height
			};
		}
	},

	resize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> woset, hoset, isParent, isOffsetRelative,
			that = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-resizable"</span>),
			o = that.options,
			co = that.containerOffset, cp = that.position,
			pRatio = that._aspectRatio || event.shiftKey,
			cop = { top:<span class="hljs-number">0</span>, left:<span class="hljs-number">0</span> }, ce = that.containerElement;

		<span class="hljs-keyword">if</span> (ce[<span class="hljs-number">0</span>] !== document &amp;&amp; (<span class="hljs-regexp">/static/</span>).test(ce.css(<span class="hljs-string">"position"</span>))) {
			cop = co;
		}

		<span class="hljs-keyword">if</span> (cp.left &lt; (that._helper ? co.left : <span class="hljs-number">0</span>)) {
			that.size.width = that.size.width + (that._helper ? (that.position.left - co.left) : (that.position.left - cop.left));
			<span class="hljs-keyword">if</span> (pRatio) {
				that.size.height = that.size.width / that.aspectRatio;
			}
			that.position.left = o.helper ? co.left : <span class="hljs-number">0</span>;
		}

		<span class="hljs-keyword">if</span> (cp.top &lt; (that._helper ? co.top : <span class="hljs-number">0</span>)) {
			that.size.height = that.size.height + (that._helper ? (that.position.top - co.top) : that.position.top);
			<span class="hljs-keyword">if</span> (pRatio) {
				that.size.width = that.size.height * that.aspectRatio;
			}
			that.position.top = that._helper ? co.top : <span class="hljs-number">0</span>;
		}

		that.offset.left = that.parentData.left+that.position.left;
		that.offset.top = that.parentData.top+that.position.top;

		woset = <span class="hljs-built_in">Math</span>.abs( (that._helper ? that.offset.left - cop.left : (that.offset.left - cop.left)) + that.sizeDiff.width );
		hoset = <span class="hljs-built_in">Math</span>.abs( (that._helper ? that.offset.top - cop.top : (that.offset.top - co.top)) + that.sizeDiff.height );

		isParent = that.containerElement.get(<span class="hljs-number">0</span>) === that.element.parent().get(<span class="hljs-number">0</span>);
		isOffsetRelative = <span class="hljs-regexp">/relative|absolute/</span>.test(that.containerElement.css(<span class="hljs-string">"position"</span>));

		<span class="hljs-keyword">if</span>(isParent &amp;&amp; isOffsetRelative) {
			woset -= that.parentData.left;
		}

		<span class="hljs-keyword">if</span> (woset + that.size.width &gt;= that.parentData.width) {
			that.size.width = that.parentData.width - woset;
			<span class="hljs-keyword">if</span> (pRatio) {
				that.size.height = that.size.width / that.aspectRatio;
			}
		}

		<span class="hljs-keyword">if</span> (hoset + that.size.height &gt;= that.parentData.height) {
			that.size.height = that.parentData.height - hoset;
			<span class="hljs-keyword">if</span> (pRatio) {
				that.size.width = that.size.height * that.aspectRatio;
			}
		}
	},

	stop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
		<span class="hljs-keyword">var</span> that = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-resizable"</span>),
			o = that.options,
			co = that.containerOffset,
			cop = that.containerPosition,
			ce = that.containerElement,
			helper = $(that.helper),
			ho = helper.offset(),
			w = helper.outerWidth() - that.sizeDiff.width,
			h = helper.outerHeight() - that.sizeDiff.height;

		<span class="hljs-keyword">if</span> (that._helper &amp;&amp; !o.animate &amp;&amp; (<span class="hljs-regexp">/relative/</span>).test(ce.css(<span class="hljs-string">"position"</span>))) {
			$(<span class="hljs-keyword">this</span>).css({ left: ho.left - cop.left - co.left, width: w, height: h });
		}

		<span class="hljs-keyword">if</span> (that._helper &amp;&amp; !o.animate &amp;&amp; (<span class="hljs-regexp">/static/</span>).test(ce.css(<span class="hljs-string">"position"</span>))) {
			$(<span class="hljs-keyword">this</span>).css({ left: ho.left - cop.left - co.left, width: w, height: h });
		}

	}
});

$.ui.plugin.add(<span class="hljs-string">"resizable"</span>, <span class="hljs-string">"alsoResize"</span>, {

	start: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> that = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-resizable"</span>),
			o = that.options,
			_store = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(exp)</span> {</span>
				$(exp).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">var</span> el = $(<span class="hljs-keyword">this</span>);
					el.data(<span class="hljs-string">"ui-resizable-alsoresize"</span>, {
						width: <span class="hljs-built_in">parseInt</span>(el.width(), <span class="hljs-number">10</span>), height: <span class="hljs-built_in">parseInt</span>(el.height(), <span class="hljs-number">10</span>),
						left: <span class="hljs-built_in">parseInt</span>(el.css(<span class="hljs-string">"left"</span>), <span class="hljs-number">10</span>), top: <span class="hljs-built_in">parseInt</span>(el.css(<span class="hljs-string">"top"</span>), <span class="hljs-number">10</span>)
					});
				});
			};

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(o.alsoResize) === <span class="hljs-string">"object"</span> &amp;&amp; !o.alsoResize.parentNode) {
			<span class="hljs-keyword">if</span> (o.alsoResize.length) { o.alsoResize = o.alsoResize[<span class="hljs-number">0</span>]; _store(o.alsoResize); }
			<span class="hljs-keyword">else</span> { $.each(o.alsoResize, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(exp)</span> {</span> _store(exp); }); }
		}<span class="hljs-keyword">else</span>{
			_store(o.alsoResize);
		}
	},

	resize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(event, ui)</span> {</span>
		<span class="hljs-keyword">var</span> that = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-resizable"</span>),
			o = that.options,
			os = that.originalSize,
			op = that.originalPosition,
			delta = {
				height: (that.size.height - os.height) || <span class="hljs-number">0</span>, width: (that.size.width - os.width) || <span class="hljs-number">0</span>,
				top: (that.position.top - op.top) || <span class="hljs-number">0</span>, left: (that.position.left - op.left) || <span class="hljs-number">0</span>
			},

			_alsoResize = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(exp, c)</span> {</span>
				$(exp).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">var</span> el = $(<span class="hljs-keyword">this</span>), start = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-resizable-alsoresize"</span>), style = {},
						css = c &amp;&amp; c.length ? c : el.parents(ui.originalElement[<span class="hljs-number">0</span>]).length ? [<span class="hljs-string">"width"</span>, <span class="hljs-string">"height"</span>] : [<span class="hljs-string">"width"</span>, <span class="hljs-string">"height"</span>, <span class="hljs-string">"top"</span>, <span class="hljs-string">"left"</span>];

					$.each(css, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(i, prop)</span> {</span>
						<span class="hljs-keyword">var</span> sum = (start[prop]||<span class="hljs-number">0</span>) + (delta[prop]||<span class="hljs-number">0</span>);
						<span class="hljs-keyword">if</span> (sum &amp;&amp; sum &gt;= <span class="hljs-number">0</span>) {
							style[prop] = sum || <span class="hljs-literal">null</span>;
						}
					});

					el.css(style);
				});
			};

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(o.alsoResize) === <span class="hljs-string">"object"</span> &amp;&amp; !o.alsoResize.nodeType) {
			$.each(o.alsoResize, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(exp, c)</span> {</span> _alsoResize(exp, c); });
		}<span class="hljs-keyword">else</span>{
			_alsoResize(o.alsoResize);
		}
	},

	stop: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
		$(<span class="hljs-keyword">this</span>).removeData(<span class="hljs-string">"resizable-alsoresize"</span>);
	}
});

$.ui.plugin.add(<span class="hljs-string">"resizable"</span>, <span class="hljs-string">"ghost"</span>, {

	start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">var</span> that = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-resizable"</span>), o = that.options, cs = that.size;

		that.ghost = that.originalElement.clone();
		that.ghost
			.css({ opacity: <span class="hljs-number">0.25</span>, display: <span class="hljs-string">"block"</span>, position: <span class="hljs-string">"relative"</span>, height: cs.height, width: cs.width, margin: <span class="hljs-number">0</span>, left: <span class="hljs-number">0</span>, top: <span class="hljs-number">0</span> })
			.addClass(<span class="hljs-string">"ui-resizable-ghost"</span>)
			.addClass(<span class="hljs-keyword">typeof</span> o.ghost === <span class="hljs-string">"string"</span> ? o.ghost : <span class="hljs-string">""</span>);

		that.ghost.appendTo(that.helper);

	},

	resize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
		<span class="hljs-keyword">var</span> that = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-resizable"</span>);
		<span class="hljs-keyword">if</span> (that.ghost) {
			that.ghost.css({ position: <span class="hljs-string">"relative"</span>, height: that.size.height, width: that.size.width });
		}
	},

	stop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> that = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-resizable"</span>);
		<span class="hljs-keyword">if</span> (that.ghost &amp;&amp; that.helper) {
			that.helper.get(<span class="hljs-number">0</span>).removeChild(that.ghost.get(<span class="hljs-number">0</span>));
		}
	}

});

$.ui.plugin.add(<span class="hljs-string">"resizable"</span>, <span class="hljs-string">"grid"</span>, {

	resize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> that = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">"ui-resizable"</span>),
			o = that.options,
			cs = that.size,
			os = that.originalSize,
			op = that.originalPosition,
			a = that.axis,
			grid = <span class="hljs-keyword">typeof</span> o.grid === <span class="hljs-string">"number"</span> ? [o.grid, o.grid] : o.grid,
			gridX = (grid[<span class="hljs-number">0</span>]||<span class="hljs-number">1</span>),
			gridY = (grid[<span class="hljs-number">1</span>]||<span class="hljs-number">1</span>),
			ox = <span class="hljs-built_in">Math</span>.round((cs.width - os.width) / gridX) * gridX,
			oy = <span class="hljs-built_in">Math</span>.round((cs.height - os.height) / gridY) * gridY,
			newWidth = os.width + ox,
			newHeight = os.height + oy,
			isMaxWidth = o.maxWidth &amp;&amp; (o.maxWidth &lt; newWidth),
			isMaxHeight = o.maxHeight &amp;&amp; (o.maxHeight &lt; newHeight),
			isMinWidth = o.minWidth &amp;&amp; (o.minWidth &gt; newWidth),
			isMinHeight = o.minHeight &amp;&amp; (o.minHeight &gt; newHeight);

		o.grid = grid;

		<span class="hljs-keyword">if</span> (isMinWidth) {
			newWidth = newWidth + gridX;
		}
		<span class="hljs-keyword">if</span> (isMinHeight) {
			newHeight = newHeight + gridY;
		}
		<span class="hljs-keyword">if</span> (isMaxWidth) {
			newWidth = newWidth - gridX;
		}
		<span class="hljs-keyword">if</span> (isMaxHeight) {
			newHeight = newHeight - gridY;
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^(se|s|e)$/</span>.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^(ne)$/</span>.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.top = op.top - oy;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^(sw)$/</span>.test(a)) {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.left = op.left - ox;
		} <span class="hljs-keyword">else</span> {
			that.size.width = newWidth;
			that.size.height = newHeight;
			that.position.top = op.top - oy;
			that.position.left = op.left - ox;
		}
	}

});

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.widget(<span class="hljs-string">"ui.selectable"</span>, $.ui.mouse, {
	version: <span class="hljs-string">"1.10.3"</span>,
	options: {
		appendTo: <span class="hljs-string">"body"</span>,
		autoRefresh: <span class="hljs-literal">true</span>,
		distance: <span class="hljs-number">0</span>,
		filter: <span class="hljs-string">"*"</span>,
		tolerance: <span class="hljs-string">"touch"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-183">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-183">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		selected: <span class="hljs-literal">null</span>,
		selecting: <span class="hljs-literal">null</span>,
		start: <span class="hljs-literal">null</span>,
		stop: <span class="hljs-literal">null</span>,
		unselected: <span class="hljs-literal">null</span>,
		unselecting: <span class="hljs-literal">null</span>
	},
	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> selectees,
			that = <span class="hljs-keyword">this</span>;

		<span class="hljs-keyword">this</span>.element.addClass(<span class="hljs-string">"ui-selectable"</span>);

		<span class="hljs-keyword">this</span>.dragged = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-184">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-184">&#182;</a>
              </div>
              <p>cache selectee children based on filter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.refresh = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			selectees = $(that.options.filter, that.element[<span class="hljs-number">0</span>]);
			selectees.addClass(<span class="hljs-string">"ui-selectee"</span>);
			selectees.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>),
					pos = $<span class="hljs-keyword">this</span>.offset();
				$.data(<span class="hljs-keyword">this</span>, <span class="hljs-string">"selectable-item"</span>, {
					element: <span class="hljs-keyword">this</span>,
					$element: $<span class="hljs-keyword">this</span>,
					left: pos.left,
					top: pos.top,
					right: pos.left + $<span class="hljs-keyword">this</span>.outerWidth(),
					bottom: pos.top + $<span class="hljs-keyword">this</span>.outerHeight(),
					startselected: <span class="hljs-literal">false</span>,
					selected: $<span class="hljs-keyword">this</span>.hasClass(<span class="hljs-string">"ui-selected"</span>),
					selecting: $<span class="hljs-keyword">this</span>.hasClass(<span class="hljs-string">"ui-selecting"</span>),
					unselecting: $<span class="hljs-keyword">this</span>.hasClass(<span class="hljs-string">"ui-unselecting"</span>)
				});
			});
		};
		<span class="hljs-keyword">this</span>.refresh();

		<span class="hljs-keyword">this</span>.selectees = selectees.addClass(<span class="hljs-string">"ui-selectee"</span>);

		<span class="hljs-keyword">this</span>._mouseInit();

		<span class="hljs-keyword">this</span>.helper = $(<span class="hljs-string">"&lt;div class='ui-selectable-helper'&gt;&lt;/div&gt;"</span>);
	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.selectees
			.removeClass(<span class="hljs-string">"ui-selectee"</span>)
			.removeData(<span class="hljs-string">"selectable-item"</span>);
		<span class="hljs-keyword">this</span>.element
			.removeClass(<span class="hljs-string">"ui-selectable ui-selectable-disabled"</span>);
		<span class="hljs-keyword">this</span>._mouseDestroy();
	},

	_mouseStart: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			options = <span class="hljs-keyword">this</span>.options;

		<span class="hljs-keyword">this</span>.opos = [event.pageX, event.pageY];

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.disabled) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">this</span>.selectees = $(options.filter, <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>]);

		<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"start"</span>, event);

		$(options.appendTo).append(<span class="hljs-keyword">this</span>.helper);</pre></div></div>
            
        </li>
        
        
        <li id="section-185">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-185">&#182;</a>
              </div>
              <p>position helper (lasso)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.helper.css({
			<span class="hljs-string">"left"</span>: event.pageX,
			<span class="hljs-string">"top"</span>: event.pageY,
			<span class="hljs-string">"width"</span>: <span class="hljs-number">0</span>,
			<span class="hljs-string">"height"</span>: <span class="hljs-number">0</span>
		});

		<span class="hljs-keyword">if</span> (options.autoRefresh) {
			<span class="hljs-keyword">this</span>.refresh();
		}

		<span class="hljs-keyword">this</span>.selectees.filter(<span class="hljs-string">".ui-selected"</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> selectee = $.data(<span class="hljs-keyword">this</span>, <span class="hljs-string">"selectable-item"</span>);
			selectee.startselected = <span class="hljs-literal">true</span>;
			<span class="hljs-keyword">if</span> (!event.metaKey &amp;&amp; !event.ctrlKey) {
				selectee.$element.removeClass(<span class="hljs-string">"ui-selected"</span>);
				selectee.selected = <span class="hljs-literal">false</span>;
				selectee.$element.addClass(<span class="hljs-string">"ui-unselecting"</span>);
				selectee.unselecting = <span class="hljs-literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-186">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-186">&#182;</a>
              </div>
              <p>selectable UNSELECTING callback</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				that._trigger(<span class="hljs-string">"unselecting"</span>, event, {
					unselecting: selectee.element
				});
			}
		});

		$(event.target).parents().addBack().each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> doSelect,
				selectee = $.data(<span class="hljs-keyword">this</span>, <span class="hljs-string">"selectable-item"</span>);
			<span class="hljs-keyword">if</span> (selectee) {
				doSelect = (!event.metaKey &amp;&amp; !event.ctrlKey) || !selectee.$element.hasClass(<span class="hljs-string">"ui-selected"</span>);
				selectee.$element
					.removeClass(doSelect ? <span class="hljs-string">"ui-unselecting"</span> : <span class="hljs-string">"ui-selected"</span>)
					.addClass(doSelect ? <span class="hljs-string">"ui-selecting"</span> : <span class="hljs-string">"ui-unselecting"</span>);
				selectee.unselecting = !doSelect;
				selectee.selecting = doSelect;
				selectee.selected = doSelect;</pre></div></div>
            
        </li>
        
        
        <li id="section-187">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-187">&#182;</a>
              </div>
              <p>selectable (UN)SELECTING callback</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> (doSelect) {
					that._trigger(<span class="hljs-string">"selecting"</span>, event, {
						selecting: selectee.element
					});
				} <span class="hljs-keyword">else</span> {
					that._trigger(<span class="hljs-string">"unselecting"</span>, event, {
						unselecting: selectee.element
					});
				}
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}
		});

	},

	_mouseDrag: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>

		<span class="hljs-keyword">this</span>.dragged = <span class="hljs-literal">true</span>;

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.disabled) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">var</span> tmp,
			that = <span class="hljs-keyword">this</span>,
			options = <span class="hljs-keyword">this</span>.options,
			x1 = <span class="hljs-keyword">this</span>.opos[<span class="hljs-number">0</span>],
			y1 = <span class="hljs-keyword">this</span>.opos[<span class="hljs-number">1</span>],
			x2 = event.pageX,
			y2 = event.pageY;

		<span class="hljs-keyword">if</span> (x1 &gt; x2) { tmp = x2; x2 = x1; x1 = tmp; }
		<span class="hljs-keyword">if</span> (y1 &gt; y2) { tmp = y2; y2 = y1; y1 = tmp; }
		<span class="hljs-keyword">this</span>.helper.css({left: x1, top: y1, width: x2-x1, height: y2-y1});

		<span class="hljs-keyword">this</span>.selectees.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> selectee = $.data(<span class="hljs-keyword">this</span>, <span class="hljs-string">"selectable-item"</span>),
				hit = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-188">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-188">&#182;</a>
              </div>
              <p>prevent helper from being selected if appendTo: selectable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (!selectee || selectee.element === that.element[<span class="hljs-number">0</span>]) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> (options.tolerance === <span class="hljs-string">"touch"</span>) {
				hit = ( !(selectee.left &gt; x2 || selectee.right &lt; x1 || selectee.top &gt; y2 || selectee.bottom &lt; y1) );
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (options.tolerance === <span class="hljs-string">"fit"</span>) {
				hit = (selectee.left &gt; x1 &amp;&amp; selectee.right &lt; x2 &amp;&amp; selectee.top &gt; y1 &amp;&amp; selectee.bottom &lt; y2);
			}

			<span class="hljs-keyword">if</span> (hit) {</pre></div></div>
            
        </li>
        
        
        <li id="section-189">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-189">&#182;</a>
              </div>
              <p>SELECT</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> (selectee.selected) {
					selectee.$element.removeClass(<span class="hljs-string">"ui-selected"</span>);
					selectee.selected = <span class="hljs-literal">false</span>;
				}
				<span class="hljs-keyword">if</span> (selectee.unselecting) {
					selectee.$element.removeClass(<span class="hljs-string">"ui-unselecting"</span>);
					selectee.unselecting = <span class="hljs-literal">false</span>;
				}
				<span class="hljs-keyword">if</span> (!selectee.selecting) {
					selectee.$element.addClass(<span class="hljs-string">"ui-selecting"</span>);
					selectee.selecting = <span class="hljs-literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-190">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-190">&#182;</a>
              </div>
              <p>selectable SELECTING callback</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					that._trigger(<span class="hljs-string">"selecting"</span>, event, {
						selecting: selectee.element
					});
				}
			} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-191">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-191">&#182;</a>
              </div>
              <p>UNSELECT</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> (selectee.selecting) {
					<span class="hljs-keyword">if</span> ((event.metaKey || event.ctrlKey) &amp;&amp; selectee.startselected) {
						selectee.$element.removeClass(<span class="hljs-string">"ui-selecting"</span>);
						selectee.selecting = <span class="hljs-literal">false</span>;
						selectee.$element.addClass(<span class="hljs-string">"ui-selected"</span>);
						selectee.selected = <span class="hljs-literal">true</span>;
					} <span class="hljs-keyword">else</span> {
						selectee.$element.removeClass(<span class="hljs-string">"ui-selecting"</span>);
						selectee.selecting = <span class="hljs-literal">false</span>;
						<span class="hljs-keyword">if</span> (selectee.startselected) {
							selectee.$element.addClass(<span class="hljs-string">"ui-unselecting"</span>);
							selectee.unselecting = <span class="hljs-literal">true</span>;
						}</pre></div></div>
            
        </li>
        
        
        <li id="section-192">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-192">&#182;</a>
              </div>
              <p>selectable UNSELECTING callback</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						that._trigger(<span class="hljs-string">"unselecting"</span>, event, {
							unselecting: selectee.element
						});
					}
				}
				<span class="hljs-keyword">if</span> (selectee.selected) {
					<span class="hljs-keyword">if</span> (!event.metaKey &amp;&amp; !event.ctrlKey &amp;&amp; !selectee.startselected) {
						selectee.$element.removeClass(<span class="hljs-string">"ui-selected"</span>);
						selectee.selected = <span class="hljs-literal">false</span>;

						selectee.$element.addClass(<span class="hljs-string">"ui-unselecting"</span>);
						selectee.unselecting = <span class="hljs-literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-193">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-193">&#182;</a>
              </div>
              <p>selectable UNSELECTING callback</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						that._trigger(<span class="hljs-string">"unselecting"</span>, event, {
							unselecting: selectee.element
						});
					}
				}
			}
		});

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	},

	_mouseStop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;

		<span class="hljs-keyword">this</span>.dragged = <span class="hljs-literal">false</span>;

		$(<span class="hljs-string">".ui-unselecting"</span>, <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>]).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> selectee = $.data(<span class="hljs-keyword">this</span>, <span class="hljs-string">"selectable-item"</span>);
			selectee.$element.removeClass(<span class="hljs-string">"ui-unselecting"</span>);
			selectee.unselecting = <span class="hljs-literal">false</span>;
			selectee.startselected = <span class="hljs-literal">false</span>;
			that._trigger(<span class="hljs-string">"unselected"</span>, event, {
				unselected: selectee.element
			});
		});
		$(<span class="hljs-string">".ui-selecting"</span>, <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>]).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> selectee = $.data(<span class="hljs-keyword">this</span>, <span class="hljs-string">"selectable-item"</span>);
			selectee.$element.removeClass(<span class="hljs-string">"ui-selecting"</span>).addClass(<span class="hljs-string">"ui-selected"</span>);
			selectee.selecting = <span class="hljs-literal">false</span>;
			selectee.selected = <span class="hljs-literal">true</span>;
			selectee.startselected = <span class="hljs-literal">true</span>;
			that._trigger(<span class="hljs-string">"selected"</span>, event, {
				selected: selectee.element
			});
		});
		<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"stop"</span>, event);

		<span class="hljs-keyword">this</span>.helper.remove();

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	}

});

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

<span class="hljs-comment">/*jshint loopfunc: true */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isOverAxis</span><span class="hljs-params">( x, reference, size )</span> {</span>
	<span class="hljs-keyword">return</span> ( x &gt; reference ) &amp;&amp; ( x &lt; ( reference + size ) );
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isFloating</span><span class="hljs-params">(item)</span> {</span>
	<span class="hljs-keyword">return</span> (<span class="hljs-regexp">/left|right/</span>).test(item.css(<span class="hljs-string">"float"</span>)) || (<span class="hljs-regexp">/inline|table-cell/</span>).test(item.css(<span class="hljs-string">"display"</span>));
}

$.widget(<span class="hljs-string">"ui.sortable"</span>, $.ui.mouse, {
	version: <span class="hljs-string">"1.10.3"</span>,
	widgetEventPrefix: <span class="hljs-string">"sort"</span>,
	ready: <span class="hljs-literal">false</span>,
	options: {
		appendTo: <span class="hljs-string">"parent"</span>,
		axis: <span class="hljs-literal">false</span>,
		connectWith: <span class="hljs-literal">false</span>,
		containment: <span class="hljs-literal">false</span>,
		cursor: <span class="hljs-string">"auto"</span>,
		cursorAt: <span class="hljs-literal">false</span>,
		dropOnEmpty: <span class="hljs-literal">true</span>,
		forcePlaceholderSize: <span class="hljs-literal">false</span>,
		forceHelperSize: <span class="hljs-literal">false</span>,
		grid: <span class="hljs-literal">false</span>,
		handle: <span class="hljs-literal">false</span>,
		helper: <span class="hljs-string">"original"</span>,
		items: <span class="hljs-string">"&gt; *"</span>,
		opacity: <span class="hljs-literal">false</span>,
		placeholder: <span class="hljs-literal">false</span>,
		revert: <span class="hljs-literal">false</span>,
		scroll: <span class="hljs-literal">true</span>,
		scrollSensitivity: <span class="hljs-number">20</span>,
		scrollSpeed: <span class="hljs-number">20</span>,
		scope: <span class="hljs-string">"default"</span>,
		tolerance: <span class="hljs-string">"intersect"</span>,
		zIndex: <span class="hljs-number">1000</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-194">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-194">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		activate: <span class="hljs-literal">null</span>,
		beforeStop: <span class="hljs-literal">null</span>,
		change: <span class="hljs-literal">null</span>,
		deactivate: <span class="hljs-literal">null</span>,
		out: <span class="hljs-literal">null</span>,
		over: <span class="hljs-literal">null</span>,
		receive: <span class="hljs-literal">null</span>,
		remove: <span class="hljs-literal">null</span>,
		sort: <span class="hljs-literal">null</span>,
		start: <span class="hljs-literal">null</span>,
		stop: <span class="hljs-literal">null</span>,
		update: <span class="hljs-literal">null</span>
	},
	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">var</span> o = <span class="hljs-keyword">this</span>.options;
		<span class="hljs-keyword">this</span>.containerCache = {};
		<span class="hljs-keyword">this</span>.element.addClass(<span class="hljs-string">"ui-sortable"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-195">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-195">&#182;</a>
              </div>
              <p>Get the items</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.refresh();</pre></div></div>
            
        </li>
        
        
        <li id="section-196">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-196">&#182;</a>
              </div>
              <p>Let’s determine if the items are being displayed horizontally</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.floating = <span class="hljs-keyword">this</span>.items.length ? o.axis === <span class="hljs-string">"x"</span> || isFloating(<span class="hljs-keyword">this</span>.items[<span class="hljs-number">0</span>].item) : <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-197">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-197">&#182;</a>
              </div>
              <p>Let’s determine the parent’s offset</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.offset = <span class="hljs-keyword">this</span>.element.offset();</pre></div></div>
            
        </li>
        
        
        <li id="section-198">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-198">&#182;</a>
              </div>
              <p>Initialize mouse events for interaction</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._mouseInit();</pre></div></div>
            
        </li>
        
        
        <li id="section-199">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-199">&#182;</a>
              </div>
              <p>We’re ready to go</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.ready = <span class="hljs-literal">true</span>;

	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.element
			.removeClass(<span class="hljs-string">"ui-sortable ui-sortable-disabled"</span>);
		<span class="hljs-keyword">this</span>._mouseDestroy();

		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-keyword">this</span>.items.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i-- ) {
			<span class="hljs-keyword">this</span>.items[i].item.removeData(<span class="hljs-keyword">this</span>.widgetName + <span class="hljs-string">"-item"</span>);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},

	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(key, value)</span>{</span>
		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"disabled"</span> ) {
			<span class="hljs-keyword">this</span>.options[ key ] = value;

			<span class="hljs-keyword">this</span>.widget().toggleClass( <span class="hljs-string">"ui-sortable-disabled"</span>, !!value );
		} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-200">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-200">&#182;</a>
              </div>
              <p>Don’t call widget base _setOption for disable as it adds ui-state-disabled class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$.Widget.prototype._setOption.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
		}
	},

	_mouseCapture: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, overrideHandle)</span> {</span>
		<span class="hljs-keyword">var</span> currentItem = <span class="hljs-literal">null</span>,
			validHandle = <span class="hljs-literal">false</span>,
			that = <span class="hljs-keyword">this</span>;

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.reverting) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.disabled || <span class="hljs-keyword">this</span>.options.type === <span class="hljs-string">"static"</span>) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-201">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-201">&#182;</a>
              </div>
              <p>We have to refresh the items data once first</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._refreshItems(event);</pre></div></div>
            
        </li>
        
        
        <li id="section-202">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-202">&#182;</a>
              </div>
              <p>Find out if the clicked node (or one of its parents) is a actual item in this.items</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$(event.target).parents().each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span>($.data(<span class="hljs-keyword">this</span>, that.widgetName + <span class="hljs-string">"-item"</span>) === that) {
				currentItem = $(<span class="hljs-keyword">this</span>);
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}
		});
		<span class="hljs-keyword">if</span>($.data(event.target, that.widgetName + <span class="hljs-string">"-item"</span>) === that) {
			currentItem = $(event.target);
		}

		<span class="hljs-keyword">if</span>(!currentItem) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.handle &amp;&amp; !overrideHandle) {
			$(<span class="hljs-keyword">this</span>.options.handle, currentItem).find(<span class="hljs-string">"*"</span>).addBack().each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span> === event.target) {
					validHandle = <span class="hljs-literal">true</span>;
				}
			});
			<span class="hljs-keyword">if</span>(!validHandle) {
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}
		}

		<span class="hljs-keyword">this</span>.currentItem = currentItem;
		<span class="hljs-keyword">this</span>._removeCurrentsFromItems();
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

	},

	_mouseStart: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, overrideHandle, noActivation)</span> {</span>

		<span class="hljs-keyword">var</span> i, body,
			o = <span class="hljs-keyword">this</span>.options;

		<span class="hljs-keyword">this</span>.currentContainer = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-203">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-203">&#182;</a>
              </div>
              <p>We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.refreshPositions();</pre></div></div>
            
        </li>
        
        
        <li id="section-204">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-204">&#182;</a>
              </div>
              <p>Create and append the visible helper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.helper = <span class="hljs-keyword">this</span>._createHelper(event);</pre></div></div>
            
        </li>
        
        
        <li id="section-205">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-205">&#182;</a>
              </div>
              <p>Cache the helper size</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._cacheHelperProportions();

		<span class="hljs-comment">/*
		 * - Position generation -
		 * This block generates everything position related - it's the core of draggables.
		 */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-206">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-206">&#182;</a>
              </div>
              <p>Cache the margins of the original element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._cacheMargins();</pre></div></div>
            
        </li>
        
        
        <li id="section-207">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-207">&#182;</a>
              </div>
              <p>Get the next scrolling parent</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.scrollParent = <span class="hljs-keyword">this</span>.helper.scrollParent();</pre></div></div>
            
        </li>
        
        
        <li id="section-208">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-208">&#182;</a>
              </div>
              <p>The element’s absolute position on the page minus margins</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.offset = <span class="hljs-keyword">this</span>.currentItem.offset();
		<span class="hljs-keyword">this</span>.offset = {
			top: <span class="hljs-keyword">this</span>.offset.top - <span class="hljs-keyword">this</span>.margins.top,
			left: <span class="hljs-keyword">this</span>.offset.left - <span class="hljs-keyword">this</span>.margins.left
		};

		$.extend(<span class="hljs-keyword">this</span>.offset, {
			click: { <span class="hljs-comment">//Where the click happened, relative to the element</span>
				left: event.pageX - <span class="hljs-keyword">this</span>.offset.left,
				top: event.pageY - <span class="hljs-keyword">this</span>.offset.top
			},
			parent: <span class="hljs-keyword">this</span>._getParentOffset(),
			relative: <span class="hljs-keyword">this</span>._getRelativeOffset() <span class="hljs-comment">//This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper</span>
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-209">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-209">&#182;</a>
              </div>
              <p>Only after we got the offset, we can change the helper’s position to absolute
TODO: Still need to figure out a way to make relative sorting possible</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"position"</span>, <span class="hljs-string">"absolute"</span>);
		<span class="hljs-keyword">this</span>.cssPosition = <span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"position"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-210">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-210">&#182;</a>
              </div>
              <p>Generate the original position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.originalPosition = <span class="hljs-keyword">this</span>._generatePosition(event);
		<span class="hljs-keyword">this</span>.originalPageX = event.pageX;
		<span class="hljs-keyword">this</span>.originalPageY = event.pageY;</pre></div></div>
            
        </li>
        
        
        <li id="section-211">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-211">&#182;</a>
              </div>
              <p>Adjust the mouse offset relative to the helper if “cursorAt” is supplied</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		(o.cursorAt &amp;&amp; <span class="hljs-keyword">this</span>._adjustOffsetFromHelper(o.cursorAt));</pre></div></div>
            
        </li>
        
        
        <li id="section-212">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-212">&#182;</a>
              </div>
              <p>Cache the former DOM position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.domPosition = { prev: <span class="hljs-keyword">this</span>.currentItem.prev()[<span class="hljs-number">0</span>], parent: <span class="hljs-keyword">this</span>.currentItem.parent()[<span class="hljs-number">0</span>] };</pre></div></div>
            
        </li>
        
        
        <li id="section-213">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-213">&#182;</a>
              </div>
              <p>If the helper is not the original, hide the original so it’s not playing any role during the drag, won’t cause anything bad this way</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>]) {
			<span class="hljs-keyword">this</span>.currentItem.hide();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-214">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-214">&#182;</a>
              </div>
              <p>Create the placeholder</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._createPlaceholder();</pre></div></div>
            
        </li>
        
        
        <li id="section-215">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-215">&#182;</a>
              </div>
              <p>Set a containment if given in the options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(o.containment) {
			<span class="hljs-keyword">this</span>._setContainment();
		}

		<span class="hljs-keyword">if</span>( o.cursor &amp;&amp; o.cursor !== <span class="hljs-string">"auto"</span> ) { <span class="hljs-comment">// cursor option</span>
			body = <span class="hljs-keyword">this</span>.document.find( <span class="hljs-string">"body"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-216">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-216">&#182;</a>
              </div>
              <p>support: IE</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.storedCursor = body.css( <span class="hljs-string">"cursor"</span> );
			body.css( <span class="hljs-string">"cursor"</span>, o.cursor );

			<span class="hljs-keyword">this</span>.storedStylesheet = $( <span class="hljs-string">"&lt;style&gt;*{ cursor: "</span>+o.cursor+<span class="hljs-string">" !important; }&lt;/style&gt;"</span> ).appendTo( body );
		}

		<span class="hljs-keyword">if</span>(o.opacity) { <span class="hljs-comment">// opacity option</span>
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"opacity"</span>)) {
				<span class="hljs-keyword">this</span>._storedOpacity = <span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"opacity"</span>);
			}
			<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"opacity"</span>, o.opacity);
		}

		<span class="hljs-keyword">if</span>(o.zIndex) { <span class="hljs-comment">// zIndex option</span>
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"zIndex"</span>)) {
				<span class="hljs-keyword">this</span>._storedZIndex = <span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"zIndex"</span>);
			}
			<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"zIndex"</span>, o.zIndex);
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-217">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-217">&#182;</a>
              </div>
              <p>Prepare scrolling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== document &amp;&amp; <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].tagName !== <span class="hljs-string">"HTML"</span>) {
			<span class="hljs-keyword">this</span>.overflowOffset = <span class="hljs-keyword">this</span>.scrollParent.offset();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-218">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-218">&#182;</a>
              </div>
              <p>Call callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"start"</span>, event, <span class="hljs-keyword">this</span>._uiHash());</pre></div></div>
            
        </li>
        
        
        <li id="section-219">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-219">&#182;</a>
              </div>
              <p>Recache the helper size</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>._preserveHelperProportions) {
			<span class="hljs-keyword">this</span>._cacheHelperProportions();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-220">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-220">&#182;</a>
              </div>
              <p>Post “activate” events to possible containers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>( !noActivation ) {
			<span class="hljs-keyword">for</span> ( i = <span class="hljs-keyword">this</span>.containers.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i-- ) {
				<span class="hljs-keyword">this</span>.containers[ i ]._trigger( <span class="hljs-string">"activate"</span>, event, <span class="hljs-keyword">this</span>._uiHash( <span class="hljs-keyword">this</span> ) );
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-221">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-221">&#182;</a>
              </div>
              <p>Prepare possible droppables</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>($.ui.ddmanager) {
			$.ui.ddmanager.current = <span class="hljs-keyword">this</span>;
		}

		<span class="hljs-keyword">if</span> ($.ui.ddmanager &amp;&amp; !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(<span class="hljs-keyword">this</span>, event);
		}

		<span class="hljs-keyword">this</span>.dragging = <span class="hljs-literal">true</span>;

		<span class="hljs-keyword">this</span>.helper.addClass(<span class="hljs-string">"ui-sortable-helper"</span>);
		<span class="hljs-keyword">this</span>._mouseDrag(event); <span class="hljs-comment">//Execute the drag once - this causes the helper not to be visible before getting its correct position</span>
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

	},

	_mouseDrag: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">var</span> i, item, itemElement, intersection,
			o = <span class="hljs-keyword">this</span>.options,
			scrolled = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-222">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-222">&#182;</a>
              </div>
              <p>Compute the helpers position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.position = <span class="hljs-keyword">this</span>._generatePosition(event);
		<span class="hljs-keyword">this</span>.positionAbs = <span class="hljs-keyword">this</span>._convertPositionTo(<span class="hljs-string">"absolute"</span>);

		<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.lastPositionAbs) {
			<span class="hljs-keyword">this</span>.lastPositionAbs = <span class="hljs-keyword">this</span>.positionAbs;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-223">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-223">&#182;</a>
              </div>
              <p>Do scrolling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.scroll) {
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== document &amp;&amp; <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].tagName !== <span class="hljs-string">"HTML"</span>) {

				<span class="hljs-keyword">if</span>((<span class="hljs-keyword">this</span>.overflowOffset.top + <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].offsetHeight) - event.pageY &lt; o.scrollSensitivity) {
					<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollTop = scrolled = <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollTop + o.scrollSpeed;
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.pageY - <span class="hljs-keyword">this</span>.overflowOffset.top &lt; o.scrollSensitivity) {
					<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollTop = scrolled = <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollTop - o.scrollSpeed;
				}

				<span class="hljs-keyword">if</span>((<span class="hljs-keyword">this</span>.overflowOffset.left + <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].offsetWidth) - event.pageX &lt; o.scrollSensitivity) {
					<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollLeft = scrolled = <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollLeft + o.scrollSpeed;
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(event.pageX - <span class="hljs-keyword">this</span>.overflowOffset.left &lt; o.scrollSensitivity) {
					<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollLeft = scrolled = <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>].scrollLeft - o.scrollSpeed;
				}

			} <span class="hljs-keyword">else</span> {

				<span class="hljs-keyword">if</span>(event.pageY - $(document).scrollTop() &lt; o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>($(window).height() - (event.pageY - $(document).scrollTop()) &lt; o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
				}

				<span class="hljs-keyword">if</span>(event.pageX - $(document).scrollLeft() &lt; o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>($(window).width() - (event.pageX - $(document).scrollLeft()) &lt; o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
				}

			}

			<span class="hljs-keyword">if</span>(scrolled !== <span class="hljs-literal">false</span> &amp;&amp; $.ui.ddmanager &amp;&amp; !o.dropBehaviour) {
				$.ui.ddmanager.prepareOffsets(<span class="hljs-keyword">this</span>, event);
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-224">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-224">&#182;</a>
              </div>
              <p>Regenerate the absolute position used for position checks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.positionAbs = <span class="hljs-keyword">this</span>._convertPositionTo(<span class="hljs-string">"absolute"</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-225">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-225">&#182;</a>
              </div>
              <p>Set the helper position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.options.axis || <span class="hljs-keyword">this</span>.options.axis !== <span class="hljs-string">"y"</span>) {
			<span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>].style.left = <span class="hljs-keyword">this</span>.position.left+<span class="hljs-string">"px"</span>;
		}
		<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.options.axis || <span class="hljs-keyword">this</span>.options.axis !== <span class="hljs-string">"x"</span>) {
			<span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>].style.top = <span class="hljs-keyword">this</span>.position.top+<span class="hljs-string">"px"</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-226">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-226">&#182;</a>
              </div>
              <p>Rearrange</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">for</span> (i = <span class="hljs-keyword">this</span>.items.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {</pre></div></div>
            
        </li>
        
        
        <li id="section-227">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-227">&#182;</a>
              </div>
              <p>Cache variables and intersection, continue if no intersection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			item = <span class="hljs-keyword">this</span>.items[i];
			itemElement = item.item[<span class="hljs-number">0</span>];
			intersection = <span class="hljs-keyword">this</span>._intersectsWithPointer(item);
			<span class="hljs-keyword">if</span> (!intersection) {
				<span class="hljs-keyword">continue</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-228">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-228">&#182;</a>
              </div>
              <p>Only put the placeholder inside the current Container, skip all
items form other containers. This works because when moving
an item from one container to another the
currentContainer is switched before the placeholder is moved.</p>
<p>Without this moving items in “sub-sortables” can cause the placeholder to jitter
beetween the outer and inner container.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (item.instance !== <span class="hljs-keyword">this</span>.currentContainer) {
				<span class="hljs-keyword">continue</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-229">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-229">&#182;</a>
              </div>
              <p>cannot intersect with itself
no useless actions that have been done before
no action if the item moved is the parent of the item checked</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (itemElement !== <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>] &amp;&amp;
				<span class="hljs-keyword">this</span>.placeholder[intersection === <span class="hljs-number">1</span> ? <span class="hljs-string">"next"</span> : <span class="hljs-string">"prev"</span>]()[<span class="hljs-number">0</span>] !== itemElement &amp;&amp;
				!$.contains(<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>], itemElement) &amp;&amp;
				(<span class="hljs-keyword">this</span>.options.type === <span class="hljs-string">"semi-dynamic"</span> ? !$.contains(<span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>], itemElement) : <span class="hljs-literal">true</span>)
			) {

				<span class="hljs-keyword">this</span>.direction = intersection === <span class="hljs-number">1</span> ? <span class="hljs-string">"down"</span> : <span class="hljs-string">"up"</span>;

				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.tolerance === <span class="hljs-string">"pointer"</span> || <span class="hljs-keyword">this</span>._intersectsWithSides(item)) {
					<span class="hljs-keyword">this</span>._rearrange(event, item);
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">break</span>;
				}

				<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"change"</span>, event, <span class="hljs-keyword">this</span>._uiHash());
				<span class="hljs-keyword">break</span>;
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-230">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-230">&#182;</a>
              </div>
              <p>Post events to containers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._contactContainers(event);</pre></div></div>
            
        </li>
        
        
        <li id="section-231">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-231">&#182;</a>
              </div>
              <p>Interconnect with droppables</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>($.ui.ddmanager) {
			$.ui.ddmanager.drag(<span class="hljs-keyword">this</span>, event);
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-232">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-232">&#182;</a>
              </div>
              <p>Call callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"sort"</span>, event, <span class="hljs-keyword">this</span>._uiHash());

		<span class="hljs-keyword">this</span>.lastPositionAbs = <span class="hljs-keyword">this</span>.positionAbs;
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

	},

	_mouseStop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, noPropagation)</span> {</span>

		<span class="hljs-keyword">if</span>(!event) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-233">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-233">&#182;</a>
              </div>
              <p>If we are using droppables, inform the manager about the drop</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ($.ui.ddmanager &amp;&amp; !<span class="hljs-keyword">this</span>.options.dropBehaviour) {
			$.ui.ddmanager.drop(<span class="hljs-keyword">this</span>, event);
		}

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.revert) {
			<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
				cur = <span class="hljs-keyword">this</span>.placeholder.offset(),
				axis = <span class="hljs-keyword">this</span>.options.axis,
				animation = {};

			<span class="hljs-keyword">if</span> ( !axis || axis === <span class="hljs-string">"x"</span> ) {
				animation.left = cur.left - <span class="hljs-keyword">this</span>.offset.parent.left - <span class="hljs-keyword">this</span>.margins.left + (<span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>] === document.body ? <span class="hljs-number">0</span> : <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>].scrollLeft);
			}
			<span class="hljs-keyword">if</span> ( !axis || axis === <span class="hljs-string">"y"</span> ) {
				animation.top = cur.top - <span class="hljs-keyword">this</span>.offset.parent.top - <span class="hljs-keyword">this</span>.margins.top + (<span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>] === document.body ? <span class="hljs-number">0</span> : <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>].scrollTop);
			}
			<span class="hljs-keyword">this</span>.reverting = <span class="hljs-literal">true</span>;
			$(<span class="hljs-keyword">this</span>.helper).animate( animation, <span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.options.revert, <span class="hljs-number">10</span>) || <span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				that._clear(event);
			});
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>._clear(event, noPropagation);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

	},

	cancel: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.dragging) {

			<span class="hljs-keyword">this</span>._mouseUp({ target: <span class="hljs-literal">null</span> });

			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.helper === <span class="hljs-string">"original"</span>) {
				<span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-keyword">this</span>._storedCSS).removeClass(<span class="hljs-string">"ui-sortable-helper"</span>);
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>.currentItem.show();
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-234">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-234">&#182;</a>
              </div>
              <p>Post deactivating events to containers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-keyword">this</span>.containers.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
				<span class="hljs-keyword">this</span>.containers[i]._trigger(<span class="hljs-string">"deactivate"</span>, <span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));
				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.containers[i].containerCache.over) {
					<span class="hljs-keyword">this</span>.containers[i]._trigger(<span class="hljs-string">"out"</span>, <span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));
					<span class="hljs-keyword">this</span>.containers[i].containerCache.over = <span class="hljs-number">0</span>;
				}
			}

		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.placeholder) {</pre></div></div>
            
        </li>
        
        
        <li id="section-235">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-235">&#182;</a>
              </div>
              <p>$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>].parentNode) {
				<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>].parentNode.removeChild(<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>]);
			}
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.helper !== <span class="hljs-string">"original"</span> &amp;&amp; <span class="hljs-keyword">this</span>.helper &amp;&amp; <span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>].parentNode) {
				<span class="hljs-keyword">this</span>.helper.remove();
			}

			$.extend(<span class="hljs-keyword">this</span>, {
				helper: <span class="hljs-literal">null</span>,
				dragging: <span class="hljs-literal">false</span>,
				reverting: <span class="hljs-literal">false</span>,
				_noFinalSort: <span class="hljs-literal">null</span>
			});

			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.domPosition.prev) {
				$(<span class="hljs-keyword">this</span>.domPosition.prev).after(<span class="hljs-keyword">this</span>.currentItem);
			} <span class="hljs-keyword">else</span> {
				$(<span class="hljs-keyword">this</span>.domPosition.parent).prepend(<span class="hljs-keyword">this</span>.currentItem);
			}
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

	},

	serialize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(o)</span> {</span>

		<span class="hljs-keyword">var</span> items = <span class="hljs-keyword">this</span>._getItemsAsjQuery(o &amp;&amp; o.connected),
			str = [];
		o = o || {};

		$(items).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> res = ($(o.item || <span class="hljs-keyword">this</span>).attr(o.attribute || <span class="hljs-string">"id"</span>) || <span class="hljs-string">""</span>).match(o.expression || (<span class="hljs-regexp">/(.+)[\-=_](.+)/</span>));
			<span class="hljs-keyword">if</span> (res) {
				str.push((o.key || res[<span class="hljs-number">1</span>]+<span class="hljs-string">"[]"</span>)+<span class="hljs-string">"="</span>+(o.key &amp;&amp; o.expression ? res[<span class="hljs-number">1</span>] : res[<span class="hljs-number">2</span>]));
			}
		});

		<span class="hljs-keyword">if</span>(!str.length &amp;&amp; o.key) {
			str.push(o.key + <span class="hljs-string">"="</span>);
		}

		<span class="hljs-keyword">return</span> str.join(<span class="hljs-string">"&amp;"</span>);

	},

	toArray: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(o)</span> {</span>

		<span class="hljs-keyword">var</span> items = <span class="hljs-keyword">this</span>._getItemsAsjQuery(o &amp;&amp; o.connected),
			ret = [];

		o = o || {};

		items.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span> ret.push($(o.item || <span class="hljs-keyword">this</span>).attr(o.attribute || <span class="hljs-string">"id"</span>) || <span class="hljs-string">""</span>); });
		<span class="hljs-keyword">return</span> ret;

	},

	<span class="hljs-comment">/* Be careful with the following core functions */</span>
	_intersectsWith: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item)</span> {</span>

		<span class="hljs-keyword">var</span> x1 = <span class="hljs-keyword">this</span>.positionAbs.left,
			x2 = x1 + <span class="hljs-keyword">this</span>.helperProportions.width,
			y1 = <span class="hljs-keyword">this</span>.positionAbs.top,
			y2 = y1 + <span class="hljs-keyword">this</span>.helperProportions.height,
			l = item.left,
			r = l + item.width,
			t = item.top,
			b = t + item.height,
			dyClick = <span class="hljs-keyword">this</span>.offset.click.top,
			dxClick = <span class="hljs-keyword">this</span>.offset.click.left,
			isOverElementHeight = ( <span class="hljs-keyword">this</span>.options.axis === <span class="hljs-string">"x"</span> ) || ( ( y1 + dyClick ) &gt; t &amp;&amp; ( y1 + dyClick ) &lt; b ),
			isOverElementWidth = ( <span class="hljs-keyword">this</span>.options.axis === <span class="hljs-string">"y"</span> ) || ( ( x1 + dxClick ) &gt; l &amp;&amp; ( x1 + dxClick ) &lt; r ),
			isOverElement = isOverElementHeight &amp;&amp; isOverElementWidth;

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.tolerance === <span class="hljs-string">"pointer"</span> ||
			<span class="hljs-keyword">this</span>.options.forcePointerForContainers ||
			(<span class="hljs-keyword">this</span>.options.tolerance !== <span class="hljs-string">"pointer"</span> &amp;&amp; <span class="hljs-keyword">this</span>.helperProportions[<span class="hljs-keyword">this</span>.floating ? <span class="hljs-string">"width"</span> : <span class="hljs-string">"height"</span>] &gt; item[<span class="hljs-keyword">this</span>.floating ? <span class="hljs-string">"width"</span> : <span class="hljs-string">"height"</span>])
		) {
			<span class="hljs-keyword">return</span> isOverElement;
		} <span class="hljs-keyword">else</span> {

			<span class="hljs-keyword">return</span> (l &lt; x1 + (<span class="hljs-keyword">this</span>.helperProportions.width / <span class="hljs-number">2</span>) &amp;&amp; <span class="hljs-comment">// Right Half</span>
				x2 - (<span class="hljs-keyword">this</span>.helperProportions.width / <span class="hljs-number">2</span>) &lt; r &amp;&amp; <span class="hljs-comment">// Left Half</span>
				t &lt; y1 + (<span class="hljs-keyword">this</span>.helperProportions.height / <span class="hljs-number">2</span>) &amp;&amp; <span class="hljs-comment">// Bottom Half</span>
				y2 - (<span class="hljs-keyword">this</span>.helperProportions.height / <span class="hljs-number">2</span>) &lt; b ); <span class="hljs-comment">// Top Half</span>

		}
	},

	_intersectsWithPointer: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item)</span> {</span>

		<span class="hljs-keyword">var</span> isOverElementHeight = (<span class="hljs-keyword">this</span>.options.axis === <span class="hljs-string">"x"</span>) || isOverAxis(<span class="hljs-keyword">this</span>.positionAbs.top + <span class="hljs-keyword">this</span>.offset.click.top, item.top, item.height),
			isOverElementWidth = (<span class="hljs-keyword">this</span>.options.axis === <span class="hljs-string">"y"</span>) || isOverAxis(<span class="hljs-keyword">this</span>.positionAbs.left + <span class="hljs-keyword">this</span>.offset.click.left, item.left, item.width),
			isOverElement = isOverElementHeight &amp;&amp; isOverElementWidth,
			verticalDirection = <span class="hljs-keyword">this</span>._getDragVerticalDirection(),
			horizontalDirection = <span class="hljs-keyword">this</span>._getDragHorizontalDirection();

		<span class="hljs-keyword">if</span> (!isOverElement) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.floating ?
			( ((horizontalDirection &amp;&amp; horizontalDirection === <span class="hljs-string">"right"</span>) || verticalDirection === <span class="hljs-string">"down"</span>) ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span> )
			: ( verticalDirection &amp;&amp; (verticalDirection === <span class="hljs-string">"down"</span> ? <span class="hljs-number">2</span> : <span class="hljs-number">1</span>) );

	},

	_intersectsWithSides: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item)</span> {</span>

		<span class="hljs-keyword">var</span> isOverBottomHalf = isOverAxis(<span class="hljs-keyword">this</span>.positionAbs.top + <span class="hljs-keyword">this</span>.offset.click.top, item.top + (item.height/<span class="hljs-number">2</span>), item.height),
			isOverRightHalf = isOverAxis(<span class="hljs-keyword">this</span>.positionAbs.left + <span class="hljs-keyword">this</span>.offset.click.left, item.left + (item.width/<span class="hljs-number">2</span>), item.width),
			verticalDirection = <span class="hljs-keyword">this</span>._getDragVerticalDirection(),
			horizontalDirection = <span class="hljs-keyword">this</span>._getDragHorizontalDirection();

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.floating &amp;&amp; horizontalDirection) {
			<span class="hljs-keyword">return</span> ((horizontalDirection === <span class="hljs-string">"right"</span> &amp;&amp; isOverRightHalf) || (horizontalDirection === <span class="hljs-string">"left"</span> &amp;&amp; !isOverRightHalf));
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">return</span> verticalDirection &amp;&amp; ((verticalDirection === <span class="hljs-string">"down"</span> &amp;&amp; isOverBottomHalf) || (verticalDirection === <span class="hljs-string">"up"</span> &amp;&amp; !isOverBottomHalf));
		}

	},

	_getDragVerticalDirection: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> delta = <span class="hljs-keyword">this</span>.positionAbs.top - <span class="hljs-keyword">this</span>.lastPositionAbs.top;
		<span class="hljs-keyword">return</span> delta !== <span class="hljs-number">0</span> &amp;&amp; (delta &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">"down"</span> : <span class="hljs-string">"up"</span>);
	},

	_getDragHorizontalDirection: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> delta = <span class="hljs-keyword">this</span>.positionAbs.left - <span class="hljs-keyword">this</span>.lastPositionAbs.left;
		<span class="hljs-keyword">return</span> delta !== <span class="hljs-number">0</span> &amp;&amp; (delta &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">"right"</span> : <span class="hljs-string">"left"</span>);
	},

	refresh: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">this</span>._refreshItems(event);
		<span class="hljs-keyword">this</span>.refreshPositions();
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},

	_connectWith: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>.options;
		<span class="hljs-keyword">return</span> options.connectWith.constructor === <span class="hljs-built_in">String</span> ? [options.connectWith] : options.connectWith;
	},

	_getItemsAsjQuery: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(connected)</span> {</span>

		<span class="hljs-keyword">var</span> i, j, cur, inst,
			items = [],
			queries = [],
			connectWith = <span class="hljs-keyword">this</span>._connectWith();

		<span class="hljs-keyword">if</span>(connectWith &amp;&amp; connected) {
			<span class="hljs-keyword">for</span> (i = connectWith.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
				cur = $(connectWith[i]);
				<span class="hljs-keyword">for</span> ( j = cur.length - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">0</span>; j--){
					inst = $.data(cur[j], <span class="hljs-keyword">this</span>.widgetFullName);
					<span class="hljs-keyword">if</span>(inst &amp;&amp; inst !== <span class="hljs-keyword">this</span> &amp;&amp; !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(<span class="hljs-string">".ui-sortable-helper"</span>).not(<span class="hljs-string">".ui-sortable-placeholder"</span>), inst]);
					}
				}
			}
		}

		queries.push([$.isFunction(<span class="hljs-keyword">this</span>.options.items) ? <span class="hljs-keyword">this</span>.options.items.call(<span class="hljs-keyword">this</span>.element, <span class="hljs-literal">null</span>, { options: <span class="hljs-keyword">this</span>.options, item: <span class="hljs-keyword">this</span>.currentItem }) : $(<span class="hljs-keyword">this</span>.options.items, <span class="hljs-keyword">this</span>.element).not(<span class="hljs-string">".ui-sortable-helper"</span>).not(<span class="hljs-string">".ui-sortable-placeholder"</span>), <span class="hljs-keyword">this</span>]);

		<span class="hljs-keyword">for</span> (i = queries.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
			queries[i][<span class="hljs-number">0</span>].each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				items.push(<span class="hljs-keyword">this</span>);
			});
		}

		<span class="hljs-keyword">return</span> $(items);

	},

	_removeCurrentsFromItems: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">var</span> list = <span class="hljs-keyword">this</span>.currentItem.find(<span class="hljs-string">":data("</span> + <span class="hljs-keyword">this</span>.widgetName + <span class="hljs-string">"-item)"</span>);

		<span class="hljs-keyword">this</span>.items = $.grep(<span class="hljs-keyword">this</span>.items, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(item)</span> {</span>
			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>; j &lt; list.length; j++) {
				<span class="hljs-keyword">if</span>(list[j] === item.item[<span class="hljs-number">0</span>]) {
					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				}
			}
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		});

	},

	_refreshItems: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>

		<span class="hljs-keyword">this</span>.items = [];
		<span class="hljs-keyword">this</span>.containers = [<span class="hljs-keyword">this</span>];

		<span class="hljs-keyword">var</span> i, j, cur, inst, targetData, _queries, item, queriesLength,
			items = <span class="hljs-keyword">this</span>.items,
			queries = [[$.isFunction(<span class="hljs-keyword">this</span>.options.items) ? <span class="hljs-keyword">this</span>.options.items.call(<span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>], event, { item: <span class="hljs-keyword">this</span>.currentItem }) : $(<span class="hljs-keyword">this</span>.options.items, <span class="hljs-keyword">this</span>.element), <span class="hljs-keyword">this</span>]],
			connectWith = <span class="hljs-keyword">this</span>._connectWith();

		<span class="hljs-keyword">if</span>(connectWith &amp;&amp; <span class="hljs-keyword">this</span>.ready) { <span class="hljs-comment">//Shouldn't be run the first time through due to massive slow-down</span>
			<span class="hljs-keyword">for</span> (i = connectWith.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
				cur = $(connectWith[i]);
				<span class="hljs-keyword">for</span> (j = cur.length - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">0</span>; j--){
					inst = $.data(cur[j], <span class="hljs-keyword">this</span>.widgetFullName);
					<span class="hljs-keyword">if</span>(inst &amp;&amp; inst !== <span class="hljs-keyword">this</span> &amp;&amp; !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[<span class="hljs-number">0</span>], event, { item: <span class="hljs-keyword">this</span>.currentItem }) : $(inst.options.items, inst.element), inst]);
						<span class="hljs-keyword">this</span>.containers.push(inst);
					}
				}
			}
		}

		<span class="hljs-keyword">for</span> (i = queries.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
			targetData = queries[i][<span class="hljs-number">1</span>];
			_queries = queries[i][<span class="hljs-number">0</span>];

			<span class="hljs-keyword">for</span> (j=<span class="hljs-number">0</span>, queriesLength = _queries.length; j &lt; queriesLength; j++) {
				item = $(_queries[j]);

				item.data(<span class="hljs-keyword">this</span>.widgetName + <span class="hljs-string">"-item"</span>, targetData); <span class="hljs-comment">// Data for target checking (mouse manager)</span>

				items.push({
					item: item,
					instance: targetData,
					width: <span class="hljs-number">0</span>, height: <span class="hljs-number">0</span>,
					left: <span class="hljs-number">0</span>, top: <span class="hljs-number">0</span>
				});
			}
		}

	},

	refreshPositions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fast)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-236">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-236">&#182;</a>
              </div>
              <p>This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent’s position will change</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.offsetParent &amp;&amp; <span class="hljs-keyword">this</span>.helper) {
			<span class="hljs-keyword">this</span>.offset.parent = <span class="hljs-keyword">this</span>._getParentOffset();
		}

		<span class="hljs-keyword">var</span> i, item, t, p;

		<span class="hljs-keyword">for</span> (i = <span class="hljs-keyword">this</span>.items.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
			item = <span class="hljs-keyword">this</span>.items[i];</pre></div></div>
            
        </li>
        
        
        <li id="section-237">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-237">&#182;</a>
              </div>
              <p>We ignore calculating positions of all connected containers when we’re not over them</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>(item.instance !== <span class="hljs-keyword">this</span>.currentContainer &amp;&amp; <span class="hljs-keyword">this</span>.currentContainer &amp;&amp; item.item[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>]) {
				<span class="hljs-keyword">continue</span>;
			}

			t = <span class="hljs-keyword">this</span>.options.toleranceElement ? $(<span class="hljs-keyword">this</span>.options.toleranceElement, item.item) : item.item;

			<span class="hljs-keyword">if</span> (!fast) {
				item.width = t.outerWidth();
				item.height = t.outerHeight();
			}

			p = t.offset();
			item.left = p.left;
			item.top = p.top;
		}

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.options.custom &amp;&amp; <span class="hljs-keyword">this</span>.options.custom.refreshContainers) {
			<span class="hljs-keyword">this</span>.options.custom.refreshContainers.call(<span class="hljs-keyword">this</span>);
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">for</span> (i = <span class="hljs-keyword">this</span>.containers.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
				p = <span class="hljs-keyword">this</span>.containers[i].element.offset();
				<span class="hljs-keyword">this</span>.containers[i].containerCache.left = p.left;
				<span class="hljs-keyword">this</span>.containers[i].containerCache.top = p.top;
				<span class="hljs-keyword">this</span>.containers[i].containerCache.width	= <span class="hljs-keyword">this</span>.containers[i].element.outerWidth();
				<span class="hljs-keyword">this</span>.containers[i].containerCache.height = <span class="hljs-keyword">this</span>.containers[i].element.outerHeight();
			}
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},

	_createPlaceholder: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(that)</span> {</span>
		that = that || <span class="hljs-keyword">this</span>;
		<span class="hljs-keyword">var</span> className,
			o = that.options;

		<span class="hljs-keyword">if</span>(!o.placeholder || o.placeholder.constructor === <span class="hljs-built_in">String</span>) {
			className = o.placeholder;
			o.placeholder = {
				element: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

					<span class="hljs-keyword">var</span> nodeName = that.currentItem[<span class="hljs-number">0</span>].nodeName.toLowerCase(),
						element = $( <span class="hljs-string">"&lt;"</span> + nodeName + <span class="hljs-string">"&gt;"</span>, that.document[<span class="hljs-number">0</span>] )
							.addClass(className || that.currentItem[<span class="hljs-number">0</span>].className+<span class="hljs-string">" ui-sortable-placeholder"</span>)
							.removeClass(<span class="hljs-string">"ui-sortable-helper"</span>);

					<span class="hljs-keyword">if</span> ( nodeName === <span class="hljs-string">"tr"</span> ) {
						that.currentItem.children().each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
							$( <span class="hljs-string">"&lt;td&gt;&amp;#160;&lt;/td&gt;"</span>, that.document[<span class="hljs-number">0</span>] )
								.attr( <span class="hljs-string">"colspan"</span>, $( <span class="hljs-keyword">this</span> ).attr( <span class="hljs-string">"colspan"</span> ) || <span class="hljs-number">1</span> )
								.appendTo( element );
						});
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( nodeName === <span class="hljs-string">"img"</span> ) {
						element.attr( <span class="hljs-string">"src"</span>, that.currentItem.attr( <span class="hljs-string">"src"</span> ) );
					}

					<span class="hljs-keyword">if</span> ( !className ) {
						element.css( <span class="hljs-string">"visibility"</span>, <span class="hljs-string">"hidden"</span> );
					}

					<span class="hljs-keyword">return</span> element;
				},
				update: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(container, p)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-238">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-238">&#182;</a>
              </div>
              <ol>
<li>If a className is set as ‘placeholder option, we don’t force sizes - the class is responsible for that</li>
<li>The option ‘forcePlaceholderSize can be enabled to force it even if a class name is specified</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span>(className &amp;&amp; !o.forcePlaceholderSize) {
						<span class="hljs-keyword">return</span>;
					}</pre></div></div>
            
        </li>
        
        
        <li id="section-239">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-239">&#182;</a>
              </div>
              <p>If the element doesn’t have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span>(!p.height()) { p.height(that.currentItem.innerHeight() - <span class="hljs-built_in">parseInt</span>(that.currentItem.css(<span class="hljs-string">"paddingTop"</span>)||<span class="hljs-number">0</span>, <span class="hljs-number">10</span>) - <span class="hljs-built_in">parseInt</span>(that.currentItem.css(<span class="hljs-string">"paddingBottom"</span>)||<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)); }
					<span class="hljs-keyword">if</span>(!p.width()) { p.width(that.currentItem.innerWidth() - <span class="hljs-built_in">parseInt</span>(that.currentItem.css(<span class="hljs-string">"paddingLeft"</span>)||<span class="hljs-number">0</span>, <span class="hljs-number">10</span>) - <span class="hljs-built_in">parseInt</span>(that.currentItem.css(<span class="hljs-string">"paddingRight"</span>)||<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)); }
				}
			};
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-240">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-240">&#182;</a>
              </div>
              <p>Create the placeholder</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		that.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));</pre></div></div>
            
        </li>
        
        
        <li id="section-241">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-241">&#182;</a>
              </div>
              <p>Append it after the actual current item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		that.currentItem.after(that.placeholder);</pre></div></div>
            
        </li>
        
        
        <li id="section-242">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-242">&#182;</a>
              </div>
              <p>Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		o.placeholder.update(that, that.placeholder);

	},

	_contactContainers: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">var</span> i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, base, cur, nearBottom, floating,
			innermostContainer = <span class="hljs-literal">null</span>,
			innermostIndex = <span class="hljs-literal">null</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-243">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-243">&#182;</a>
              </div>
              <p>get innermost container that intersects with item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">for</span> (i = <span class="hljs-keyword">this</span>.containers.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {</pre></div></div>
            
        </li>
        
        
        <li id="section-244">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-244">&#182;</a>
              </div>
              <p>never consider a container that’s located within the item itself</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>($.contains(<span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.containers[i].element[<span class="hljs-number">0</span>])) {
				<span class="hljs-keyword">continue</span>;
			}

			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._intersectsWith(<span class="hljs-keyword">this</span>.containers[i].containerCache)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-245">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-245">&#182;</a>
              </div>
              <p>if we’ve already found a container and it’s more “inner” than this, then continue</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>(innermostContainer &amp;&amp; $.contains(<span class="hljs-keyword">this</span>.containers[i].element[<span class="hljs-number">0</span>], innermostContainer.element[<span class="hljs-number">0</span>])) {
					<span class="hljs-keyword">continue</span>;
				}

				innermostContainer = <span class="hljs-keyword">this</span>.containers[i];
				innermostIndex = i;

			} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-246">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-246">&#182;</a>
              </div>
              <p>container doesn’t intersect. trigger “out” event if necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.containers[i].containerCache.over) {
					<span class="hljs-keyword">this</span>.containers[i]._trigger(<span class="hljs-string">"out"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));
					<span class="hljs-keyword">this</span>.containers[i].containerCache.over = <span class="hljs-number">0</span>;
				}
			}

		}</pre></div></div>
            
        </li>
        
        
        <li id="section-247">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-247">&#182;</a>
              </div>
              <p>if no intersecting containers found, return</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(!innermostContainer) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-248">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-248">&#182;</a>
              </div>
              <p>move the item into the container if it’s not there already</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.containers.length === <span class="hljs-number">1</span>) {
			<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.containers[innermostIndex].containerCache.over) {
				<span class="hljs-keyword">this</span>.containers[innermostIndex]._trigger(<span class="hljs-string">"over"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));
				<span class="hljs-keyword">this</span>.containers[innermostIndex].containerCache.over = <span class="hljs-number">1</span>;
			}
		} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-249">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-249">&#182;</a>
              </div>
              <p>When entering a new container, we will find the item with the least distance and append our item near it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			dist = <span class="hljs-number">10000</span>;
			itemWithLeastDistance = <span class="hljs-literal">null</span>;
			floating = innermostContainer.floating || isFloating(<span class="hljs-keyword">this</span>.currentItem);
			posProperty = floating ? <span class="hljs-string">"left"</span> : <span class="hljs-string">"top"</span>;
			sizeProperty = floating ? <span class="hljs-string">"width"</span> : <span class="hljs-string">"height"</span>;
			base = <span class="hljs-keyword">this</span>.positionAbs[posProperty] + <span class="hljs-keyword">this</span>.offset.click[posProperty];
			<span class="hljs-keyword">for</span> (j = <span class="hljs-keyword">this</span>.items.length - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">0</span>; j--) {
				<span class="hljs-keyword">if</span>(!$.contains(<span class="hljs-keyword">this</span>.containers[innermostIndex].element[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.items[j].item[<span class="hljs-number">0</span>])) {
					<span class="hljs-keyword">continue</span>;
				}
				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.items[j].item[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>]) {
					<span class="hljs-keyword">continue</span>;
				}
				<span class="hljs-keyword">if</span> (floating &amp;&amp; !isOverAxis(<span class="hljs-keyword">this</span>.positionAbs.top + <span class="hljs-keyword">this</span>.offset.click.top, <span class="hljs-keyword">this</span>.items[j].top, <span class="hljs-keyword">this</span>.items[j].height)) {
					<span class="hljs-keyword">continue</span>;
				}
				cur = <span class="hljs-keyword">this</span>.items[j].item.offset()[posProperty];
				nearBottom = <span class="hljs-literal">false</span>;
				<span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.abs(cur - base) &gt; <span class="hljs-built_in">Math</span>.abs(cur + <span class="hljs-keyword">this</span>.items[j][sizeProperty] - base)){
					nearBottom = <span class="hljs-literal">true</span>;
					cur += <span class="hljs-keyword">this</span>.items[j][sizeProperty];
				}

				<span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.abs(cur - base) &lt; dist) {
					dist = <span class="hljs-built_in">Math</span>.abs(cur - base); itemWithLeastDistance = <span class="hljs-keyword">this</span>.items[j];
					<span class="hljs-keyword">this</span>.direction = nearBottom ? <span class="hljs-string">"up"</span>: <span class="hljs-string">"down"</span>;
				}
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-250">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-250">&#182;</a>
              </div>
              <p>Check if dropOnEmpty is enabled</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span>(!itemWithLeastDistance &amp;&amp; !<span class="hljs-keyword">this</span>.options.dropOnEmpty) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.currentContainer === <span class="hljs-keyword">this</span>.containers[innermostIndex]) {
				<span class="hljs-keyword">return</span>;
			}

			itemWithLeastDistance ? <span class="hljs-keyword">this</span>._rearrange(event, itemWithLeastDistance, <span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>) : <span class="hljs-keyword">this</span>._rearrange(event, <span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span>.containers[innermostIndex].element, <span class="hljs-literal">true</span>);
			<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"change"</span>, event, <span class="hljs-keyword">this</span>._uiHash());
			<span class="hljs-keyword">this</span>.containers[innermostIndex]._trigger(<span class="hljs-string">"change"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));
			<span class="hljs-keyword">this</span>.currentContainer = <span class="hljs-keyword">this</span>.containers[innermostIndex];</pre></div></div>
            
        </li>
        
        
        <li id="section-251">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-251">&#182;</a>
              </div>
              <p>Update the placeholder</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.options.placeholder.update(<span class="hljs-keyword">this</span>.currentContainer, <span class="hljs-keyword">this</span>.placeholder);

			<span class="hljs-keyword">this</span>.containers[innermostIndex]._trigger(<span class="hljs-string">"over"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));
			<span class="hljs-keyword">this</span>.containers[innermostIndex].containerCache.over = <span class="hljs-number">1</span>;
		}


	},

	_createHelper: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>

		<span class="hljs-keyword">var</span> o = <span class="hljs-keyword">this</span>.options,
			helper = $.isFunction(o.helper) ? $(o.helper.apply(<span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>], [event, <span class="hljs-keyword">this</span>.currentItem])) : (o.helper === <span class="hljs-string">"clone"</span> ? <span class="hljs-keyword">this</span>.currentItem.clone() : <span class="hljs-keyword">this</span>.currentItem);</pre></div></div>
            
        </li>
        
        
        <li id="section-252">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-252">&#182;</a>
              </div>
              <p>Add the helper to the DOM if that didn’t happen already</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(!helper.parents(<span class="hljs-string">"body"</span>).length) {
			$(o.appendTo !== <span class="hljs-string">"parent"</span> ? o.appendTo : <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>].parentNode)[<span class="hljs-number">0</span>].appendChild(helper[<span class="hljs-number">0</span>]);
		}

		<span class="hljs-keyword">if</span>(helper[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>]) {
			<span class="hljs-keyword">this</span>._storedCSS = { width: <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>].style.width, height: <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>].style.height, position: <span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-string">"position"</span>), top: <span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-string">"top"</span>), left: <span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-string">"left"</span>) };
		}

		<span class="hljs-keyword">if</span>(!helper[<span class="hljs-number">0</span>].style.width || o.forceHelperSize) {
			helper.width(<span class="hljs-keyword">this</span>.currentItem.width());
		}
		<span class="hljs-keyword">if</span>(!helper[<span class="hljs-number">0</span>].style.height || o.forceHelperSize) {
			helper.height(<span class="hljs-keyword">this</span>.currentItem.height());
		}

		<span class="hljs-keyword">return</span> helper;

	},

	_adjustOffsetFromHelper: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(obj)</span> {</span>
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">"string"</span>) {
			obj = obj.split(<span class="hljs-string">" "</span>);
		}
		<span class="hljs-keyword">if</span> ($.isArray(obj)) {
			obj = {left: +obj[<span class="hljs-number">0</span>], top: +obj[<span class="hljs-number">1</span>] || <span class="hljs-number">0</span>};
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-string">"left"</span> <span class="hljs-keyword">in</span> obj) {
			<span class="hljs-keyword">this</span>.offset.click.left = obj.left + <span class="hljs-keyword">this</span>.margins.left;
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-string">"right"</span> <span class="hljs-keyword">in</span> obj) {
			<span class="hljs-keyword">this</span>.offset.click.left = <span class="hljs-keyword">this</span>.helperProportions.width - obj.right + <span class="hljs-keyword">this</span>.margins.left;
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-string">"top"</span> <span class="hljs-keyword">in</span> obj) {
			<span class="hljs-keyword">this</span>.offset.click.top = obj.top + <span class="hljs-keyword">this</span>.margins.top;
		}
		<span class="hljs-keyword">if</span> (<span class="hljs-string">"bottom"</span> <span class="hljs-keyword">in</span> obj) {
			<span class="hljs-keyword">this</span>.offset.click.top = <span class="hljs-keyword">this</span>.helperProportions.height - obj.bottom + <span class="hljs-keyword">this</span>.margins.top;
		}
	},

	_getParentOffset: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-253">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-253">&#182;</a>
              </div>
              <p>Get the offsetParent and cache its position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.offsetParent = <span class="hljs-keyword">this</span>.helper.offsetParent();
		<span class="hljs-keyword">var</span> po = <span class="hljs-keyword">this</span>.offsetParent.offset();</pre></div></div>
            
        </li>
        
        
        <li id="section-254">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-254">&#182;</a>
              </div>
              <p>This is a special case where we need to modify a offset calculated on start, since the following happened:</p>
<ol>
<li>The position of the helper is absolute, so it’s position is calculated based on the next positioned parent</li>
<li>The actual offset parent is a child of the scroll parent, and the scroll parent isn’t the document, which means that
the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"absolute"</span> &amp;&amp; <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== document &amp;&amp; $.contains(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>])) {
			po.left += <span class="hljs-keyword">this</span>.scrollParent.scrollLeft();
			po.top += <span class="hljs-keyword">this</span>.scrollParent.scrollTop();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-255">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-255">&#182;</a>
              </div>
              <p>This needs to be actually done for all browsers, since pageX/pageY includes this information
with an ugly IE fix</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>( <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>] === document.body || (<span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>].tagName &amp;&amp; <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>].tagName.toLowerCase() === <span class="hljs-string">"html"</span> &amp;&amp; $.ui.ie)) {
			po = { top: <span class="hljs-number">0</span>, left: <span class="hljs-number">0</span> };
		}

		<span class="hljs-keyword">return</span> {
			top: po.top + (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.offsetParent.css(<span class="hljs-string">"borderTopWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>),
			left: po.left + (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.offsetParent.css(<span class="hljs-string">"borderLeftWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>)
		};

	},

	_getRelativeOffset: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"relative"</span>) {
			<span class="hljs-keyword">var</span> p = <span class="hljs-keyword">this</span>.currentItem.position();
			<span class="hljs-keyword">return</span> {
				top: p.top - (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"top"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) + <span class="hljs-keyword">this</span>.scrollParent.scrollTop(),
				left: p.left - (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"left"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) + <span class="hljs-keyword">this</span>.scrollParent.scrollLeft()
			};
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">return</span> { top: <span class="hljs-number">0</span>, left: <span class="hljs-number">0</span> };
		}

	},

	_cacheMargins: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.margins = {
			left: (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-string">"marginLeft"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>),
			top: (<span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-string">"marginTop"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>)
		};
	},

	_cacheHelperProportions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.helperProportions = {
			width: <span class="hljs-keyword">this</span>.helper.outerWidth(),
			height: <span class="hljs-keyword">this</span>.helper.outerHeight()
		};
	},

	_setContainment: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

		<span class="hljs-keyword">var</span> ce, co, over,
			o = <span class="hljs-keyword">this</span>.options;
		<span class="hljs-keyword">if</span>(o.containment === <span class="hljs-string">"parent"</span>) {
			o.containment = <span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>].parentNode;
		}
		<span class="hljs-keyword">if</span>(o.containment === <span class="hljs-string">"document"</span> || o.containment === <span class="hljs-string">"window"</span>) {
			<span class="hljs-keyword">this</span>.containment = [
				<span class="hljs-number">0</span> - <span class="hljs-keyword">this</span>.offset.relative.left - <span class="hljs-keyword">this</span>.offset.parent.left,
				<span class="hljs-number">0</span> - <span class="hljs-keyword">this</span>.offset.relative.top - <span class="hljs-keyword">this</span>.offset.parent.top,
				$(o.containment === <span class="hljs-string">"document"</span> ? document : window).width() - <span class="hljs-keyword">this</span>.helperProportions.width - <span class="hljs-keyword">this</span>.margins.left,
				($(o.containment === <span class="hljs-string">"document"</span> ? document : window).height() || document.body.parentNode.scrollHeight) - <span class="hljs-keyword">this</span>.helperProportions.height - <span class="hljs-keyword">this</span>.margins.top
			];
		}

		<span class="hljs-keyword">if</span>(!(<span class="hljs-regexp">/^(document|window|parent)$/</span>).test(o.containment)) {
			ce = $(o.containment)[<span class="hljs-number">0</span>];
			co = $(o.containment).offset();
			over = ($(ce).css(<span class="hljs-string">"overflow"</span>) !== <span class="hljs-string">"hidden"</span>);

			<span class="hljs-keyword">this</span>.containment = [
				co.left + (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"borderLeftWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) + (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"paddingLeft"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) - <span class="hljs-keyword">this</span>.margins.left,
				co.top + (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"borderTopWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) + (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"paddingTop"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) - <span class="hljs-keyword">this</span>.margins.top,
				co.left+(over ? <span class="hljs-built_in">Math</span>.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"borderLeftWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) - (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"paddingRight"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) - <span class="hljs-keyword">this</span>.helperProportions.width - <span class="hljs-keyword">this</span>.margins.left,
				co.top+(over ? <span class="hljs-built_in">Math</span>.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"borderTopWidth"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) - (<span class="hljs-built_in">parseInt</span>($(ce).css(<span class="hljs-string">"paddingBottom"</span>),<span class="hljs-number">10</span>) || <span class="hljs-number">0</span>) - <span class="hljs-keyword">this</span>.helperProportions.height - <span class="hljs-keyword">this</span>.margins.top
			];
		}

	},

	_convertPositionTo: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d, pos)</span> {</span>

		<span class="hljs-keyword">if</span>(!pos) {
			pos = <span class="hljs-keyword">this</span>.position;
		}
		<span class="hljs-keyword">var</span> mod = d === <span class="hljs-string">"absolute"</span> ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>,
			scroll = <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"absolute"</span> &amp;&amp; !(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== document &amp;&amp; $.contains(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>])) ? <span class="hljs-keyword">this</span>.offsetParent : <span class="hljs-keyword">this</span>.scrollParent,
			scrollIsRootNode = (<span class="hljs-regexp">/(html|body)/i</span>).test(scroll[<span class="hljs-number">0</span>].tagName);

		<span class="hljs-keyword">return</span> {
			top: (
				pos.top	+																<span class="hljs-comment">// The absolute mouse position</span>
				<span class="hljs-keyword">this</span>.offset.relative.top * mod +										<span class="hljs-comment">// Only for relative positioned nodes: Relative offset from element to offset parent</span>
				<span class="hljs-keyword">this</span>.offset.parent.top * mod -											<span class="hljs-comment">// The offsetParent's offset without borders (offset + border)</span>
				( ( <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"fixed"</span> ? -<span class="hljs-keyword">this</span>.scrollParent.scrollTop() : ( scrollIsRootNode ? <span class="hljs-number">0</span> : scroll.scrollTop() ) ) * mod)
			),
			left: (
				pos.left +																<span class="hljs-comment">// The absolute mouse position</span>
				<span class="hljs-keyword">this</span>.offset.relative.left * mod +										<span class="hljs-comment">// Only for relative positioned nodes: Relative offset from element to offset parent</span>
				<span class="hljs-keyword">this</span>.offset.parent.left * mod	-										<span class="hljs-comment">// The offsetParent's offset without borders (offset + border)</span>
				( ( <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"fixed"</span> ? -<span class="hljs-keyword">this</span>.scrollParent.scrollLeft() : scrollIsRootNode ? <span class="hljs-number">0</span> : scroll.scrollLeft() ) * mod)
			)
		};

	},

	_generatePosition: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>

		<span class="hljs-keyword">var</span> top, left,
			o = <span class="hljs-keyword">this</span>.options,
			pageX = event.pageX,
			pageY = event.pageY,
			scroll = <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"absolute"</span> &amp;&amp; !(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== document &amp;&amp; $.contains(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>])) ? <span class="hljs-keyword">this</span>.offsetParent : <span class="hljs-keyword">this</span>.scrollParent, scrollIsRootNode = (<span class="hljs-regexp">/(html|body)/i</span>).test(scroll[<span class="hljs-number">0</span>].tagName);</pre></div></div>
            
        </li>
        
        
        <li id="section-256">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-256">&#182;</a>
              </div>
              <p>This is another very weird special case that only happens for relative elements:</p>
<ol>
<li>If the css position is relative</li>
<li>and the scroll parent is the document or similar to the offset parent
we have to refresh the relative offset during the scroll so there are no jumps</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"relative"</span> &amp;&amp; !(<span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== document &amp;&amp; <span class="hljs-keyword">this</span>.scrollParent[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.offsetParent[<span class="hljs-number">0</span>])) {
			<span class="hljs-keyword">this</span>.offset.relative = <span class="hljs-keyword">this</span>._getRelativeOffset();
		}

		<span class="hljs-comment">/*
		 * - Position constraining -
		 * Constrain the position to a mix of grid, containment.
		 */</span>

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.originalPosition) { <span class="hljs-comment">//If we are not dragging yet, we won't check for options</span>

			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.containment) {
				<span class="hljs-keyword">if</span>(event.pageX - <span class="hljs-keyword">this</span>.offset.click.left &lt; <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">0</span>]) {
					pageX = <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">0</span>] + <span class="hljs-keyword">this</span>.offset.click.left;
				}
				<span class="hljs-keyword">if</span>(event.pageY - <span class="hljs-keyword">this</span>.offset.click.top &lt; <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">1</span>]) {
					pageY = <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">1</span>] + <span class="hljs-keyword">this</span>.offset.click.top;
				}
				<span class="hljs-keyword">if</span>(event.pageX - <span class="hljs-keyword">this</span>.offset.click.left &gt; <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">2</span>]) {
					pageX = <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">2</span>] + <span class="hljs-keyword">this</span>.offset.click.left;
				}
				<span class="hljs-keyword">if</span>(event.pageY - <span class="hljs-keyword">this</span>.offset.click.top &gt; <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">3</span>]) {
					pageY = <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">3</span>] + <span class="hljs-keyword">this</span>.offset.click.top;
				}
			}

			<span class="hljs-keyword">if</span>(o.grid) {
				top = <span class="hljs-keyword">this</span>.originalPageY + <span class="hljs-built_in">Math</span>.round((pageY - <span class="hljs-keyword">this</span>.originalPageY) / o.grid[<span class="hljs-number">1</span>]) * o.grid[<span class="hljs-number">1</span>];
				pageY = <span class="hljs-keyword">this</span>.containment ? ( (top - <span class="hljs-keyword">this</span>.offset.click.top &gt;= <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">1</span>] &amp;&amp; top - <span class="hljs-keyword">this</span>.offset.click.top &lt;= <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">3</span>]) ? top : ((top - <span class="hljs-keyword">this</span>.offset.click.top &gt;= <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">1</span>]) ? top - o.grid[<span class="hljs-number">1</span>] : top + o.grid[<span class="hljs-number">1</span>])) : top;

				left = <span class="hljs-keyword">this</span>.originalPageX + <span class="hljs-built_in">Math</span>.round((pageX - <span class="hljs-keyword">this</span>.originalPageX) / o.grid[<span class="hljs-number">0</span>]) * o.grid[<span class="hljs-number">0</span>];
				pageX = <span class="hljs-keyword">this</span>.containment ? ( (left - <span class="hljs-keyword">this</span>.offset.click.left &gt;= <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">0</span>] &amp;&amp; left - <span class="hljs-keyword">this</span>.offset.click.left &lt;= <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">2</span>]) ? left : ((left - <span class="hljs-keyword">this</span>.offset.click.left &gt;= <span class="hljs-keyword">this</span>.containment[<span class="hljs-number">0</span>]) ? left - o.grid[<span class="hljs-number">0</span>] : left + o.grid[<span class="hljs-number">0</span>])) : left;
			}

		}

		<span class="hljs-keyword">return</span> {
			top: (
				pageY -																<span class="hljs-comment">// The absolute mouse position</span>
				<span class="hljs-keyword">this</span>.offset.click.top -													<span class="hljs-comment">// Click offset (relative to the element)</span>
				<span class="hljs-keyword">this</span>.offset.relative.top	-											<span class="hljs-comment">// Only for relative positioned nodes: Relative offset from element to offset parent</span>
				<span class="hljs-keyword">this</span>.offset.parent.top +												<span class="hljs-comment">// The offsetParent's offset without borders (offset + border)</span>
				( ( <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"fixed"</span> ? -<span class="hljs-keyword">this</span>.scrollParent.scrollTop() : ( scrollIsRootNode ? <span class="hljs-number">0</span> : scroll.scrollTop() ) ))
			),
			left: (
				pageX -																<span class="hljs-comment">// The absolute mouse position</span>
				<span class="hljs-keyword">this</span>.offset.click.left -												<span class="hljs-comment">// Click offset (relative to the element)</span>
				<span class="hljs-keyword">this</span>.offset.relative.left	-											<span class="hljs-comment">// Only for relative positioned nodes: Relative offset from element to offset parent</span>
				<span class="hljs-keyword">this</span>.offset.parent.left +												<span class="hljs-comment">// The offsetParent's offset without borders (offset + border)</span>
				( ( <span class="hljs-keyword">this</span>.cssPosition === <span class="hljs-string">"fixed"</span> ? -<span class="hljs-keyword">this</span>.scrollParent.scrollLeft() : scrollIsRootNode ? <span class="hljs-number">0</span> : scroll.scrollLeft() ))
			)
		};

	},

	_rearrange: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, i, a, hardRefresh)</span> {</span>

		a ? a[<span class="hljs-number">0</span>].appendChild(<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>]) : i.item[<span class="hljs-number">0</span>].parentNode.insertBefore(<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>], (<span class="hljs-keyword">this</span>.direction === <span class="hljs-string">"down"</span> ? i.item[<span class="hljs-number">0</span>] : i.item[<span class="hljs-number">0</span>].nextSibling));</pre></div></div>
            
        </li>
        
        
        <li id="section-257">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-257">&#182;</a>
              </div>
              <p>Various things done here to improve the performance:</p>
<ol>
<li>we create a setTimeout, that calls refreshPositions</li>
<li>on the instance, we have a counter variable, that get’s higher after every append</li>
<li>on the local scope, we copy the counter variable, and check in the timeout, if it’s still the same</li>
<li>this lets only the last addition to the timeout stack through</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.counter = <span class="hljs-keyword">this</span>.counter ? ++<span class="hljs-keyword">this</span>.counter : <span class="hljs-number">1</span>;
		<span class="hljs-keyword">var</span> counter = <span class="hljs-keyword">this</span>.counter;

		<span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span>(counter === <span class="hljs-keyword">this</span>.counter) {
				<span class="hljs-keyword">this</span>.refreshPositions(!hardRefresh); <span class="hljs-comment">//Precompute after each DOM insertion, NOT on mousemove</span>
			}
		});

	},

	_clear: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event, noPropagation)</span> {</span>

		<span class="hljs-keyword">this</span>.reverting = <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-258">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-258">&#182;</a>
              </div>
              <p>We delay all events that have to be triggered to after the point where the placeholder has been removed and
everything else normalized again</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> i,
			delayedTriggers = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-259">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-259">&#182;</a>
              </div>
              <p>We first have to update the dom position of the actual currentItem
Note: don’t do it if the current item is already removed (by a user), or it gets reappended (see #4088)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>._noFinalSort &amp;&amp; <span class="hljs-keyword">this</span>.currentItem.parent().length) {
			<span class="hljs-keyword">this</span>.placeholder.before(<span class="hljs-keyword">this</span>.currentItem);
		}
		<span class="hljs-keyword">this</span>._noFinalSort = <span class="hljs-literal">null</span>;

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>]) {
			<span class="hljs-keyword">for</span>(i <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>._storedCSS) {
				<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._storedCSS[i] === <span class="hljs-string">"auto"</span> || <span class="hljs-keyword">this</span>._storedCSS[i] === <span class="hljs-string">"static"</span>) {
					<span class="hljs-keyword">this</span>._storedCSS[i] = <span class="hljs-string">""</span>;
				}
			}
			<span class="hljs-keyword">this</span>.currentItem.css(<span class="hljs-keyword">this</span>._storedCSS).removeClass(<span class="hljs-string">"ui-sortable-helper"</span>);
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.currentItem.show();
		}

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.fromOutside &amp;&amp; !noPropagation) {
			delayedTriggers.push(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span> <span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"receive"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>.fromOutside)); });
		}
		<span class="hljs-keyword">if</span>((<span class="hljs-keyword">this</span>.fromOutside || <span class="hljs-keyword">this</span>.domPosition.prev !== <span class="hljs-keyword">this</span>.currentItem.prev().not(<span class="hljs-string">".ui-sortable-helper"</span>)[<span class="hljs-number">0</span>] || <span class="hljs-keyword">this</span>.domPosition.parent !== <span class="hljs-keyword">this</span>.currentItem.parent()[<span class="hljs-number">0</span>]) &amp;&amp; !noPropagation) {
			delayedTriggers.push(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span> <span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"update"</span>, event, <span class="hljs-keyword">this</span>._uiHash()); }); <span class="hljs-comment">//Trigger update callback if the DOM position has changed</span>
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-260">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-260">&#182;</a>
              </div>
              <p>Check if the items Container has Changed and trigger appropriate
events.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> !== <span class="hljs-keyword">this</span>.currentContainer) {
			<span class="hljs-keyword">if</span>(!noPropagation) {
				delayedTriggers.push(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span> <span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"remove"</span>, event, <span class="hljs-keyword">this</span>._uiHash()); });
				delayedTriggers.push((<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(c)</span> {</span> <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span> c._trigger(<span class="hljs-string">"receive"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>)); };  }).call(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.currentContainer));
				delayedTriggers.push((<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(c)</span> {</span> <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span> c._trigger(<span class="hljs-string">"update"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>));  }; }).call(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.currentContainer));
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-261">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-261">&#182;</a>
              </div>
              <p>Post events to containers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">for</span> (i = <span class="hljs-keyword">this</span>.containers.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--){
			<span class="hljs-keyword">if</span>(!noPropagation) {
				delayedTriggers.push((<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(c)</span> {</span> <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span> c._trigger(<span class="hljs-string">"deactivate"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>)); };  }).call(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.containers[i]));
			}
			<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.containers[i].containerCache.over) {
				delayedTriggers.push((<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(c)</span> {</span> <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span> c._trigger(<span class="hljs-string">"out"</span>, event, <span class="hljs-keyword">this</span>._uiHash(<span class="hljs-keyword">this</span>)); };  }).call(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.containers[i]));
				<span class="hljs-keyword">this</span>.containers[i].containerCache.over = <span class="hljs-number">0</span>;
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-262">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-262">&#182;</a>
              </div>
              <p>Do what was originally in plugins</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.storedCursor ) {
			<span class="hljs-keyword">this</span>.document.find( <span class="hljs-string">"body"</span> ).css( <span class="hljs-string">"cursor"</span>, <span class="hljs-keyword">this</span>.storedCursor );
			<span class="hljs-keyword">this</span>.storedStylesheet.remove();
		}
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._storedOpacity) {
			<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"opacity"</span>, <span class="hljs-keyword">this</span>._storedOpacity);
		}
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>._storedZIndex) {
			<span class="hljs-keyword">this</span>.helper.css(<span class="hljs-string">"zIndex"</span>, <span class="hljs-keyword">this</span>._storedZIndex === <span class="hljs-string">"auto"</span> ? <span class="hljs-string">""</span> : <span class="hljs-keyword">this</span>._storedZIndex);
		}

		<span class="hljs-keyword">this</span>.dragging = <span class="hljs-literal">false</span>;
		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.cancelHelperRemoval) {
			<span class="hljs-keyword">if</span>(!noPropagation) {
				<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"beforeStop"</span>, event, <span class="hljs-keyword">this</span>._uiHash());
				<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i &lt; delayedTriggers.length; i++) {
					delayedTriggers[i].call(<span class="hljs-keyword">this</span>, event);
				} <span class="hljs-comment">//Trigger all delayed events</span>
				<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"stop"</span>, event, <span class="hljs-keyword">this</span>._uiHash());
			}

			<span class="hljs-keyword">this</span>.fromOutside = <span class="hljs-literal">false</span>;
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		<span class="hljs-keyword">if</span>(!noPropagation) {
			<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"beforeStop"</span>, event, <span class="hljs-keyword">this</span>._uiHash());
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-263">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-263">&#182;</a>
              </div>
              <p>$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>].parentNode.removeChild(<span class="hljs-keyword">this</span>.placeholder[<span class="hljs-number">0</span>]);

		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.helper[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.currentItem[<span class="hljs-number">0</span>]) {
			<span class="hljs-keyword">this</span>.helper.remove();
		}
		<span class="hljs-keyword">this</span>.helper = <span class="hljs-literal">null</span>;

		<span class="hljs-keyword">if</span>(!noPropagation) {
			<span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i &lt; delayedTriggers.length; i++) {
				delayedTriggers[i].call(<span class="hljs-keyword">this</span>, event);
			} <span class="hljs-comment">//Trigger all delayed events</span>
			<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"stop"</span>, event, <span class="hljs-keyword">this</span>._uiHash());
		}

		<span class="hljs-keyword">this</span>.fromOutside = <span class="hljs-literal">false</span>;
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

	},

	_trigger: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">if</span> ($.Widget.prototype._trigger.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>) === <span class="hljs-literal">false</span>) {
			<span class="hljs-keyword">this</span>.cancel();
		}
	},

	_uiHash: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_inst)</span> {</span>
		<span class="hljs-keyword">var</span> inst = _inst || <span class="hljs-keyword">this</span>;
		<span class="hljs-keyword">return</span> {
			helper: inst.helper,
			placeholder: inst.placeholder || $([]),
			position: inst.position,
			originalPosition: inst.originalPosition,
			offset: inst.positionAbs,
			item: inst.currentItem,
			sender: _inst ? _inst.element : <span class="hljs-literal">null</span>
		};
	}

});

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

<span class="hljs-keyword">var</span> uid = <span class="hljs-number">0</span>,
	hideProps = {},
	showProps = {};

hideProps.height = hideProps.paddingTop = hideProps.paddingBottom =
	hideProps.borderTopWidth = hideProps.borderBottomWidth = <span class="hljs-string">"hide"</span>;
showProps.height = showProps.paddingTop = showProps.paddingBottom =
	showProps.borderTopWidth = showProps.borderBottomWidth = <span class="hljs-string">"show"</span>;

$.widget( <span class="hljs-string">"ui.accordion"</span>, {
	version: <span class="hljs-string">"1.10.3"</span>,
	options: {
		active: <span class="hljs-number">0</span>,
		animate: {},
		collapsible: <span class="hljs-literal">false</span>,
		event: <span class="hljs-string">"click"</span>,
		header: <span class="hljs-string">"&gt; li &gt; :first-child,&gt; :not(li):even"</span>,
		heightStyle: <span class="hljs-string">"auto"</span>,
		icons: {
			activeHeader: <span class="hljs-string">"ui-icon-triangle-1-s"</span>,
			header: <span class="hljs-string">"ui-icon-triangle-1-e"</span>
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-264">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-264">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		activate: <span class="hljs-literal">null</span>,
		beforeActivate: <span class="hljs-literal">null</span>
	},

	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>.options;
		<span class="hljs-keyword">this</span>.prevShow = <span class="hljs-keyword">this</span>.prevHide = $();
		<span class="hljs-keyword">this</span>.element.addClass( <span class="hljs-string">"ui-accordion ui-widget ui-helper-reset"</span> )</pre></div></div>
            
        </li>
        
        
        <li id="section-265">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-265">&#182;</a>
              </div>
              <p>ARIA</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			.attr( <span class="hljs-string">"role"</span>, <span class="hljs-string">"tablist"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-266">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-266">&#182;</a>
              </div>
              <p>don’t allow collapsible: false and active: false / null</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( !options.collapsible &amp;&amp; (options.active === <span class="hljs-literal">false</span> || options.active == <span class="hljs-literal">null</span>) ) {
			options.active = <span class="hljs-number">0</span>;
		}

		<span class="hljs-keyword">this</span>._processPanels();</pre></div></div>
            
        </li>
        
        
        <li id="section-267">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-267">&#182;</a>
              </div>
              <p>handle negative values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( options.active &lt; <span class="hljs-number">0</span> ) {
			options.active += <span class="hljs-keyword">this</span>.headers.length;
		}
		<span class="hljs-keyword">this</span>._refresh();
	},

	_getCreateEventData: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> {
			header: <span class="hljs-keyword">this</span>.active,
			panel: !<span class="hljs-keyword">this</span>.active.length ? $() : <span class="hljs-keyword">this</span>.active.next(),
			content: !<span class="hljs-keyword">this</span>.active.length ? $() : <span class="hljs-keyword">this</span>.active.next()
		};
	},

	_createIcons: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> icons = <span class="hljs-keyword">this</span>.options.icons;
		<span class="hljs-keyword">if</span> ( icons ) {
			$( <span class="hljs-string">"&lt;span&gt;"</span> )
				.addClass( <span class="hljs-string">"ui-accordion-header-icon ui-icon "</span> + icons.header )
				.prependTo( <span class="hljs-keyword">this</span>.headers );
			<span class="hljs-keyword">this</span>.active.children( <span class="hljs-string">".ui-accordion-header-icon"</span> )
				.removeClass( icons.header )
				.addClass( icons.activeHeader );
			<span class="hljs-keyword">this</span>.headers.addClass( <span class="hljs-string">"ui-accordion-icons"</span> );
		}
	},

	_destroyIcons: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.headers
			.removeClass( <span class="hljs-string">"ui-accordion-icons"</span> )
			.children( <span class="hljs-string">".ui-accordion-header-icon"</span> )
				.remove();
	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> contents;</pre></div></div>
            
        </li>
        
        
        <li id="section-268">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-268">&#182;</a>
              </div>
              <p>clean up main element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.element
			.removeClass( <span class="hljs-string">"ui-accordion ui-widget ui-helper-reset"</span> )
			.removeAttr( <span class="hljs-string">"role"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-269">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-269">&#182;</a>
              </div>
              <p>clean up headers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.headers
			.removeClass( <span class="hljs-string">"ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top"</span> )
			.removeAttr( <span class="hljs-string">"role"</span> )
			.removeAttr( <span class="hljs-string">"aria-selected"</span> )
			.removeAttr( <span class="hljs-string">"aria-controls"</span> )
			.removeAttr( <span class="hljs-string">"tabIndex"</span> )
			.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ( <span class="hljs-regexp">/^ui-accordion/</span>.test( <span class="hljs-keyword">this</span>.id ) ) {
					<span class="hljs-keyword">this</span>.removeAttribute( <span class="hljs-string">"id"</span> );
				}
			});
		<span class="hljs-keyword">this</span>._destroyIcons();</pre></div></div>
            
        </li>
        
        
        <li id="section-270">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-270">&#182;</a>
              </div>
              <p>clean up content panels</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		contents = <span class="hljs-keyword">this</span>.headers.next()
			.css( <span class="hljs-string">"display"</span>, <span class="hljs-string">""</span> )
			.removeAttr( <span class="hljs-string">"role"</span> )
			.removeAttr( <span class="hljs-string">"aria-expanded"</span> )
			.removeAttr( <span class="hljs-string">"aria-hidden"</span> )
			.removeAttr( <span class="hljs-string">"aria-labelledby"</span> )
			.removeClass( <span class="hljs-string">"ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled"</span> )
			.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ( <span class="hljs-regexp">/^ui-accordion/</span>.test( <span class="hljs-keyword">this</span>.id ) ) {
					<span class="hljs-keyword">this</span>.removeAttribute( <span class="hljs-string">"id"</span> );
				}
			});
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.heightStyle !== <span class="hljs-string">"content"</span> ) {
			contents.css( <span class="hljs-string">"height"</span>, <span class="hljs-string">""</span> );
		}
	},

	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"active"</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-271">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-271">&#182;</a>
              </div>
              <p>_activate() will handle invalid values and update this.options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>._activate( value );
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"event"</span> ) {
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.event ) {
				<span class="hljs-keyword">this</span>._off( <span class="hljs-keyword">this</span>.headers, <span class="hljs-keyword">this</span>.options.event );
			}
			<span class="hljs-keyword">this</span>._setupEvents( value );
		}

		<span class="hljs-keyword">this</span>._super( key, value );</pre></div></div>
            
        </li>
        
        
        <li id="section-272">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-272">&#182;</a>
              </div>
              <p>setting collapsible: false while collapsed; open first panel</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"collapsible"</span> &amp;&amp; !value &amp;&amp; <span class="hljs-keyword">this</span>.options.active === <span class="hljs-literal">false</span> ) {
			<span class="hljs-keyword">this</span>._activate( <span class="hljs-number">0</span> );
		}

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"icons"</span> ) {
			<span class="hljs-keyword">this</span>._destroyIcons();
			<span class="hljs-keyword">if</span> ( value ) {
				<span class="hljs-keyword">this</span>._createIcons();
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-273">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-273">&#182;</a>
              </div>
              <h1 id="5332-opacity-doesn-t-cascade-to-positioned-elements-in-ie">5332 - opacity doesn’t cascade to positioned elements in IE</h1>
<p>so we need to add the disabled class to the headers and panels</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"disabled"</span> ) {
			<span class="hljs-keyword">this</span>.headers.add( <span class="hljs-keyword">this</span>.headers.next() )
				.toggleClass( <span class="hljs-string">"ui-state-disabled"</span>, !!value );
		}
	},

	_keydown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-comment">/*jshint maxcomplexity:15*/</span>
		<span class="hljs-keyword">if</span> ( event.altKey || event.ctrlKey ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">var</span> keyCode = $.ui.keyCode,
			length = <span class="hljs-keyword">this</span>.headers.length,
			currentIndex = <span class="hljs-keyword">this</span>.headers.index( event.target ),
			toFocus = <span class="hljs-literal">false</span>;

		<span class="hljs-keyword">switch</span> ( event.keyCode ) {
			<span class="hljs-keyword">case</span> keyCode.RIGHT:
			<span class="hljs-keyword">case</span> keyCode.DOWN:
				toFocus = <span class="hljs-keyword">this</span>.headers[ ( currentIndex + <span class="hljs-number">1</span> ) % length ];
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> keyCode.LEFT:
			<span class="hljs-keyword">case</span> keyCode.UP:
				toFocus = <span class="hljs-keyword">this</span>.headers[ ( currentIndex - <span class="hljs-number">1</span> + length ) % length ];
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> keyCode.SPACE:
			<span class="hljs-keyword">case</span> keyCode.ENTER:
				<span class="hljs-keyword">this</span>._eventHandler( event );
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> keyCode.HOME:
				toFocus = <span class="hljs-keyword">this</span>.headers[ <span class="hljs-number">0</span> ];
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> keyCode.END:
				toFocus = <span class="hljs-keyword">this</span>.headers[ length - <span class="hljs-number">1</span> ];
				<span class="hljs-keyword">break</span>;
		}

		<span class="hljs-keyword">if</span> ( toFocus ) {
			$( event.target ).attr( <span class="hljs-string">"tabIndex"</span>, -<span class="hljs-number">1</span> );
			$( toFocus ).attr( <span class="hljs-string">"tabIndex"</span>, <span class="hljs-number">0</span> );
			toFocus.focus();
			event.preventDefault();
		}
	},

	_panelKeyDown : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">if</span> ( event.keyCode === $.ui.keyCode.UP &amp;&amp; event.ctrlKey ) {
			$( event.currentTarget ).prev().focus();
		}
	},

	refresh: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>.options;
		<span class="hljs-keyword">this</span>._processPanels();</pre></div></div>
            
        </li>
        
        
        <li id="section-274">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-274">&#182;</a>
              </div>
              <p>was collapsed or no panel</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( ( options.active === <span class="hljs-literal">false</span> &amp;&amp; options.collapsible === <span class="hljs-literal">true</span> ) || !<span class="hljs-keyword">this</span>.headers.length ) {
			options.active = <span class="hljs-literal">false</span>;
			<span class="hljs-keyword">this</span>.active = $();</pre></div></div>
            
        </li>
        
        
        <li id="section-275">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-275">&#182;</a>
              </div>
              <p>active false only when collapsible is true</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( options.active === <span class="hljs-literal">false</span> ) {
			<span class="hljs-keyword">this</span>._activate( <span class="hljs-number">0</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-276">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-276">&#182;</a>
              </div>
              <p>was active, but active panel is gone</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.active.length &amp;&amp; !$.contains( <span class="hljs-keyword">this</span>.element[ <span class="hljs-number">0</span> ], <span class="hljs-keyword">this</span>.active[ <span class="hljs-number">0</span> ] ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-277">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-277">&#182;</a>
              </div>
              <p>all remaining panel are disabled</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.headers.length === <span class="hljs-keyword">this</span>.headers.find(<span class="hljs-string">".ui-state-disabled"</span>).length ) {
				options.active = <span class="hljs-literal">false</span>;
				<span class="hljs-keyword">this</span>.active = $();</pre></div></div>
            
        </li>
        
        
        <li id="section-278">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-278">&#182;</a>
              </div>
              <p>activate previous panel</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>._activate( <span class="hljs-built_in">Math</span>.max( <span class="hljs-number">0</span>, options.active - <span class="hljs-number">1</span> ) );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-279">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-279">&#182;</a>
              </div>
              <p>was active, active panel still exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-280">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-280">&#182;</a>
              </div>
              <p>make sure active index is correct</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			options.active = <span class="hljs-keyword">this</span>.headers.index( <span class="hljs-keyword">this</span>.active );
		}

		<span class="hljs-keyword">this</span>._destroyIcons();

		<span class="hljs-keyword">this</span>._refresh();
	},

	_processPanels: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.headers = <span class="hljs-keyword">this</span>.element.find( <span class="hljs-keyword">this</span>.options.header )
			.addClass( <span class="hljs-string">"ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"</span> );

		<span class="hljs-keyword">this</span>.headers.next()
			.addClass( <span class="hljs-string">"ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"</span> )
			.filter(<span class="hljs-string">":not(.ui-accordion-content-active)"</span>)
			.hide();
	},

	_refresh: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> maxHeight,
			options = <span class="hljs-keyword">this</span>.options,
			heightStyle = options.heightStyle,
			parent = <span class="hljs-keyword">this</span>.element.parent(),
			accordionId = <span class="hljs-keyword">this</span>.accordionId = <span class="hljs-string">"ui-accordion-"</span> +
				(<span class="hljs-keyword">this</span>.element.attr( <span class="hljs-string">"id"</span> ) || ++uid);

		<span class="hljs-keyword">this</span>.active = <span class="hljs-keyword">this</span>._findActive( options.active )
			.addClass( <span class="hljs-string">"ui-accordion-header-active ui-state-active ui-corner-top"</span> )
			.removeClass( <span class="hljs-string">"ui-corner-all"</span> );
		<span class="hljs-keyword">this</span>.active.next()
			.addClass( <span class="hljs-string">"ui-accordion-content-active"</span> )
			.show();

		<span class="hljs-keyword">this</span>.headers
			.attr( <span class="hljs-string">"role"</span>, <span class="hljs-string">"tab"</span> )
			.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i )</span> {</span>
				<span class="hljs-keyword">var</span> header = $( <span class="hljs-keyword">this</span> ),
					headerId = header.attr( <span class="hljs-string">"id"</span> ),
					panel = header.next(),
					panelId = panel.attr( <span class="hljs-string">"id"</span> );
				<span class="hljs-keyword">if</span> ( !headerId ) {
					headerId = accordionId + <span class="hljs-string">"-header-"</span> + i;
					header.attr( <span class="hljs-string">"id"</span>, headerId );
				}
				<span class="hljs-keyword">if</span> ( !panelId ) {
					panelId = accordionId + <span class="hljs-string">"-panel-"</span> + i;
					panel.attr( <span class="hljs-string">"id"</span>, panelId );
				}
				header.attr( <span class="hljs-string">"aria-controls"</span>, panelId );
				panel.attr( <span class="hljs-string">"aria-labelledby"</span>, headerId );
			})
			.next()
				.attr( <span class="hljs-string">"role"</span>, <span class="hljs-string">"tabpanel"</span> );

		<span class="hljs-keyword">this</span>.headers
			.not( <span class="hljs-keyword">this</span>.active )
			.attr({
				<span class="hljs-string">"aria-selected"</span>: <span class="hljs-string">"false"</span>,
				tabIndex: -<span class="hljs-number">1</span>
			})
			.next()
				.attr({
					<span class="hljs-string">"aria-expanded"</span>: <span class="hljs-string">"false"</span>,
					<span class="hljs-string">"aria-hidden"</span>: <span class="hljs-string">"true"</span>
				})
				.hide();</pre></div></div>
            
        </li>
        
        
        <li id="section-281">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-281">&#182;</a>
              </div>
              <p>make sure at least one header is in the tab order</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.active.length ) {
			<span class="hljs-keyword">this</span>.headers.eq( <span class="hljs-number">0</span> ).attr( <span class="hljs-string">"tabIndex"</span>, <span class="hljs-number">0</span> );
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.active.attr({
				<span class="hljs-string">"aria-selected"</span>: <span class="hljs-string">"true"</span>,
				tabIndex: <span class="hljs-number">0</span>
			})
			.next()
				.attr({
					<span class="hljs-string">"aria-expanded"</span>: <span class="hljs-string">"true"</span>,
					<span class="hljs-string">"aria-hidden"</span>: <span class="hljs-string">"false"</span>
				});
		}

		<span class="hljs-keyword">this</span>._createIcons();

		<span class="hljs-keyword">this</span>._setupEvents( options.event );

		<span class="hljs-keyword">if</span> ( heightStyle === <span class="hljs-string">"fill"</span> ) {
			maxHeight = parent.height();
			<span class="hljs-keyword">this</span>.element.siblings( <span class="hljs-string">":visible"</span> ).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">var</span> elem = $( <span class="hljs-keyword">this</span> ),
					position = elem.css( <span class="hljs-string">"position"</span> );

				<span class="hljs-keyword">if</span> ( position === <span class="hljs-string">"absolute"</span> || position === <span class="hljs-string">"fixed"</span> ) {
					<span class="hljs-keyword">return</span>;
				}
				maxHeight -= elem.outerHeight( <span class="hljs-literal">true</span> );
			});

			<span class="hljs-keyword">this</span>.headers.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				maxHeight -= $( <span class="hljs-keyword">this</span> ).outerHeight( <span class="hljs-literal">true</span> );
			});

			<span class="hljs-keyword">this</span>.headers.next()
				.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					$( <span class="hljs-keyword">this</span> ).height( <span class="hljs-built_in">Math</span>.max( <span class="hljs-number">0</span>, maxHeight -
						$( <span class="hljs-keyword">this</span> ).innerHeight() + $( <span class="hljs-keyword">this</span> ).height() ) );
				})
				.css( <span class="hljs-string">"overflow"</span>, <span class="hljs-string">"auto"</span> );
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( heightStyle === <span class="hljs-string">"auto"</span> ) {
			maxHeight = <span class="hljs-number">0</span>;
			<span class="hljs-keyword">this</span>.headers.next()
				.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					maxHeight = <span class="hljs-built_in">Math</span>.max( maxHeight, $( <span class="hljs-keyword">this</span> ).css( <span class="hljs-string">"height"</span>, <span class="hljs-string">""</span> ).height() );
				})
				.height( maxHeight );
		}
	},

	_activate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index )</span> {</span>
		<span class="hljs-keyword">var</span> active = <span class="hljs-keyword">this</span>._findActive( index )[ <span class="hljs-number">0</span> ];</pre></div></div>
            
        </li>
        
        
        <li id="section-282">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-282">&#182;</a>
              </div>
              <p>trying to activate the already active panel</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( active === <span class="hljs-keyword">this</span>.active[ <span class="hljs-number">0</span> ] ) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-283">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-283">&#182;</a>
              </div>
              <p>trying to collapse, simulate a click on the currently active header</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		active = active || <span class="hljs-keyword">this</span>.active[ <span class="hljs-number">0</span> ];

		<span class="hljs-keyword">this</span>._eventHandler({
			target: active,
			currentTarget: active,
			preventDefault: $.noop
		});
	},

	_findActive: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( selector )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> selector === <span class="hljs-string">"number"</span> ? <span class="hljs-keyword">this</span>.headers.eq( selector ) : $();
	},

	_setupEvents: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> events = {
			keydown: <span class="hljs-string">"_keydown"</span>
		};
		<span class="hljs-keyword">if</span> ( event ) {
			$.each( event.split(<span class="hljs-string">" "</span>), <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index, eventName )</span> {</span>
				events[ eventName ] = <span class="hljs-string">"_eventHandler"</span>;
			});
		}

		<span class="hljs-keyword">this</span>._off( <span class="hljs-keyword">this</span>.headers.add( <span class="hljs-keyword">this</span>.headers.next() ) );
		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.headers, events );
		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.headers.next(), { keydown: <span class="hljs-string">"_panelKeyDown"</span> });
		<span class="hljs-keyword">this</span>._hoverable( <span class="hljs-keyword">this</span>.headers );
		<span class="hljs-keyword">this</span>._focusable( <span class="hljs-keyword">this</span>.headers );
	},

	_eventHandler: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>.options,
			active = <span class="hljs-keyword">this</span>.active,
			clicked = $( event.currentTarget ),
			clickedIsActive = clicked[ <span class="hljs-number">0</span> ] === active[ <span class="hljs-number">0</span> ],
			collapsing = clickedIsActive &amp;&amp; options.collapsible,
			toShow = collapsing ? $() : clicked.next(),
			toHide = active.next(),
			eventData = {
				oldHeader: active,
				oldPanel: toHide,
				newHeader: collapsing ? $() : clicked,
				newPanel: toShow
			};

		event.preventDefault();

		<span class="hljs-keyword">if</span> (</pre></div></div>
            
        </li>
        
        
        <li id="section-284">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-284">&#182;</a>
              </div>
              <p>click on active header, but not collapsible</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				( clickedIsActive &amp;&amp; !options.collapsible ) ||</pre></div></div>
            
        </li>
        
        
        <li id="section-285">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-285">&#182;</a>
              </div>
              <p>allow canceling activation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				( <span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"beforeActivate"</span>, event, eventData ) === <span class="hljs-literal">false</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		options.active = collapsing ? <span class="hljs-literal">false</span> : <span class="hljs-keyword">this</span>.headers.index( clicked );</pre></div></div>
            
        </li>
        
        
        <li id="section-286">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-286">&#182;</a>
              </div>
              <p>when the call to ._toggle() comes after the class changes
it causes a very odd bug in IE 8 (see #6720)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.active = clickedIsActive ? $() : clicked;
		<span class="hljs-keyword">this</span>._toggle( eventData );</pre></div></div>
            
        </li>
        
        
        <li id="section-287">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-287">&#182;</a>
              </div>
              <p>switch classes
corner classes on the previously active header stay after the animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		active.removeClass( <span class="hljs-string">"ui-accordion-header-active ui-state-active"</span> );
		<span class="hljs-keyword">if</span> ( options.icons ) {
			active.children( <span class="hljs-string">".ui-accordion-header-icon"</span> )
				.removeClass( options.icons.activeHeader )
				.addClass( options.icons.header );
		}

		<span class="hljs-keyword">if</span> ( !clickedIsActive ) {
			clicked
				.removeClass( <span class="hljs-string">"ui-corner-all"</span> )
				.addClass( <span class="hljs-string">"ui-accordion-header-active ui-state-active ui-corner-top"</span> );
			<span class="hljs-keyword">if</span> ( options.icons ) {
				clicked.children( <span class="hljs-string">".ui-accordion-header-icon"</span> )
					.removeClass( options.icons.header )
					.addClass( options.icons.activeHeader );
			}

			clicked
				.next()
				.addClass( <span class="hljs-string">"ui-accordion-content-active"</span> );
		}
	},

	_toggle: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( data )</span> {</span>
		<span class="hljs-keyword">var</span> toShow = data.newPanel,
			toHide = <span class="hljs-keyword">this</span>.prevShow.length ? <span class="hljs-keyword">this</span>.prevShow : data.oldPanel;</pre></div></div>
            
        </li>
        
        
        <li id="section-288">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-288">&#182;</a>
              </div>
              <p>handle activating a panel during the animation for another activation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.prevShow.add( <span class="hljs-keyword">this</span>.prevHide ).stop( <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span> );
		<span class="hljs-keyword">this</span>.prevShow = toShow;
		<span class="hljs-keyword">this</span>.prevHide = toHide;

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.animate ) {
			<span class="hljs-keyword">this</span>._animate( toShow, toHide, data );
		} <span class="hljs-keyword">else</span> {
			toHide.hide();
			toShow.show();
			<span class="hljs-keyword">this</span>._toggleComplete( data );
		}

		toHide.attr({
			<span class="hljs-string">"aria-expanded"</span>: <span class="hljs-string">"false"</span>,
			<span class="hljs-string">"aria-hidden"</span>: <span class="hljs-string">"true"</span>
		});
		toHide.prev().attr( <span class="hljs-string">"aria-selected"</span>, <span class="hljs-string">"false"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-289">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-289">&#182;</a>
              </div>
              <p>if we’re switching panels, remove the old header from the tab order
if we’re opening from collapsed state, remove the previous header from the tab order
if we’re collapsing, then keep the collapsing header in the tab order</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( toShow.length &amp;&amp; toHide.length ) {
			toHide.prev().attr( <span class="hljs-string">"tabIndex"</span>, -<span class="hljs-number">1</span> );
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( toShow.length ) {
			<span class="hljs-keyword">this</span>.headers.filter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">return</span> $( <span class="hljs-keyword">this</span> ).attr( <span class="hljs-string">"tabIndex"</span> ) === <span class="hljs-number">0</span>;
			})
			.attr( <span class="hljs-string">"tabIndex"</span>, -<span class="hljs-number">1</span> );
		}

		toShow
			.attr({
				<span class="hljs-string">"aria-expanded"</span>: <span class="hljs-string">"true"</span>,
				<span class="hljs-string">"aria-hidden"</span>: <span class="hljs-string">"false"</span>
			})
			.prev()
				.attr({
					<span class="hljs-string">"aria-selected"</span>: <span class="hljs-string">"true"</span>,
					tabIndex: <span class="hljs-number">0</span>
				});
	},

	_animate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( toShow, toHide, data )</span> {</span>
		<span class="hljs-keyword">var</span> total, easing, duration,
			that = <span class="hljs-keyword">this</span>,
			adjust = <span class="hljs-number">0</span>,
			down = toShow.length &amp;&amp;
				( !toHide.length || ( toShow.index() &lt; toHide.index() ) ),
			animate = <span class="hljs-keyword">this</span>.options.animate || {},
			options = down &amp;&amp; animate.down || animate,
			complete = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				that._toggleComplete( data );
			};

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">"number"</span> ) {
			duration = options;
		}
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">"string"</span> ) {
			easing = options;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-290">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-290">&#182;</a>
              </div>
              <p>fall back from options to animation in case of partial down settings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		easing = easing || options.easing || animate.easing;
		duration = duration || options.duration || animate.duration;

		<span class="hljs-keyword">if</span> ( !toHide.length ) {
			<span class="hljs-keyword">return</span> toShow.animate( showProps, duration, easing, complete );
		}
		<span class="hljs-keyword">if</span> ( !toShow.length ) {
			<span class="hljs-keyword">return</span> toHide.animate( hideProps, duration, easing, complete );
		}

		total = toShow.show().outerHeight();
		toHide.animate( hideProps, {
			duration: duration,
			easing: easing,
			step: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( now, fx )</span> {</span>
				fx.now = <span class="hljs-built_in">Math</span>.round( now );
			}
		});
		toShow
			.hide()
			.animate( showProps, {
				duration: duration,
				easing: easing,
				complete: complete,
				step: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( now, fx )</span> {</span>
					fx.now = <span class="hljs-built_in">Math</span>.round( now );
					<span class="hljs-keyword">if</span> ( fx.prop !== <span class="hljs-string">"height"</span> ) {
						adjust += fx.now;
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( that.options.heightStyle !== <span class="hljs-string">"content"</span> ) {
						fx.now = <span class="hljs-built_in">Math</span>.round( total - toHide.outerHeight() - adjust );
						adjust = <span class="hljs-number">0</span>;
					}
				}
			});
	},

	_toggleComplete: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( data )</span> {</span>
		<span class="hljs-keyword">var</span> toHide = data.oldPanel;

		toHide
			.removeClass( <span class="hljs-string">"ui-accordion-content-active"</span> )
			.prev()
				.removeClass( <span class="hljs-string">"ui-corner-top"</span> )
				.addClass( <span class="hljs-string">"ui-corner-all"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-291">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-291">&#182;</a>
              </div>
              <p>Work around for rendering bug in IE (#5421)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( toHide.length ) {
			toHide.parent()[<span class="hljs-number">0</span>].className = toHide.parent()[<span class="hljs-number">0</span>].className;
		}

		<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"activate"</span>, <span class="hljs-literal">null</span>, data );
	}
});

})( jQuery );
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-292">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-292">&#182;</a>
              </div>
              <p>used to prevent race conditions with remote data sources</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> requestIndex = <span class="hljs-number">0</span>;

$.widget( <span class="hljs-string">"ui.autocomplete"</span>, {
	version: <span class="hljs-string">"1.10.3"</span>,
	defaultElement: <span class="hljs-string">"&lt;input&gt;"</span>,
	options: {
		appendTo: <span class="hljs-literal">null</span>,
		autoFocus: <span class="hljs-literal">false</span>,
		delay: <span class="hljs-number">300</span>,
		minLength: <span class="hljs-number">1</span>,
		position: {
			my: <span class="hljs-string">"left top"</span>,
			at: <span class="hljs-string">"left bottom"</span>,
			collision: <span class="hljs-string">"none"</span>
		},
		source: <span class="hljs-literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-293">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-293">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		change: <span class="hljs-literal">null</span>,
		close: <span class="hljs-literal">null</span>,
		focus: <span class="hljs-literal">null</span>,
		open: <span class="hljs-literal">null</span>,
		response: <span class="hljs-literal">null</span>,
		search: <span class="hljs-literal">null</span>,
		select: <span class="hljs-literal">null</span>
	},

	pending: <span class="hljs-number">0</span>,

	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-294">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-294">&#182;</a>
              </div>
              <p>Some browsers only repeat keydown events, not keypress events,
so we use the suppressKeyPress flag to determine if we’ve already
handled the keydown event. #7269
Unfortunately the code for &amp; in keypress is the same as the up arrow,
so we use the suppressKeyPressRepeat flag to avoid handling keypress
events when we know the keydown event was used to modify the
search term. #7799</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> suppressKeyPress, suppressKeyPressRepeat, suppressInput,
			nodeName = <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>].nodeName.toLowerCase(),
			isTextarea = nodeName === <span class="hljs-string">"textarea"</span>,
			isInput = nodeName === <span class="hljs-string">"input"</span>;

		<span class="hljs-keyword">this</span>.isMultiLine =</pre></div></div>
            
        </li>
        
        
        <li id="section-295">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-295">&#182;</a>
              </div>
              <p>Textareas are always multi-line</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			isTextarea ? <span class="hljs-literal">true</span> :</pre></div></div>
            
        </li>
        
        
        <li id="section-296">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-296">&#182;</a>
              </div>
              <p>Inputs are always single-line, even if inside a contentEditable element
IE also treats inputs as contentEditable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			isInput ? <span class="hljs-literal">false</span> :</pre></div></div>
            
        </li>
        
        
        <li id="section-297">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-297">&#182;</a>
              </div>
              <p>All other element types are determined by whether or not they’re contentEditable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.element.prop( <span class="hljs-string">"isContentEditable"</span> );

		<span class="hljs-keyword">this</span>.valueMethod = <span class="hljs-keyword">this</span>.element[ isTextarea || isInput ? <span class="hljs-string">"val"</span> : <span class="hljs-string">"text"</span> ];
		<span class="hljs-keyword">this</span>.isNewMenu = <span class="hljs-literal">true</span>;

		<span class="hljs-keyword">this</span>.element
			.addClass( <span class="hljs-string">"ui-autocomplete-input"</span> )
			.attr( <span class="hljs-string">"autocomplete"</span>, <span class="hljs-string">"off"</span> );

		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.element, {
			keydown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-comment">/*jshint maxcomplexity:15*/</span>
				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.element.prop( <span class="hljs-string">"readOnly"</span> ) ) {
					suppressKeyPress = <span class="hljs-literal">true</span>;
					suppressInput = <span class="hljs-literal">true</span>;
					suppressKeyPressRepeat = <span class="hljs-literal">true</span>;
					<span class="hljs-keyword">return</span>;
				}

				suppressKeyPress = <span class="hljs-literal">false</span>;
				suppressInput = <span class="hljs-literal">false</span>;
				suppressKeyPressRepeat = <span class="hljs-literal">false</span>;
				<span class="hljs-keyword">var</span> keyCode = $.ui.keyCode;
				<span class="hljs-keyword">switch</span>( event.keyCode ) {
				<span class="hljs-keyword">case</span> keyCode.PAGE_UP:
					suppressKeyPress = <span class="hljs-literal">true</span>;
					<span class="hljs-keyword">this</span>._move( <span class="hljs-string">"previousPage"</span>, event );
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> keyCode.PAGE_DOWN:
					suppressKeyPress = <span class="hljs-literal">true</span>;
					<span class="hljs-keyword">this</span>._move( <span class="hljs-string">"nextPage"</span>, event );
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> keyCode.UP:
					suppressKeyPress = <span class="hljs-literal">true</span>;
					<span class="hljs-keyword">this</span>._keyEvent( <span class="hljs-string">"previous"</span>, event );
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> keyCode.DOWN:
					suppressKeyPress = <span class="hljs-literal">true</span>;
					<span class="hljs-keyword">this</span>._keyEvent( <span class="hljs-string">"next"</span>, event );
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> keyCode.ENTER:
				<span class="hljs-keyword">case</span> keyCode.NUMPAD_ENTER:</pre></div></div>
            
        </li>
        
        
        <li id="section-298">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-298">&#182;</a>
              </div>
              <p>when menu is open and has focus</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.menu.active ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-299">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-299">&#182;</a>
              </div>
              <h1 id="6055-opera-still-allows-the-keypress-to-occur">6055 - Opera still allows the keypress to occur</h1>
<p>which causes forms to submit</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						suppressKeyPress = <span class="hljs-literal">true</span>;
						event.preventDefault();
						<span class="hljs-keyword">this</span>.menu.select( event );
					}
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> keyCode.TAB:
					<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.menu.active ) {
						<span class="hljs-keyword">this</span>.menu.select( event );
					}
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> keyCode.ESCAPE:
					<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.menu.element.is( <span class="hljs-string">":visible"</span> ) ) {
						<span class="hljs-keyword">this</span>._value( <span class="hljs-keyword">this</span>.term );
						<span class="hljs-keyword">this</span>.close( event );</pre></div></div>
            
        </li>
        
        
        <li id="section-300">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-300">&#182;</a>
              </div>
              <p>Different browsers have different default behavior for escape
Single press can mean undo or clear
Double press in IE means clear the whole form</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						event.preventDefault();
					}
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">default</span>:
					suppressKeyPressRepeat = <span class="hljs-literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-301">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-301">&#182;</a>
              </div>
              <p>search timeout should be triggered before the input value is changed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">this</span>._searchTimeout( event );
					<span class="hljs-keyword">break</span>;
				}
			},
			keypress: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-keyword">if</span> ( suppressKeyPress ) {
					suppressKeyPress = <span class="hljs-literal">false</span>;
					<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.isMultiLine || <span class="hljs-keyword">this</span>.menu.element.is( <span class="hljs-string">":visible"</span> ) ) {
						event.preventDefault();
					}
					<span class="hljs-keyword">return</span>;
				}
				<span class="hljs-keyword">if</span> ( suppressKeyPressRepeat ) {
					<span class="hljs-keyword">return</span>;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-302">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-302">&#182;</a>
              </div>
              <p>replicate some key handlers to allow them to repeat in Firefox and Opera</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">var</span> keyCode = $.ui.keyCode;
				<span class="hljs-keyword">switch</span>( event.keyCode ) {
				<span class="hljs-keyword">case</span> keyCode.PAGE_UP:
					<span class="hljs-keyword">this</span>._move( <span class="hljs-string">"previousPage"</span>, event );
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> keyCode.PAGE_DOWN:
					<span class="hljs-keyword">this</span>._move( <span class="hljs-string">"nextPage"</span>, event );
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> keyCode.UP:
					<span class="hljs-keyword">this</span>._keyEvent( <span class="hljs-string">"previous"</span>, event );
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> keyCode.DOWN:
					<span class="hljs-keyword">this</span>._keyEvent( <span class="hljs-string">"next"</span>, event );
					<span class="hljs-keyword">break</span>;
				}
			},
			input: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-keyword">if</span> ( suppressInput ) {
					suppressInput = <span class="hljs-literal">false</span>;
					event.preventDefault();
					<span class="hljs-keyword">return</span>;
				}
				<span class="hljs-keyword">this</span>._searchTimeout( event );
			},
			focus: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">this</span>.selectedItem = <span class="hljs-literal">null</span>;
				<span class="hljs-keyword">this</span>.previous = <span class="hljs-keyword">this</span>._value();
			},
			blur: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.cancelBlur ) {
					<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.cancelBlur;
					<span class="hljs-keyword">return</span>;
				}

				clearTimeout( <span class="hljs-keyword">this</span>.searching );
				<span class="hljs-keyword">this</span>.close( event );
				<span class="hljs-keyword">this</span>._change( event );
			}
		});

		<span class="hljs-keyword">this</span>._initSource();
		<span class="hljs-keyword">this</span>.menu = $( <span class="hljs-string">"&lt;ul&gt;"</span> )
			.addClass( <span class="hljs-string">"ui-autocomplete ui-front"</span> )
			.appendTo( <span class="hljs-keyword">this</span>._appendTo() )
			.menu({</pre></div></div>
            
        </li>
        
        
        <li id="section-303">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-303">&#182;</a>
              </div>
              <p>disable ARIA support, the live region takes care of that</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				role: <span class="hljs-literal">null</span>
			})
			.hide()
			.data( <span class="hljs-string">"ui-menu"</span> );

		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.menu.element, {
			mousedown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-304">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-304">&#182;</a>
              </div>
              <p>prevent moving focus out of the text field</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				event.preventDefault();</pre></div></div>
            
        </li>
        
        
        <li id="section-305">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-305">&#182;</a>
              </div>
              <p>IE doesn’t prevent moving focus even with event.preventDefault()
so we set a flag to know when we should ignore the blur event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">this</span>.cancelBlur = <span class="hljs-literal">true</span>;
				<span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.cancelBlur;
				});</pre></div></div>
            
        </li>
        
        
        <li id="section-306">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-306">&#182;</a>
              </div>
              <p>clicking on the scrollbar causes focus to shift to the body
but we can’t detect a mouseup or a click immediately afterward
so we have to track the next mousedown and close the menu if
the user clicks somewhere outside of the autocomplete</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">var</span> menuElement = <span class="hljs-keyword">this</span>.menu.element[ <span class="hljs-number">0</span> ];
				<span class="hljs-keyword">if</span> ( !$( event.target ).closest( <span class="hljs-string">".ui-menu-item"</span> ).length ) {
					<span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
						<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
						<span class="hljs-keyword">this</span>.document.one( <span class="hljs-string">"mousedown"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
							<span class="hljs-keyword">if</span> ( event.target !== that.element[ <span class="hljs-number">0</span> ] &amp;&amp;
									event.target !== menuElement &amp;&amp;
									!$.contains( menuElement, event.target ) ) {
								that.close();
							}
						});
					});
				}
			},
			menufocus: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, ui )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-307">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-307">&#182;</a>
              </div>
              <p>support: Firefox
Prevent accidental activation of menu items in Firefox (#7024 #9118)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.isNewMenu ) {
					<span class="hljs-keyword">this</span>.isNewMenu = <span class="hljs-literal">false</span>;
					<span class="hljs-keyword">if</span> ( event.originalEvent &amp;&amp; <span class="hljs-regexp">/^mouse/</span>.test( event.originalEvent.type ) ) {
						<span class="hljs-keyword">this</span>.menu.blur();

						<span class="hljs-keyword">this</span>.document.one( <span class="hljs-string">"mousemove"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
							$( event.target ).trigger( event.originalEvent );
						});

						<span class="hljs-keyword">return</span>;
					}
				}

				<span class="hljs-keyword">var</span> item = ui.item.data( <span class="hljs-string">"ui-autocomplete-item"</span> );
				<span class="hljs-keyword">if</span> ( <span class="hljs-literal">false</span> !== <span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"focus"</span>, event, { item: item } ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-308">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-308">&#182;</a>
              </div>
              <p>use value to match what will end up in the input, if it was a key event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( event.originalEvent &amp;&amp; <span class="hljs-regexp">/^key/</span>.test( event.originalEvent.type ) ) {
						<span class="hljs-keyword">this</span>._value( item.value );
					}
				} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-309">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-309">&#182;</a>
              </div>
              <p>Normally the input is populated with the item’s value as the
menu is navigated, causing screen readers to notice a change and
announce the item. Since the focus event was canceled, this doesn’t
happen, so we update the live region so that screen readers can
still notice the change and announce it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">this</span>.liveRegion.text( item.value );
				}
			},
			menuselect: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, ui )</span> {</span>
				<span class="hljs-keyword">var</span> item = ui.item.data( <span class="hljs-string">"ui-autocomplete-item"</span> ),
					previous = <span class="hljs-keyword">this</span>.previous;</pre></div></div>
            
        </li>
        
        
        <li id="section-310">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-310">&#182;</a>
              </div>
              <p>only trigger when focus was lost (click on menu)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].activeElement ) {
					<span class="hljs-keyword">this</span>.element.focus();
					<span class="hljs-keyword">this</span>.previous = previous;</pre></div></div>
            
        </li>
        
        
        <li id="section-311">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-311">&#182;</a>
              </div>
              <h1 id="6109-ie-triggers-two-focus-events-and-the-second">6109 - IE triggers two focus events and the second</h1>
<p>is asynchronous, so we need to reset the previous
term synchronously and asynchronously :-(</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
						<span class="hljs-keyword">this</span>.previous = previous;
						<span class="hljs-keyword">this</span>.selectedItem = item;
					});
				}

				<span class="hljs-keyword">if</span> ( <span class="hljs-literal">false</span> !== <span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"select"</span>, event, { item: item } ) ) {
					<span class="hljs-keyword">this</span>._value( item.value );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-312">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-312">&#182;</a>
              </div>
              <p>reset the term after the select event
this allows custom select handling to work properly</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">this</span>.term = <span class="hljs-keyword">this</span>._value();

				<span class="hljs-keyword">this</span>.close( event );
				<span class="hljs-keyword">this</span>.selectedItem = item;
			}
		});

		<span class="hljs-keyword">this</span>.liveRegion = $( <span class="hljs-string">"&lt;span&gt;"</span>, {
				role: <span class="hljs-string">"status"</span>,
				<span class="hljs-string">"aria-live"</span>: <span class="hljs-string">"polite"</span>
			})
			.addClass( <span class="hljs-string">"ui-helper-hidden-accessible"</span> )
			.insertBefore( <span class="hljs-keyword">this</span>.element );</pre></div></div>
            
        </li>
        
        
        <li id="section-313">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-313">&#182;</a>
              </div>
              <p>turning off autocomplete prevents the browser from remembering the
value when navigating through history, so we re-enable autocomplete
if the page is unloaded before the widget is destroyed. #7790</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.window, {
			beforeunload: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">this</span>.element.removeAttr( <span class="hljs-string">"autocomplete"</span> );
			}
		});
	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		clearTimeout( <span class="hljs-keyword">this</span>.searching );
		<span class="hljs-keyword">this</span>.element
			.removeClass( <span class="hljs-string">"ui-autocomplete-input"</span> )
			.removeAttr( <span class="hljs-string">"autocomplete"</span> );
		<span class="hljs-keyword">this</span>.menu.element.remove();
		<span class="hljs-keyword">this</span>.liveRegion.remove();
	},

	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
		<span class="hljs-keyword">this</span>._super( key, value );
		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"source"</span> ) {
			<span class="hljs-keyword">this</span>._initSource();
		}
		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"appendTo"</span> ) {
			<span class="hljs-keyword">this</span>.menu.element.appendTo( <span class="hljs-keyword">this</span>._appendTo() );
		}
		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"disabled"</span> &amp;&amp; value &amp;&amp; <span class="hljs-keyword">this</span>.xhr ) {
			<span class="hljs-keyword">this</span>.xhr.abort();
		}
	},

	_appendTo: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> element = <span class="hljs-keyword">this</span>.options.appendTo;

		<span class="hljs-keyword">if</span> ( element ) {
			element = element.jquery || element.nodeType ?
				$( element ) :
				<span class="hljs-keyword">this</span>.document.find( element ).eq( <span class="hljs-number">0</span> );
		}

		<span class="hljs-keyword">if</span> ( !element ) {
			element = <span class="hljs-keyword">this</span>.element.closest( <span class="hljs-string">".ui-front"</span> );
		}

		<span class="hljs-keyword">if</span> ( !element.length ) {
			element = <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].body;
		}

		<span class="hljs-keyword">return</span> element;
	},

	_initSource: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> array, url,
			that = <span class="hljs-keyword">this</span>;
		<span class="hljs-keyword">if</span> ( $.isArray(<span class="hljs-keyword">this</span>.options.source) ) {
			array = <span class="hljs-keyword">this</span>.options.source;
			<span class="hljs-keyword">this</span>.source = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( request, response )</span> {</span>
				response( $.ui.autocomplete.filter( array, request.term ) );
			};
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.options.source === <span class="hljs-string">"string"</span> ) {
			url = <span class="hljs-keyword">this</span>.options.source;
			<span class="hljs-keyword">this</span>.source = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( request, response )</span> {</span>
				<span class="hljs-keyword">if</span> ( that.xhr ) {
					that.xhr.abort();
				}
				that.xhr = $.ajax({
					url: url,
					data: request,
					dataType: <span class="hljs-string">"json"</span>,
					success: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( data )</span> {</span>
						response( data );
					},
					error: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
						response( [] );
					}
				});
			};
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.source = <span class="hljs-keyword">this</span>.options.source;
		}
	},

	_searchTimeout: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		clearTimeout( <span class="hljs-keyword">this</span>.searching );
		<span class="hljs-keyword">this</span>.searching = <span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-314">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-314">&#182;</a>
              </div>
              <p>only search if the value has changed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.term !== <span class="hljs-keyword">this</span>._value() ) {
				<span class="hljs-keyword">this</span>.selectedItem = <span class="hljs-literal">null</span>;
				<span class="hljs-keyword">this</span>.search( <span class="hljs-literal">null</span>, event );
			}
		}, <span class="hljs-keyword">this</span>.options.delay );
	},

	search: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( value, event )</span> {</span>
		value = value != <span class="hljs-literal">null</span> ? value : <span class="hljs-keyword">this</span>._value();</pre></div></div>
            
        </li>
        
        
        <li id="section-315">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-315">&#182;</a>
              </div>
              <p>always save the actual value, not the one passed as an argument</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.term = <span class="hljs-keyword">this</span>._value();

		<span class="hljs-keyword">if</span> ( value.length &lt; <span class="hljs-keyword">this</span>.options.minLength ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.close( event );
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"search"</span>, event ) === <span class="hljs-literal">false</span> ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._search( value );
	},

	_search: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( value )</span> {</span>
		<span class="hljs-keyword">this</span>.pending++;
		<span class="hljs-keyword">this</span>.element.addClass( <span class="hljs-string">"ui-autocomplete-loading"</span> );
		<span class="hljs-keyword">this</span>.cancelSearch = <span class="hljs-literal">false</span>;

		<span class="hljs-keyword">this</span>.source( { term: value }, <span class="hljs-keyword">this</span>._response() );
	},

	_response: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			index = ++requestIndex;

		<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( content )</span> {</span>
			<span class="hljs-keyword">if</span> ( index === requestIndex ) {
				that.__response( content );
			}

			that.pending--;
			<span class="hljs-keyword">if</span> ( !that.pending ) {
				that.element.removeClass( <span class="hljs-string">"ui-autocomplete-loading"</span> );
			}
		};
	},

	__response: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( content )</span> {</span>
		<span class="hljs-keyword">if</span> ( content ) {
			content = <span class="hljs-keyword">this</span>._normalize( content );
		}
		<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"response"</span>, <span class="hljs-literal">null</span>, { content: content } );
		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.options.disabled &amp;&amp; content &amp;&amp; content.length &amp;&amp; !<span class="hljs-keyword">this</span>.cancelSearch ) {
			<span class="hljs-keyword">this</span>._suggest( content );
			<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"open"</span> );
		} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-316">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-316">&#182;</a>
              </div>
              <p>use ._close() instead of .close() so we don’t cancel future searches</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>._close();
		}
	},

	close: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">this</span>.cancelSearch = <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">this</span>._close( event );
	},

	_close: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.menu.element.is( <span class="hljs-string">":visible"</span> ) ) {
			<span class="hljs-keyword">this</span>.menu.element.hide();
			<span class="hljs-keyword">this</span>.menu.blur();
			<span class="hljs-keyword">this</span>.isNewMenu = <span class="hljs-literal">true</span>;
			<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"close"</span>, event );
		}
	},

	_change: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.previous !== <span class="hljs-keyword">this</span>._value() ) {
			<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"change"</span>, event, { item: <span class="hljs-keyword">this</span>.selectedItem } );
		}
	},

	_normalize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( items )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-317">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-317">&#182;</a>
              </div>
              <p>assume all items have the right format when the first item is complete</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( items.length &amp;&amp; items[<span class="hljs-number">0</span>].label &amp;&amp; items[<span class="hljs-number">0</span>].value ) {
			<span class="hljs-keyword">return</span> items;
		}
		<span class="hljs-keyword">return</span> $.map( items, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( item )</span> {</span>
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> item === <span class="hljs-string">"string"</span> ) {
				<span class="hljs-keyword">return</span> {
					label: item,
					value: item
				};
			}
			<span class="hljs-keyword">return</span> $.extend({
				label: item.label || item.value,
				value: item.value || item.label
			}, item );
		});
	},

	_suggest: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( items )</span> {</span>
		<span class="hljs-keyword">var</span> ul = <span class="hljs-keyword">this</span>.menu.element.empty();
		<span class="hljs-keyword">this</span>._renderMenu( ul, items );
		<span class="hljs-keyword">this</span>.isNewMenu = <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">this</span>.menu.refresh();</pre></div></div>
            
        </li>
        
        
        <li id="section-318">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-318">&#182;</a>
              </div>
              <p>size and position menu</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		ul.show();
		<span class="hljs-keyword">this</span>._resizeMenu();
		ul.position( $.extend({
			of: <span class="hljs-keyword">this</span>.element
		}, <span class="hljs-keyword">this</span>.options.position ));

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.autoFocus ) {
			<span class="hljs-keyword">this</span>.menu.next();
		}
	},

	_resizeMenu: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> ul = <span class="hljs-keyword">this</span>.menu.element;
		ul.outerWidth( <span class="hljs-built_in">Math</span>.max(</pre></div></div>
            
        </li>
        
        
        <li id="section-319">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-319">&#182;</a>
              </div>
              <p>Firefox wraps long text (possibly a rounding bug)
so we add 1px to avoid the wrapping (#7513)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			ul.width( <span class="hljs-string">""</span> ).outerWidth() + <span class="hljs-number">1</span>,
			<span class="hljs-keyword">this</span>.element.outerWidth()
		) );
	},

	_renderMenu: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( ul, items )</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
		$.each( items, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index, item )</span> {</span>
			that._renderItemData( ul, item );
		});
	},

	_renderItemData: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( ul, item )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._renderItem( ul, item ).data( <span class="hljs-string">"ui-autocomplete-item"</span>, item );
	},

	_renderItem: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( ul, item )</span> {</span>
		<span class="hljs-keyword">return</span> $( <span class="hljs-string">"&lt;li&gt;"</span> )
			.append( $( <span class="hljs-string">"&lt;a&gt;"</span> ).text( item.label ) )
			.appendTo( ul );
	},

	_move: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( direction, event )</span> {</span>
		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.menu.element.is( <span class="hljs-string">":visible"</span> ) ) {
			<span class="hljs-keyword">this</span>.search( <span class="hljs-literal">null</span>, event );
			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.menu.isFirstItem() &amp;&amp; <span class="hljs-regexp">/^previous/</span>.test( direction ) ||
				<span class="hljs-keyword">this</span>.menu.isLastItem() &amp;&amp; <span class="hljs-regexp">/^next/</span>.test( direction ) ) {
			<span class="hljs-keyword">this</span>._value( <span class="hljs-keyword">this</span>.term );
			<span class="hljs-keyword">this</span>.menu.blur();
			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">this</span>.menu[ direction ]( event );
	},

	widget: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.menu.element;
	},

	_value: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.valueMethod.apply( <span class="hljs-keyword">this</span>.element, <span class="hljs-built_in">arguments</span> );
	},

	_keyEvent: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( keyEvent, event )</span> {</span>
		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.isMultiLine || <span class="hljs-keyword">this</span>.menu.element.is( <span class="hljs-string">":visible"</span> ) ) {
			<span class="hljs-keyword">this</span>._move( keyEvent, event );</pre></div></div>
            
        </li>
        
        
        <li id="section-320">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-320">&#182;</a>
              </div>
              <p>prevents moving cursor to beginning/end of the text field in some browsers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			event.preventDefault();
		}
	}
});

$.extend( $.ui.autocomplete, {
	escapeRegex: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( value )</span> {</span>
		<span class="hljs-keyword">return</span> value.replace(<span class="hljs-regexp">/[\-\[\]{}()*+?.,\\\^$|#\s]/g</span>, <span class="hljs-string">"\\$&amp;"</span>);
	},
	filter: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(array, term)</span> {</span>
		<span class="hljs-keyword">var</span> matcher = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>( $.ui.autocomplete.escapeRegex(term), <span class="hljs-string">"i"</span> );
		<span class="hljs-keyword">return</span> $.grep( array, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span> {</span>
			<span class="hljs-keyword">return</span> matcher.test( value.label || value.value || value );
		});
	}
});</pre></div></div>
            
        </li>
        
        
        <li id="section-321">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-321">&#182;</a>
              </div>
              <p>live region extension, adding a <code>messages</code> option
NOTE: This is an experimental API. We are still investigating
a full solution for string manipulation and internationalization.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>$.widget( <span class="hljs-string">"ui.autocomplete"</span>, $.ui.autocomplete, {
	options: {
		messages: {
			noResults: <span class="hljs-string">"No search results."</span>,
			results: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( amount )</span> {</span>
				<span class="hljs-keyword">return</span> amount + ( amount &gt; <span class="hljs-number">1</span> ? <span class="hljs-string">" results are"</span> : <span class="hljs-string">" result is"</span> ) +
					<span class="hljs-string">" available, use up and down arrow keys to navigate."</span>;
			}
		}
	},

	__response: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( content )</span> {</span>
		<span class="hljs-keyword">var</span> message;
		<span class="hljs-keyword">this</span>._superApply( <span class="hljs-built_in">arguments</span> );
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.disabled || <span class="hljs-keyword">this</span>.cancelSearch ) {
			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">if</span> ( content &amp;&amp; content.length ) {
			message = <span class="hljs-keyword">this</span>.options.messages.results( content.length );
		} <span class="hljs-keyword">else</span> {
			message = <span class="hljs-keyword">this</span>.options.messages.noResults;
		}
		<span class="hljs-keyword">this</span>.liveRegion.text( message );
	}
});

}( jQuery ));
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

<span class="hljs-keyword">var</span> lastActive, startXPos, startYPos, clickDragged,
	baseClasses = <span class="hljs-string">"ui-button ui-widget ui-state-default ui-corner-all"</span>,
	stateClasses = <span class="hljs-string">"ui-state-hover ui-state-active "</span>,
	typeClasses = <span class="hljs-string">"ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"</span>,
	formResetHandler = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> form = $( <span class="hljs-keyword">this</span> );
		setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			form.find( <span class="hljs-string">":ui-button"</span> ).button( <span class="hljs-string">"refresh"</span> );
		}, <span class="hljs-number">1</span> );
	},
	radioGroup = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( radio )</span> {</span>
		<span class="hljs-keyword">var</span> name = radio.name,
			form = radio.form,
			radios = $( [] );
		<span class="hljs-keyword">if</span> ( name ) {
			name = name.replace( <span class="hljs-regexp">/'/g</span>, <span class="hljs-string">"\\'"</span> );
			<span class="hljs-keyword">if</span> ( form ) {
				radios = $( form ).find( <span class="hljs-string">"[name='"</span> + name + <span class="hljs-string">"']"</span> );
			} <span class="hljs-keyword">else</span> {
				radios = $( <span class="hljs-string">"[name='"</span> + name + <span class="hljs-string">"']"</span>, radio.ownerDocument )
					.filter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
						<span class="hljs-keyword">return</span> !<span class="hljs-keyword">this</span>.form;
					});
			}
		}
		<span class="hljs-keyword">return</span> radios;
	};

$.widget( <span class="hljs-string">"ui.button"</span>, {
	version: <span class="hljs-string">"1.10.3"</span>,
	defaultElement: <span class="hljs-string">"&lt;button&gt;"</span>,
	options: {
		disabled: <span class="hljs-literal">null</span>,
		text: <span class="hljs-literal">true</span>,
		label: <span class="hljs-literal">null</span>,
		icons: {
			primary: <span class="hljs-literal">null</span>,
			secondary: <span class="hljs-literal">null</span>
		}
	},
	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.element.closest( <span class="hljs-string">"form"</span> )
			.unbind( <span class="hljs-string">"reset"</span> + <span class="hljs-keyword">this</span>.eventNamespace )
			.bind( <span class="hljs-string">"reset"</span> + <span class="hljs-keyword">this</span>.eventNamespace, formResetHandler );

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.options.disabled !== <span class="hljs-string">"boolean"</span> ) {
			<span class="hljs-keyword">this</span>.options.disabled = !!<span class="hljs-keyword">this</span>.element.prop( <span class="hljs-string">"disabled"</span> );
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.element.prop( <span class="hljs-string">"disabled"</span>, <span class="hljs-keyword">this</span>.options.disabled );
		}

		<span class="hljs-keyword">this</span>._determineButtonType();
		<span class="hljs-keyword">this</span>.hasTitle = !!<span class="hljs-keyword">this</span>.buttonElement.attr( <span class="hljs-string">"title"</span> );

		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			options = <span class="hljs-keyword">this</span>.options,
			toggleButton = <span class="hljs-keyword">this</span>.type === <span class="hljs-string">"checkbox"</span> || <span class="hljs-keyword">this</span>.type === <span class="hljs-string">"radio"</span>,
			activeClass = !toggleButton ? <span class="hljs-string">"ui-state-active"</span> : <span class="hljs-string">""</span>,
			focusClass = <span class="hljs-string">"ui-state-focus"</span>;

		<span class="hljs-keyword">if</span> ( options.label === <span class="hljs-literal">null</span> ) {
			options.label = (<span class="hljs-keyword">this</span>.type === <span class="hljs-string">"input"</span> ? <span class="hljs-keyword">this</span>.buttonElement.val() : <span class="hljs-keyword">this</span>.buttonElement.html());
		}

		<span class="hljs-keyword">this</span>._hoverable( <span class="hljs-keyword">this</span>.buttonElement );

		<span class="hljs-keyword">this</span>.buttonElement
			.addClass( baseClasses )
			.attr( <span class="hljs-string">"role"</span>, <span class="hljs-string">"button"</span> )
			.bind( <span class="hljs-string">"mouseenter"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ( options.disabled ) {
					<span class="hljs-keyword">return</span>;
				}
				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span> === lastActive ) {
					$( <span class="hljs-keyword">this</span> ).addClass( <span class="hljs-string">"ui-state-active"</span> );
				}
			})
			.bind( <span class="hljs-string">"mouseleave"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ( options.disabled ) {
					<span class="hljs-keyword">return</span>;
				}
				$( <span class="hljs-keyword">this</span> ).removeClass( activeClass );
			})
			.bind( <span class="hljs-string">"click"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-keyword">if</span> ( options.disabled ) {
					event.preventDefault();
					event.stopImmediatePropagation();
				}
			});

		<span class="hljs-keyword">this</span>.element
			.bind( <span class="hljs-string">"focus"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-322">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-322">&#182;</a>
              </div>
              <p>no need to check disabled, focus won’t be triggered anyway</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				that.buttonElement.addClass( focusClass );
			})
			.bind( <span class="hljs-string">"blur"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				that.buttonElement.removeClass( focusClass );
			});

		<span class="hljs-keyword">if</span> ( toggleButton ) {
			<span class="hljs-keyword">this</span>.element.bind( <span class="hljs-string">"change"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ( clickDragged ) {
					<span class="hljs-keyword">return</span>;
				}
				that.refresh();
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-323">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-323">&#182;</a>
              </div>
              <p>if mouse moves between mousedown and mouseup (drag) set clickDragged flag
prevents issue where button state changes but checkbox/radio checked state
does not in Firefox (see ticket #6970)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.buttonElement
				.bind( <span class="hljs-string">"mousedown"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
					<span class="hljs-keyword">if</span> ( options.disabled ) {
						<span class="hljs-keyword">return</span>;
					}
					clickDragged = <span class="hljs-literal">false</span>;
					startXPos = event.pageX;
					startYPos = event.pageY;
				})
				.bind( <span class="hljs-string">"mouseup"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
					<span class="hljs-keyword">if</span> ( options.disabled ) {
						<span class="hljs-keyword">return</span>;
					}
					<span class="hljs-keyword">if</span> ( startXPos !== event.pageX || startYPos !== event.pageY ) {
						clickDragged = <span class="hljs-literal">true</span>;
					}
			});
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.type === <span class="hljs-string">"checkbox"</span> ) {
			<span class="hljs-keyword">this</span>.buttonElement.bind( <span class="hljs-string">"click"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ( options.disabled || clickDragged ) {
					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				}
			});
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.type === <span class="hljs-string">"radio"</span> ) {
			<span class="hljs-keyword">this</span>.buttonElement.bind( <span class="hljs-string">"click"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ( options.disabled || clickDragged ) {
					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				}
				$( <span class="hljs-keyword">this</span> ).addClass( <span class="hljs-string">"ui-state-active"</span> );
				that.buttonElement.attr( <span class="hljs-string">"aria-pressed"</span>, <span class="hljs-string">"true"</span> );

				<span class="hljs-keyword">var</span> radio = that.element[ <span class="hljs-number">0</span> ];
				radioGroup( radio )
					.not( radio )
					.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
						<span class="hljs-keyword">return</span> $( <span class="hljs-keyword">this</span> ).button( <span class="hljs-string">"widget"</span> )[ <span class="hljs-number">0</span> ];
					})
					.removeClass( <span class="hljs-string">"ui-state-active"</span> )
					.attr( <span class="hljs-string">"aria-pressed"</span>, <span class="hljs-string">"false"</span> );
			});
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.buttonElement
				.bind( <span class="hljs-string">"mousedown"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">if</span> ( options.disabled ) {
						<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
					}
					$( <span class="hljs-keyword">this</span> ).addClass( <span class="hljs-string">"ui-state-active"</span> );
					lastActive = <span class="hljs-keyword">this</span>;
					that.document.one( <span class="hljs-string">"mouseup"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
						lastActive = <span class="hljs-literal">null</span>;
					});
				})
				.bind( <span class="hljs-string">"mouseup"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">if</span> ( options.disabled ) {
						<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
					}
					$( <span class="hljs-keyword">this</span> ).removeClass( <span class="hljs-string">"ui-state-active"</span> );
				})
				.bind( <span class="hljs-string">"keydown"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
					<span class="hljs-keyword">if</span> ( options.disabled ) {
						<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
					}
					<span class="hljs-keyword">if</span> ( event.keyCode === $.ui.keyCode.SPACE || event.keyCode === $.ui.keyCode.ENTER ) {
						$( <span class="hljs-keyword">this</span> ).addClass( <span class="hljs-string">"ui-state-active"</span> );
					}
				})</pre></div></div>
            
        </li>
        
        
        <li id="section-324">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-324">&#182;</a>
              </div>
              <p>see #8559, we bind to blur here in case the button element loses
focus between keydown and keyup, it would be left in an “active” state</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				.bind( <span class="hljs-string">"keyup"</span> + <span class="hljs-keyword">this</span>.eventNamespace + <span class="hljs-string">" blur"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					$( <span class="hljs-keyword">this</span> ).removeClass( <span class="hljs-string">"ui-state-active"</span> );
				});

			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.buttonElement.is(<span class="hljs-string">"a"</span>) ) {
				<span class="hljs-keyword">this</span>.buttonElement.keyup(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
					<span class="hljs-keyword">if</span> ( event.keyCode === $.ui.keyCode.SPACE ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-325">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-325">&#182;</a>
              </div>
              <p>TODO pass through original event correctly (just as 2nd argument doesn’t work)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						$( <span class="hljs-keyword">this</span> ).click();
					}
				});
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-326">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-326">&#182;</a>
              </div>
              <p>TODO: pull out $.Widget’s handling for the disabled option into
$.Widget.prototype._setOptionDisabled so it’s easy to proxy and can
be overridden by individual plugins</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._setOption( <span class="hljs-string">"disabled"</span>, options.disabled );
		<span class="hljs-keyword">this</span>._resetButton();
	},

	_determineButtonType: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> ancestor, labelSelector, checked;

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.element.is(<span class="hljs-string">"[type=checkbox]"</span>) ) {
			<span class="hljs-keyword">this</span>.type = <span class="hljs-string">"checkbox"</span>;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.element.is(<span class="hljs-string">"[type=radio]"</span>) ) {
			<span class="hljs-keyword">this</span>.type = <span class="hljs-string">"radio"</span>;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.element.is(<span class="hljs-string">"input"</span>) ) {
			<span class="hljs-keyword">this</span>.type = <span class="hljs-string">"input"</span>;
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.type = <span class="hljs-string">"button"</span>;
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.type === <span class="hljs-string">"checkbox"</span> || <span class="hljs-keyword">this</span>.type === <span class="hljs-string">"radio"</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-327">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-327">&#182;</a>
              </div>
              <p>we don’t search against the document in case the element
is disconnected from the DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			ancestor = <span class="hljs-keyword">this</span>.element.parents().last();
			labelSelector = <span class="hljs-string">"label[for='"</span> + <span class="hljs-keyword">this</span>.element.attr(<span class="hljs-string">"id"</span>) + <span class="hljs-string">"']"</span>;
			<span class="hljs-keyword">this</span>.buttonElement = ancestor.find( labelSelector );
			<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.buttonElement.length ) {
				ancestor = ancestor.length ? ancestor.siblings() : <span class="hljs-keyword">this</span>.element.siblings();
				<span class="hljs-keyword">this</span>.buttonElement = ancestor.filter( labelSelector );
				<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.buttonElement.length ) {
					<span class="hljs-keyword">this</span>.buttonElement = ancestor.find( labelSelector );
				}
			}
			<span class="hljs-keyword">this</span>.element.addClass( <span class="hljs-string">"ui-helper-hidden-accessible"</span> );

			checked = <span class="hljs-keyword">this</span>.element.is( <span class="hljs-string">":checked"</span> );
			<span class="hljs-keyword">if</span> ( checked ) {
				<span class="hljs-keyword">this</span>.buttonElement.addClass( <span class="hljs-string">"ui-state-active"</span> );
			}
			<span class="hljs-keyword">this</span>.buttonElement.prop( <span class="hljs-string">"aria-pressed"</span>, checked );
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.buttonElement = <span class="hljs-keyword">this</span>.element;
		}
	},

	widget: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.buttonElement;
	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.element
			.removeClass( <span class="hljs-string">"ui-helper-hidden-accessible"</span> );
		<span class="hljs-keyword">this</span>.buttonElement
			.removeClass( baseClasses + <span class="hljs-string">" "</span> + stateClasses + <span class="hljs-string">" "</span> + typeClasses )
			.removeAttr( <span class="hljs-string">"role"</span> )
			.removeAttr( <span class="hljs-string">"aria-pressed"</span> )
			.html( <span class="hljs-keyword">this</span>.buttonElement.find(<span class="hljs-string">".ui-button-text"</span>).html() );

		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.hasTitle ) {
			<span class="hljs-keyword">this</span>.buttonElement.removeAttr( <span class="hljs-string">"title"</span> );
		}
	},

	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
		<span class="hljs-keyword">this</span>._super( key, value );
		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"disabled"</span> ) {
			<span class="hljs-keyword">if</span> ( value ) {
				<span class="hljs-keyword">this</span>.element.prop( <span class="hljs-string">"disabled"</span>, <span class="hljs-literal">true</span> );
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>.element.prop( <span class="hljs-string">"disabled"</span>, <span class="hljs-literal">false</span> );
			}
			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">this</span>._resetButton();
	},

	refresh: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-328">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-328">&#182;</a>
              </div>
              <p>See #8237 &amp; #8828</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> isDisabled = <span class="hljs-keyword">this</span>.element.is( <span class="hljs-string">"input, button"</span> ) ? <span class="hljs-keyword">this</span>.element.is( <span class="hljs-string">":disabled"</span> ) : <span class="hljs-keyword">this</span>.element.hasClass( <span class="hljs-string">"ui-button-disabled"</span> );

		<span class="hljs-keyword">if</span> ( isDisabled !== <span class="hljs-keyword">this</span>.options.disabled ) {
			<span class="hljs-keyword">this</span>._setOption( <span class="hljs-string">"disabled"</span>, isDisabled );
		}
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.type === <span class="hljs-string">"radio"</span> ) {
			radioGroup( <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>] ).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ( $( <span class="hljs-keyword">this</span> ).is( <span class="hljs-string">":checked"</span> ) ) {
					$( <span class="hljs-keyword">this</span> ).button( <span class="hljs-string">"widget"</span> )
						.addClass( <span class="hljs-string">"ui-state-active"</span> )
						.attr( <span class="hljs-string">"aria-pressed"</span>, <span class="hljs-string">"true"</span> );
				} <span class="hljs-keyword">else</span> {
					$( <span class="hljs-keyword">this</span> ).button( <span class="hljs-string">"widget"</span> )
						.removeClass( <span class="hljs-string">"ui-state-active"</span> )
						.attr( <span class="hljs-string">"aria-pressed"</span>, <span class="hljs-string">"false"</span> );
				}
			});
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.type === <span class="hljs-string">"checkbox"</span> ) {
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.element.is( <span class="hljs-string">":checked"</span> ) ) {
				<span class="hljs-keyword">this</span>.buttonElement
					.addClass( <span class="hljs-string">"ui-state-active"</span> )
					.attr( <span class="hljs-string">"aria-pressed"</span>, <span class="hljs-string">"true"</span> );
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>.buttonElement
					.removeClass( <span class="hljs-string">"ui-state-active"</span> )
					.attr( <span class="hljs-string">"aria-pressed"</span>, <span class="hljs-string">"false"</span> );
			}
		}
	},

	_resetButton: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.type === <span class="hljs-string">"input"</span> ) {
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.label ) {
				<span class="hljs-keyword">this</span>.element.val( <span class="hljs-keyword">this</span>.options.label );
			}
			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">var</span> buttonElement = <span class="hljs-keyword">this</span>.buttonElement.removeClass( typeClasses ),
			buttonText = $( <span class="hljs-string">"&lt;span&gt;&lt;/span&gt;"</span>, <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>] )
				.addClass( <span class="hljs-string">"ui-button-text"</span> )
				.html( <span class="hljs-keyword">this</span>.options.label )
				.appendTo( buttonElement.empty() )
				.text(),
			icons = <span class="hljs-keyword">this</span>.options.icons,
			multipleIcons = icons.primary &amp;&amp; icons.secondary,
			buttonClasses = [];

		<span class="hljs-keyword">if</span> ( icons.primary || icons.secondary ) {
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.text ) {
				buttonClasses.push( <span class="hljs-string">"ui-button-text-icon"</span> + ( multipleIcons ? <span class="hljs-string">"s"</span> : ( icons.primary ? <span class="hljs-string">"-primary"</span> : <span class="hljs-string">"-secondary"</span> ) ) );
			}

			<span class="hljs-keyword">if</span> ( icons.primary ) {
				buttonElement.prepend( <span class="hljs-string">"&lt;span class='ui-button-icon-primary ui-icon "</span> + icons.primary + <span class="hljs-string">"'&gt;&lt;/span&gt;"</span> );
			}

			<span class="hljs-keyword">if</span> ( icons.secondary ) {
				buttonElement.append( <span class="hljs-string">"&lt;span class='ui-button-icon-secondary ui-icon "</span> + icons.secondary + <span class="hljs-string">"'&gt;&lt;/span&gt;"</span> );
			}

			<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.options.text ) {
				buttonClasses.push( multipleIcons ? <span class="hljs-string">"ui-button-icons-only"</span> : <span class="hljs-string">"ui-button-icon-only"</span> );

				<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.hasTitle ) {
					buttonElement.attr( <span class="hljs-string">"title"</span>, $.trim( buttonText ) );
				}
			}
		} <span class="hljs-keyword">else</span> {
			buttonClasses.push( <span class="hljs-string">"ui-button-text-only"</span> );
		}
		buttonElement.addClass( buttonClasses.join( <span class="hljs-string">" "</span> ) );
	}
});

$.widget( <span class="hljs-string">"ui.buttonset"</span>, {
	version: <span class="hljs-string">"1.10.3"</span>,
	options: {
		items: <span class="hljs-string">"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"</span>
	},

	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.element.addClass( <span class="hljs-string">"ui-buttonset"</span> );
	},

	_init: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.refresh();
	},

	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"disabled"</span> ) {
			<span class="hljs-keyword">this</span>.buttons.button( <span class="hljs-string">"option"</span>, key, value );
		}

		<span class="hljs-keyword">this</span>._super( key, value );
	},

	refresh: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> rtl = <span class="hljs-keyword">this</span>.element.css( <span class="hljs-string">"direction"</span> ) === <span class="hljs-string">"rtl"</span>;

		<span class="hljs-keyword">this</span>.buttons = <span class="hljs-keyword">this</span>.element.find( <span class="hljs-keyword">this</span>.options.items )
			.filter( <span class="hljs-string">":ui-button"</span> )
				.button( <span class="hljs-string">"refresh"</span> )
			.end()
			.not( <span class="hljs-string">":ui-button"</span> )
				.button()
			.end()
			.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">return</span> $( <span class="hljs-keyword">this</span> ).button( <span class="hljs-string">"widget"</span> )[ <span class="hljs-number">0</span> ];
			})
				.removeClass( <span class="hljs-string">"ui-corner-all ui-corner-left ui-corner-right"</span> )
				.filter( <span class="hljs-string">":first"</span> )
					.addClass( rtl ? <span class="hljs-string">"ui-corner-right"</span> : <span class="hljs-string">"ui-corner-left"</span> )
				.end()
				.filter( <span class="hljs-string">":last"</span> )
					.addClass( rtl ? <span class="hljs-string">"ui-corner-left"</span> : <span class="hljs-string">"ui-corner-right"</span> )
				.end()
			.end();
	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.element.removeClass( <span class="hljs-string">"ui-buttonset"</span> );
		<span class="hljs-keyword">this</span>.buttons
			.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">return</span> $( <span class="hljs-keyword">this</span> ).button( <span class="hljs-string">"widget"</span> )[ <span class="hljs-number">0</span> ];
			})
				.removeClass( <span class="hljs-string">"ui-corner-left ui-corner-right"</span> )
			.end()
			.button( <span class="hljs-string">"destroy"</span> );
	}
});

}( jQuery ) );
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.extend($.ui, { datepicker: { version: <span class="hljs-string">"1.10.3"</span> } });

<span class="hljs-keyword">var</span> PROP_NAME = <span class="hljs-string">"datepicker"</span>,
	instActive;

<span class="hljs-comment">/* Date picker manager.
   Use the singleton instance of this class, $.datepicker, to interact with the date picker.
   Settings for (groups of) date pickers are maintained in an instance object,
   allowing multiple different settings on the same page. */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Datepicker</span><span class="hljs-params">()</span> {</span>
	<span class="hljs-keyword">this</span>._curInst = <span class="hljs-literal">null</span>; <span class="hljs-comment">// The current instance in use</span>
	<span class="hljs-keyword">this</span>._keyEvent = <span class="hljs-literal">false</span>; <span class="hljs-comment">// If the last event was a key event</span>
	<span class="hljs-keyword">this</span>._disabledInputs = []; <span class="hljs-comment">// List of date picker inputs that have been disabled</span>
	<span class="hljs-keyword">this</span>._datepickerShowing = <span class="hljs-literal">false</span>; <span class="hljs-comment">// True if the popup picker is showing , false if not</span>
	<span class="hljs-keyword">this</span>._inDialog = <span class="hljs-literal">false</span>; <span class="hljs-comment">// True if showing within a "dialog", false if not</span>
	<span class="hljs-keyword">this</span>._mainDivId = <span class="hljs-string">"ui-datepicker-div"</span>; <span class="hljs-comment">// The ID of the main datepicker division</span>
	<span class="hljs-keyword">this</span>._inlineClass = <span class="hljs-string">"ui-datepicker-inline"</span>; <span class="hljs-comment">// The name of the inline marker class</span>
	<span class="hljs-keyword">this</span>._appendClass = <span class="hljs-string">"ui-datepicker-append"</span>; <span class="hljs-comment">// The name of the append marker class</span>
	<span class="hljs-keyword">this</span>._triggerClass = <span class="hljs-string">"ui-datepicker-trigger"</span>; <span class="hljs-comment">// The name of the trigger marker class</span>
	<span class="hljs-keyword">this</span>._dialogClass = <span class="hljs-string">"ui-datepicker-dialog"</span>; <span class="hljs-comment">// The name of the dialog marker class</span>
	<span class="hljs-keyword">this</span>._disableClass = <span class="hljs-string">"ui-datepicker-disabled"</span>; <span class="hljs-comment">// The name of the disabled covering marker class</span>
	<span class="hljs-keyword">this</span>._unselectableClass = <span class="hljs-string">"ui-datepicker-unselectable"</span>; <span class="hljs-comment">// The name of the unselectable cell marker class</span>
	<span class="hljs-keyword">this</span>._currentClass = <span class="hljs-string">"ui-datepicker-current-day"</span>; <span class="hljs-comment">// The name of the current day marker class</span>
	<span class="hljs-keyword">this</span>._dayOverClass = <span class="hljs-string">"ui-datepicker-days-cell-over"</span>; <span class="hljs-comment">// The name of the day hover marker class</span>
	<span class="hljs-keyword">this</span>.regional = []; <span class="hljs-comment">// Available regional settings, indexed by language code</span>
	<span class="hljs-keyword">this</span>.regional[<span class="hljs-string">""</span>] = { <span class="hljs-comment">// Default regional settings</span>
		closeText: <span class="hljs-string">"Done"</span>, <span class="hljs-comment">// Display text for close link</span>
		prevText: <span class="hljs-string">"Prev"</span>, <span class="hljs-comment">// Display text for previous month link</span>
		nextText: <span class="hljs-string">"Next"</span>, <span class="hljs-comment">// Display text for next month link</span>
		currentText: <span class="hljs-string">"Today"</span>, <span class="hljs-comment">// Display text for current month link</span>
		monthNames: [<span class="hljs-string">"January"</span>,<span class="hljs-string">"February"</span>,<span class="hljs-string">"March"</span>,<span class="hljs-string">"April"</span>,<span class="hljs-string">"May"</span>,<span class="hljs-string">"June"</span>,
			<span class="hljs-string">"July"</span>,<span class="hljs-string">"August"</span>,<span class="hljs-string">"September"</span>,<span class="hljs-string">"October"</span>,<span class="hljs-string">"November"</span>,<span class="hljs-string">"December"</span>], <span class="hljs-comment">// Names of months for drop-down and formatting</span>
		monthNamesShort: [<span class="hljs-string">"Jan"</span>, <span class="hljs-string">"Feb"</span>, <span class="hljs-string">"Mar"</span>, <span class="hljs-string">"Apr"</span>, <span class="hljs-string">"May"</span>, <span class="hljs-string">"Jun"</span>, <span class="hljs-string">"Jul"</span>, <span class="hljs-string">"Aug"</span>, <span class="hljs-string">"Sep"</span>, <span class="hljs-string">"Oct"</span>, <span class="hljs-string">"Nov"</span>, <span class="hljs-string">"Dec"</span>], <span class="hljs-comment">// For formatting</span>
		dayNames: [<span class="hljs-string">"Sunday"</span>, <span class="hljs-string">"Monday"</span>, <span class="hljs-string">"Tuesday"</span>, <span class="hljs-string">"Wednesday"</span>, <span class="hljs-string">"Thursday"</span>, <span class="hljs-string">"Friday"</span>, <span class="hljs-string">"Saturday"</span>], <span class="hljs-comment">// For formatting</span>
		dayNamesShort: [<span class="hljs-string">"Sun"</span>, <span class="hljs-string">"Mon"</span>, <span class="hljs-string">"Tue"</span>, <span class="hljs-string">"Wed"</span>, <span class="hljs-string">"Thu"</span>, <span class="hljs-string">"Fri"</span>, <span class="hljs-string">"Sat"</span>], <span class="hljs-comment">// For formatting</span>
		dayNamesMin: [<span class="hljs-string">"Su"</span>,<span class="hljs-string">"Mo"</span>,<span class="hljs-string">"Tu"</span>,<span class="hljs-string">"We"</span>,<span class="hljs-string">"Th"</span>,<span class="hljs-string">"Fr"</span>,<span class="hljs-string">"Sa"</span>], <span class="hljs-comment">// Column headings for days starting at Sunday</span>
		weekHeader: <span class="hljs-string">"Wk"</span>, <span class="hljs-comment">// Column header for week of the year</span>
		dateFormat: <span class="hljs-string">"mm/dd/yy"</span>, <span class="hljs-comment">// See format options on parseDate</span>
		firstDay: <span class="hljs-number">0</span>, <span class="hljs-comment">// The first day of the week, Sun = 0, Mon = 1, ...</span>
		isRTL: <span class="hljs-literal">false</span>, <span class="hljs-comment">// True if right-to-left language, false if left-to-right</span>
		showMonthAfterYear: <span class="hljs-literal">false</span>, <span class="hljs-comment">// True if the year select precedes month, false for month then year</span>
		yearSuffix: <span class="hljs-string">""</span> <span class="hljs-comment">// Additional text to append to the year in the month headers</span>
	};
	<span class="hljs-keyword">this</span>._defaults = { <span class="hljs-comment">// Global defaults for all the date picker instances</span>
		showOn: <span class="hljs-string">"focus"</span>, <span class="hljs-comment">// "focus" for popup on focus,</span></pre></div></div>
            
        </li>
        
        
        <li id="section-329">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-329">&#182;</a>
              </div>
              <p>“button” for trigger button, or “both” for either</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		showAnim: <span class="hljs-string">"fadeIn"</span>, <span class="hljs-comment">// Name of jQuery animation for popup</span>
		showOptions: {}, <span class="hljs-comment">// Options for enhanced animations</span>
		defaultDate: <span class="hljs-literal">null</span>, <span class="hljs-comment">// Used when field is blank: actual date,</span></pre></div></div>
            
        </li>
        
        
        <li id="section-330">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-330">&#182;</a>
              </div>
              <p>+/-number for offset from today, null for today</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		appendText: <span class="hljs-string">""</span>, <span class="hljs-comment">// Display text following the input box, e.g. showing the format</span>
		buttonText: <span class="hljs-string">"..."</span>, <span class="hljs-comment">// Text for trigger button</span>
		buttonImage: <span class="hljs-string">""</span>, <span class="hljs-comment">// URL for trigger button image</span>
		buttonImageOnly: <span class="hljs-literal">false</span>, <span class="hljs-comment">// True if the image appears alone, false if it appears on a button</span>
		hideIfNoPrevNext: <span class="hljs-literal">false</span>, <span class="hljs-comment">// True to hide next/previous month links</span></pre></div></div>
            
        </li>
        
        
        <li id="section-331">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-331">&#182;</a>
              </div>
              <p>if not applicable, false to just disable them</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		navigationAsDateFormat: <span class="hljs-literal">false</span>, <span class="hljs-comment">// True if date formatting applied to prev/today/next links</span>
		gotoCurrent: <span class="hljs-literal">false</span>, <span class="hljs-comment">// True if today link goes back to current selection instead</span>
		changeMonth: <span class="hljs-literal">false</span>, <span class="hljs-comment">// True if month can be selected directly, false if only prev/next</span>
		changeYear: <span class="hljs-literal">false</span>, <span class="hljs-comment">// True if year can be selected directly, false if only prev/next</span>
		yearRange: <span class="hljs-string">"c-10:c+10"</span>, <span class="hljs-comment">// Range of years to display in drop-down,</span></pre></div></div>
            
        </li>
        
        
        <li id="section-332">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-332">&#182;</a>
              </div>
              <p>either relative to today’s year (-nn:+nn), relative to currently displayed year
(c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		showOtherMonths: <span class="hljs-literal">false</span>, <span class="hljs-comment">// True to show dates in other months, false to leave blank</span>
		selectOtherMonths: <span class="hljs-literal">false</span>, <span class="hljs-comment">// True to allow selection of dates in other months, false for unselectable</span>
		showWeek: <span class="hljs-literal">false</span>, <span class="hljs-comment">// True to show week of the year, false to not show it</span>
		calculateWeek: <span class="hljs-keyword">this</span>.iso8601Week, <span class="hljs-comment">// How to calculate the week of the year,</span></pre></div></div>
            
        </li>
        
        
        <li id="section-333">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-333">&#182;</a>
              </div>
              <p>takes a Date and returns the number of the week for it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		shortYearCutoff: <span class="hljs-string">"+10"</span>, <span class="hljs-comment">// Short year values &lt; this are in the current century,</span></pre></div></div>
            
        </li>
        
        
        <li id="section-334">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-334">&#182;</a>
              </div>
              <blockquote>
<p>this are in the previous century,
string value starting with “+” for current year + value</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>		minDate: <span class="hljs-literal">null</span>, <span class="hljs-comment">// The earliest selectable date, or null for no limit</span>
		maxDate: <span class="hljs-literal">null</span>, <span class="hljs-comment">// The latest selectable date, or null for no limit</span>
		duration: <span class="hljs-string">"fast"</span>, <span class="hljs-comment">// Duration of display/closure</span>
		beforeShowDay: <span class="hljs-literal">null</span>, <span class="hljs-comment">// Function that takes a date and returns an array with</span></pre></div></div>
            
        </li>
        
        
        <li id="section-335">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-335">&#182;</a>
              </div>
              <p>[0] = true if selectable, false if not, [1] = custom CSS class name(s) or “”,
[2] = cell title (optional), e.g. $.datepicker.noWeekends</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		beforeShow: <span class="hljs-literal">null</span>, <span class="hljs-comment">// Function that takes an input field and</span></pre></div></div>
            
        </li>
        
        
        <li id="section-336">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-336">&#182;</a>
              </div>
              <p>returns a set of custom settings for the date picker</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		onSelect: <span class="hljs-literal">null</span>, <span class="hljs-comment">// Define a callback function when a date is selected</span>
		onChangeMonthYear: <span class="hljs-literal">null</span>, <span class="hljs-comment">// Define a callback function when the month or year is changed</span>
		onClose: <span class="hljs-literal">null</span>, <span class="hljs-comment">// Define a callback function when the datepicker is closed</span>
		numberOfMonths: <span class="hljs-number">1</span>, <span class="hljs-comment">// Number of months to show at a time</span>
		showCurrentAtPos: <span class="hljs-number">0</span>, <span class="hljs-comment">// The position in multipe months at which to show the current month (starting at 0)</span>
		stepMonths: <span class="hljs-number">1</span>, <span class="hljs-comment">// Number of months to step back/forward</span>
		stepBigMonths: <span class="hljs-number">12</span>, <span class="hljs-comment">// Number of months to step back/forward for the big links</span>
		altField: <span class="hljs-string">""</span>, <span class="hljs-comment">// Selector for an alternate field to store selected dates into</span>
		altFormat: <span class="hljs-string">""</span>, <span class="hljs-comment">// The date format to use for the alternate field</span>
		constrainInput: <span class="hljs-literal">true</span>, <span class="hljs-comment">// The input is constrained by the current date format</span>
		showButtonPanel: <span class="hljs-literal">false</span>, <span class="hljs-comment">// True to show button panel, false to not show it</span>
		autoSize: <span class="hljs-literal">false</span>, <span class="hljs-comment">// True to size the input for the date format, false to leave as is</span>
		disabled: <span class="hljs-literal">false</span> <span class="hljs-comment">// The initial disabled state</span>
	};
	$.extend(<span class="hljs-keyword">this</span>._defaults, <span class="hljs-keyword">this</span>.regional[<span class="hljs-string">""</span>]);
	<span class="hljs-keyword">this</span>.dpDiv = bindHover($(<span class="hljs-string">"&lt;div id='"</span> + <span class="hljs-keyword">this</span>._mainDivId + <span class="hljs-string">"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'&gt;&lt;/div&gt;"</span>));
}

$.extend(Datepicker.prototype, {
	<span class="hljs-comment">/* Class name added to elements to indicate already configured with a date picker. */</span>
	markerClassName: <span class="hljs-string">"hasDatepicker"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-337">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-337">&#182;</a>
              </div>
              <p>Keep track of the maximum number of rows displayed (see #7043)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	maxRows: <span class="hljs-number">4</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-338">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-338">&#182;</a>
              </div>
              <p>TODO rename to “widget” when switching to widget factory</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_widgetDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.dpDiv;
	},

	<span class="hljs-comment">/* Override the default settings for all instances of the date picker.
	 * @param  settings  object - the new settings to use as defaults (anonymous object)
	 * @return the manager object
	 */</span>
	setDefaults: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(settings)</span> {</span>
		extendRemove(<span class="hljs-keyword">this</span>._defaults, settings || {});
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},

	<span class="hljs-comment">/* Attach the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 * @param  settings  object - the new settings to use for this date picker instance (anonymous)
	 */</span>
	_attachDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target, settings)</span> {</span>
		<span class="hljs-keyword">var</span> nodeName, inline, inst;
		nodeName = target.nodeName.toLowerCase();
		inline = (nodeName === <span class="hljs-string">"div"</span> || nodeName === <span class="hljs-string">"span"</span>);
		<span class="hljs-keyword">if</span> (!target.id) {
			<span class="hljs-keyword">this</span>.uuid += <span class="hljs-number">1</span>;
			target.id = <span class="hljs-string">"dp"</span> + <span class="hljs-keyword">this</span>.uuid;
		}
		inst = <span class="hljs-keyword">this</span>._newInst($(target), inline);
		inst.settings = $.extend({}, settings || {});
		<span class="hljs-keyword">if</span> (nodeName === <span class="hljs-string">"input"</span>) {
			<span class="hljs-keyword">this</span>._connectDatepicker(target, inst);
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (inline) {
			<span class="hljs-keyword">this</span>._inlineDatepicker(target, inst);
		}
	},

	<span class="hljs-comment">/* Create a new instance object. */</span>
	_newInst: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target, inline)</span> {</span>
		<span class="hljs-keyword">var</span> id = target[<span class="hljs-number">0</span>].id.replace(<span class="hljs-regexp">/([^A-Za-z0-9_\-])/g</span>, <span class="hljs-string">"\\\\$1"</span>); <span class="hljs-comment">// escape jQuery meta chars</span>
		<span class="hljs-keyword">return</span> {id: id, input: target, <span class="hljs-comment">// associated target</span>
			selectedDay: <span class="hljs-number">0</span>, selectedMonth: <span class="hljs-number">0</span>, selectedYear: <span class="hljs-number">0</span>, <span class="hljs-comment">// current selection</span>
			drawMonth: <span class="hljs-number">0</span>, drawYear: <span class="hljs-number">0</span>, <span class="hljs-comment">// month being drawn</span>
			inline: inline, <span class="hljs-comment">// is datepicker inline or not</span>
			dpDiv: (!inline ? <span class="hljs-keyword">this</span>.dpDiv : <span class="hljs-comment">// presentation div</span>
			bindHover($(<span class="hljs-string">"&lt;div class='"</span> + <span class="hljs-keyword">this</span>._inlineClass + <span class="hljs-string">" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'&gt;&lt;/div&gt;"</span>)))};
	},

	<span class="hljs-comment">/* Attach the date picker to an input field. */</span>
	_connectDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target, inst)</span> {</span>
		<span class="hljs-keyword">var</span> input = $(target);
		inst.append = $([]);
		inst.trigger = $([]);
		<span class="hljs-keyword">if</span> (input.hasClass(<span class="hljs-keyword">this</span>.markerClassName)) {
			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">this</span>._attachments(input, inst);
		input.addClass(<span class="hljs-keyword">this</span>.markerClassName).keydown(<span class="hljs-keyword">this</span>._doKeyDown).
			keypress(<span class="hljs-keyword">this</span>._doKeyPress).keyup(<span class="hljs-keyword">this</span>._doKeyUp);
		<span class="hljs-keyword">this</span>._autoSize(inst);
		$.data(target, PROP_NAME, inst);</pre></div></div>
            
        </li>
        
        
        <li id="section-339">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-339">&#182;</a>
              </div>
              <p>If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>( inst.settings.disabled ) {
			<span class="hljs-keyword">this</span>._disableDatepicker( target );
		}
	},

	<span class="hljs-comment">/* Make attachments based on settings. */</span>
	_attachments: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(input, inst)</span> {</span>
		<span class="hljs-keyword">var</span> showOn, buttonText, buttonImage,
			appendText = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"appendText"</span>),
			isRTL = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"isRTL"</span>);

		<span class="hljs-keyword">if</span> (inst.append) {
			inst.append.remove();
		}
		<span class="hljs-keyword">if</span> (appendText) {
			inst.append = $(<span class="hljs-string">"&lt;span class='"</span> + <span class="hljs-keyword">this</span>._appendClass + <span class="hljs-string">"'&gt;"</span> + appendText + <span class="hljs-string">"&lt;/span&gt;"</span>);
			input[isRTL ? <span class="hljs-string">"before"</span> : <span class="hljs-string">"after"</span>](inst.append);
		}

		input.unbind(<span class="hljs-string">"focus"</span>, <span class="hljs-keyword">this</span>._showDatepicker);

		<span class="hljs-keyword">if</span> (inst.trigger) {
			inst.trigger.remove();
		}

		showOn = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"showOn"</span>);
		<span class="hljs-keyword">if</span> (showOn === <span class="hljs-string">"focus"</span> || showOn === <span class="hljs-string">"both"</span>) { <span class="hljs-comment">// pop-up date picker when in the marked field</span>
			input.focus(<span class="hljs-keyword">this</span>._showDatepicker);
		}
		<span class="hljs-keyword">if</span> (showOn === <span class="hljs-string">"button"</span> || showOn === <span class="hljs-string">"both"</span>) { <span class="hljs-comment">// pop-up date picker when button clicked</span>
			buttonText = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"buttonText"</span>);
			buttonImage = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"buttonImage"</span>);
			inst.trigger = $(<span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"buttonImageOnly"</span>) ?
				$(<span class="hljs-string">"&lt;img/&gt;"</span>).addClass(<span class="hljs-keyword">this</span>._triggerClass).
					attr({ src: buttonImage, alt: buttonText, title: buttonText }) :
				$(<span class="hljs-string">"&lt;button type='button'&gt;&lt;/button&gt;"</span>).addClass(<span class="hljs-keyword">this</span>._triggerClass).
					html(!buttonImage ? buttonText : $(<span class="hljs-string">"&lt;img/&gt;"</span>).attr(
					{ src:buttonImage, alt:buttonText, title:buttonText })));
			input[isRTL ? <span class="hljs-string">"before"</span> : <span class="hljs-string">"after"</span>](inst.trigger);
			inst.trigger.click(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ($.datepicker._datepickerShowing &amp;&amp; $.datepicker._lastInput === input[<span class="hljs-number">0</span>]) {
					$.datepicker._hideDatepicker();
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($.datepicker._datepickerShowing &amp;&amp; $.datepicker._lastInput !== input[<span class="hljs-number">0</span>]) {
					$.datepicker._hideDatepicker();
					$.datepicker._showDatepicker(input[<span class="hljs-number">0</span>]);
				} <span class="hljs-keyword">else</span> {
					$.datepicker._showDatepicker(input[<span class="hljs-number">0</span>]);
				}
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			});
		}
	},

	<span class="hljs-comment">/* Apply the maximum length for the date format. */</span>
	_autoSize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst)</span> {</span>
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"autoSize"</span>) &amp;&amp; !inst.inline) {
			<span class="hljs-keyword">var</span> findMax, max, maxI, i,
				date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2009</span>, <span class="hljs-number">12</span> - <span class="hljs-number">1</span>, <span class="hljs-number">20</span>), <span class="hljs-comment">// Ensure double digits</span>
				dateFormat = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"dateFormat"</span>);

			<span class="hljs-keyword">if</span> (dateFormat.match(<span class="hljs-regexp">/[DM]/</span>)) {
				findMax = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(names)</span> {</span>
					max = <span class="hljs-number">0</span>;
					maxI = <span class="hljs-number">0</span>;
					<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; names.length; i++) {
						<span class="hljs-keyword">if</span> (names[i].length &gt; max) {
							max = names[i].length;
							maxI = i;
						}
					}
					<span class="hljs-keyword">return</span> maxI;
				};
				date.setMonth(findMax(<span class="hljs-keyword">this</span>._get(inst, (dateFormat.match(<span class="hljs-regexp">/MM/</span>) ?
					<span class="hljs-string">"monthNames"</span> : <span class="hljs-string">"monthNamesShort"</span>))));
				date.setDate(findMax(<span class="hljs-keyword">this</span>._get(inst, (dateFormat.match(<span class="hljs-regexp">/DD/</span>) ?
					<span class="hljs-string">"dayNames"</span> : <span class="hljs-string">"dayNamesShort"</span>))) + <span class="hljs-number">20</span> - date.getDay());
			}
			inst.input.attr(<span class="hljs-string">"size"</span>, <span class="hljs-keyword">this</span>._formatDate(inst, date).length);
		}
	},

	<span class="hljs-comment">/* Attach an inline date picker to a div. */</span>
	_inlineDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target, inst)</span> {</span>
		<span class="hljs-keyword">var</span> divSpan = $(target);
		<span class="hljs-keyword">if</span> (divSpan.hasClass(<span class="hljs-keyword">this</span>.markerClassName)) {
			<span class="hljs-keyword">return</span>;
		}
		divSpan.addClass(<span class="hljs-keyword">this</span>.markerClassName).append(inst.dpDiv);
		$.data(target, PROP_NAME, inst);
		<span class="hljs-keyword">this</span>._setDate(inst, <span class="hljs-keyword">this</span>._getDefaultDate(inst), <span class="hljs-literal">true</span>);
		<span class="hljs-keyword">this</span>._updateDatepicker(inst);
		<span class="hljs-keyword">this</span>._updateAlternate(inst);</pre></div></div>
            
        </li>
        
        
        <li id="section-340">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-340">&#182;</a>
              </div>
              <p>If disabled option is true, disable the datepicker before showing it (see ticket #5665)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>( inst.settings.disabled ) {
			<span class="hljs-keyword">this</span>._disableDatepicker( target );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-341">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-341">&#182;</a>
              </div>
              <p>Set display:block in place of inst.dpDiv.show() which won’t work on disconnected elements
<a href="http://bugs.jqueryui.com/ticket/7552">http://bugs.jqueryui.com/ticket/7552</a> - A Datepicker created on a detached div has zero height</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		inst.dpDiv.css( <span class="hljs-string">"display"</span>, <span class="hljs-string">"block"</span> );
	},

	<span class="hljs-comment">/* Pop-up the date picker in a "dialog" box.
	 * @param  input element - ignored
	 * @param  date	string or Date - the initial date to display
	 * @param  onSelect  function - the function to call when a date is selected
	 * @param  settings  object - update the dialog date picker instance's settings (anonymous object)
	 * @param  pos int[2] - coordinates for the dialog's position within the screen or
	 *					event - with x/y coordinates or
	 *					leave empty for default (screen centre)
	 * @return the manager object
	 */</span>
	_dialogDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(input, date, onSelect, settings, pos)</span> {</span>
		<span class="hljs-keyword">var</span> id, browserWidth, browserHeight, scrollX, scrollY,
			inst = <span class="hljs-keyword">this</span>._dialogInst; <span class="hljs-comment">// internal instance</span>

		<span class="hljs-keyword">if</span> (!inst) {
			<span class="hljs-keyword">this</span>.uuid += <span class="hljs-number">1</span>;
			id = <span class="hljs-string">"dp"</span> + <span class="hljs-keyword">this</span>.uuid;
			<span class="hljs-keyword">this</span>._dialogInput = $(<span class="hljs-string">"&lt;input type='text' id='"</span> + id +
				<span class="hljs-string">"' style='position: absolute; top: -100px; width: 0px;'/&gt;"</span>);
			<span class="hljs-keyword">this</span>._dialogInput.keydown(<span class="hljs-keyword">this</span>._doKeyDown);
			$(<span class="hljs-string">"body"</span>).append(<span class="hljs-keyword">this</span>._dialogInput);
			inst = <span class="hljs-keyword">this</span>._dialogInst = <span class="hljs-keyword">this</span>._newInst(<span class="hljs-keyword">this</span>._dialogInput, <span class="hljs-literal">false</span>);
			inst.settings = {};
			$.data(<span class="hljs-keyword">this</span>._dialogInput[<span class="hljs-number">0</span>], PROP_NAME, inst);
		}
		extendRemove(inst.settings, settings || {});
		date = (date &amp;&amp; date.constructor === <span class="hljs-built_in">Date</span> ? <span class="hljs-keyword">this</span>._formatDate(inst, date) : date);
		<span class="hljs-keyword">this</span>._dialogInput.val(date);

		<span class="hljs-keyword">this</span>._pos = (pos ? (pos.length ? pos : [pos.pageX, pos.pageY]) : <span class="hljs-literal">null</span>);
		<span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._pos) {
			browserWidth = document.documentElement.clientWidth;
			browserHeight = document.documentElement.clientHeight;
			scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
			scrollY = document.documentElement.scrollTop || document.body.scrollTop;
			<span class="hljs-keyword">this</span>._pos = <span class="hljs-comment">// should use actual width/height below</span>
				[(browserWidth / <span class="hljs-number">2</span>) - <span class="hljs-number">100</span> + scrollX, (browserHeight / <span class="hljs-number">2</span>) - <span class="hljs-number">150</span> + scrollY];
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-342">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-342">&#182;</a>
              </div>
              <p>move input on screen for focus, but hidden behind dialog</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._dialogInput.css(<span class="hljs-string">"left"</span>, (<span class="hljs-keyword">this</span>._pos[<span class="hljs-number">0</span>] + <span class="hljs-number">20</span>) + <span class="hljs-string">"px"</span>).css(<span class="hljs-string">"top"</span>, <span class="hljs-keyword">this</span>._pos[<span class="hljs-number">1</span>] + <span class="hljs-string">"px"</span>);
		inst.settings.onSelect = onSelect;
		<span class="hljs-keyword">this</span>._inDialog = <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">this</span>.dpDiv.addClass(<span class="hljs-keyword">this</span>._dialogClass);
		<span class="hljs-keyword">this</span>._showDatepicker(<span class="hljs-keyword">this</span>._dialogInput[<span class="hljs-number">0</span>]);
		<span class="hljs-keyword">if</span> ($.blockUI) {
			$.blockUI(<span class="hljs-keyword">this</span>.dpDiv);
		}
		$.data(<span class="hljs-keyword">this</span>._dialogInput[<span class="hljs-number">0</span>], PROP_NAME, inst);
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	},

	<span class="hljs-comment">/* Detach a datepicker from its control.
	 * @param  target	element - the target input field or division or span
	 */</span>
	_destroyDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target)</span> {</span>
		<span class="hljs-keyword">var</span> nodeName,
			$target = $(target),
			inst = $.data(target, PROP_NAME);

		<span class="hljs-keyword">if</span> (!$target.hasClass(<span class="hljs-keyword">this</span>.markerClassName)) {
			<span class="hljs-keyword">return</span>;
		}

		nodeName = target.nodeName.toLowerCase();
		$.removeData(target, PROP_NAME);
		<span class="hljs-keyword">if</span> (nodeName === <span class="hljs-string">"input"</span>) {
			inst.append.remove();
			inst.trigger.remove();
			$target.removeClass(<span class="hljs-keyword">this</span>.markerClassName).
				unbind(<span class="hljs-string">"focus"</span>, <span class="hljs-keyword">this</span>._showDatepicker).
				unbind(<span class="hljs-string">"keydown"</span>, <span class="hljs-keyword">this</span>._doKeyDown).
				unbind(<span class="hljs-string">"keypress"</span>, <span class="hljs-keyword">this</span>._doKeyPress).
				unbind(<span class="hljs-string">"keyup"</span>, <span class="hljs-keyword">this</span>._doKeyUp);
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nodeName === <span class="hljs-string">"div"</span> || nodeName === <span class="hljs-string">"span"</span>) {
			$target.removeClass(<span class="hljs-keyword">this</span>.markerClassName).empty();
		}
	},

	<span class="hljs-comment">/* Enable the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 */</span>
	_enableDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target)</span> {</span>
		<span class="hljs-keyword">var</span> nodeName, inline,
			$target = $(target),
			inst = $.data(target, PROP_NAME);

		<span class="hljs-keyword">if</span> (!$target.hasClass(<span class="hljs-keyword">this</span>.markerClassName)) {
			<span class="hljs-keyword">return</span>;
		}

		nodeName = target.nodeName.toLowerCase();
		<span class="hljs-keyword">if</span> (nodeName === <span class="hljs-string">"input"</span>) {
			target.disabled = <span class="hljs-literal">false</span>;
			inst.trigger.filter(<span class="hljs-string">"button"</span>).
				each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span> <span class="hljs-keyword">this</span>.disabled = <span class="hljs-literal">false</span>; }).end().
				filter(<span class="hljs-string">"img"</span>).css({opacity: <span class="hljs-string">"1.0"</span>, cursor: <span class="hljs-string">""</span>});
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nodeName === <span class="hljs-string">"div"</span> || nodeName === <span class="hljs-string">"span"</span>) {
			inline = $target.children(<span class="hljs-string">"."</span> + <span class="hljs-keyword">this</span>._inlineClass);
			inline.children().removeClass(<span class="hljs-string">"ui-state-disabled"</span>);
			inline.find(<span class="hljs-string">"select.ui-datepicker-month, select.ui-datepicker-year"</span>).
				prop(<span class="hljs-string">"disabled"</span>, <span class="hljs-literal">false</span>);
		}
		<span class="hljs-keyword">this</span>._disabledInputs = $.map(<span class="hljs-keyword">this</span>._disabledInputs,
			<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span> {</span> <span class="hljs-keyword">return</span> (value === target ? <span class="hljs-literal">null</span> : value); }); <span class="hljs-comment">// delete entry</span>
	},

	<span class="hljs-comment">/* Disable the date picker to a jQuery selection.
	 * @param  target	element - the target input field or division or span
	 */</span>
	_disableDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target)</span> {</span>
		<span class="hljs-keyword">var</span> nodeName, inline,
			$target = $(target),
			inst = $.data(target, PROP_NAME);

		<span class="hljs-keyword">if</span> (!$target.hasClass(<span class="hljs-keyword">this</span>.markerClassName)) {
			<span class="hljs-keyword">return</span>;
		}

		nodeName = target.nodeName.toLowerCase();
		<span class="hljs-keyword">if</span> (nodeName === <span class="hljs-string">"input"</span>) {
			target.disabled = <span class="hljs-literal">true</span>;
			inst.trigger.filter(<span class="hljs-string">"button"</span>).
				each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span> <span class="hljs-keyword">this</span>.disabled = <span class="hljs-literal">true</span>; }).end().
				filter(<span class="hljs-string">"img"</span>).css({opacity: <span class="hljs-string">"0.5"</span>, cursor: <span class="hljs-string">"default"</span>});
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nodeName === <span class="hljs-string">"div"</span> || nodeName === <span class="hljs-string">"span"</span>) {
			inline = $target.children(<span class="hljs-string">"."</span> + <span class="hljs-keyword">this</span>._inlineClass);
			inline.children().addClass(<span class="hljs-string">"ui-state-disabled"</span>);
			inline.find(<span class="hljs-string">"select.ui-datepicker-month, select.ui-datepicker-year"</span>).
				prop(<span class="hljs-string">"disabled"</span>, <span class="hljs-literal">true</span>);
		}
		<span class="hljs-keyword">this</span>._disabledInputs = $.map(<span class="hljs-keyword">this</span>._disabledInputs,
			<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span> {</span> <span class="hljs-keyword">return</span> (value === target ? <span class="hljs-literal">null</span> : value); }); <span class="hljs-comment">// delete entry</span>
		<span class="hljs-keyword">this</span>._disabledInputs[<span class="hljs-keyword">this</span>._disabledInputs.length] = target;
	},

	<span class="hljs-comment">/* Is the first field in a jQuery collection disabled as a datepicker?
	 * @param  target	element - the target input field or division or span
	 * @return boolean - true if disabled, false if enabled
	 */</span>
	_isDisabledDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target)</span> {</span>
		<span class="hljs-keyword">if</span> (!target) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>._disabledInputs.length; i++) {
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._disabledInputs[i] === target) {
				<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
			}
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	},

	<span class="hljs-comment">/* Retrieve the instance data for the target control.
	 * @param  target  element - the target input field or division or span
	 * @return  object - the associated instance data
	 * @throws  error if a jQuery problem getting data
	 */</span>
	_getInst: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target)</span> {</span>
		<span class="hljs-keyword">try</span> {
			<span class="hljs-keyword">return</span> $.data(target, PROP_NAME);
		}
		<span class="hljs-keyword">catch</span> (err) {
			<span class="hljs-keyword">throw</span> <span class="hljs-string">"Missing instance data for this datepicker"</span>;
		}
	},

	<span class="hljs-comment">/* Update or retrieve the settings for a date picker attached to an input field or division.
	 * @param  target  element - the target input field or division or span
	 * @param  name	object - the new settings to update or
	 *				string - the name of the setting to change or retrieve,
	 *				when retrieving also "all" for all instance settings or
	 *				"defaults" for all global defaults
	 * @param  value   any - the new value for the setting
	 *				(omit if above is an object or to retrieve a value)
	 */</span>
	_optionDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target, name, value)</span> {</span>
		<span class="hljs-keyword">var</span> settings, date, minDate, maxDate,
			inst = <span class="hljs-keyword">this</span>._getInst(target);

		<span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length === <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-keyword">typeof</span> name === <span class="hljs-string">"string"</span>) {
			<span class="hljs-keyword">return</span> (name === <span class="hljs-string">"defaults"</span> ? $.extend({}, $.datepicker._defaults) :
				(inst ? (name === <span class="hljs-string">"all"</span> ? $.extend({}, inst.settings) :
				<span class="hljs-keyword">this</span>._get(inst, name)) : <span class="hljs-literal">null</span>));
		}

		settings = name || {};
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> name === <span class="hljs-string">"string"</span>) {
			settings = {};
			settings[name] = value;
		}

		<span class="hljs-keyword">if</span> (inst) {
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._curInst === inst) {
				<span class="hljs-keyword">this</span>._hideDatepicker();
			}

			date = <span class="hljs-keyword">this</span>._getDateDatepicker(target, <span class="hljs-literal">true</span>);
			minDate = <span class="hljs-keyword">this</span>._getMinMaxDate(inst, <span class="hljs-string">"min"</span>);
			maxDate = <span class="hljs-keyword">this</span>._getMinMaxDate(inst, <span class="hljs-string">"max"</span>);
			extendRemove(inst.settings, settings);</pre></div></div>
            
        </li>
        
        
        <li id="section-343">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-343">&#182;</a>
              </div>
              <p>reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn’t provided</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> (minDate !== <span class="hljs-literal">null</span> &amp;&amp; settings.dateFormat !== <span class="hljs-literal">undefined</span> &amp;&amp; settings.minDate === <span class="hljs-literal">undefined</span>) {
				inst.settings.minDate = <span class="hljs-keyword">this</span>._formatDate(inst, minDate);
			}
			<span class="hljs-keyword">if</span> (maxDate !== <span class="hljs-literal">null</span> &amp;&amp; settings.dateFormat !== <span class="hljs-literal">undefined</span> &amp;&amp; settings.maxDate === <span class="hljs-literal">undefined</span>) {
				inst.settings.maxDate = <span class="hljs-keyword">this</span>._formatDate(inst, maxDate);
			}
			<span class="hljs-keyword">if</span> ( <span class="hljs-string">"disabled"</span> <span class="hljs-keyword">in</span> settings ) {
				<span class="hljs-keyword">if</span> ( settings.disabled ) {
					<span class="hljs-keyword">this</span>._disableDatepicker(target);
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">this</span>._enableDatepicker(target);
				}
			}
			<span class="hljs-keyword">this</span>._attachments($(target), inst);
			<span class="hljs-keyword">this</span>._autoSize(inst);
			<span class="hljs-keyword">this</span>._setDate(inst, date);
			<span class="hljs-keyword">this</span>._updateAlternate(inst);
			<span class="hljs-keyword">this</span>._updateDatepicker(inst);
		}
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-344">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-344">&#182;</a>
              </div>
              <p>change method deprecated</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_changeDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target, name, value)</span> {</span>
		<span class="hljs-keyword">this</span>._optionDatepicker(target, name, value);
	},

	<span class="hljs-comment">/* Redraw the date picker attached to an input field or division.
	 * @param  target  element - the target input field or division or span
	 */</span>
	_refreshDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target)</span> {</span>
		<span class="hljs-keyword">var</span> inst = <span class="hljs-keyword">this</span>._getInst(target);
		<span class="hljs-keyword">if</span> (inst) {
			<span class="hljs-keyword">this</span>._updateDatepicker(inst);
		}
	},

	<span class="hljs-comment">/* Set the dates for a jQuery selection.
	 * @param  target element - the target input field or division or span
	 * @param  date	Date - the new date
	 */</span>
	_setDateDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target, date)</span> {</span>
		<span class="hljs-keyword">var</span> inst = <span class="hljs-keyword">this</span>._getInst(target);
		<span class="hljs-keyword">if</span> (inst) {
			<span class="hljs-keyword">this</span>._setDate(inst, date);
			<span class="hljs-keyword">this</span>._updateDatepicker(inst);
			<span class="hljs-keyword">this</span>._updateAlternate(inst);
		}
	},

	<span class="hljs-comment">/* Get the date(s) for the first entry in a jQuery selection.
	 * @param  target element - the target input field or division or span
	 * @param  noDefault boolean - true if no default date is to be used
	 * @return Date - the current date
	 */</span>
	_getDateDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target, noDefault)</span> {</span>
		<span class="hljs-keyword">var</span> inst = <span class="hljs-keyword">this</span>._getInst(target);
		<span class="hljs-keyword">if</span> (inst &amp;&amp; !inst.inline) {
			<span class="hljs-keyword">this</span>._setDateFromField(inst, noDefault);
		}
		<span class="hljs-keyword">return</span> (inst ? <span class="hljs-keyword">this</span>._getDate(inst) : <span class="hljs-literal">null</span>);
	},

	<span class="hljs-comment">/* Handle keystrokes. */</span>
	_doKeyDown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">var</span> onSelect, dateStr, sel,
			inst = $.datepicker._getInst(event.target),
			handled = <span class="hljs-literal">true</span>,
			isRTL = inst.dpDiv.is(<span class="hljs-string">".ui-datepicker-rtl"</span>);

		inst._keyEvent = <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">if</span> ($.datepicker._datepickerShowing) {
			<span class="hljs-keyword">switch</span> (event.keyCode) {
				<span class="hljs-keyword">case</span> <span class="hljs-number">9</span>: $.datepicker._hideDatepicker();
						handled = <span class="hljs-literal">false</span>;
						<span class="hljs-keyword">break</span>; <span class="hljs-comment">// hide on tab out</span>
				<span class="hljs-keyword">case</span> <span class="hljs-number">13</span>: sel = $(<span class="hljs-string">"td."</span> + $.datepicker._dayOverClass + <span class="hljs-string">":not(."</span> +
									$.datepicker._currentClass + <span class="hljs-string">")"</span>, inst.dpDiv);
						<span class="hljs-keyword">if</span> (sel[<span class="hljs-number">0</span>]) {
							$.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[<span class="hljs-number">0</span>]);
						}

						onSelect = $.datepicker._get(inst, <span class="hljs-string">"onSelect"</span>);
						<span class="hljs-keyword">if</span> (onSelect) {
							dateStr = $.datepicker._formatDate(inst);</pre></div></div>
            
        </li>
        
        
        <li id="section-345">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-345">&#182;</a>
              </div>
              <p>trigger custom callback</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							onSelect.apply((inst.input ? inst.input[<span class="hljs-number">0</span>] : <span class="hljs-literal">null</span>), [dateStr, inst]);
						} <span class="hljs-keyword">else</span> {
							$.datepicker._hideDatepicker();
						}

						<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// don't submit the form</span>
				<span class="hljs-keyword">case</span> <span class="hljs-number">27</span>: $.datepicker._hideDatepicker();
						<span class="hljs-keyword">break</span>; <span class="hljs-comment">// hide on escape</span>
				<span class="hljs-keyword">case</span> <span class="hljs-number">33</span>: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
							-$.datepicker._get(inst, <span class="hljs-string">"stepBigMonths"</span>) :
							-$.datepicker._get(inst, <span class="hljs-string">"stepMonths"</span>)), <span class="hljs-string">"M"</span>);
						<span class="hljs-keyword">break</span>; <span class="hljs-comment">// previous month/year on page up/+ ctrl</span>
				<span class="hljs-keyword">case</span> <span class="hljs-number">34</span>: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
							+$.datepicker._get(inst, <span class="hljs-string">"stepBigMonths"</span>) :
							+$.datepicker._get(inst, <span class="hljs-string">"stepMonths"</span>)), <span class="hljs-string">"M"</span>);
						<span class="hljs-keyword">break</span>; <span class="hljs-comment">// next month/year on page down/+ ctrl</span>
				<span class="hljs-keyword">case</span> <span class="hljs-number">35</span>: <span class="hljs-keyword">if</span> (event.ctrlKey || event.metaKey) {
							$.datepicker._clearDate(event.target);
						}
						handled = event.ctrlKey || event.metaKey;
						<span class="hljs-keyword">break</span>; <span class="hljs-comment">// clear on ctrl or command +end</span>
				<span class="hljs-keyword">case</span> <span class="hljs-number">36</span>: <span class="hljs-keyword">if</span> (event.ctrlKey || event.metaKey) {
							$.datepicker._gotoToday(event.target);
						}
						handled = event.ctrlKey || event.metaKey;
						<span class="hljs-keyword">break</span>; <span class="hljs-comment">// current on ctrl or command +home</span>
				<span class="hljs-keyword">case</span> <span class="hljs-number">37</span>: <span class="hljs-keyword">if</span> (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, (isRTL ? +<span class="hljs-number">1</span> : -<span class="hljs-number">1</span>), <span class="hljs-string">"D"</span>);
						}
						handled = event.ctrlKey || event.metaKey;</pre></div></div>
            
        </li>
        
        
        <li id="section-346">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-346">&#182;</a>
              </div>
              <p>-1 day on ctrl or command +left</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">if</span> (event.originalEvent.altKey) {
							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
								-$.datepicker._get(inst, <span class="hljs-string">"stepBigMonths"</span>) :
								-$.datepicker._get(inst, <span class="hljs-string">"stepMonths"</span>)), <span class="hljs-string">"M"</span>);
						}</pre></div></div>
            
        </li>
        
        
        <li id="section-347">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-347">&#182;</a>
              </div>
              <p>next month/year on alt +left on Mac</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> <span class="hljs-number">38</span>: <span class="hljs-keyword">if</span> (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, -<span class="hljs-number">7</span>, <span class="hljs-string">"D"</span>);
						}
						handled = event.ctrlKey || event.metaKey;
						<span class="hljs-keyword">break</span>; <span class="hljs-comment">// -1 week on ctrl or command +up</span>
				<span class="hljs-keyword">case</span> <span class="hljs-number">39</span>: <span class="hljs-keyword">if</span> (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, (isRTL ? -<span class="hljs-number">1</span> : +<span class="hljs-number">1</span>), <span class="hljs-string">"D"</span>);
						}
						handled = event.ctrlKey || event.metaKey;</pre></div></div>
            
        </li>
        
        
        <li id="section-348">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-348">&#182;</a>
              </div>
              <p>+1 day on ctrl or command +right</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">if</span> (event.originalEvent.altKey) {
							$.datepicker._adjustDate(event.target, (event.ctrlKey ?
								+$.datepicker._get(inst, <span class="hljs-string">"stepBigMonths"</span>) :
								+$.datepicker._get(inst, <span class="hljs-string">"stepMonths"</span>)), <span class="hljs-string">"M"</span>);
						}</pre></div></div>
            
        </li>
        
        
        <li id="section-349">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-349">&#182;</a>
              </div>
              <p>next month/year on alt +right</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> <span class="hljs-number">40</span>: <span class="hljs-keyword">if</span> (event.ctrlKey || event.metaKey) {
							$.datepicker._adjustDate(event.target, +<span class="hljs-number">7</span>, <span class="hljs-string">"D"</span>);
						}
						handled = event.ctrlKey || event.metaKey;
						<span class="hljs-keyword">break</span>; <span class="hljs-comment">// +1 week on ctrl or command +down</span>
				<span class="hljs-keyword">default</span>: handled = <span class="hljs-literal">false</span>;
			}
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.keyCode === <span class="hljs-number">36</span> &amp;&amp; event.ctrlKey) { <span class="hljs-comment">// display the date picker on ctrl+home</span>
			$.datepicker._showDatepicker(<span class="hljs-keyword">this</span>);
		} <span class="hljs-keyword">else</span> {
			handled = <span class="hljs-literal">false</span>;
		}

		<span class="hljs-keyword">if</span> (handled) {
			event.preventDefault();
			event.stopPropagation();
		}
	},

	<span class="hljs-comment">/* Filter entered characters - based on date format. */</span>
	_doKeyPress: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">var</span> chars, chr,
			inst = $.datepicker._getInst(event.target);

		<span class="hljs-keyword">if</span> ($.datepicker._get(inst, <span class="hljs-string">"constrainInput"</span>)) {
			chars = $.datepicker._possibleChars($.datepicker._get(inst, <span class="hljs-string">"dateFormat"</span>));
			chr = <span class="hljs-built_in">String</span>.fromCharCode(event.charCode == <span class="hljs-literal">null</span> ? event.keyCode : event.charCode);
			<span class="hljs-keyword">return</span> event.ctrlKey || event.metaKey || (chr &lt; <span class="hljs-string">" "</span> || !chars || chars.indexOf(chr) &gt; -<span class="hljs-number">1</span>);
		}
	},

	<span class="hljs-comment">/* Synchronise manual entry and field/alternate field. */</span>
	_doKeyUp: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">var</span> date,
			inst = $.datepicker._getInst(event.target);

		<span class="hljs-keyword">if</span> (inst.input.val() !== inst.lastVal) {
			<span class="hljs-keyword">try</span> {
				date = $.datepicker.parseDate($.datepicker._get(inst, <span class="hljs-string">"dateFormat"</span>),
					(inst.input ? inst.input.val() : <span class="hljs-literal">null</span>),
					$.datepicker._getFormatConfig(inst));

				<span class="hljs-keyword">if</span> (date) { <span class="hljs-comment">// only if valid</span>
					$.datepicker._setDateFromField(inst);
					$.datepicker._updateAlternate(inst);
					$.datepicker._updateDatepicker(inst);
				}
			}
			<span class="hljs-keyword">catch</span> (err) {
			}
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	},

	<span class="hljs-comment">/* Pop-up the date picker for a given input field.
	 * If false returned from beforeShow event handler do not show.
	 * @param  input  element - the input field attached to the date picker or
	 *					event - if triggered by focus
	 */</span>
	_showDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(input)</span> {</span>
		input = input.target || input;
		<span class="hljs-keyword">if</span> (input.nodeName.toLowerCase() !== <span class="hljs-string">"input"</span>) { <span class="hljs-comment">// find from button/image trigger</span>
			input = $(<span class="hljs-string">"input"</span>, input.parentNode)[<span class="hljs-number">0</span>];
		}

		<span class="hljs-keyword">if</span> ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput === input) { <span class="hljs-comment">// already here</span>
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">var</span> inst, beforeShow, beforeShowSettings, isFixed,
			offset, showAnim, duration;

		inst = $.datepicker._getInst(input);
		<span class="hljs-keyword">if</span> ($.datepicker._curInst &amp;&amp; $.datepicker._curInst !== inst) {
			$.datepicker._curInst.dpDiv.stop(<span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>);
			<span class="hljs-keyword">if</span> ( inst &amp;&amp; $.datepicker._datepickerShowing ) {
				$.datepicker._hideDatepicker( $.datepicker._curInst.input[<span class="hljs-number">0</span>] );
			}
		}

		beforeShow = $.datepicker._get(inst, <span class="hljs-string">"beforeShow"</span>);
		beforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {};
		<span class="hljs-keyword">if</span>(beforeShowSettings === <span class="hljs-literal">false</span>){
			<span class="hljs-keyword">return</span>;
		}
		extendRemove(inst.settings, beforeShowSettings);

		inst.lastVal = <span class="hljs-literal">null</span>;
		$.datepicker._lastInput = input;
		$.datepicker._setDateFromField(inst);

		<span class="hljs-keyword">if</span> ($.datepicker._inDialog) { <span class="hljs-comment">// hide cursor</span>
			input.value = <span class="hljs-string">""</span>;
		}
		<span class="hljs-keyword">if</span> (!$.datepicker._pos) { <span class="hljs-comment">// position below input</span>
			$.datepicker._pos = $.datepicker._findPos(input);
			$.datepicker._pos[<span class="hljs-number">1</span>] += input.offsetHeight; <span class="hljs-comment">// add the height</span>
		}

		isFixed = <span class="hljs-literal">false</span>;
		$(input).parents().each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			isFixed |= $(<span class="hljs-keyword">this</span>).css(<span class="hljs-string">"position"</span>) === <span class="hljs-string">"fixed"</span>;
			<span class="hljs-keyword">return</span> !isFixed;
		});

		offset = {left: $.datepicker._pos[<span class="hljs-number">0</span>], top: $.datepicker._pos[<span class="hljs-number">1</span>]};
		$.datepicker._pos = <span class="hljs-literal">null</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-350">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-350">&#182;</a>
              </div>
              <p>to avoid flashes on Firefox</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		inst.dpDiv.empty();</pre></div></div>
            
        </li>
        
        
        <li id="section-351">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-351">&#182;</a>
              </div>
              <p>determine sizing offscreen</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		inst.dpDiv.css({position: <span class="hljs-string">"absolute"</span>, display: <span class="hljs-string">"block"</span>, top: <span class="hljs-string">"-1000px"</span>});
		$.datepicker._updateDatepicker(inst);</pre></div></div>
            
        </li>
        
        
        <li id="section-352">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-352">&#182;</a>
              </div>
              <p>fix width for dynamic number of date pickers
and adjust position before showing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		offset = $.datepicker._checkOffset(inst, offset, isFixed);
		inst.dpDiv.css({position: ($.datepicker._inDialog &amp;&amp; $.blockUI ?
			<span class="hljs-string">"static"</span> : (isFixed ? <span class="hljs-string">"fixed"</span> : <span class="hljs-string">"absolute"</span>)), display: <span class="hljs-string">"none"</span>,
			left: offset.left + <span class="hljs-string">"px"</span>, top: offset.top + <span class="hljs-string">"px"</span>});

		<span class="hljs-keyword">if</span> (!inst.inline) {
			showAnim = $.datepicker._get(inst, <span class="hljs-string">"showAnim"</span>);
			duration = $.datepicker._get(inst, <span class="hljs-string">"duration"</span>);
			inst.dpDiv.zIndex($(input).zIndex()+<span class="hljs-number">1</span>);
			$.datepicker._datepickerShowing = <span class="hljs-literal">true</span>;

			<span class="hljs-keyword">if</span> ( $.effects &amp;&amp; $.effects.effect[ showAnim ] ) {
				inst.dpDiv.show(showAnim, $.datepicker._get(inst, <span class="hljs-string">"showOptions"</span>), duration);
			} <span class="hljs-keyword">else</span> {
				inst.dpDiv[showAnim || <span class="hljs-string">"show"</span>](showAnim ? duration : <span class="hljs-literal">null</span>);
			}

			<span class="hljs-keyword">if</span> ( $.datepicker._shouldFocusInput( inst ) ) {
				inst.input.focus();
			}

			$.datepicker._curInst = inst;
		}
	},

	<span class="hljs-comment">/* Generate the date picker content. */</span>
	_updateDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst)</span> {</span>
		<span class="hljs-keyword">this</span>.maxRows = <span class="hljs-number">4</span>; <span class="hljs-comment">//Reset the max number of rows being displayed (see #7043)</span>
		instActive = inst; <span class="hljs-comment">// for delegate hover events</span>
		inst.dpDiv.empty().append(<span class="hljs-keyword">this</span>._generateHTML(inst));
		<span class="hljs-keyword">this</span>._attachHandlers(inst);
		inst.dpDiv.find(<span class="hljs-string">"."</span> + <span class="hljs-keyword">this</span>._dayOverClass + <span class="hljs-string">" a"</span>).mouseover();

		<span class="hljs-keyword">var</span> origyearshtml,
			numMonths = <span class="hljs-keyword">this</span>._getNumberOfMonths(inst),
			cols = numMonths[<span class="hljs-number">1</span>],
			width = <span class="hljs-number">17</span>;

		inst.dpDiv.removeClass(<span class="hljs-string">"ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4"</span>).width(<span class="hljs-string">""</span>);
		<span class="hljs-keyword">if</span> (cols &gt; <span class="hljs-number">1</span>) {
			inst.dpDiv.addClass(<span class="hljs-string">"ui-datepicker-multi-"</span> + cols).css(<span class="hljs-string">"width"</span>, (width * cols) + <span class="hljs-string">"em"</span>);
		}
		inst.dpDiv[(numMonths[<span class="hljs-number">0</span>] !== <span class="hljs-number">1</span> || numMonths[<span class="hljs-number">1</span>] !== <span class="hljs-number">1</span> ? <span class="hljs-string">"add"</span> : <span class="hljs-string">"remove"</span>) +
			<span class="hljs-string">"Class"</span>](<span class="hljs-string">"ui-datepicker-multi"</span>);
		inst.dpDiv[(<span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"isRTL"</span>) ? <span class="hljs-string">"add"</span> : <span class="hljs-string">"remove"</span>) +
			<span class="hljs-string">"Class"</span>](<span class="hljs-string">"ui-datepicker-rtl"</span>);

		<span class="hljs-keyword">if</span> (inst === $.datepicker._curInst &amp;&amp; $.datepicker._datepickerShowing &amp;&amp; $.datepicker._shouldFocusInput( inst ) ) {
			inst.input.focus();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-353">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-353">&#182;</a>
              </div>
              <p>deffered render of the years select (to avoid flashes on Firefox)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span>( inst.yearshtml ){
			origyearshtml = inst.yearshtml;
			setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span></pre></div></div>
            
        </li>
        
        
        <li id="section-354">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-354">&#182;</a>
              </div>
              <p>assure that inst.yearshtml didn’t change.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span>( origyearshtml === inst.yearshtml &amp;&amp; inst.yearshtml ){
					inst.dpDiv.find(<span class="hljs-string">"select.ui-datepicker-year:first"</span>).replaceWith(inst.yearshtml);
				}
				origyearshtml = inst.yearshtml = <span class="hljs-literal">null</span>;
			}, <span class="hljs-number">0</span>);
		}
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-355">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-355">&#182;</a>
              </div>
              <h1 id="6694-don-t-focus-the-input-if-it-s-already-focused">6694 - don’t focus the input if it’s already focused</h1>
<p>this breaks the change event in IE
Support: IE and jQuery &lt;1.9</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_shouldFocusInput: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( inst )</span> {</span>
		<span class="hljs-keyword">return</span> inst.input &amp;&amp; inst.input.is( <span class="hljs-string">":visible"</span> ) &amp;&amp; !inst.input.is( <span class="hljs-string">":disabled"</span> ) &amp;&amp; !inst.input.is( <span class="hljs-string">":focus"</span> );
	},

	<span class="hljs-comment">/* Check positioning to remain on screen. */</span>
	_checkOffset: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst, offset, isFixed)</span> {</span>
		<span class="hljs-keyword">var</span> dpWidth = inst.dpDiv.outerWidth(),
			dpHeight = inst.dpDiv.outerHeight(),
			inputWidth = inst.input ? inst.input.outerWidth() : <span class="hljs-number">0</span>,
			inputHeight = inst.input ? inst.input.outerHeight() : <span class="hljs-number">0</span>,
			viewWidth = document.documentElement.clientWidth + (isFixed ? <span class="hljs-number">0</span> : $(document).scrollLeft()),
			viewHeight = document.documentElement.clientHeight + (isFixed ? <span class="hljs-number">0</span> : $(document).scrollTop());

		offset.left -= (<span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"isRTL"</span>) ? (dpWidth - inputWidth) : <span class="hljs-number">0</span>);
		offset.left -= (isFixed &amp;&amp; offset.left === inst.input.offset().left) ? $(document).scrollLeft() : <span class="hljs-number">0</span>;
		offset.top -= (isFixed &amp;&amp; offset.top === (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-356">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-356">&#182;</a>
              </div>
              <p>now check if datepicker is showing outside window viewport - move to a better place if so.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		offset.left -= <span class="hljs-built_in">Math</span>.min(offset.left, (offset.left + dpWidth &gt; viewWidth &amp;&amp; viewWidth &gt; dpWidth) ?
			<span class="hljs-built_in">Math</span>.abs(offset.left + dpWidth - viewWidth) : <span class="hljs-number">0</span>);
		offset.top -= <span class="hljs-built_in">Math</span>.min(offset.top, (offset.top + dpHeight &gt; viewHeight &amp;&amp; viewHeight &gt; dpHeight) ?
			<span class="hljs-built_in">Math</span>.abs(dpHeight + inputHeight) : <span class="hljs-number">0</span>);

		<span class="hljs-keyword">return</span> offset;
	},

	<span class="hljs-comment">/* Find an object's position on the screen. */</span>
	_findPos: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(obj)</span> {</span>
		<span class="hljs-keyword">var</span> position,
			inst = <span class="hljs-keyword">this</span>._getInst(obj),
			isRTL = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"isRTL"</span>);

		<span class="hljs-keyword">while</span> (obj &amp;&amp; (obj.type === <span class="hljs-string">"hidden"</span> || obj.nodeType !== <span class="hljs-number">1</span> || $.expr.filters.hidden(obj))) {
			obj = obj[isRTL ? <span class="hljs-string">"previousSibling"</span> : <span class="hljs-string">"nextSibling"</span>];
		}

		position = $(obj).offset();
		<span class="hljs-keyword">return</span> [position.left, position.top];
	},

	<span class="hljs-comment">/* Hide the date picker from view.
	 * @param  input  element - the input field attached to the date picker
	 */</span>
	_hideDatepicker: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(input)</span> {</span>
		<span class="hljs-keyword">var</span> showAnim, duration, postProcess, onClose,
			inst = <span class="hljs-keyword">this</span>._curInst;

		<span class="hljs-keyword">if</span> (!inst || (input &amp;&amp; inst !== $.data(input, PROP_NAME))) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._datepickerShowing) {
			showAnim = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"showAnim"</span>);
			duration = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"duration"</span>);
			postProcess = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				$.datepicker._tidyDialog(inst);
			};</pre></div></div>
            
        </li>
        
        
        <li id="section-357">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-357">&#182;</a>
              </div>
              <p>DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( $.effects &amp;&amp; ( $.effects.effect[ showAnim ] || $.effects[ showAnim ] ) ) {
				inst.dpDiv.hide(showAnim, $.datepicker._get(inst, <span class="hljs-string">"showOptions"</span>), duration, postProcess);
			} <span class="hljs-keyword">else</span> {
				inst.dpDiv[(showAnim === <span class="hljs-string">"slideDown"</span> ? <span class="hljs-string">"slideUp"</span> :
					(showAnim === <span class="hljs-string">"fadeIn"</span> ? <span class="hljs-string">"fadeOut"</span> : <span class="hljs-string">"hide"</span>))]((showAnim ? duration : <span class="hljs-literal">null</span>), postProcess);
			}

			<span class="hljs-keyword">if</span> (!showAnim) {
				postProcess();
			}
			<span class="hljs-keyword">this</span>._datepickerShowing = <span class="hljs-literal">false</span>;

			onClose = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"onClose"</span>);
			<span class="hljs-keyword">if</span> (onClose) {
				onClose.apply((inst.input ? inst.input[<span class="hljs-number">0</span>] : <span class="hljs-literal">null</span>), [(inst.input ? inst.input.val() : <span class="hljs-string">""</span>), inst]);
			}

			<span class="hljs-keyword">this</span>._lastInput = <span class="hljs-literal">null</span>;
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._inDialog) {
				<span class="hljs-keyword">this</span>._dialogInput.css({ position: <span class="hljs-string">"absolute"</span>, left: <span class="hljs-string">"0"</span>, top: <span class="hljs-string">"-100px"</span> });
				<span class="hljs-keyword">if</span> ($.blockUI) {
					$.unblockUI();
					$(<span class="hljs-string">"body"</span>).append(<span class="hljs-keyword">this</span>.dpDiv);
				}
			}
			<span class="hljs-keyword">this</span>._inDialog = <span class="hljs-literal">false</span>;
		}
	},

	<span class="hljs-comment">/* Tidy up after a dialog display. */</span>
	_tidyDialog: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst)</span> {</span>
		inst.dpDiv.removeClass(<span class="hljs-keyword">this</span>._dialogClass).unbind(<span class="hljs-string">".ui-datepicker-calendar"</span>);
	},

	<span class="hljs-comment">/* Close date picker if clicked elsewhere. */</span>
	_checkExternalClick: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span> {</span>
		<span class="hljs-keyword">if</span> (!$.datepicker._curInst) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">var</span> $target = $(event.target),
			inst = $.datepicker._getInst($target[<span class="hljs-number">0</span>]);

		<span class="hljs-keyword">if</span> ( ( ( $target[<span class="hljs-number">0</span>].id !== $.datepicker._mainDivId &amp;&amp;
				$target.parents(<span class="hljs-string">"#"</span> + $.datepicker._mainDivId).length === <span class="hljs-number">0</span> &amp;&amp;
				!$target.hasClass($.datepicker.markerClassName) &amp;&amp;
				!$target.closest(<span class="hljs-string">"."</span> + $.datepicker._triggerClass).length &amp;&amp;
				$.datepicker._datepickerShowing &amp;&amp; !($.datepicker._inDialog &amp;&amp; $.blockUI) ) ) ||
			( $target.hasClass($.datepicker.markerClassName) &amp;&amp; $.datepicker._curInst !== inst ) ) {
				$.datepicker._hideDatepicker();
		}
	},

	<span class="hljs-comment">/* Adjust one of the date sub-fields. */</span>
	_adjustDate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id, offset, period)</span> {</span>
		<span class="hljs-keyword">var</span> target = $(id),
			inst = <span class="hljs-keyword">this</span>._getInst(target[<span class="hljs-number">0</span>]);

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isDisabledDatepicker(target[<span class="hljs-number">0</span>])) {
			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">this</span>._adjustInstDate(inst, offset +
			(period === <span class="hljs-string">"M"</span> ? <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"showCurrentAtPos"</span>) : <span class="hljs-number">0</span>), <span class="hljs-comment">// undo positioning</span>
			period);
		<span class="hljs-keyword">this</span>._updateDatepicker(inst);
	},

	<span class="hljs-comment">/* Action for current link. */</span>
	_gotoToday: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id)</span> {</span>
		<span class="hljs-keyword">var</span> date,
			target = $(id),
			inst = <span class="hljs-keyword">this</span>._getInst(target[<span class="hljs-number">0</span>]);

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"gotoCurrent"</span>) &amp;&amp; inst.currentDay) {
			inst.selectedDay = inst.currentDay;
			inst.drawMonth = inst.selectedMonth = inst.currentMonth;
			inst.drawYear = inst.selectedYear = inst.currentYear;
		} <span class="hljs-keyword">else</span> {
			date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
			inst.selectedDay = date.getDate();
			inst.drawMonth = inst.selectedMonth = date.getMonth();
			inst.drawYear = inst.selectedYear = date.getFullYear();
		}
		<span class="hljs-keyword">this</span>._notifyChange(inst);
		<span class="hljs-keyword">this</span>._adjustDate(target);
	},

	<span class="hljs-comment">/* Action for selecting a new month/year. */</span>
	_selectMonthYear: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id, select, period)</span> {</span>
		<span class="hljs-keyword">var</span> target = $(id),
			inst = <span class="hljs-keyword">this</span>._getInst(target[<span class="hljs-number">0</span>]);

		inst[<span class="hljs-string">"selected"</span> + (period === <span class="hljs-string">"M"</span> ? <span class="hljs-string">"Month"</span> : <span class="hljs-string">"Year"</span>)] =
		inst[<span class="hljs-string">"draw"</span> + (period === <span class="hljs-string">"M"</span> ? <span class="hljs-string">"Month"</span> : <span class="hljs-string">"Year"</span>)] =
			<span class="hljs-built_in">parseInt</span>(select.options[select.selectedIndex].value,<span class="hljs-number">10</span>);

		<span class="hljs-keyword">this</span>._notifyChange(inst);
		<span class="hljs-keyword">this</span>._adjustDate(target);
	},

	<span class="hljs-comment">/* Action for selecting a day. */</span>
	_selectDay: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id, month, year, td)</span> {</span>
		<span class="hljs-keyword">var</span> inst,
			target = $(id);

		<span class="hljs-keyword">if</span> ($(td).hasClass(<span class="hljs-keyword">this</span>._unselectableClass) || <span class="hljs-keyword">this</span>._isDisabledDatepicker(target[<span class="hljs-number">0</span>])) {
			<span class="hljs-keyword">return</span>;
		}

		inst = <span class="hljs-keyword">this</span>._getInst(target[<span class="hljs-number">0</span>]);
		inst.selectedDay = inst.currentDay = $(<span class="hljs-string">"a"</span>, td).html();
		inst.selectedMonth = inst.currentMonth = month;
		inst.selectedYear = inst.currentYear = year;
		<span class="hljs-keyword">this</span>._selectDate(id, <span class="hljs-keyword">this</span>._formatDate(inst,
			inst.currentDay, inst.currentMonth, inst.currentYear));
	},

	<span class="hljs-comment">/* Erase the input field and hide the date picker. */</span>
	_clearDate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id)</span> {</span>
		<span class="hljs-keyword">var</span> target = $(id);
		<span class="hljs-keyword">this</span>._selectDate(target, <span class="hljs-string">""</span>);
	},

	<span class="hljs-comment">/* Update the input field with the selected date. */</span>
	_selectDate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id, dateStr)</span> {</span>
		<span class="hljs-keyword">var</span> onSelect,
			target = $(id),
			inst = <span class="hljs-keyword">this</span>._getInst(target[<span class="hljs-number">0</span>]);

		dateStr = (dateStr != <span class="hljs-literal">null</span> ? dateStr : <span class="hljs-keyword">this</span>._formatDate(inst));
		<span class="hljs-keyword">if</span> (inst.input) {
			inst.input.val(dateStr);
		}
		<span class="hljs-keyword">this</span>._updateAlternate(inst);

		onSelect = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"onSelect"</span>);
		<span class="hljs-keyword">if</span> (onSelect) {
			onSelect.apply((inst.input ? inst.input[<span class="hljs-number">0</span>] : <span class="hljs-literal">null</span>), [dateStr, inst]);  <span class="hljs-comment">// trigger custom callback</span>
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (inst.input) {
			inst.input.trigger(<span class="hljs-string">"change"</span>); <span class="hljs-comment">// fire the change event</span>
		}

		<span class="hljs-keyword">if</span> (inst.inline){
			<span class="hljs-keyword">this</span>._updateDatepicker(inst);
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>._hideDatepicker();
			<span class="hljs-keyword">this</span>._lastInput = inst.input[<span class="hljs-number">0</span>];
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(inst.input[<span class="hljs-number">0</span>]) !== <span class="hljs-string">"object"</span>) {
				inst.input.focus(); <span class="hljs-comment">// restore focus</span>
			}
			<span class="hljs-keyword">this</span>._lastInput = <span class="hljs-literal">null</span>;
		}
	},

	<span class="hljs-comment">/* Update any alternate field to synchronise with the main field. */</span>
	_updateAlternate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst)</span> {</span>
		<span class="hljs-keyword">var</span> altFormat, date, dateStr,
			altField = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"altField"</span>);

		<span class="hljs-keyword">if</span> (altField) { <span class="hljs-comment">// update alternate field too</span>
			altFormat = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"altFormat"</span>) || <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"dateFormat"</span>);
			date = <span class="hljs-keyword">this</span>._getDate(inst);
			dateStr = <span class="hljs-keyword">this</span>.formatDate(altFormat, date, <span class="hljs-keyword">this</span>._getFormatConfig(inst));
			$(altField).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span> $(<span class="hljs-keyword">this</span>).val(dateStr); });
		}
	},

	<span class="hljs-comment">/* Set as beforeShowDay function to prevent selection of weekends.
	 * @param  date  Date - the date to customise
	 * @return [boolean, string] - is this date selectable?, what is its CSS class?
	 */</span>
	noWeekends: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(date)</span> {</span>
		<span class="hljs-keyword">var</span> day = date.getDay();
		<span class="hljs-keyword">return</span> [(day &gt; <span class="hljs-number">0</span> &amp;&amp; day &lt; <span class="hljs-number">6</span>), <span class="hljs-string">""</span>];
	},

	<span class="hljs-comment">/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.
	 * @param  date  Date - the date to get the week for
	 * @return  number - the number of the week within the year that contains this date
	 */</span>
	iso8601Week: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(date)</span> {</span>
		<span class="hljs-keyword">var</span> time,
			checkDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(date.getTime());</pre></div></div>
            
        </li>
        
        
        <li id="section-358">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-358">&#182;</a>
              </div>
              <p>Find Thursday of this week starting on Monday</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		checkDate.setDate(checkDate.getDate() + <span class="hljs-number">4</span> - (checkDate.getDay() || <span class="hljs-number">7</span>));

		time = checkDate.getTime();
		checkDate.setMonth(<span class="hljs-number">0</span>); <span class="hljs-comment">// Compare with Jan 1</span>
		checkDate.setDate(<span class="hljs-number">1</span>);
		<span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.round((time - checkDate) / <span class="hljs-number">86400000</span>) / <span class="hljs-number">7</span>) + <span class="hljs-number">1</span>;
	},

	<span class="hljs-comment">/* Parse a string value into a date object.
	 * See formatDate below for the possible formats.
	 *
	 * @param  format string - the expected format of the date
	 * @param  value string - the date in the above format
	 * @param  settings Object - attributes include:
	 *					shortYearCutoff  number - the cutoff year for determining the century (optional)
	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
	 *					dayNames		string[7] - names of the days from Sunday (optional)
	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
	 *					monthNames		string[12] - names of the months (optional)
	 * @return  Date - the extracted date value or null if value is blank
	 */</span>
	parseDate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(format, value, settings)</span> {</span>
		<span class="hljs-keyword">if</span> (format == <span class="hljs-literal">null</span> || value == <span class="hljs-literal">null</span>) {
			<span class="hljs-keyword">throw</span> <span class="hljs-string">"Invalid arguments"</span>;
		}

		value = (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"object"</span> ? value.toString() : value + <span class="hljs-string">""</span>);
		<span class="hljs-keyword">if</span> (value === <span class="hljs-string">""</span>) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
		}

		<span class="hljs-keyword">var</span> iFormat, dim, extra,
			iValue = <span class="hljs-number">0</span>,
			shortYearCutoffTemp = (settings ? settings.shortYearCutoff : <span class="hljs-literal">null</span>) || <span class="hljs-keyword">this</span>._defaults.shortYearCutoff,
			shortYearCutoff = (<span class="hljs-keyword">typeof</span> shortYearCutoffTemp !== <span class="hljs-string">"string"</span> ? shortYearCutoffTemp :
				<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear() % <span class="hljs-number">100</span> + <span class="hljs-built_in">parseInt</span>(shortYearCutoffTemp, <span class="hljs-number">10</span>)),
			dayNamesShort = (settings ? settings.dayNamesShort : <span class="hljs-literal">null</span>) || <span class="hljs-keyword">this</span>._defaults.dayNamesShort,
			dayNames = (settings ? settings.dayNames : <span class="hljs-literal">null</span>) || <span class="hljs-keyword">this</span>._defaults.dayNames,
			monthNamesShort = (settings ? settings.monthNamesShort : <span class="hljs-literal">null</span>) || <span class="hljs-keyword">this</span>._defaults.monthNamesShort,
			monthNames = (settings ? settings.monthNames : <span class="hljs-literal">null</span>) || <span class="hljs-keyword">this</span>._defaults.monthNames,
			year = -<span class="hljs-number">1</span>,
			month = -<span class="hljs-number">1</span>,
			day = -<span class="hljs-number">1</span>,
			doy = -<span class="hljs-number">1</span>,
			literal = <span class="hljs-literal">false</span>,
			date,</pre></div></div>
            
        </li>
        
        
        <li id="section-359">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-359">&#182;</a>
              </div>
              <p>Check whether a format character is doubled</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			lookAhead = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(match)</span> {</span>
				<span class="hljs-keyword">var</span> matches = (iFormat + <span class="hljs-number">1</span> &lt; format.length &amp;&amp; format.charAt(iFormat + <span class="hljs-number">1</span>) === match);
				<span class="hljs-keyword">if</span> (matches) {
					iFormat++;
				}
				<span class="hljs-keyword">return</span> matches;
			},</pre></div></div>
            
        </li>
        
        
        <li id="section-360">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-360">&#182;</a>
              </div>
              <p>Extract a number from the string value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			getNumber = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(match)</span> {</span>
				<span class="hljs-keyword">var</span> isDoubled = lookAhead(match),
					size = (match === <span class="hljs-string">"@"</span> ? <span class="hljs-number">14</span> : (match === <span class="hljs-string">"!"</span> ? <span class="hljs-number">20</span> :
					(match === <span class="hljs-string">"y"</span> &amp;&amp; isDoubled ? <span class="hljs-number">4</span> : (match === <span class="hljs-string">"o"</span> ? <span class="hljs-number">3</span> : <span class="hljs-number">2</span>)))),
					digits = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">"^\\d{1,"</span> + size + <span class="hljs-string">"}"</span>),
					num = value.substring(iValue).match(digits);
				<span class="hljs-keyword">if</span> (!num) {
					<span class="hljs-keyword">throw</span> <span class="hljs-string">"Missing number at position "</span> + iValue;
				}
				iValue += num[<span class="hljs-number">0</span>].length;
				<span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(num[<span class="hljs-number">0</span>], <span class="hljs-number">10</span>);
			},</pre></div></div>
            
        </li>
        
        
        <li id="section-361">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-361">&#182;</a>
              </div>
              <p>Extract a name from the string value and convert to an index</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			getName = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(match, shortNames, longNames)</span> {</span>
				<span class="hljs-keyword">var</span> index = -<span class="hljs-number">1</span>,
					names = $.map(lookAhead(match) ? longNames : shortNames, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(v, k)</span> {</span>
						<span class="hljs-keyword">return</span> [ [k, v] ];
					}).sort(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b)</span> {</span>
						<span class="hljs-keyword">return</span> -(a[<span class="hljs-number">1</span>].length - b[<span class="hljs-number">1</span>].length);
					});

				$.each(names, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(i, pair)</span> {</span>
					<span class="hljs-keyword">var</span> name = pair[<span class="hljs-number">1</span>];
					<span class="hljs-keyword">if</span> (value.substr(iValue, name.length).toLowerCase() === name.toLowerCase()) {
						index = pair[<span class="hljs-number">0</span>];
						iValue += name.length;
						<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
					}
				});
				<span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) {
					<span class="hljs-keyword">return</span> index + <span class="hljs-number">1</span>;
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">throw</span> <span class="hljs-string">"Unknown name at position "</span> + iValue;
				}
			},</pre></div></div>
            
        </li>
        
        
        <li id="section-362">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-362">&#182;</a>
              </div>
              <p>Confirm that a literal character matches the string value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			checkLiteral = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> (value.charAt(iValue) !== format.charAt(iFormat)) {
					<span class="hljs-keyword">throw</span> <span class="hljs-string">"Unexpected literal at position "</span> + iValue;
				}
				iValue++;
			};

		<span class="hljs-keyword">for</span> (iFormat = <span class="hljs-number">0</span>; iFormat &lt; format.length; iFormat++) {
			<span class="hljs-keyword">if</span> (literal) {
				<span class="hljs-keyword">if</span> (format.charAt(iFormat) === <span class="hljs-string">"'"</span> &amp;&amp; !lookAhead(<span class="hljs-string">"'"</span>)) {
					literal = <span class="hljs-literal">false</span>;
				} <span class="hljs-keyword">else</span> {
					checkLiteral();
				}
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">switch</span> (format.charAt(iFormat)) {
					<span class="hljs-keyword">case</span> <span class="hljs-string">"d"</span>:
						day = getNumber(<span class="hljs-string">"d"</span>);
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-string">"D"</span>:
						getName(<span class="hljs-string">"D"</span>, dayNamesShort, dayNames);
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-string">"o"</span>:
						doy = getNumber(<span class="hljs-string">"o"</span>);
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-string">"m"</span>:
						month = getNumber(<span class="hljs-string">"m"</span>);
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-string">"M"</span>:
						month = getName(<span class="hljs-string">"M"</span>, monthNamesShort, monthNames);
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-string">"y"</span>:
						year = getNumber(<span class="hljs-string">"y"</span>);
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-string">"@"</span>:
						date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(getNumber(<span class="hljs-string">"@"</span>));
						year = date.getFullYear();
						month = date.getMonth() + <span class="hljs-number">1</span>;
						day = date.getDate();
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-string">"!"</span>:
						date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>((getNumber(<span class="hljs-string">"!"</span>) - <span class="hljs-keyword">this</span>._ticksTo1970) / <span class="hljs-number">10000</span>);
						year = date.getFullYear();
						month = date.getMonth() + <span class="hljs-number">1</span>;
						day = date.getDate();
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-string">"'"</span>:
						<span class="hljs-keyword">if</span> (lookAhead(<span class="hljs-string">"'"</span>)){
							checkLiteral();
						} <span class="hljs-keyword">else</span> {
							literal = <span class="hljs-literal">true</span>;
						}
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">default</span>:
						checkLiteral();
				}
			}
		}

		<span class="hljs-keyword">if</span> (iValue &lt; value.length){
			extra = value.substr(iValue);
			<span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/^\s+/</span>.test(extra)) {
				<span class="hljs-keyword">throw</span> <span class="hljs-string">"Extra/unparsed characters found in date: "</span> + extra;
			}
		}

		<span class="hljs-keyword">if</span> (year === -<span class="hljs-number">1</span>) {
			year = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear();
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (year &lt; <span class="hljs-number">100</span>) {
			year += <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear() - <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear() % <span class="hljs-number">100</span> +
				(year &lt;= shortYearCutoff ? <span class="hljs-number">0</span> : -<span class="hljs-number">100</span>);
		}

		<span class="hljs-keyword">if</span> (doy &gt; -<span class="hljs-number">1</span>) {
			month = <span class="hljs-number">1</span>;
			day = doy;
			<span class="hljs-keyword">do</span> {
				dim = <span class="hljs-keyword">this</span>._getDaysInMonth(year, month - <span class="hljs-number">1</span>);
				<span class="hljs-keyword">if</span> (day &lt;= dim) {
					<span class="hljs-keyword">break</span>;
				}
				month++;
				day -= dim;
			} <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>);
		}

		date = <span class="hljs-keyword">this</span>._daylightSavingAdjust(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(year, month - <span class="hljs-number">1</span>, day));
		<span class="hljs-keyword">if</span> (date.getFullYear() !== year || date.getMonth() + <span class="hljs-number">1</span> !== month || date.getDate() !== day) {
			<span class="hljs-keyword">throw</span> <span class="hljs-string">"Invalid date"</span>; <span class="hljs-comment">// E.g. 31/02/00</span>
		}
		<span class="hljs-keyword">return</span> date;
	},

	<span class="hljs-comment">/* Standard date formats. */</span>
	ATOM: <span class="hljs-string">"yy-mm-dd"</span>, <span class="hljs-comment">// RFC 3339 (ISO 8601)</span>
	COOKIE: <span class="hljs-string">"D, dd M yy"</span>,
	ISO_8601: <span class="hljs-string">"yy-mm-dd"</span>,
	RFC_822: <span class="hljs-string">"D, d M y"</span>,
	RFC_850: <span class="hljs-string">"DD, dd-M-y"</span>,
	RFC_1036: <span class="hljs-string">"D, d M y"</span>,
	RFC_1123: <span class="hljs-string">"D, d M yy"</span>,
	RFC_2822: <span class="hljs-string">"D, d M yy"</span>,
	RSS: <span class="hljs-string">"D, d M y"</span>, <span class="hljs-comment">// RFC 822</span>
	TICKS: <span class="hljs-string">"!"</span>,
	TIMESTAMP: <span class="hljs-string">"@"</span>,
	W3C: <span class="hljs-string">"yy-mm-dd"</span>, <span class="hljs-comment">// ISO 8601</span>

	_ticksTo1970: (((<span class="hljs-number">1970</span> - <span class="hljs-number">1</span>) * <span class="hljs-number">365</span> + <span class="hljs-built_in">Math</span>.floor(<span class="hljs-number">1970</span> / <span class="hljs-number">4</span>) - <span class="hljs-built_in">Math</span>.floor(<span class="hljs-number">1970</span> / <span class="hljs-number">100</span>) +
		<span class="hljs-built_in">Math</span>.floor(<span class="hljs-number">1970</span> / <span class="hljs-number">400</span>)) * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">10000000</span>),

	<span class="hljs-comment">/* Format a date object into a string value.
	 * The format can be combinations of the following:
	 * d  - day of month (no leading zero)
	 * dd - day of month (two digit)
	 * o  - day of year (no leading zeros)
	 * oo - day of year (three digit)
	 * D  - day name short
	 * DD - day name long
	 * m  - month of year (no leading zero)
	 * mm - month of year (two digit)
	 * M  - month name short
	 * MM - month name long
	 * y  - year (two digit)
	 * yy - year (four digit)
	 * @ - Unix timestamp (ms since 01/01/1970)
	 * ! - Windows ticks (100ns since 01/01/0001)
	 * "..." - literal text
	 * '' - single quote
	 *
	 * @param  format string - the desired format of the date
	 * @param  date Date - the date value to format
	 * @param  settings Object - attributes include:
	 *					dayNamesShort	string[7] - abbreviated names of the days from Sunday (optional)
	 *					dayNames		string[7] - names of the days from Sunday (optional)
	 *					monthNamesShort string[12] - abbreviated names of the months (optional)
	 *					monthNames		string[12] - names of the months (optional)
	 * @return  string - the date in the above format
	 */</span>
	formatDate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(format, date, settings)</span> {</span>
		<span class="hljs-keyword">if</span> (!date) {
			<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
		}

		<span class="hljs-keyword">var</span> iFormat,
			dayNamesShort = (settings ? settings.dayNamesShort : <span class="hljs-literal">null</span>) || <span class="hljs-keyword">this</span>._defaults.dayNamesShort,
			dayNames = (settings ? settings.dayNames : <span class="hljs-literal">null</span>) || <span class="hljs-keyword">this</span>._defaults.dayNames,
			monthNamesShort = (settings ? settings.monthNamesShort : <span class="hljs-literal">null</span>) || <span class="hljs-keyword">this</span>._defaults.monthNamesShort,
			monthNames = (settings ? settings.monthNames : <span class="hljs-literal">null</span>) || <span class="hljs-keyword">this</span>._defaults.monthNames,</pre></div></div>
            
        </li>
        
        
        <li id="section-363">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-363">&#182;</a>
              </div>
              <p>Check whether a format character is doubled</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			lookAhead = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(match)</span> {</span>
				<span class="hljs-keyword">var</span> matches = (iFormat + <span class="hljs-number">1</span> &lt; format.length &amp;&amp; format.charAt(iFormat + <span class="hljs-number">1</span>) === match);
				<span class="hljs-keyword">if</span> (matches) {
					iFormat++;
				}
				<span class="hljs-keyword">return</span> matches;
			},</pre></div></div>
            
        </li>
        
        
        <li id="section-364">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-364">&#182;</a>
              </div>
              <p>Format a number, with leading zero if necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			formatNumber = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(match, value, len)</span> {</span>
				<span class="hljs-keyword">var</span> num = <span class="hljs-string">""</span> + value;
				<span class="hljs-keyword">if</span> (lookAhead(match)) {
					<span class="hljs-keyword">while</span> (num.length &lt; len) {
						num = <span class="hljs-string">"0"</span> + num;
					}
				}
				<span class="hljs-keyword">return</span> num;
			},</pre></div></div>
            
        </li>
        
        
        <li id="section-365">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-365">&#182;</a>
              </div>
              <p>Format a name, short or long as requested</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			formatName = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(match, value, shortNames, longNames)</span> {</span>
				<span class="hljs-keyword">return</span> (lookAhead(match) ? longNames[value] : shortNames[value]);
			},
			output = <span class="hljs-string">""</span>,
			literal = <span class="hljs-literal">false</span>;

		<span class="hljs-keyword">if</span> (date) {
			<span class="hljs-keyword">for</span> (iFormat = <span class="hljs-number">0</span>; iFormat &lt; format.length; iFormat++) {
				<span class="hljs-keyword">if</span> (literal) {
					<span class="hljs-keyword">if</span> (format.charAt(iFormat) === <span class="hljs-string">"'"</span> &amp;&amp; !lookAhead(<span class="hljs-string">"'"</span>)) {
						literal = <span class="hljs-literal">false</span>;
					} <span class="hljs-keyword">else</span> {
						output += format.charAt(iFormat);
					}
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">switch</span> (format.charAt(iFormat)) {
						<span class="hljs-keyword">case</span> <span class="hljs-string">"d"</span>:
							output += formatNumber(<span class="hljs-string">"d"</span>, date.getDate(), <span class="hljs-number">2</span>);
							<span class="hljs-keyword">break</span>;
						<span class="hljs-keyword">case</span> <span class="hljs-string">"D"</span>:
							output += formatName(<span class="hljs-string">"D"</span>, date.getDay(), dayNamesShort, dayNames);
							<span class="hljs-keyword">break</span>;
						<span class="hljs-keyword">case</span> <span class="hljs-string">"o"</span>:
							output += formatNumber(<span class="hljs-string">"o"</span>,
								<span class="hljs-built_in">Math</span>.round((<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(date.getFullYear(), date.getMonth(), date.getDate()).getTime() - <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(date.getFullYear(), <span class="hljs-number">0</span>, <span class="hljs-number">0</span>).getTime()) / <span class="hljs-number">86400000</span>), <span class="hljs-number">3</span>);
							<span class="hljs-keyword">break</span>;
						<span class="hljs-keyword">case</span> <span class="hljs-string">"m"</span>:
							output += formatNumber(<span class="hljs-string">"m"</span>, date.getMonth() + <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
							<span class="hljs-keyword">break</span>;
						<span class="hljs-keyword">case</span> <span class="hljs-string">"M"</span>:
							output += formatName(<span class="hljs-string">"M"</span>, date.getMonth(), monthNamesShort, monthNames);
							<span class="hljs-keyword">break</span>;
						<span class="hljs-keyword">case</span> <span class="hljs-string">"y"</span>:
							output += (lookAhead(<span class="hljs-string">"y"</span>) ? date.getFullYear() :
								(date.getYear() % <span class="hljs-number">100</span> &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">"0"</span> : <span class="hljs-string">""</span>) + date.getYear() % <span class="hljs-number">100</span>);
							<span class="hljs-keyword">break</span>;
						<span class="hljs-keyword">case</span> <span class="hljs-string">"@"</span>:
							output += date.getTime();
							<span class="hljs-keyword">break</span>;
						<span class="hljs-keyword">case</span> <span class="hljs-string">"!"</span>:
							output += date.getTime() * <span class="hljs-number">10000</span> + <span class="hljs-keyword">this</span>._ticksTo1970;
							<span class="hljs-keyword">break</span>;
						<span class="hljs-keyword">case</span> <span class="hljs-string">"'"</span>:
							<span class="hljs-keyword">if</span> (lookAhead(<span class="hljs-string">"'"</span>)) {
								output += <span class="hljs-string">"'"</span>;
							} <span class="hljs-keyword">else</span> {
								literal = <span class="hljs-literal">true</span>;
							}
							<span class="hljs-keyword">break</span>;
						<span class="hljs-keyword">default</span>:
							output += format.charAt(iFormat);
					}
				}
			}
		}
		<span class="hljs-keyword">return</span> output;
	},

	<span class="hljs-comment">/* Extract all possible characters from the date format. */</span>
	_possibleChars: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(format)</span> {</span>
		<span class="hljs-keyword">var</span> iFormat,
			chars = <span class="hljs-string">""</span>,
			literal = <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-366">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-366">&#182;</a>
              </div>
              <p>Check whether a format character is doubled</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			lookAhead = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(match)</span> {</span>
				<span class="hljs-keyword">var</span> matches = (iFormat + <span class="hljs-number">1</span> &lt; format.length &amp;&amp; format.charAt(iFormat + <span class="hljs-number">1</span>) === match);
				<span class="hljs-keyword">if</span> (matches) {
					iFormat++;
				}
				<span class="hljs-keyword">return</span> matches;
			};

		<span class="hljs-keyword">for</span> (iFormat = <span class="hljs-number">0</span>; iFormat &lt; format.length; iFormat++) {
			<span class="hljs-keyword">if</span> (literal) {
				<span class="hljs-keyword">if</span> (format.charAt(iFormat) === <span class="hljs-string">"'"</span> &amp;&amp; !lookAhead(<span class="hljs-string">"'"</span>)) {
					literal = <span class="hljs-literal">false</span>;
				} <span class="hljs-keyword">else</span> {
					chars += format.charAt(iFormat);
				}
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">switch</span> (format.charAt(iFormat)) {
					<span class="hljs-keyword">case</span> <span class="hljs-string">"d"</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">"m"</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">"y"</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">"@"</span>:
						chars += <span class="hljs-string">"0123456789"</span>;
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-string">"D"</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">"M"</span>:
						<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// Accept anything</span>
					<span class="hljs-keyword">case</span> <span class="hljs-string">"'"</span>:
						<span class="hljs-keyword">if</span> (lookAhead(<span class="hljs-string">"'"</span>)) {
							chars += <span class="hljs-string">"'"</span>;
						} <span class="hljs-keyword">else</span> {
							literal = <span class="hljs-literal">true</span>;
						}
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">default</span>:
						chars += format.charAt(iFormat);
				}
			}
		}
		<span class="hljs-keyword">return</span> chars;
	},

	<span class="hljs-comment">/* Get a setting value, defaulting if necessary. */</span>
	_get: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst, name)</span> {</span>
		<span class="hljs-keyword">return</span> inst.settings[name] !== <span class="hljs-literal">undefined</span> ?
			inst.settings[name] : <span class="hljs-keyword">this</span>._defaults[name];
	},

	<span class="hljs-comment">/* Parse existing date and initialise date picker. */</span>
	_setDateFromField: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst, noDefault)</span> {</span>
		<span class="hljs-keyword">if</span> (inst.input.val() === inst.lastVal) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">var</span> dateFormat = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"dateFormat"</span>),
			dates = inst.lastVal = inst.input ? inst.input.val() : <span class="hljs-literal">null</span>,
			defaultDate = <span class="hljs-keyword">this</span>._getDefaultDate(inst),
			date = defaultDate,
			settings = <span class="hljs-keyword">this</span>._getFormatConfig(inst);

		<span class="hljs-keyword">try</span> {
			date = <span class="hljs-keyword">this</span>.parseDate(dateFormat, dates, settings) || defaultDate;
		} <span class="hljs-keyword">catch</span> (event) {
			dates = (noDefault ? <span class="hljs-string">""</span> : dates);
		}
		inst.selectedDay = date.getDate();
		inst.drawMonth = inst.selectedMonth = date.getMonth();
		inst.drawYear = inst.selectedYear = date.getFullYear();
		inst.currentDay = (dates ? date.getDate() : <span class="hljs-number">0</span>);
		inst.currentMonth = (dates ? date.getMonth() : <span class="hljs-number">0</span>);
		inst.currentYear = (dates ? date.getFullYear() : <span class="hljs-number">0</span>);
		<span class="hljs-keyword">this</span>._adjustInstDate(inst);
	},

	<span class="hljs-comment">/* Retrieve the default date shown on opening. */</span>
	_getDefaultDate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst)</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._restrictMinMax(inst,
			<span class="hljs-keyword">this</span>._determineDate(inst, <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"defaultDate"</span>), <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()));
	},

	<span class="hljs-comment">/* A date may be specified as an exact value or a relative one. */</span>
	_determineDate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst, date, defaultDate)</span> {</span>
		<span class="hljs-keyword">var</span> offsetNumeric = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(offset)</span> {</span>
				<span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
				date.setDate(date.getDate() + offset);
				<span class="hljs-keyword">return</span> date;
			},
			offsetString = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(offset)</span> {</span>
				<span class="hljs-keyword">try</span> {
					<span class="hljs-keyword">return</span> $.datepicker.parseDate($.datepicker._get(inst, <span class="hljs-string">"dateFormat"</span>),
						offset, $.datepicker._getFormatConfig(inst));
				}
				<span class="hljs-keyword">catch</span> (e) {</pre></div></div>
            
        </li>
        
        
        <li id="section-367">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-367">&#182;</a>
              </div>
              <p>Ignore</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				}

				<span class="hljs-keyword">var</span> date = (offset.toLowerCase().match(<span class="hljs-regexp">/^c/</span>) ?
					$.datepicker._getDate(inst) : <span class="hljs-literal">null</span>) || <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
					year = date.getFullYear(),
					month = date.getMonth(),
					day = date.getDate(),
					pattern = <span class="hljs-regexp">/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g</span>,
					matches = pattern.exec(offset);

				<span class="hljs-keyword">while</span> (matches) {
					<span class="hljs-keyword">switch</span> (matches[<span class="hljs-number">2</span>] || <span class="hljs-string">"d"</span>) {
						<span class="hljs-keyword">case</span> <span class="hljs-string">"d"</span> : <span class="hljs-keyword">case</span> <span class="hljs-string">"D"</span> :
							day += <span class="hljs-built_in">parseInt</span>(matches[<span class="hljs-number">1</span>],<span class="hljs-number">10</span>); <span class="hljs-keyword">break</span>;
						<span class="hljs-keyword">case</span> <span class="hljs-string">"w"</span> : <span class="hljs-keyword">case</span> <span class="hljs-string">"W"</span> :
							day += <span class="hljs-built_in">parseInt</span>(matches[<span class="hljs-number">1</span>],<span class="hljs-number">10</span>) * <span class="hljs-number">7</span>; <span class="hljs-keyword">break</span>;
						<span class="hljs-keyword">case</span> <span class="hljs-string">"m"</span> : <span class="hljs-keyword">case</span> <span class="hljs-string">"M"</span> :
							month += <span class="hljs-built_in">parseInt</span>(matches[<span class="hljs-number">1</span>],<span class="hljs-number">10</span>);
							day = <span class="hljs-built_in">Math</span>.min(day, $.datepicker._getDaysInMonth(year, month));
							<span class="hljs-keyword">break</span>;
						<span class="hljs-keyword">case</span> <span class="hljs-string">"y"</span>: <span class="hljs-keyword">case</span> <span class="hljs-string">"Y"</span> :
							year += <span class="hljs-built_in">parseInt</span>(matches[<span class="hljs-number">1</span>],<span class="hljs-number">10</span>);
							day = <span class="hljs-built_in">Math</span>.min(day, $.datepicker._getDaysInMonth(year, month));
							<span class="hljs-keyword">break</span>;
					}
					matches = pattern.exec(offset);
				}
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(year, month, day);
			},
			newDate = (date == <span class="hljs-literal">null</span> || date === <span class="hljs-string">""</span> ? defaultDate : (<span class="hljs-keyword">typeof</span> date === <span class="hljs-string">"string"</span> ? offsetString(date) :
				(<span class="hljs-keyword">typeof</span> date === <span class="hljs-string">"number"</span> ? (<span class="hljs-built_in">isNaN</span>(date) ? defaultDate : offsetNumeric(date)) : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(date.getTime()))));

		newDate = (newDate &amp;&amp; newDate.toString() === <span class="hljs-string">"Invalid Date"</span> ? defaultDate : newDate);
		<span class="hljs-keyword">if</span> (newDate) {
			newDate.setHours(<span class="hljs-number">0</span>);
			newDate.setMinutes(<span class="hljs-number">0</span>);
			newDate.setSeconds(<span class="hljs-number">0</span>);
			newDate.setMilliseconds(<span class="hljs-number">0</span>);
		}
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._daylightSavingAdjust(newDate);
	},

	<span class="hljs-comment">/* Handle switch to/from daylight saving.
	 * Hours may be non-zero on daylight saving cut-over:
	 * &gt; 12 when midnight changeover, but then cannot generate
	 * midnight datetime, so jump to 1AM, otherwise reset.
	 * @param  date  (Date) the date to check
	 * @return  (Date) the corrected date
	 */</span>
	_daylightSavingAdjust: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(date)</span> {</span>
		<span class="hljs-keyword">if</span> (!date) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
		}
		date.setHours(date.getHours() &gt; <span class="hljs-number">12</span> ? date.getHours() + <span class="hljs-number">2</span> : <span class="hljs-number">0</span>);
		<span class="hljs-keyword">return</span> date;
	},

	<span class="hljs-comment">/* Set the date(s) directly. */</span>
	_setDate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst, date, noChange)</span> {</span>
		<span class="hljs-keyword">var</span> clear = !date,
			origMonth = inst.selectedMonth,
			origYear = inst.selectedYear,
			newDate = <span class="hljs-keyword">this</span>._restrictMinMax(inst, <span class="hljs-keyword">this</span>._determineDate(inst, date, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()));

		inst.selectedDay = inst.currentDay = newDate.getDate();
		inst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();
		inst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();
		<span class="hljs-keyword">if</span> ((origMonth !== inst.selectedMonth || origYear !== inst.selectedYear) &amp;&amp; !noChange) {
			<span class="hljs-keyword">this</span>._notifyChange(inst);
		}
		<span class="hljs-keyword">this</span>._adjustInstDate(inst);
		<span class="hljs-keyword">if</span> (inst.input) {
			inst.input.val(clear ? <span class="hljs-string">""</span> : <span class="hljs-keyword">this</span>._formatDate(inst));
		}
	},

	<span class="hljs-comment">/* Retrieve the date(s) directly. */</span>
	_getDate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst)</span> {</span>
		<span class="hljs-keyword">var</span> startDate = (!inst.currentYear || (inst.input &amp;&amp; inst.input.val() === <span class="hljs-string">""</span>) ? <span class="hljs-literal">null</span> :
			<span class="hljs-keyword">this</span>._daylightSavingAdjust(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(
			inst.currentYear, inst.currentMonth, inst.currentDay)));
			<span class="hljs-keyword">return</span> startDate;
	},

	<span class="hljs-comment">/* Attach the onxxx handlers.  These are declared statically so
	 * they work with static code transformers like Caja.
	 */</span>
	_attachHandlers: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst)</span> {</span>
		<span class="hljs-keyword">var</span> stepMonths = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"stepMonths"</span>),
			id = <span class="hljs-string">"#"</span> + inst.id.replace( <span class="hljs-regexp">/\\\\/g</span>, <span class="hljs-string">"\\"</span> );
		inst.dpDiv.find(<span class="hljs-string">"[data-handler]"</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> handler = {
				prev: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
					$.datepicker._adjustDate(id, -stepMonths, <span class="hljs-string">"M"</span>);
				},
				next: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
					$.datepicker._adjustDate(id, +stepMonths, <span class="hljs-string">"M"</span>);
				},
				hide: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
					$.datepicker._hideDatepicker();
				},
				today: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
					$.datepicker._gotoToday(id);
				},
				selectDay: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
					$.datepicker._selectDay(id, +<span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">"data-month"</span>), +<span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">"data-year"</span>), <span class="hljs-keyword">this</span>);
					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				},
				selectMonth: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
					$.datepicker._selectMonthYear(id, <span class="hljs-keyword">this</span>, <span class="hljs-string">"M"</span>);
					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				},
				selectYear: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
					$.datepicker._selectMonthYear(id, <span class="hljs-keyword">this</span>, <span class="hljs-string">"Y"</span>);
					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
				}
			};
			$(<span class="hljs-keyword">this</span>).bind(<span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">"data-event"</span>), handler[<span class="hljs-keyword">this</span>.getAttribute(<span class="hljs-string">"data-handler"</span>)]);
		});
	},

	<span class="hljs-comment">/* Generate the HTML for the current state of the date picker. */</span>
	_generateHTML: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst)</span> {</span>
		<span class="hljs-keyword">var</span> maxDraw, prevText, prev, nextText, next, currentText, gotoDate,
			controls, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin,
			monthNames, monthNamesShort, beforeShowDay, showOtherMonths,
			selectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate,
			cornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows,
			printDate, dRow, tbody, daySettings, otherMonth, unselectable,
			tempDate = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
			today = <span class="hljs-keyword">this</span>._daylightSavingAdjust(
				<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate())), <span class="hljs-comment">// clear time</span>
			isRTL = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"isRTL"</span>),
			showButtonPanel = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"showButtonPanel"</span>),
			hideIfNoPrevNext = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"hideIfNoPrevNext"</span>),
			navigationAsDateFormat = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"navigationAsDateFormat"</span>),
			numMonths = <span class="hljs-keyword">this</span>._getNumberOfMonths(inst),
			showCurrentAtPos = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"showCurrentAtPos"</span>),
			stepMonths = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"stepMonths"</span>),
			isMultiMonth = (numMonths[<span class="hljs-number">0</span>] !== <span class="hljs-number">1</span> || numMonths[<span class="hljs-number">1</span>] !== <span class="hljs-number">1</span>),
			currentDate = <span class="hljs-keyword">this</span>._daylightSavingAdjust((!inst.currentDay ? <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">9999</span>, <span class="hljs-number">9</span>, <span class="hljs-number">9</span>) :
				<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(inst.currentYear, inst.currentMonth, inst.currentDay))),
			minDate = <span class="hljs-keyword">this</span>._getMinMaxDate(inst, <span class="hljs-string">"min"</span>),
			maxDate = <span class="hljs-keyword">this</span>._getMinMaxDate(inst, <span class="hljs-string">"max"</span>),
			drawMonth = inst.drawMonth - showCurrentAtPos,
			drawYear = inst.drawYear;

		<span class="hljs-keyword">if</span> (drawMonth &lt; <span class="hljs-number">0</span>) {
			drawMonth += <span class="hljs-number">12</span>;
			drawYear--;
		}
		<span class="hljs-keyword">if</span> (maxDate) {
			maxDraw = <span class="hljs-keyword">this</span>._daylightSavingAdjust(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(maxDate.getFullYear(),
				maxDate.getMonth() - (numMonths[<span class="hljs-number">0</span>] * numMonths[<span class="hljs-number">1</span>]) + <span class="hljs-number">1</span>, maxDate.getDate()));
			maxDraw = (minDate &amp;&amp; maxDraw &lt; minDate ? minDate : maxDraw);
			<span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>._daylightSavingAdjust(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(drawYear, drawMonth, <span class="hljs-number">1</span>)) &gt; maxDraw) {
				drawMonth--;
				<span class="hljs-keyword">if</span> (drawMonth &lt; <span class="hljs-number">0</span>) {
					drawMonth = <span class="hljs-number">11</span>;
					drawYear--;
				}
			}
		}
		inst.drawMonth = drawMonth;
		inst.drawYear = drawYear;

		prevText = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"prevText"</span>);
		prevText = (!navigationAsDateFormat ? prevText : <span class="hljs-keyword">this</span>.formatDate(prevText,
			<span class="hljs-keyword">this</span>._daylightSavingAdjust(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(drawYear, drawMonth - stepMonths, <span class="hljs-number">1</span>)),
			<span class="hljs-keyword">this</span>._getFormatConfig(inst)));

		prev = (<span class="hljs-keyword">this</span>._canAdjustMonth(inst, -<span class="hljs-number">1</span>, drawYear, drawMonth) ?
			<span class="hljs-string">"&lt;a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"</span> +
			<span class="hljs-string">" title='"</span> + prevText + <span class="hljs-string">"'&gt;&lt;span class='ui-icon ui-icon-circle-triangle-"</span> + ( isRTL ? <span class="hljs-string">"e"</span> : <span class="hljs-string">"w"</span>) + <span class="hljs-string">"'&gt;"</span> + prevText + <span class="hljs-string">"&lt;/span&gt;&lt;/a&gt;"</span> :
			(hideIfNoPrevNext ? <span class="hljs-string">""</span> : <span class="hljs-string">"&lt;a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"</span>+ prevText +<span class="hljs-string">"'&gt;&lt;span class='ui-icon ui-icon-circle-triangle-"</span> + ( isRTL ? <span class="hljs-string">"e"</span> : <span class="hljs-string">"w"</span>) + <span class="hljs-string">"'&gt;"</span> + prevText + <span class="hljs-string">"&lt;/span&gt;&lt;/a&gt;"</span>));

		nextText = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"nextText"</span>);
		nextText = (!navigationAsDateFormat ? nextText : <span class="hljs-keyword">this</span>.formatDate(nextText,
			<span class="hljs-keyword">this</span>._daylightSavingAdjust(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(drawYear, drawMonth + stepMonths, <span class="hljs-number">1</span>)),
			<span class="hljs-keyword">this</span>._getFormatConfig(inst)));

		next = (<span class="hljs-keyword">this</span>._canAdjustMonth(inst, +<span class="hljs-number">1</span>, drawYear, drawMonth) ?
			<span class="hljs-string">"&lt;a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"</span> +
			<span class="hljs-string">" title='"</span> + nextText + <span class="hljs-string">"'&gt;&lt;span class='ui-icon ui-icon-circle-triangle-"</span> + ( isRTL ? <span class="hljs-string">"w"</span> : <span class="hljs-string">"e"</span>) + <span class="hljs-string">"'&gt;"</span> + nextText + <span class="hljs-string">"&lt;/span&gt;&lt;/a&gt;"</span> :
			(hideIfNoPrevNext ? <span class="hljs-string">""</span> : <span class="hljs-string">"&lt;a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"</span>+ nextText + <span class="hljs-string">"'&gt;&lt;span class='ui-icon ui-icon-circle-triangle-"</span> + ( isRTL ? <span class="hljs-string">"w"</span> : <span class="hljs-string">"e"</span>) + <span class="hljs-string">"'&gt;"</span> + nextText + <span class="hljs-string">"&lt;/span&gt;&lt;/a&gt;"</span>));

		currentText = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"currentText"</span>);
		gotoDate = (<span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"gotoCurrent"</span>) &amp;&amp; inst.currentDay ? currentDate : today);
		currentText = (!navigationAsDateFormat ? currentText :
			<span class="hljs-keyword">this</span>.formatDate(currentText, gotoDate, <span class="hljs-keyword">this</span>._getFormatConfig(inst)));

		controls = (!inst.inline ? <span class="hljs-string">"&lt;button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'&gt;"</span> +
			<span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"closeText"</span>) + <span class="hljs-string">"&lt;/button&gt;"</span> : <span class="hljs-string">""</span>);

		buttonPanel = (showButtonPanel) ? <span class="hljs-string">"&lt;div class='ui-datepicker-buttonpane ui-widget-content'&gt;"</span> + (isRTL ? controls : <span class="hljs-string">""</span>) +
			(<span class="hljs-keyword">this</span>._isInRange(inst, gotoDate) ? <span class="hljs-string">"&lt;button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"</span> +
			<span class="hljs-string">"&gt;"</span> + currentText + <span class="hljs-string">"&lt;/button&gt;"</span> : <span class="hljs-string">""</span>) + (isRTL ? <span class="hljs-string">""</span> : controls) + <span class="hljs-string">"&lt;/div&gt;"</span> : <span class="hljs-string">""</span>;

		firstDay = <span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"firstDay"</span>),<span class="hljs-number">10</span>);
		firstDay = (<span class="hljs-built_in">isNaN</span>(firstDay) ? <span class="hljs-number">0</span> : firstDay);

		showWeek = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"showWeek"</span>);
		dayNames = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"dayNames"</span>);
		dayNamesMin = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"dayNamesMin"</span>);
		monthNames = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"monthNames"</span>);
		monthNamesShort = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"monthNamesShort"</span>);
		beforeShowDay = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"beforeShowDay"</span>);
		showOtherMonths = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"showOtherMonths"</span>);
		selectOtherMonths = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"selectOtherMonths"</span>);
		defaultDate = <span class="hljs-keyword">this</span>._getDefaultDate(inst);
		html = <span class="hljs-string">""</span>;
		dow;
		<span class="hljs-keyword">for</span> (row = <span class="hljs-number">0</span>; row &lt; numMonths[<span class="hljs-number">0</span>]; row++) {
			group = <span class="hljs-string">""</span>;
			<span class="hljs-keyword">this</span>.maxRows = <span class="hljs-number">4</span>;
			<span class="hljs-keyword">for</span> (col = <span class="hljs-number">0</span>; col &lt; numMonths[<span class="hljs-number">1</span>]; col++) {
				selectedDate = <span class="hljs-keyword">this</span>._daylightSavingAdjust(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(drawYear, drawMonth, inst.selectedDay));
				cornerClass = <span class="hljs-string">" ui-corner-all"</span>;
				calender = <span class="hljs-string">""</span>;
				<span class="hljs-keyword">if</span> (isMultiMonth) {
					calender += <span class="hljs-string">"&lt;div class='ui-datepicker-group"</span>;
					<span class="hljs-keyword">if</span> (numMonths[<span class="hljs-number">1</span>] &gt; <span class="hljs-number">1</span>) {
						<span class="hljs-keyword">switch</span> (col) {
							<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: calender += <span class="hljs-string">" ui-datepicker-group-first"</span>;
								cornerClass = <span class="hljs-string">" ui-corner-"</span> + (isRTL ? <span class="hljs-string">"right"</span> : <span class="hljs-string">"left"</span>); <span class="hljs-keyword">break</span>;
							<span class="hljs-keyword">case</span> numMonths[<span class="hljs-number">1</span>]-<span class="hljs-number">1</span>: calender += <span class="hljs-string">" ui-datepicker-group-last"</span>;
								cornerClass = <span class="hljs-string">" ui-corner-"</span> + (isRTL ? <span class="hljs-string">"left"</span> : <span class="hljs-string">"right"</span>); <span class="hljs-keyword">break</span>;
							<span class="hljs-keyword">default</span>: calender += <span class="hljs-string">" ui-datepicker-group-middle"</span>; cornerClass = <span class="hljs-string">""</span>; <span class="hljs-keyword">break</span>;
						}
					}
					calender += <span class="hljs-string">"'&gt;"</span>;
				}
				calender += <span class="hljs-string">"&lt;div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"</span> + cornerClass + <span class="hljs-string">"'&gt;"</span> +
					(<span class="hljs-regexp">/all|left/</span>.test(cornerClass) &amp;&amp; row === <span class="hljs-number">0</span> ? (isRTL ? next : prev) : <span class="hljs-string">""</span>) +
					(<span class="hljs-regexp">/all|right/</span>.test(cornerClass) &amp;&amp; row === <span class="hljs-number">0</span> ? (isRTL ? prev : next) : <span class="hljs-string">""</span>) +
					<span class="hljs-keyword">this</span>._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,
					row &gt; <span class="hljs-number">0</span> || col &gt; <span class="hljs-number">0</span>, monthNames, monthNamesShort) + <span class="hljs-comment">// draw month headers</span>
					<span class="hljs-string">"&lt;/div&gt;&lt;table class='ui-datepicker-calendar'&gt;&lt;thead&gt;"</span> +
					<span class="hljs-string">"&lt;tr&gt;"</span>;
				thead = (showWeek ? <span class="hljs-string">"&lt;th class='ui-datepicker-week-col'&gt;"</span> + <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"weekHeader"</span>) + <span class="hljs-string">"&lt;/th&gt;"</span> : <span class="hljs-string">""</span>);
				<span class="hljs-keyword">for</span> (dow = <span class="hljs-number">0</span>; dow &lt; <span class="hljs-number">7</span>; dow++) { <span class="hljs-comment">// days of the week</span>
					day = (dow + firstDay) % <span class="hljs-number">7</span>;
					thead += <span class="hljs-string">"&lt;th"</span> + ((dow + firstDay + <span class="hljs-number">6</span>) % <span class="hljs-number">7</span> &gt;= <span class="hljs-number">5</span> ? <span class="hljs-string">" class='ui-datepicker-week-end'"</span> : <span class="hljs-string">""</span>) + <span class="hljs-string">"&gt;"</span> +
						<span class="hljs-string">"&lt;span title='"</span> + dayNames[day] + <span class="hljs-string">"'&gt;"</span> + dayNamesMin[day] + <span class="hljs-string">"&lt;/span&gt;&lt;/th&gt;"</span>;
				}
				calender += thead + <span class="hljs-string">"&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;"</span>;
				daysInMonth = <span class="hljs-keyword">this</span>._getDaysInMonth(drawYear, drawMonth);
				<span class="hljs-keyword">if</span> (drawYear === inst.selectedYear &amp;&amp; drawMonth === inst.selectedMonth) {
					inst.selectedDay = <span class="hljs-built_in">Math</span>.min(inst.selectedDay, daysInMonth);
				}
				leadDays = (<span class="hljs-keyword">this</span>._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + <span class="hljs-number">7</span>) % <span class="hljs-number">7</span>;
				curRows = <span class="hljs-built_in">Math</span>.ceil((leadDays + daysInMonth) / <span class="hljs-number">7</span>); <span class="hljs-comment">// calculate the number of rows to generate</span>
				numRows = (isMultiMonth ? <span class="hljs-keyword">this</span>.maxRows &gt; curRows ? <span class="hljs-keyword">this</span>.maxRows : curRows : curRows); <span class="hljs-comment">//If multiple months, use the higher number of rows (see #7043)</span>
				<span class="hljs-keyword">this</span>.maxRows = numRows;
				printDate = <span class="hljs-keyword">this</span>._daylightSavingAdjust(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(drawYear, drawMonth, <span class="hljs-number">1</span> - leadDays));
				<span class="hljs-keyword">for</span> (dRow = <span class="hljs-number">0</span>; dRow &lt; numRows; dRow++) { <span class="hljs-comment">// create date picker rows</span>
					calender += <span class="hljs-string">"&lt;tr&gt;"</span>;
					tbody = (!showWeek ? <span class="hljs-string">""</span> : <span class="hljs-string">"&lt;td class='ui-datepicker-week-col'&gt;"</span> +
						<span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"calculateWeek"</span>)(printDate) + <span class="hljs-string">"&lt;/td&gt;"</span>);
					<span class="hljs-keyword">for</span> (dow = <span class="hljs-number">0</span>; dow &lt; <span class="hljs-number">7</span>; dow++) { <span class="hljs-comment">// create date picker days</span>
						daySettings = (beforeShowDay ?
							beforeShowDay.apply((inst.input ? inst.input[<span class="hljs-number">0</span>] : <span class="hljs-literal">null</span>), [printDate]) : [<span class="hljs-literal">true</span>, <span class="hljs-string">""</span>]);
						otherMonth = (printDate.getMonth() !== drawMonth);
						unselectable = (otherMonth &amp;&amp; !selectOtherMonths) || !daySettings[<span class="hljs-number">0</span>] ||
							(minDate &amp;&amp; printDate &lt; minDate) || (maxDate &amp;&amp; printDate &gt; maxDate);
						tbody += <span class="hljs-string">"&lt;td class='"</span> +
							((dow + firstDay + <span class="hljs-number">6</span>) % <span class="hljs-number">7</span> &gt;= <span class="hljs-number">5</span> ? <span class="hljs-string">" ui-datepicker-week-end"</span> : <span class="hljs-string">""</span>) + <span class="hljs-comment">// highlight weekends</span>
							(otherMonth ? <span class="hljs-string">" ui-datepicker-other-month"</span> : <span class="hljs-string">""</span>) + <span class="hljs-comment">// highlight days from other months</span>
							((printDate.getTime() === selectedDate.getTime() &amp;&amp; drawMonth === inst.selectedMonth &amp;&amp; inst._keyEvent) || <span class="hljs-comment">// user pressed key</span>
							(defaultDate.getTime() === printDate.getTime() &amp;&amp; defaultDate.getTime() === selectedDate.getTime()) ?</pre></div></div>
            
        </li>
        
        
        <li id="section-368">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-368">&#182;</a>
              </div>
              <p>or defaultDate is current printedDate and defaultDate is selectedDate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							<span class="hljs-string">" "</span> + <span class="hljs-keyword">this</span>._dayOverClass : <span class="hljs-string">""</span>) + <span class="hljs-comment">// highlight selected day</span>
							(unselectable ? <span class="hljs-string">" "</span> + <span class="hljs-keyword">this</span>._unselectableClass + <span class="hljs-string">" ui-state-disabled"</span>: <span class="hljs-string">""</span>) +  <span class="hljs-comment">// highlight unselectable days</span>
							(otherMonth &amp;&amp; !showOtherMonths ? <span class="hljs-string">""</span> : <span class="hljs-string">" "</span> + daySettings[<span class="hljs-number">1</span>] + <span class="hljs-comment">// highlight custom dates</span>
							(printDate.getTime() === currentDate.getTime() ? <span class="hljs-string">" "</span> + <span class="hljs-keyword">this</span>._currentClass : <span class="hljs-string">""</span>) + <span class="hljs-comment">// highlight selected day</span>
							(printDate.getTime() === today.getTime() ? <span class="hljs-string">" ui-datepicker-today"</span> : <span class="hljs-string">""</span>)) + <span class="hljs-string">"'"</span> + <span class="hljs-comment">// highlight today (if different)</span>
							((!otherMonth || showOtherMonths) &amp;&amp; daySettings[<span class="hljs-number">2</span>] ? <span class="hljs-string">" title='"</span> + daySettings[<span class="hljs-number">2</span>].replace(<span class="hljs-regexp">/'/g</span>, <span class="hljs-string">"&amp;#39;"</span>) + <span class="hljs-string">"'"</span> : <span class="hljs-string">""</span>) + <span class="hljs-comment">// cell title</span>
							(unselectable ? <span class="hljs-string">""</span> : <span class="hljs-string">" data-handler='selectDay' data-event='click' data-month='"</span> + printDate.getMonth() + <span class="hljs-string">"' data-year='"</span> + printDate.getFullYear() + <span class="hljs-string">"'"</span>) + <span class="hljs-string">"&gt;"</span> + <span class="hljs-comment">// actions</span>
							(otherMonth &amp;&amp; !showOtherMonths ? <span class="hljs-string">"&amp;#xa0;"</span> : <span class="hljs-comment">// display for other months</span>
							(unselectable ? <span class="hljs-string">"&lt;span class='ui-state-default'&gt;"</span> + printDate.getDate() + <span class="hljs-string">"&lt;/span&gt;"</span> : <span class="hljs-string">"&lt;a class='ui-state-default"</span> +
							(printDate.getTime() === today.getTime() ? <span class="hljs-string">" ui-state-highlight"</span> : <span class="hljs-string">""</span>) +
							(printDate.getTime() === currentDate.getTime() ? <span class="hljs-string">" ui-state-active"</span> : <span class="hljs-string">""</span>) + <span class="hljs-comment">// highlight selected day</span>
							(otherMonth ? <span class="hljs-string">" ui-priority-secondary"</span> : <span class="hljs-string">""</span>) + <span class="hljs-comment">// distinguish dates from other months</span>
							<span class="hljs-string">"' href='#'&gt;"</span> + printDate.getDate() + <span class="hljs-string">"&lt;/a&gt;"</span>)) + <span class="hljs-string">"&lt;/td&gt;"</span>; <span class="hljs-comment">// display selectable date</span>
						printDate.setDate(printDate.getDate() + <span class="hljs-number">1</span>);
						printDate = <span class="hljs-keyword">this</span>._daylightSavingAdjust(printDate);
					}
					calender += tbody + <span class="hljs-string">"&lt;/tr&gt;"</span>;
				}
				drawMonth++;
				<span class="hljs-keyword">if</span> (drawMonth &gt; <span class="hljs-number">11</span>) {
					drawMonth = <span class="hljs-number">0</span>;
					drawYear++;
				}
				calender += <span class="hljs-string">"&lt;/tbody&gt;&lt;/table&gt;"</span> + (isMultiMonth ? <span class="hljs-string">"&lt;/div&gt;"</span> +
							((numMonths[<span class="hljs-number">0</span>] &gt; <span class="hljs-number">0</span> &amp;&amp; col === numMonths[<span class="hljs-number">1</span>]-<span class="hljs-number">1</span>) ? <span class="hljs-string">"&lt;div class='ui-datepicker-row-break'&gt;&lt;/div&gt;"</span> : <span class="hljs-string">""</span>) : <span class="hljs-string">""</span>);
				group += calender;
			}
			html += group;
		}
		html += buttonPanel;
		inst._keyEvent = <span class="hljs-literal">false</span>;
		<span class="hljs-keyword">return</span> html;
	},

	<span class="hljs-comment">/* Generate the month and year header. */</span>
	_generateMonthYearHeader: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst, drawMonth, drawYear, minDate, maxDate,
			secondary, monthNames, monthNamesShort)</span> {</span>

		<span class="hljs-keyword">var</span> inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear,
			changeMonth = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"changeMonth"</span>),
			changeYear = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"changeYear"</span>),
			showMonthAfterYear = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"showMonthAfterYear"</span>),
			html = <span class="hljs-string">"&lt;div class='ui-datepicker-title'&gt;"</span>,
			monthHtml = <span class="hljs-string">""</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-369">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-369">&#182;</a>
              </div>
              <p>month selection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (secondary || !changeMonth) {
			monthHtml += <span class="hljs-string">"&lt;span class='ui-datepicker-month'&gt;"</span> + monthNames[drawMonth] + <span class="hljs-string">"&lt;/span&gt;"</span>;
		} <span class="hljs-keyword">else</span> {
			inMinYear = (minDate &amp;&amp; minDate.getFullYear() === drawYear);
			inMaxYear = (maxDate &amp;&amp; maxDate.getFullYear() === drawYear);
			monthHtml += <span class="hljs-string">"&lt;select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'&gt;"</span>;
			<span class="hljs-keyword">for</span> ( month = <span class="hljs-number">0</span>; month &lt; <span class="hljs-number">12</span>; month++) {
				<span class="hljs-keyword">if</span> ((!inMinYear || month &gt;= minDate.getMonth()) &amp;&amp; (!inMaxYear || month &lt;= maxDate.getMonth())) {
					monthHtml += <span class="hljs-string">"&lt;option value='"</span> + month + <span class="hljs-string">"'"</span> +
						(month === drawMonth ? <span class="hljs-string">" selected='selected'"</span> : <span class="hljs-string">""</span>) +
						<span class="hljs-string">"&gt;"</span> + monthNamesShort[month] + <span class="hljs-string">"&lt;/option&gt;"</span>;
				}
			}
			monthHtml += <span class="hljs-string">"&lt;/select&gt;"</span>;
		}

		<span class="hljs-keyword">if</span> (!showMonthAfterYear) {
			html += monthHtml + (secondary || !(changeMonth &amp;&amp; changeYear) ? <span class="hljs-string">"&amp;#xa0;"</span> : <span class="hljs-string">""</span>);
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-370">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-370">&#182;</a>
              </div>
              <p>year selection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( !inst.yearshtml ) {
			inst.yearshtml = <span class="hljs-string">""</span>;
			<span class="hljs-keyword">if</span> (secondary || !changeYear) {
				html += <span class="hljs-string">"&lt;span class='ui-datepicker-year'&gt;"</span> + drawYear + <span class="hljs-string">"&lt;/span&gt;"</span>;
			} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-371">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-371">&#182;</a>
              </div>
              <p>determine range of years to display</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				years = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"yearRange"</span>).split(<span class="hljs-string">":"</span>);
				thisYear = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear();
				determineYear = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span> {</span>
					<span class="hljs-keyword">var</span> year = (value.match(<span class="hljs-regexp">/c[+\-].*/</span>) ? drawYear + <span class="hljs-built_in">parseInt</span>(value.substring(<span class="hljs-number">1</span>), <span class="hljs-number">10</span>) :
						(value.match(<span class="hljs-regexp">/[+\-].*/</span>) ? thisYear + <span class="hljs-built_in">parseInt</span>(value, <span class="hljs-number">10</span>) :
						<span class="hljs-built_in">parseInt</span>(value, <span class="hljs-number">10</span>)));
					<span class="hljs-keyword">return</span> (<span class="hljs-built_in">isNaN</span>(year) ? thisYear : year);
				};
				year = determineYear(years[<span class="hljs-number">0</span>]);
				endYear = <span class="hljs-built_in">Math</span>.max(year, determineYear(years[<span class="hljs-number">1</span>] || <span class="hljs-string">""</span>));
				year = (minDate ? <span class="hljs-built_in">Math</span>.max(year, minDate.getFullYear()) : year);
				endYear = (maxDate ? <span class="hljs-built_in">Math</span>.min(endYear, maxDate.getFullYear()) : endYear);
				inst.yearshtml += <span class="hljs-string">"&lt;select class='ui-datepicker-year' data-handler='selectYear' data-event='change'&gt;"</span>;
				<span class="hljs-keyword">for</span> (; year &lt;= endYear; year++) {
					inst.yearshtml += <span class="hljs-string">"&lt;option value='"</span> + year + <span class="hljs-string">"'"</span> +
						(year === drawYear ? <span class="hljs-string">" selected='selected'"</span> : <span class="hljs-string">""</span>) +
						<span class="hljs-string">"&gt;"</span> + year + <span class="hljs-string">"&lt;/option&gt;"</span>;
				}
				inst.yearshtml += <span class="hljs-string">"&lt;/select&gt;"</span>;

				html += inst.yearshtml;
				inst.yearshtml = <span class="hljs-literal">null</span>;
			}
		}

		html += <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"yearSuffix"</span>);
		<span class="hljs-keyword">if</span> (showMonthAfterYear) {
			html += (secondary || !(changeMonth &amp;&amp; changeYear) ? <span class="hljs-string">"&amp;#xa0;"</span> : <span class="hljs-string">""</span>) + monthHtml;
		}
		html += <span class="hljs-string">"&lt;/div&gt;"</span>; <span class="hljs-comment">// Close datepicker_header</span>
		<span class="hljs-keyword">return</span> html;
	},

	<span class="hljs-comment">/* Adjust one of the date sub-fields. */</span>
	_adjustInstDate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst, offset, period)</span> {</span>
		<span class="hljs-keyword">var</span> year = inst.drawYear + (period === <span class="hljs-string">"Y"</span> ? offset : <span class="hljs-number">0</span>),
			month = inst.drawMonth + (period === <span class="hljs-string">"M"</span> ? offset : <span class="hljs-number">0</span>),
			day = <span class="hljs-built_in">Math</span>.min(inst.selectedDay, <span class="hljs-keyword">this</span>._getDaysInMonth(year, month)) + (period === <span class="hljs-string">"D"</span> ? offset : <span class="hljs-number">0</span>),
			date = <span class="hljs-keyword">this</span>._restrictMinMax(inst, <span class="hljs-keyword">this</span>._daylightSavingAdjust(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(year, month, day)));

		inst.selectedDay = date.getDate();
		inst.drawMonth = inst.selectedMonth = date.getMonth();
		inst.drawYear = inst.selectedYear = date.getFullYear();
		<span class="hljs-keyword">if</span> (period === <span class="hljs-string">"M"</span> || period === <span class="hljs-string">"Y"</span>) {
			<span class="hljs-keyword">this</span>._notifyChange(inst);
		}
	},

	<span class="hljs-comment">/* Ensure a date is within any min/max bounds. */</span>
	_restrictMinMax: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst, date)</span> {</span>
		<span class="hljs-keyword">var</span> minDate = <span class="hljs-keyword">this</span>._getMinMaxDate(inst, <span class="hljs-string">"min"</span>),
			maxDate = <span class="hljs-keyword">this</span>._getMinMaxDate(inst, <span class="hljs-string">"max"</span>),
			newDate = (minDate &amp;&amp; date &lt; minDate ? minDate : date);
		<span class="hljs-keyword">return</span> (maxDate &amp;&amp; newDate &gt; maxDate ? maxDate : newDate);
	},

	<span class="hljs-comment">/* Notify change of month/year. */</span>
	_notifyChange: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst)</span> {</span>
		<span class="hljs-keyword">var</span> onChange = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"onChangeMonthYear"</span>);
		<span class="hljs-keyword">if</span> (onChange) {
			onChange.apply((inst.input ? inst.input[<span class="hljs-number">0</span>] : <span class="hljs-literal">null</span>),
				[inst.selectedYear, inst.selectedMonth + <span class="hljs-number">1</span>, inst]);
		}
	},

	<span class="hljs-comment">/* Determine the number of months to show. */</span>
	_getNumberOfMonths: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst)</span> {</span>
		<span class="hljs-keyword">var</span> numMonths = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"numberOfMonths"</span>);
		<span class="hljs-keyword">return</span> (numMonths == <span class="hljs-literal">null</span> ? [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>] : (<span class="hljs-keyword">typeof</span> numMonths === <span class="hljs-string">"number"</span> ? [<span class="hljs-number">1</span>, numMonths] : numMonths));
	},

	<span class="hljs-comment">/* Determine the current maximum date - ensure no time components are set. */</span>
	_getMinMaxDate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst, minMax)</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._determineDate(inst, <span class="hljs-keyword">this</span>._get(inst, minMax + <span class="hljs-string">"Date"</span>), <span class="hljs-literal">null</span>);
	},

	<span class="hljs-comment">/* Find the number of days in a given month. */</span>
	_getDaysInMonth: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(year, month)</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-number">32</span> - <span class="hljs-keyword">this</span>._daylightSavingAdjust(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(year, month, <span class="hljs-number">32</span>)).getDate();
	},

	<span class="hljs-comment">/* Find the day of the week of the first of a month. */</span>
	_getFirstDayOfMonth: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(year, month)</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(year, month, <span class="hljs-number">1</span>).getDay();
	},

	<span class="hljs-comment">/* Determines if we should allow a "next/prev" month display change. */</span>
	_canAdjustMonth: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst, offset, curYear, curMonth)</span> {</span>
		<span class="hljs-keyword">var</span> numMonths = <span class="hljs-keyword">this</span>._getNumberOfMonths(inst),
			date = <span class="hljs-keyword">this</span>._daylightSavingAdjust(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(curYear,
			curMonth + (offset &lt; <span class="hljs-number">0</span> ? offset : numMonths[<span class="hljs-number">0</span>] * numMonths[<span class="hljs-number">1</span>]), <span class="hljs-number">1</span>));

		<span class="hljs-keyword">if</span> (offset &lt; <span class="hljs-number">0</span>) {
			date.setDate(<span class="hljs-keyword">this</span>._getDaysInMonth(date.getFullYear(), date.getMonth()));
		}
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isInRange(inst, date);
	},

	<span class="hljs-comment">/* Is the given date in the accepted range? */</span>
	_isInRange: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst, date)</span> {</span>
		<span class="hljs-keyword">var</span> yearSplit, currentYear,
			minDate = <span class="hljs-keyword">this</span>._getMinMaxDate(inst, <span class="hljs-string">"min"</span>),
			maxDate = <span class="hljs-keyword">this</span>._getMinMaxDate(inst, <span class="hljs-string">"max"</span>),
			minYear = <span class="hljs-literal">null</span>,
			maxYear = <span class="hljs-literal">null</span>,
			years = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"yearRange"</span>);
			<span class="hljs-keyword">if</span> (years){
				yearSplit = years.split(<span class="hljs-string">":"</span>);
				currentYear = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear();
				minYear = <span class="hljs-built_in">parseInt</span>(yearSplit[<span class="hljs-number">0</span>], <span class="hljs-number">10</span>);
				maxYear = <span class="hljs-built_in">parseInt</span>(yearSplit[<span class="hljs-number">1</span>], <span class="hljs-number">10</span>);
				<span class="hljs-keyword">if</span> ( yearSplit[<span class="hljs-number">0</span>].match(<span class="hljs-regexp">/[+\-].*/</span>) ) {
					minYear += currentYear;
				}
				<span class="hljs-keyword">if</span> ( yearSplit[<span class="hljs-number">1</span>].match(<span class="hljs-regexp">/[+\-].*/</span>) ) {
					maxYear += currentYear;
				}
			}

		<span class="hljs-keyword">return</span> ((!minDate || date.getTime() &gt;= minDate.getTime()) &amp;&amp;
			(!maxDate || date.getTime() &lt;= maxDate.getTime()) &amp;&amp;
			(!minYear || date.getFullYear() &gt;= minYear) &amp;&amp;
			(!maxYear || date.getFullYear() &lt;= maxYear));
	},

	<span class="hljs-comment">/* Provide the configuration settings for formatting/parsing. */</span>
	_getFormatConfig: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst)</span> {</span>
		<span class="hljs-keyword">var</span> shortYearCutoff = <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"shortYearCutoff"</span>);
		shortYearCutoff = (<span class="hljs-keyword">typeof</span> shortYearCutoff !== <span class="hljs-string">"string"</span> ? shortYearCutoff :
			<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getFullYear() % <span class="hljs-number">100</span> + <span class="hljs-built_in">parseInt</span>(shortYearCutoff, <span class="hljs-number">10</span>));
		<span class="hljs-keyword">return</span> {shortYearCutoff: shortYearCutoff,
			dayNamesShort: <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"dayNamesShort"</span>), dayNames: <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"dayNames"</span>),
			monthNamesShort: <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"monthNamesShort"</span>), monthNames: <span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"monthNames"</span>)};
	},

	<span class="hljs-comment">/* Format the given date for display. */</span>
	_formatDate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(inst, day, month, year)</span> {</span>
		<span class="hljs-keyword">if</span> (!day) {
			inst.currentDay = inst.selectedDay;
			inst.currentMonth = inst.selectedMonth;
			inst.currentYear = inst.selectedYear;
		}
		<span class="hljs-keyword">var</span> date = (day ? (<span class="hljs-keyword">typeof</span> day === <span class="hljs-string">"object"</span> ? day :
			<span class="hljs-keyword">this</span>._daylightSavingAdjust(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(year, month, day))) :
			<span class="hljs-keyword">this</span>._daylightSavingAdjust(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(inst.currentYear, inst.currentMonth, inst.currentDay)));
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.formatDate(<span class="hljs-keyword">this</span>._get(inst, <span class="hljs-string">"dateFormat"</span>), date, <span class="hljs-keyword">this</span>._getFormatConfig(inst));
	}
});

<span class="hljs-comment">/*
 * Bind hover events for datepicker elements.
 * Done via delegate so the binding only occurs once in the lifetime of the parent div.
 * Global instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindHover</span><span class="hljs-params">(dpDiv)</span> {</span>
	<span class="hljs-keyword">var</span> selector = <span class="hljs-string">"button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a"</span>;
	<span class="hljs-keyword">return</span> dpDiv.delegate(selector, <span class="hljs-string">"mouseout"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			$(<span class="hljs-keyword">this</span>).removeClass(<span class="hljs-string">"ui-state-hover"</span>);
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.className.indexOf(<span class="hljs-string">"ui-datepicker-prev"</span>) !== -<span class="hljs-number">1</span>) {
				$(<span class="hljs-keyword">this</span>).removeClass(<span class="hljs-string">"ui-datepicker-prev-hover"</span>);
			}
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.className.indexOf(<span class="hljs-string">"ui-datepicker-next"</span>) !== -<span class="hljs-number">1</span>) {
				$(<span class="hljs-keyword">this</span>).removeClass(<span class="hljs-string">"ui-datepicker-next-hover"</span>);
			}
		})
		.delegate(selector, <span class="hljs-string">"mouseover"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
			<span class="hljs-keyword">if</span> (!$.datepicker._isDisabledDatepicker( instActive.inline ? dpDiv.parent()[<span class="hljs-number">0</span>] : instActive.input[<span class="hljs-number">0</span>])) {
				$(<span class="hljs-keyword">this</span>).parents(<span class="hljs-string">".ui-datepicker-calendar"</span>).find(<span class="hljs-string">"a"</span>).removeClass(<span class="hljs-string">"ui-state-hover"</span>);
				$(<span class="hljs-keyword">this</span>).addClass(<span class="hljs-string">"ui-state-hover"</span>);
				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.className.indexOf(<span class="hljs-string">"ui-datepicker-prev"</span>) !== -<span class="hljs-number">1</span>) {
					$(<span class="hljs-keyword">this</span>).addClass(<span class="hljs-string">"ui-datepicker-prev-hover"</span>);
				}
				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.className.indexOf(<span class="hljs-string">"ui-datepicker-next"</span>) !== -<span class="hljs-number">1</span>) {
					$(<span class="hljs-keyword">this</span>).addClass(<span class="hljs-string">"ui-datepicker-next-hover"</span>);
				}
			}
		});
}

<span class="hljs-comment">/* jQuery extend now ignores nulls! */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extendRemove</span><span class="hljs-params">(target, props)</span> {</span>
	$.extend(target, props);
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> name <span class="hljs-keyword">in</span> props) {
		<span class="hljs-keyword">if</span> (props[name] == <span class="hljs-literal">null</span>) {
			target[name] = props[name];
		}
	}
	<span class="hljs-keyword">return</span> target;
}

<span class="hljs-comment">/* Invoke the datepicker functionality.
   @param  options  string - a command, optionally followed by additional parameters or
					Object - settings for attaching new datepicker functionality
   @return  jQuery object */</span>
$.fn.datepicker = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(options)</span>{</span>

	<span class="hljs-comment">/* Verify an empty collection wasn't passed - Fixes #6976 */</span>
	<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.length ) {
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	}

	<span class="hljs-comment">/* Initialise the date picker. */</span>
	<span class="hljs-keyword">if</span> (!$.datepicker.initialized) {
		$(document).mousedown($.datepicker._checkExternalClick);
		$.datepicker.initialized = <span class="hljs-literal">true</span>;
	}

	<span class="hljs-comment">/* Append datepicker main container to body if not exist. */</span>
	<span class="hljs-keyword">if</span> ($(<span class="hljs-string">"#"</span>+$.datepicker._mainDivId).length === <span class="hljs-number">0</span>) {
		$(<span class="hljs-string">"body"</span>).append($.datepicker.dpDiv);
	}

	<span class="hljs-keyword">var</span> otherArgs = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>);
	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> options === <span class="hljs-string">"string"</span> &amp;&amp; (options === <span class="hljs-string">"isDisabled"</span> || options === <span class="hljs-string">"getDate"</span> || options === <span class="hljs-string">"widget"</span>)) {
		<span class="hljs-keyword">return</span> $.datepicker[<span class="hljs-string">"_"</span> + options + <span class="hljs-string">"Datepicker"</span>].
			apply($.datepicker, [<span class="hljs-keyword">this</span>[<span class="hljs-number">0</span>]].concat(otherArgs));
	}
	<span class="hljs-keyword">if</span> (options === <span class="hljs-string">"option"</span> &amp;&amp; <span class="hljs-built_in">arguments</span>.length === <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>] === <span class="hljs-string">"string"</span>) {
		<span class="hljs-keyword">return</span> $.datepicker[<span class="hljs-string">"_"</span> + options + <span class="hljs-string">"Datepicker"</span>].
			apply($.datepicker, [<span class="hljs-keyword">this</span>[<span class="hljs-number">0</span>]].concat(otherArgs));
	}
	<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">typeof</span> options === <span class="hljs-string">"string"</span> ?
			$.datepicker[<span class="hljs-string">"_"</span> + options + <span class="hljs-string">"Datepicker"</span>].
				apply($.datepicker, [<span class="hljs-keyword">this</span>].concat(otherArgs)) :
			$.datepicker._attachDatepicker(<span class="hljs-keyword">this</span>, options);
	});
};

$.datepicker = <span class="hljs-keyword">new</span> Datepicker(); <span class="hljs-comment">// singleton instance</span>
$.datepicker.initialized = <span class="hljs-literal">false</span>;
$.datepicker.uuid = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime();
$.datepicker.version = <span class="hljs-string">"1.10.3"</span>;

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

<span class="hljs-keyword">var</span> sizeRelatedOptions = {
		buttons: <span class="hljs-literal">true</span>,
		height: <span class="hljs-literal">true</span>,
		maxHeight: <span class="hljs-literal">true</span>,
		maxWidth: <span class="hljs-literal">true</span>,
		minHeight: <span class="hljs-literal">true</span>,
		minWidth: <span class="hljs-literal">true</span>,
		width: <span class="hljs-literal">true</span>
	},
	resizableRelatedOptions = {
		maxHeight: <span class="hljs-literal">true</span>,
		maxWidth: <span class="hljs-literal">true</span>,
		minHeight: <span class="hljs-literal">true</span>,
		minWidth: <span class="hljs-literal">true</span>
	};

$.widget( <span class="hljs-string">"ui.dialog"</span>, {
	version: <span class="hljs-string">"1.10.3"</span>,
	options: {
		appendTo: <span class="hljs-string">"body"</span>,
		autoOpen: <span class="hljs-literal">true</span>,
		buttons: [],
		closeOnEscape: <span class="hljs-literal">true</span>,
		closeText: <span class="hljs-string">"close"</span>,
		dialogClass: <span class="hljs-string">""</span>,
		draggable: <span class="hljs-literal">true</span>,
		hide: <span class="hljs-literal">null</span>,
		height: <span class="hljs-string">"auto"</span>,
		maxHeight: <span class="hljs-literal">null</span>,
		maxWidth: <span class="hljs-literal">null</span>,
		minHeight: <span class="hljs-number">150</span>,
		minWidth: <span class="hljs-number">150</span>,
		modal: <span class="hljs-literal">false</span>,
		position: {
			my: <span class="hljs-string">"center"</span>,
			at: <span class="hljs-string">"center"</span>,
			of: window,
			collision: <span class="hljs-string">"fit"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-372">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-372">&#182;</a>
              </div>
              <p>Ensure the titlebar is always visible</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			using: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( pos )</span> {</span>
				<span class="hljs-keyword">var</span> topOffset = $( <span class="hljs-keyword">this</span> ).css( pos ).offset().top;
				<span class="hljs-keyword">if</span> ( topOffset &lt; <span class="hljs-number">0</span> ) {
					$( <span class="hljs-keyword">this</span> ).css( <span class="hljs-string">"top"</span>, pos.top - topOffset );
				}
			}
		},
		resizable: <span class="hljs-literal">true</span>,
		show: <span class="hljs-literal">null</span>,
		title: <span class="hljs-literal">null</span>,
		width: <span class="hljs-number">300</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-373">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-373">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		beforeClose: <span class="hljs-literal">null</span>,
		close: <span class="hljs-literal">null</span>,
		drag: <span class="hljs-literal">null</span>,
		dragStart: <span class="hljs-literal">null</span>,
		dragStop: <span class="hljs-literal">null</span>,
		focus: <span class="hljs-literal">null</span>,
		open: <span class="hljs-literal">null</span>,
		resize: <span class="hljs-literal">null</span>,
		resizeStart: <span class="hljs-literal">null</span>,
		resizeStop: <span class="hljs-literal">null</span>
	},

	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.originalCss = {
			display: <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>].style.display,
			width: <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>].style.width,
			minHeight: <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>].style.minHeight,
			maxHeight: <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>].style.maxHeight,
			height: <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>].style.height
		};
		<span class="hljs-keyword">this</span>.originalPosition = {
			parent: <span class="hljs-keyword">this</span>.element.parent(),
			index: <span class="hljs-keyword">this</span>.element.parent().children().index( <span class="hljs-keyword">this</span>.element )
		};
		<span class="hljs-keyword">this</span>.originalTitle = <span class="hljs-keyword">this</span>.element.attr(<span class="hljs-string">"title"</span>);
		<span class="hljs-keyword">this</span>.options.title = <span class="hljs-keyword">this</span>.options.title || <span class="hljs-keyword">this</span>.originalTitle;

		<span class="hljs-keyword">this</span>._createWrapper();

		<span class="hljs-keyword">this</span>.element
			.show()
			.removeAttr(<span class="hljs-string">"title"</span>)
			.addClass(<span class="hljs-string">"ui-dialog-content ui-widget-content"</span>)
			.appendTo( <span class="hljs-keyword">this</span>.uiDialog );

		<span class="hljs-keyword">this</span>._createTitlebar();
		<span class="hljs-keyword">this</span>._createButtonPane();

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.draggable &amp;&amp; $.fn.draggable ) {
			<span class="hljs-keyword">this</span>._makeDraggable();
		}
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.resizable &amp;&amp; $.fn.resizable ) {
			<span class="hljs-keyword">this</span>._makeResizable();
		}

		<span class="hljs-keyword">this</span>._isOpen = <span class="hljs-literal">false</span>;
	},

	_init: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.autoOpen ) {
			<span class="hljs-keyword">this</span>.open();
		}
	},

	_appendTo: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> element = <span class="hljs-keyword">this</span>.options.appendTo;
		<span class="hljs-keyword">if</span> ( element &amp;&amp; (element.jquery || element.nodeType) ) {
			<span class="hljs-keyword">return</span> $( element );
		}
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.document.find( element || <span class="hljs-string">"body"</span> ).eq( <span class="hljs-number">0</span> );
	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> next,
			originalPosition = <span class="hljs-keyword">this</span>.originalPosition;

		<span class="hljs-keyword">this</span>._destroyOverlay();

		<span class="hljs-keyword">this</span>.element
			.removeUniqueId()
			.removeClass(<span class="hljs-string">"ui-dialog-content ui-widget-content"</span>)
			.css( <span class="hljs-keyword">this</span>.originalCss )</pre></div></div>
            
        </li>
        
        
        <li id="section-374">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-374">&#182;</a>
              </div>
              <p>Without detaching first, the following becomes really slow</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			.detach();

		<span class="hljs-keyword">this</span>.uiDialog.stop( <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span> ).remove();

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.originalTitle ) {
			<span class="hljs-keyword">this</span>.element.attr( <span class="hljs-string">"title"</span>, <span class="hljs-keyword">this</span>.originalTitle );
		}

		next = originalPosition.parent.children().eq( originalPosition.index );</pre></div></div>
            
        </li>
        
        
        <li id="section-375">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-375">&#182;</a>
              </div>
              <p>Don’t try to place the dialog next to itself (#8613)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( next.length &amp;&amp; next[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>] ) {
			next.before( <span class="hljs-keyword">this</span>.element );
		} <span class="hljs-keyword">else</span> {
			originalPosition.parent.append( <span class="hljs-keyword">this</span>.element );
		}
	},

	widget: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.uiDialog;
	},

	disable: $.noop,
	enable: $.noop,

	close: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;

		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._isOpen || <span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"beforeClose"</span>, event ) === <span class="hljs-literal">false</span> ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">this</span>._isOpen = <span class="hljs-literal">false</span>;
		<span class="hljs-keyword">this</span>._destroyOverlay();

		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.opener.filter(<span class="hljs-string">":focusable"</span>).focus().length ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-376">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-376">&#182;</a>
              </div>
              <p>Hiding a focused element doesn’t trigger blur in WebKit
so in case we have nothing to focus on, explicitly blur the active element
<a href="https://bugs.webkit.org/show_bug.cgi?id=47182">https://bugs.webkit.org/show_bug.cgi?id=47182</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$( <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].activeElement ).blur();
		}

		<span class="hljs-keyword">this</span>._hide( <span class="hljs-keyword">this</span>.uiDialog, <span class="hljs-keyword">this</span>.options.hide, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			that._trigger( <span class="hljs-string">"close"</span>, event );
		});
	},

	isOpen: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isOpen;
	},

	moveToTop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>._moveToTop();
	},

	_moveToTop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, silent )</span> {</span>
		<span class="hljs-keyword">var</span> moved = !!<span class="hljs-keyword">this</span>.uiDialog.nextAll(<span class="hljs-string">":visible"</span>).insertBefore( <span class="hljs-keyword">this</span>.uiDialog ).length;
		<span class="hljs-keyword">if</span> ( moved &amp;&amp; !silent ) {
			<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"focus"</span>, event );
		}
		<span class="hljs-keyword">return</span> moved;
	},

	open: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._isOpen ) {
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._moveToTop() ) {
				<span class="hljs-keyword">this</span>._focusTabbable();
			}
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">this</span>._isOpen = <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">this</span>.opener = $( <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].activeElement );

		<span class="hljs-keyword">this</span>._size();
		<span class="hljs-keyword">this</span>._position();
		<span class="hljs-keyword">this</span>._createOverlay();
		<span class="hljs-keyword">this</span>._moveToTop( <span class="hljs-literal">null</span>, <span class="hljs-literal">true</span> );
		<span class="hljs-keyword">this</span>._show( <span class="hljs-keyword">this</span>.uiDialog, <span class="hljs-keyword">this</span>.options.show, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			that._focusTabbable();
			that._trigger(<span class="hljs-string">"focus"</span>);
		});

		<span class="hljs-keyword">this</span>._trigger(<span class="hljs-string">"open"</span>);
	},

	_focusTabbable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-377">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-377">&#182;</a>
              </div>
              <p>Set focus to the first match:</p>
<ol>
<li>First element inside the dialog matching [autofocus]</li>
<li>Tabbable element inside the content element</li>
<li>Tabbable element inside the buttonpane</li>
<li>The close button</li>
<li>The dialog itself</li>
</ol>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> hasFocus = <span class="hljs-keyword">this</span>.element.find(<span class="hljs-string">"[autofocus]"</span>);
		<span class="hljs-keyword">if</span> ( !hasFocus.length ) {
			hasFocus = <span class="hljs-keyword">this</span>.element.find(<span class="hljs-string">":tabbable"</span>);
		}
		<span class="hljs-keyword">if</span> ( !hasFocus.length ) {
			hasFocus = <span class="hljs-keyword">this</span>.uiDialogButtonPane.find(<span class="hljs-string">":tabbable"</span>);
		}
		<span class="hljs-keyword">if</span> ( !hasFocus.length ) {
			hasFocus = <span class="hljs-keyword">this</span>.uiDialogTitlebarClose.filter(<span class="hljs-string">":tabbable"</span>);
		}
		<span class="hljs-keyword">if</span> ( !hasFocus.length ) {
			hasFocus = <span class="hljs-keyword">this</span>.uiDialog;
		}
		hasFocus.eq( <span class="hljs-number">0</span> ).focus();
	},

	_keepFocus: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkFocus</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> activeElement = <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].activeElement,
				isActive = <span class="hljs-keyword">this</span>.uiDialog[<span class="hljs-number">0</span>] === activeElement ||
					$.contains( <span class="hljs-keyword">this</span>.uiDialog[<span class="hljs-number">0</span>], activeElement );
			<span class="hljs-keyword">if</span> ( !isActive ) {
				<span class="hljs-keyword">this</span>._focusTabbable();
			}
		}
		event.preventDefault();
		checkFocus.call( <span class="hljs-keyword">this</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-378">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-378">&#182;</a>
              </div>
              <p>support: IE
IE &lt;= 8 doesn’t prevent moving focus even with event.preventDefault()
so we check again later</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._delay( checkFocus );
	},

	_createWrapper: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.uiDialog = $(<span class="hljs-string">"&lt;div&gt;"</span>)
			.addClass( <span class="hljs-string">"ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "</span> +
				<span class="hljs-keyword">this</span>.options.dialogClass )
			.hide()
			.attr({</pre></div></div>
            
        </li>
        
        
        <li id="section-379">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-379">&#182;</a>
              </div>
              <p>Setting tabIndex makes the div focusable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				tabIndex: -<span class="hljs-number">1</span>,
				role: <span class="hljs-string">"dialog"</span>
			})
			.appendTo( <span class="hljs-keyword">this</span>._appendTo() );

		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.uiDialog, {
			keydown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.closeOnEscape &amp;&amp; !event.isDefaultPrevented() &amp;&amp; event.keyCode &amp;&amp;
						event.keyCode === $.ui.keyCode.ESCAPE ) {
					event.preventDefault();
					<span class="hljs-keyword">this</span>.close( event );
					<span class="hljs-keyword">return</span>;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-380">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-380">&#182;</a>
              </div>
              <p>prevent tabbing out of dialogs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( event.keyCode !== $.ui.keyCode.TAB ) {
					<span class="hljs-keyword">return</span>;
				}
				<span class="hljs-keyword">var</span> tabbables = <span class="hljs-keyword">this</span>.uiDialog.find(<span class="hljs-string">":tabbable"</span>),
					first = tabbables.filter(<span class="hljs-string">":first"</span>),
					last  = tabbables.filter(<span class="hljs-string">":last"</span>);

				<span class="hljs-keyword">if</span> ( ( event.target === last[<span class="hljs-number">0</span>] || event.target === <span class="hljs-keyword">this</span>.uiDialog[<span class="hljs-number">0</span>] ) &amp;&amp; !event.shiftKey ) {
					first.focus( <span class="hljs-number">1</span> );
					event.preventDefault();
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( ( event.target === first[<span class="hljs-number">0</span>] || event.target === <span class="hljs-keyword">this</span>.uiDialog[<span class="hljs-number">0</span>] ) &amp;&amp; event.shiftKey ) {
					last.focus( <span class="hljs-number">1</span> );
					event.preventDefault();
				}
			},
			mousedown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._moveToTop( event ) ) {
					<span class="hljs-keyword">this</span>._focusTabbable();
				}
			}
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-381">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-381">&#182;</a>
              </div>
              <p>We assume that any existing aria-describedby attribute means
that the dialog content is marked up properly
otherwise we brute force the content as the description</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.element.find(<span class="hljs-string">"[aria-describedby]"</span>).length ) {
			<span class="hljs-keyword">this</span>.uiDialog.attr({
				<span class="hljs-string">"aria-describedby"</span>: <span class="hljs-keyword">this</span>.element.uniqueId().attr(<span class="hljs-string">"id"</span>)
			});
		}
	},

	_createTitlebar: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> uiDialogTitle;

		<span class="hljs-keyword">this</span>.uiDialogTitlebar = $(<span class="hljs-string">"&lt;div&gt;"</span>)
			.addClass(<span class="hljs-string">"ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"</span>)
			.prependTo( <span class="hljs-keyword">this</span>.uiDialog );
		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.uiDialogTitlebar, {
			mousedown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-382">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-382">&#182;</a>
              </div>
              <p>Don’t prevent click on close button (#8838)
Focusing a dialog that is partially scrolled out of view
causes the browser to scroll it into view, preventing the click event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( !$( event.target ).closest(<span class="hljs-string">".ui-dialog-titlebar-close"</span>) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-383">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-383">&#182;</a>
              </div>
              <p>Dialog isn’t getting focus when dragging (#8063)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">this</span>.uiDialog.focus();
				}
			}
		});

		<span class="hljs-keyword">this</span>.uiDialogTitlebarClose = $(<span class="hljs-string">"&lt;button&gt;&lt;/button&gt;"</span>)
			.button({
				label: <span class="hljs-keyword">this</span>.options.closeText,
				icons: {
					primary: <span class="hljs-string">"ui-icon-closethick"</span>
				},
				text: <span class="hljs-literal">false</span>
			})
			.addClass(<span class="hljs-string">"ui-dialog-titlebar-close"</span>)
			.appendTo( <span class="hljs-keyword">this</span>.uiDialogTitlebar );
		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.uiDialogTitlebarClose, {
			click: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				event.preventDefault();
				<span class="hljs-keyword">this</span>.close( event );
			}
		});

		uiDialogTitle = $(<span class="hljs-string">"&lt;span&gt;"</span>)
			.uniqueId()
			.addClass(<span class="hljs-string">"ui-dialog-title"</span>)
			.prependTo( <span class="hljs-keyword">this</span>.uiDialogTitlebar );
		<span class="hljs-keyword">this</span>._title( uiDialogTitle );

		<span class="hljs-keyword">this</span>.uiDialog.attr({
			<span class="hljs-string">"aria-labelledby"</span>: uiDialogTitle.attr(<span class="hljs-string">"id"</span>)
		});
	},

	_title: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( title )</span> {</span>
		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.options.title ) {
			title.html(<span class="hljs-string">"&amp;#160;"</span>);
		}
		title.text( <span class="hljs-keyword">this</span>.options.title );
	},

	_createButtonPane: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.uiDialogButtonPane = $(<span class="hljs-string">"&lt;div&gt;"</span>)
			.addClass(<span class="hljs-string">"ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"</span>);

		<span class="hljs-keyword">this</span>.uiButtonSet = $(<span class="hljs-string">"&lt;div&gt;"</span>)
			.addClass(<span class="hljs-string">"ui-dialog-buttonset"</span>)
			.appendTo( <span class="hljs-keyword">this</span>.uiDialogButtonPane );

		<span class="hljs-keyword">this</span>._createButtons();
	},

	_createButtons: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			buttons = <span class="hljs-keyword">this</span>.options.buttons;</pre></div></div>
            
        </li>
        
        
        <li id="section-384">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-384">&#182;</a>
              </div>
              <p>if we already have a button pane, remove it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.uiDialogButtonPane.remove();
		<span class="hljs-keyword">this</span>.uiButtonSet.empty();

		<span class="hljs-keyword">if</span> ( $.isEmptyObject( buttons ) || ($.isArray( buttons ) &amp;&amp; !buttons.length) ) {
			<span class="hljs-keyword">this</span>.uiDialog.removeClass(<span class="hljs-string">"ui-dialog-buttons"</span>);
			<span class="hljs-keyword">return</span>;
		}

		$.each( buttons, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( name, props )</span> {</span>
			<span class="hljs-keyword">var</span> click, buttonOptions;
			props = $.isFunction( props ) ?
				{ click: props, text: name } :
				props;</pre></div></div>
            
        </li>
        
        
        <li id="section-385">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-385">&#182;</a>
              </div>
              <p>Default to a non-submitting button</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			props = $.extend( { type: <span class="hljs-string">"button"</span> }, props );</pre></div></div>
            
        </li>
        
        
        <li id="section-386">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-386">&#182;</a>
              </div>
              <p>Change the context for the click callback to be the main element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			click = props.click;
			props.click = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				click.apply( that.element[<span class="hljs-number">0</span>], <span class="hljs-built_in">arguments</span> );
			};
			buttonOptions = {
				icons: props.icons,
				text: props.showText
			};
			<span class="hljs-keyword">delete</span> props.icons;
			<span class="hljs-keyword">delete</span> props.showText;
			$( <span class="hljs-string">"&lt;button&gt;&lt;/button&gt;"</span>, props )
				.button( buttonOptions )
				.appendTo( that.uiButtonSet );
		});
		<span class="hljs-keyword">this</span>.uiDialog.addClass(<span class="hljs-string">"ui-dialog-buttons"</span>);
		<span class="hljs-keyword">this</span>.uiDialogButtonPane.appendTo( <span class="hljs-keyword">this</span>.uiDialog );
	},

	_makeDraggable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			options = <span class="hljs-keyword">this</span>.options;

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filteredUi</span><span class="hljs-params">( ui )</span> {</span>
			<span class="hljs-keyword">return</span> {
				position: ui.position,
				offset: ui.offset
			};
		}

		<span class="hljs-keyword">this</span>.uiDialog.draggable({
			cancel: <span class="hljs-string">".ui-dialog-content, .ui-dialog-titlebar-close"</span>,
			handle: <span class="hljs-string">".ui-dialog-titlebar"</span>,
			containment: <span class="hljs-string">"document"</span>,
			start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, ui )</span> {</span>
				$( <span class="hljs-keyword">this</span> ).addClass(<span class="hljs-string">"ui-dialog-dragging"</span>);
				that._blockFrames();
				that._trigger( <span class="hljs-string">"dragStart"</span>, event, filteredUi( ui ) );
			},
			drag: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, ui )</span> {</span>
				that._trigger( <span class="hljs-string">"drag"</span>, event, filteredUi( ui ) );
			},
			stop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, ui )</span> {</span>
				options.position = [
					ui.position.left - that.document.scrollLeft(),
					ui.position.top - that.document.scrollTop()
				];
				$( <span class="hljs-keyword">this</span> ).removeClass(<span class="hljs-string">"ui-dialog-dragging"</span>);
				that._unblockFrames();
				that._trigger( <span class="hljs-string">"dragStop"</span>, event, filteredUi( ui ) );
			}
		});
	},

	_makeResizable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			options = <span class="hljs-keyword">this</span>.options,
			handles = options.resizable,</pre></div></div>
            
        </li>
        
        
        <li id="section-387">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-387">&#182;</a>
              </div>
              <p>.ui-resizable has position: relative defined in the stylesheet
but dialogs have to use absolute or fixed positioning</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			position = <span class="hljs-keyword">this</span>.uiDialog.css(<span class="hljs-string">"position"</span>),
			resizeHandles = <span class="hljs-keyword">typeof</span> handles === <span class="hljs-string">"string"</span> ?
				handles	:
				<span class="hljs-string">"n,e,s,w,se,sw,ne,nw"</span>;

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filteredUi</span><span class="hljs-params">( ui )</span> {</span>
			<span class="hljs-keyword">return</span> {
				originalPosition: ui.originalPosition,
				originalSize: ui.originalSize,
				position: ui.position,
				size: ui.size
			};
		}

		<span class="hljs-keyword">this</span>.uiDialog.resizable({
			cancel: <span class="hljs-string">".ui-dialog-content"</span>,
			containment: <span class="hljs-string">"document"</span>,
			alsoResize: <span class="hljs-keyword">this</span>.element,
			maxWidth: options.maxWidth,
			maxHeight: options.maxHeight,
			minWidth: options.minWidth,
			minHeight: <span class="hljs-keyword">this</span>._minHeight(),
			handles: resizeHandles,
			start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, ui )</span> {</span>
				$( <span class="hljs-keyword">this</span> ).addClass(<span class="hljs-string">"ui-dialog-resizing"</span>);
				that._blockFrames();
				that._trigger( <span class="hljs-string">"resizeStart"</span>, event, filteredUi( ui ) );
			},
			resize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, ui )</span> {</span>
				that._trigger( <span class="hljs-string">"resize"</span>, event, filteredUi( ui ) );
			},
			stop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, ui )</span> {</span>
				options.height = $( <span class="hljs-keyword">this</span> ).height();
				options.width = $( <span class="hljs-keyword">this</span> ).width();
				$( <span class="hljs-keyword">this</span> ).removeClass(<span class="hljs-string">"ui-dialog-resizing"</span>);
				that._unblockFrames();
				that._trigger( <span class="hljs-string">"resizeStop"</span>, event, filteredUi( ui ) );
			}
		})
		.css( <span class="hljs-string">"position"</span>, position );
	},

	_minHeight: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>.options;

		<span class="hljs-keyword">return</span> options.height === <span class="hljs-string">"auto"</span> ?
			options.minHeight :
			<span class="hljs-built_in">Math</span>.min( options.minHeight, options.height );
	},

	_position: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-388">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-388">&#182;</a>
              </div>
              <p>Need to show the dialog to get the actual offset in the position plugin</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> isVisible = <span class="hljs-keyword">this</span>.uiDialog.is(<span class="hljs-string">":visible"</span>);
		<span class="hljs-keyword">if</span> ( !isVisible ) {
			<span class="hljs-keyword">this</span>.uiDialog.show();
		}
		<span class="hljs-keyword">this</span>.uiDialog.position( <span class="hljs-keyword">this</span>.options.position );
		<span class="hljs-keyword">if</span> ( !isVisible ) {
			<span class="hljs-keyword">this</span>.uiDialog.hide();
		}
	},

	_setOptions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			resize = <span class="hljs-literal">false</span>,
			resizableOptions = {};

		$.each( options, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
			that._setOption( key, value );

			<span class="hljs-keyword">if</span> ( key <span class="hljs-keyword">in</span> sizeRelatedOptions ) {
				resize = <span class="hljs-literal">true</span>;
			}
			<span class="hljs-keyword">if</span> ( key <span class="hljs-keyword">in</span> resizableRelatedOptions ) {
				resizableOptions[ key ] = value;
			}
		});

		<span class="hljs-keyword">if</span> ( resize ) {
			<span class="hljs-keyword">this</span>._size();
			<span class="hljs-keyword">this</span>._position();
		}
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.uiDialog.is(<span class="hljs-string">":data(ui-resizable)"</span>) ) {
			<span class="hljs-keyword">this</span>.uiDialog.resizable( <span class="hljs-string">"option"</span>, resizableOptions );
		}
	},

	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
		<span class="hljs-comment">/*jshint maxcomplexity:15*/</span>
		<span class="hljs-keyword">var</span> isDraggable, isResizable,
			uiDialog = <span class="hljs-keyword">this</span>.uiDialog;

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"dialogClass"</span> ) {
			uiDialog
				.removeClass( <span class="hljs-keyword">this</span>.options.dialogClass )
				.addClass( value );
		}

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"disabled"</span> ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">this</span>._super( key, value );

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"appendTo"</span> ) {
			<span class="hljs-keyword">this</span>.uiDialog.appendTo( <span class="hljs-keyword">this</span>._appendTo() );
		}

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"buttons"</span> ) {
			<span class="hljs-keyword">this</span>._createButtons();
		}

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"closeText"</span> ) {
			<span class="hljs-keyword">this</span>.uiDialogTitlebarClose.button({</pre></div></div>
            
        </li>
        
        
        <li id="section-389">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-389">&#182;</a>
              </div>
              <p>Ensure that we always pass a string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				label: <span class="hljs-string">""</span> + value
			});
		}

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"draggable"</span> ) {
			isDraggable = uiDialog.is(<span class="hljs-string">":data(ui-draggable)"</span>);
			<span class="hljs-keyword">if</span> ( isDraggable &amp;&amp; !value ) {
				uiDialog.draggable(<span class="hljs-string">"destroy"</span>);
			}

			<span class="hljs-keyword">if</span> ( !isDraggable &amp;&amp; value ) {
				<span class="hljs-keyword">this</span>._makeDraggable();
			}
		}

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"position"</span> ) {
			<span class="hljs-keyword">this</span>._position();
		}

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"resizable"</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-390">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-390">&#182;</a>
              </div>
              <p>currently resizable, becoming non-resizable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			isResizable = uiDialog.is(<span class="hljs-string">":data(ui-resizable)"</span>);
			<span class="hljs-keyword">if</span> ( isResizable &amp;&amp; !value ) {
				uiDialog.resizable(<span class="hljs-string">"destroy"</span>);
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-391">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-391">&#182;</a>
              </div>
              <p>currently resizable, changing handles</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( isResizable &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span> ) {
				uiDialog.resizable( <span class="hljs-string">"option"</span>, <span class="hljs-string">"handles"</span>, value );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-392">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-392">&#182;</a>
              </div>
              <p>currently non-resizable, becoming resizable</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( !isResizable &amp;&amp; value !== <span class="hljs-literal">false</span> ) {
				<span class="hljs-keyword">this</span>._makeResizable();
			}
		}

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"title"</span> ) {
			<span class="hljs-keyword">this</span>._title( <span class="hljs-keyword">this</span>.uiDialogTitlebar.find(<span class="hljs-string">".ui-dialog-title"</span>) );
		}
	},

	_size: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-393">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-393">&#182;</a>
              </div>
              <p>If the user has resized the dialog, the .ui-dialog and .ui-dialog-content
divs will both have width and height set, so we need to reset them</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> nonContentHeight, minContentHeight, maxContentHeight,
			options = <span class="hljs-keyword">this</span>.options;</pre></div></div>
            
        </li>
        
        
        <li id="section-394">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-394">&#182;</a>
              </div>
              <p>Reset content sizing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.element.show().css({
			width: <span class="hljs-string">"auto"</span>,
			minHeight: <span class="hljs-number">0</span>,
			maxHeight: <span class="hljs-string">"none"</span>,
			height: <span class="hljs-number">0</span>
		});

		<span class="hljs-keyword">if</span> ( options.minWidth &gt; options.width ) {
			options.width = options.minWidth;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-395">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-395">&#182;</a>
              </div>
              <p>reset wrapper sizing
determine the height of all the non-content elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		nonContentHeight = <span class="hljs-keyword">this</span>.uiDialog.css({
				height: <span class="hljs-string">"auto"</span>,
				width: options.width
			})
			.outerHeight();
		minContentHeight = <span class="hljs-built_in">Math</span>.max( <span class="hljs-number">0</span>, options.minHeight - nonContentHeight );
		maxContentHeight = <span class="hljs-keyword">typeof</span> options.maxHeight === <span class="hljs-string">"number"</span> ?
			<span class="hljs-built_in">Math</span>.max( <span class="hljs-number">0</span>, options.maxHeight - nonContentHeight ) :
			<span class="hljs-string">"none"</span>;

		<span class="hljs-keyword">if</span> ( options.height === <span class="hljs-string">"auto"</span> ) {
			<span class="hljs-keyword">this</span>.element.css({
				minHeight: minContentHeight,
				maxHeight: maxContentHeight,
				height: <span class="hljs-string">"auto"</span>
			});
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.element.height( <span class="hljs-built_in">Math</span>.max( <span class="hljs-number">0</span>, options.height - nonContentHeight ) );
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.uiDialog.is(<span class="hljs-string">":data(ui-resizable)"</span>) ) {
			<span class="hljs-keyword">this</span>.uiDialog.resizable( <span class="hljs-string">"option"</span>, <span class="hljs-string">"minHeight"</span>, <span class="hljs-keyword">this</span>._minHeight() );
		}
	},

	_blockFrames: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.iframeBlocks = <span class="hljs-keyword">this</span>.document.find( <span class="hljs-string">"iframe"</span> ).map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> iframe = $( <span class="hljs-keyword">this</span> );

			<span class="hljs-keyword">return</span> $( <span class="hljs-string">"&lt;div&gt;"</span> )
				.css({
					position: <span class="hljs-string">"absolute"</span>,
					width: iframe.outerWidth(),
					height: iframe.outerHeight()
				})
				.appendTo( iframe.parent() )
				.offset( iframe.offset() )[<span class="hljs-number">0</span>];
		});
	},

	_unblockFrames: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.iframeBlocks ) {
			<span class="hljs-keyword">this</span>.iframeBlocks.remove();
			<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.iframeBlocks;
		}
	},

	_allowInteraction: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">if</span> ( $( event.target ).closest(<span class="hljs-string">".ui-dialog"</span>).length ) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-396">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-396">&#182;</a>
              </div>
              <p>TODO: Remove hack when datepicker implements
the .ui-front logic (#8989)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">return</span> !!$( event.target ).closest(<span class="hljs-string">".ui-datepicker"</span>).length;
	},

	_createOverlay: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.options.modal ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			widgetFullName = <span class="hljs-keyword">this</span>.widgetFullName;
		<span class="hljs-keyword">if</span> ( !$.ui.dialog.overlayInstances ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-397">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-397">&#182;</a>
              </div>
              <p>Prevent use of anchors and inputs.
We use a delay in case the overlay is created from an
event that we’re going to be cancelling. (#2804)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-398">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-398">&#182;</a>
              </div>
              <p>Handle .dialog().dialog(“close”) (#4065)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( $.ui.dialog.overlayInstances ) {
					<span class="hljs-keyword">this</span>.document.bind( <span class="hljs-string">"focusin.dialog"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
						<span class="hljs-keyword">if</span> ( !that._allowInteraction( event ) ) {
							event.preventDefault();
							$(<span class="hljs-string">".ui-dialog:visible:last .ui-dialog-content"</span>)
								.data( widgetFullName )._focusTabbable();
						}
					});
				}
			});
		}

		<span class="hljs-keyword">this</span>.overlay = $(<span class="hljs-string">"&lt;div&gt;"</span>)
			.addClass(<span class="hljs-string">"ui-widget-overlay ui-front"</span>)
			.appendTo( <span class="hljs-keyword">this</span>._appendTo() );
		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.overlay, {
			mousedown: <span class="hljs-string">"_keepFocus"</span>
		});
		$.ui.dialog.overlayInstances++;
	},

	_destroyOverlay: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.options.modal ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.overlay ) {
			$.ui.dialog.overlayInstances--;

			<span class="hljs-keyword">if</span> ( !$.ui.dialog.overlayInstances ) {
				<span class="hljs-keyword">this</span>.document.unbind( <span class="hljs-string">"focusin.dialog"</span> );
			}
			<span class="hljs-keyword">this</span>.overlay.remove();
			<span class="hljs-keyword">this</span>.overlay = <span class="hljs-literal">null</span>;
		}
	}
});

$.ui.dialog.overlayInstances = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-399">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-399">&#182;</a>
              </div>
              <p>DEPRECATED</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">if</span> ( $.uiBackCompat !== <span class="hljs-literal">false</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-400">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-400">&#182;</a>
              </div>
              <p>position option with array notation
just override with old implementation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	$.widget( <span class="hljs-string">"ui.dialog"</span>, $.ui.dialog, {
		_position: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> position = <span class="hljs-keyword">this</span>.options.position,
				myAt = [],
				offset = [ <span class="hljs-number">0</span>, <span class="hljs-number">0</span> ],
				isVisible;

			<span class="hljs-keyword">if</span> ( position ) {
				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> position === <span class="hljs-string">"string"</span> || (<span class="hljs-keyword">typeof</span> position === <span class="hljs-string">"object"</span> &amp;&amp; <span class="hljs-string">"0"</span> <span class="hljs-keyword">in</span> position ) ) {
					myAt = position.split ? position.split(<span class="hljs-string">" "</span>) : [ position[<span class="hljs-number">0</span>], position[<span class="hljs-number">1</span>] ];
					<span class="hljs-keyword">if</span> ( myAt.length === <span class="hljs-number">1</span> ) {
						myAt[<span class="hljs-number">1</span>] = myAt[<span class="hljs-number">0</span>];
					}

					$.each( [ <span class="hljs-string">"left"</span>, <span class="hljs-string">"top"</span> ], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, offsetPosition )</span> {</span>
						<span class="hljs-keyword">if</span> ( +myAt[ i ] === myAt[ i ] ) {
							offset[ i ] = myAt[ i ];
							myAt[ i ] = offsetPosition;
						}
					});

					position = {
						my: myAt[<span class="hljs-number">0</span>] + (offset[<span class="hljs-number">0</span>] &lt; <span class="hljs-number">0</span> ? offset[<span class="hljs-number">0</span>] : <span class="hljs-string">"+"</span> + offset[<span class="hljs-number">0</span>]) + <span class="hljs-string">" "</span> +
							myAt[<span class="hljs-number">1</span>] + (offset[<span class="hljs-number">1</span>] &lt; <span class="hljs-number">0</span> ? offset[<span class="hljs-number">1</span>] : <span class="hljs-string">"+"</span> + offset[<span class="hljs-number">1</span>]),
						at: myAt.join(<span class="hljs-string">" "</span>)
					};
				}

				position = $.extend( {}, $.ui.dialog.prototype.options.position, position );
			} <span class="hljs-keyword">else</span> {
				position = $.ui.dialog.prototype.options.position;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-401">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-401">&#182;</a>
              </div>
              <p>need to show the dialog to get the actual offset in the position plugin</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			isVisible = <span class="hljs-keyword">this</span>.uiDialog.is(<span class="hljs-string">":visible"</span>);
			<span class="hljs-keyword">if</span> ( !isVisible ) {
				<span class="hljs-keyword">this</span>.uiDialog.show();
			}
			<span class="hljs-keyword">this</span>.uiDialog.position( position );
			<span class="hljs-keyword">if</span> ( !isVisible ) {
				<span class="hljs-keyword">this</span>.uiDialog.hide();
			}
		}
	});
}

}( jQuery ) );
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.widget( <span class="hljs-string">"ui.menu"</span>, {
	version: <span class="hljs-string">"1.10.3"</span>,
	defaultElement: <span class="hljs-string">"&lt;ul&gt;"</span>,
	delay: <span class="hljs-number">300</span>,
	options: {
		icons: {
			submenu: <span class="hljs-string">"ui-icon-carat-1-e"</span>
		},
		menus: <span class="hljs-string">"ul"</span>,
		position: {
			my: <span class="hljs-string">"left top"</span>,
			at: <span class="hljs-string">"right top"</span>
		},
		role: <span class="hljs-string">"menu"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-402">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-402">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		blur: <span class="hljs-literal">null</span>,
		focus: <span class="hljs-literal">null</span>,
		select: <span class="hljs-literal">null</span>
	},

	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.activeMenu = <span class="hljs-keyword">this</span>.element;</pre></div></div>
            
        </li>
        
        
        <li id="section-403">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-403">&#182;</a>
              </div>
              <p>flag used to prevent firing of the click handler
as the event bubbles up through nested menus</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.mouseHandled = <span class="hljs-literal">false</span>;
		<span class="hljs-keyword">this</span>.element
			.uniqueId()
			.addClass( <span class="hljs-string">"ui-menu ui-widget ui-widget-content ui-corner-all"</span> )
			.toggleClass( <span class="hljs-string">"ui-menu-icons"</span>, !!<span class="hljs-keyword">this</span>.element.find( <span class="hljs-string">".ui-icon"</span> ).length )
			.attr({
				role: <span class="hljs-keyword">this</span>.options.role,
				tabIndex: <span class="hljs-number">0</span>
			})</pre></div></div>
            
        </li>
        
        
        <li id="section-404">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-404">&#182;</a>
              </div>
              <p>need to catch all clicks on disabled menu
not possible through _on</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			.bind( <span class="hljs-string">"click"</span> + <span class="hljs-keyword">this</span>.eventNamespace, $.proxy(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.disabled ) {
					event.preventDefault();
				}
			}, <span class="hljs-keyword">this</span> ));

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.disabled ) {
			<span class="hljs-keyword">this</span>.element
				.addClass( <span class="hljs-string">"ui-state-disabled"</span> )
				.attr( <span class="hljs-string">"aria-disabled"</span>, <span class="hljs-string">"true"</span> );
		}

		<span class="hljs-keyword">this</span>._on({</pre></div></div>
            
        </li>
        
        
        <li id="section-405">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-405">&#182;</a>
              </div>
              <p>Prevent focus from sticking to links inside menu after clicking
them (focus should always stay on UL during navigation).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-string">"mousedown .ui-menu-item &gt; a"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				event.preventDefault();
			},
			<span class="hljs-string">"click .ui-state-disabled &gt; a"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				event.preventDefault();
			},
			<span class="hljs-string">"click .ui-menu-item:has(a)"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-keyword">var</span> target = $( event.target ).closest( <span class="hljs-string">".ui-menu-item"</span> );
				<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.mouseHandled &amp;&amp; target.not( <span class="hljs-string">".ui-state-disabled"</span> ).length ) {
					<span class="hljs-keyword">this</span>.mouseHandled = <span class="hljs-literal">true</span>;

					<span class="hljs-keyword">this</span>.select( event );</pre></div></div>
            
        </li>
        
        
        <li id="section-406">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-406">&#182;</a>
              </div>
              <p>Open submenu on click</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( target.has( <span class="hljs-string">".ui-menu"</span> ).length ) {
						<span class="hljs-keyword">this</span>.expand( event );
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.element.is( <span class="hljs-string">":focus"</span> ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-407">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-407">&#182;</a>
              </div>
              <p>Redirect focus to the menu</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">this</span>.element.trigger( <span class="hljs-string">"focus"</span>, [ <span class="hljs-literal">true</span> ] );</pre></div></div>
            
        </li>
        
        
        <li id="section-408">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-408">&#182;</a>
              </div>
              <p>If the active item is on the top level, let it stay active.
Otherwise, blur the active item since it is no longer visible.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.active &amp;&amp; <span class="hljs-keyword">this</span>.active.parents( <span class="hljs-string">".ui-menu"</span> ).length === <span class="hljs-number">1</span> ) {
							clearTimeout( <span class="hljs-keyword">this</span>.timer );
						}
					}
				}
			},
			<span class="hljs-string">"mouseenter .ui-menu-item"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-keyword">var</span> target = $( event.currentTarget );</pre></div></div>
            
        </li>
        
        
        <li id="section-409">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-409">&#182;</a>
              </div>
              <p>Remove ui-state-active class from siblings of the newly focused menu item
to avoid a jump caused by adjacent elements both having a class with a border</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				target.siblings().children( <span class="hljs-string">".ui-state-active"</span> ).removeClass( <span class="hljs-string">"ui-state-active"</span> );
				<span class="hljs-keyword">this</span>.focus( event, target );
			},
			mouseleave: <span class="hljs-string">"collapseAll"</span>,
			<span class="hljs-string">"mouseleave .ui-menu"</span>: <span class="hljs-string">"collapseAll"</span>,
			focus: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, keepActiveItem )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-410">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-410">&#182;</a>
              </div>
              <p>If there’s already an active item, keep it active
If not, activate the first item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">var</span> item = <span class="hljs-keyword">this</span>.active || <span class="hljs-keyword">this</span>.element.children( <span class="hljs-string">".ui-menu-item"</span> ).eq( <span class="hljs-number">0</span> );

				<span class="hljs-keyword">if</span> ( !keepActiveItem ) {
					<span class="hljs-keyword">this</span>.focus( event, item );
				}
			},
			blur: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">if</span> ( !$.contains( <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].activeElement ) ) {
						<span class="hljs-keyword">this</span>.collapseAll( event );
					}
				});
			},
			keydown: <span class="hljs-string">"_keydown"</span>
		});

		<span class="hljs-keyword">this</span>.refresh();</pre></div></div>
            
        </li>
        
        
        <li id="section-411">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-411">&#182;</a>
              </div>
              <p>Clicks outside of a menu collapse any open menus</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.document, {
			click: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-keyword">if</span> ( !$( event.target ).closest( <span class="hljs-string">".ui-menu"</span> ).length ) {
					<span class="hljs-keyword">this</span>.collapseAll( event );
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-412">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-412">&#182;</a>
              </div>
              <p>Reset the mouseHandled flag</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">this</span>.mouseHandled = <span class="hljs-literal">false</span>;
			}
		});
	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-413">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-413">&#182;</a>
              </div>
              <p>Destroy (sub)menus</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.element
			.removeAttr( <span class="hljs-string">"aria-activedescendant"</span> )
			.find( <span class="hljs-string">".ui-menu"</span> ).addBack()
				.removeClass( <span class="hljs-string">"ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons"</span> )
				.removeAttr( <span class="hljs-string">"role"</span> )
				.removeAttr( <span class="hljs-string">"tabIndex"</span> )
				.removeAttr( <span class="hljs-string">"aria-labelledby"</span> )
				.removeAttr( <span class="hljs-string">"aria-expanded"</span> )
				.removeAttr( <span class="hljs-string">"aria-hidden"</span> )
				.removeAttr( <span class="hljs-string">"aria-disabled"</span> )
				.removeUniqueId()
				.show();</pre></div></div>
            
        </li>
        
        
        <li id="section-414">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-414">&#182;</a>
              </div>
              <p>Destroy menu items</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.element.find( <span class="hljs-string">".ui-menu-item"</span> )
			.removeClass( <span class="hljs-string">"ui-menu-item"</span> )
			.removeAttr( <span class="hljs-string">"role"</span> )
			.removeAttr( <span class="hljs-string">"aria-disabled"</span> )
			.children( <span class="hljs-string">"a"</span> )
				.removeUniqueId()
				.removeClass( <span class="hljs-string">"ui-corner-all ui-state-hover"</span> )
				.removeAttr( <span class="hljs-string">"tabIndex"</span> )
				.removeAttr( <span class="hljs-string">"role"</span> )
				.removeAttr( <span class="hljs-string">"aria-haspopup"</span> )
				.children().each( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">var</span> elem = $( <span class="hljs-keyword">this</span> );
					<span class="hljs-keyword">if</span> ( elem.data( <span class="hljs-string">"ui-menu-submenu-carat"</span> ) ) {
						elem.remove();
					}
				});</pre></div></div>
            
        </li>
        
        
        <li id="section-415">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-415">&#182;</a>
              </div>
              <p>Destroy menu dividers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.element.find( <span class="hljs-string">".ui-menu-divider"</span> ).removeClass( <span class="hljs-string">"ui-menu-divider ui-widget-content"</span> );
	},

	_keydown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-comment">/*jshint maxcomplexity:20*/</span>
		<span class="hljs-keyword">var</span> match, prev, character, skip, regex,
			preventDefault = <span class="hljs-literal">true</span>;

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">escape</span><span class="hljs-params">( value )</span> {</span>
			<span class="hljs-keyword">return</span> value.replace( <span class="hljs-regexp">/[\-\[\]{}()*+?.,\\\^$|#\s]/g</span>, <span class="hljs-string">"\\$&amp;"</span> );
		}

		<span class="hljs-keyword">switch</span> ( event.keyCode ) {
		<span class="hljs-keyword">case</span> $.ui.keyCode.PAGE_UP:
			<span class="hljs-keyword">this</span>.previousPage( event );
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> $.ui.keyCode.PAGE_DOWN:
			<span class="hljs-keyword">this</span>.nextPage( event );
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> $.ui.keyCode.HOME:
			<span class="hljs-keyword">this</span>._move( <span class="hljs-string">"first"</span>, <span class="hljs-string">"first"</span>, event );
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> $.ui.keyCode.END:
			<span class="hljs-keyword">this</span>._move( <span class="hljs-string">"last"</span>, <span class="hljs-string">"last"</span>, event );
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> $.ui.keyCode.UP:
			<span class="hljs-keyword">this</span>.previous( event );
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> $.ui.keyCode.DOWN:
			<span class="hljs-keyword">this</span>.next( event );
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> $.ui.keyCode.LEFT:
			<span class="hljs-keyword">this</span>.collapse( event );
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> $.ui.keyCode.RIGHT:
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.active &amp;&amp; !<span class="hljs-keyword">this</span>.active.is( <span class="hljs-string">".ui-state-disabled"</span> ) ) {
				<span class="hljs-keyword">this</span>.expand( event );
			}
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> $.ui.keyCode.ENTER:
		<span class="hljs-keyword">case</span> $.ui.keyCode.SPACE:
			<span class="hljs-keyword">this</span>._activate( event );
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">case</span> $.ui.keyCode.ESCAPE:
			<span class="hljs-keyword">this</span>.collapse( event );
			<span class="hljs-keyword">break</span>;
		<span class="hljs-keyword">default</span>:
			preventDefault = <span class="hljs-literal">false</span>;
			prev = <span class="hljs-keyword">this</span>.previousFilter || <span class="hljs-string">""</span>;
			character = <span class="hljs-built_in">String</span>.fromCharCode( event.keyCode );
			skip = <span class="hljs-literal">false</span>;

			clearTimeout( <span class="hljs-keyword">this</span>.filterTimer );

			<span class="hljs-keyword">if</span> ( character === prev ) {
				skip = <span class="hljs-literal">true</span>;
			} <span class="hljs-keyword">else</span> {
				character = prev + character;
			}

			regex = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>( <span class="hljs-string">"^"</span> + <span class="hljs-built_in">escape</span>( character ), <span class="hljs-string">"i"</span> );
			match = <span class="hljs-keyword">this</span>.activeMenu.children( <span class="hljs-string">".ui-menu-item"</span> ).filter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">return</span> regex.test( $( <span class="hljs-keyword">this</span> ).children( <span class="hljs-string">"a"</span> ).text() );
			});
			match = skip &amp;&amp; match.index( <span class="hljs-keyword">this</span>.active.next() ) !== -<span class="hljs-number">1</span> ?
				<span class="hljs-keyword">this</span>.active.nextAll( <span class="hljs-string">".ui-menu-item"</span> ) :
				match;</pre></div></div>
            
        </li>
        
        
        <li id="section-416">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-416">&#182;</a>
              </div>
              <p>If no matches on the current filter, reset to the last character pressed
to move down the menu to the first item that starts with that character</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( !match.length ) {
				character = <span class="hljs-built_in">String</span>.fromCharCode( event.keyCode );
				regex = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>( <span class="hljs-string">"^"</span> + <span class="hljs-built_in">escape</span>( character ), <span class="hljs-string">"i"</span> );
				match = <span class="hljs-keyword">this</span>.activeMenu.children( <span class="hljs-string">".ui-menu-item"</span> ).filter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">return</span> regex.test( $( <span class="hljs-keyword">this</span> ).children( <span class="hljs-string">"a"</span> ).text() );
				});
			}

			<span class="hljs-keyword">if</span> ( match.length ) {
				<span class="hljs-keyword">this</span>.focus( event, match );
				<span class="hljs-keyword">if</span> ( match.length &gt; <span class="hljs-number">1</span> ) {
					<span class="hljs-keyword">this</span>.previousFilter = character;
					<span class="hljs-keyword">this</span>.filterTimer = <span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
						<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.previousFilter;
					}, <span class="hljs-number">1000</span> );
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.previousFilter;
				}
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.previousFilter;
			}
		}

		<span class="hljs-keyword">if</span> ( preventDefault ) {
			event.preventDefault();
		}
	},

	_activate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.active.is( <span class="hljs-string">".ui-state-disabled"</span> ) ) {
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.active.children( <span class="hljs-string">"a[aria-haspopup='true']"</span> ).length ) {
				<span class="hljs-keyword">this</span>.expand( event );
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>.select( event );
			}
		}
	},

	refresh: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> menus,
			icon = <span class="hljs-keyword">this</span>.options.icons.submenu,
			submenus = <span class="hljs-keyword">this</span>.element.find( <span class="hljs-keyword">this</span>.options.menus );</pre></div></div>
            
        </li>
        
        
        <li id="section-417">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-417">&#182;</a>
              </div>
              <p>Initialize nested menus</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		submenus.filter( <span class="hljs-string">":not(.ui-menu)"</span> )
			.addClass( <span class="hljs-string">"ui-menu ui-widget ui-widget-content ui-corner-all"</span> )
			.hide()
			.attr({
				role: <span class="hljs-keyword">this</span>.options.role,
				<span class="hljs-string">"aria-hidden"</span>: <span class="hljs-string">"true"</span>,
				<span class="hljs-string">"aria-expanded"</span>: <span class="hljs-string">"false"</span>
			})
			.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">var</span> menu = $( <span class="hljs-keyword">this</span> ),
					item = menu.prev( <span class="hljs-string">"a"</span> ),
					submenuCarat = $( <span class="hljs-string">"&lt;span&gt;"</span> )
						.addClass( <span class="hljs-string">"ui-menu-icon ui-icon "</span> + icon )
						.data( <span class="hljs-string">"ui-menu-submenu-carat"</span>, <span class="hljs-literal">true</span> );

				item
					.attr( <span class="hljs-string">"aria-haspopup"</span>, <span class="hljs-string">"true"</span> )
					.prepend( submenuCarat );
				menu.attr( <span class="hljs-string">"aria-labelledby"</span>, item.attr( <span class="hljs-string">"id"</span> ) );
			});

		menus = submenus.add( <span class="hljs-keyword">this</span>.element );</pre></div></div>
            
        </li>
        
        
        <li id="section-418">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-418">&#182;</a>
              </div>
              <p>Don’t refresh list items that are already adapted</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		menus.children( <span class="hljs-string">":not(.ui-menu-item):has(a)"</span> )
			.addClass( <span class="hljs-string">"ui-menu-item"</span> )
			.attr( <span class="hljs-string">"role"</span>, <span class="hljs-string">"presentation"</span> )
			.children( <span class="hljs-string">"a"</span> )
				.uniqueId()
				.addClass( <span class="hljs-string">"ui-corner-all"</span> )
				.attr({
					tabIndex: -<span class="hljs-number">1</span>,
					role: <span class="hljs-keyword">this</span>._itemRole()
				});</pre></div></div>
            
        </li>
        
        
        <li id="section-419">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-419">&#182;</a>
              </div>
              <p>Initialize unlinked menu-items containing spaces and/or dashes only as dividers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		menus.children( <span class="hljs-string">":not(.ui-menu-item)"</span> ).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> item = $( <span class="hljs-keyword">this</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-420">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-420">&#182;</a>
              </div>
              <p>hyphen, em dash, en dash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( !<span class="hljs-regexp">/[^\-\u2014\u2013\s]/</span>.test( item.text() ) ) {
				item.addClass( <span class="hljs-string">"ui-widget-content ui-menu-divider"</span> );
			}
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-421">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-421">&#182;</a>
              </div>
              <p>Add aria-disabled attribute to any disabled menu item</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		menus.children( <span class="hljs-string">".ui-state-disabled"</span> ).attr( <span class="hljs-string">"aria-disabled"</span>, <span class="hljs-string">"true"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-422">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-422">&#182;</a>
              </div>
              <p>If the active item has been removed, blur the menu</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.active &amp;&amp; !$.contains( <span class="hljs-keyword">this</span>.element[ <span class="hljs-number">0</span> ], <span class="hljs-keyword">this</span>.active[ <span class="hljs-number">0</span> ] ) ) {
			<span class="hljs-keyword">this</span>.blur();
		}
	},

	_itemRole: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> {
			menu: <span class="hljs-string">"menuitem"</span>,
			listbox: <span class="hljs-string">"option"</span>
		}[ <span class="hljs-keyword">this</span>.options.role ];
	},

	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"icons"</span> ) {
			<span class="hljs-keyword">this</span>.element.find( <span class="hljs-string">".ui-menu-icon"</span> )
				.removeClass( <span class="hljs-keyword">this</span>.options.icons.submenu )
				.addClass( value.submenu );
		}
		<span class="hljs-keyword">this</span>._super( key, value );
	},

	focus: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, item )</span> {</span>
		<span class="hljs-keyword">var</span> nested, focused;
		<span class="hljs-keyword">this</span>.blur( event, event &amp;&amp; event.type === <span class="hljs-string">"focus"</span> );

		<span class="hljs-keyword">this</span>._scrollIntoView( item );

		<span class="hljs-keyword">this</span>.active = item.first();
		focused = <span class="hljs-keyword">this</span>.active.children( <span class="hljs-string">"a"</span> ).addClass( <span class="hljs-string">"ui-state-focus"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-423">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-423">&#182;</a>
              </div>
              <p>Only update aria-activedescendant if there’s a role
otherwise we assume focus is managed elsewhere</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.role ) {
			<span class="hljs-keyword">this</span>.element.attr( <span class="hljs-string">"aria-activedescendant"</span>, focused.attr( <span class="hljs-string">"id"</span> ) );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-424">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-424">&#182;</a>
              </div>
              <p>Highlight active parent menu item, if any</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.active
			.parent()
			.closest( <span class="hljs-string">".ui-menu-item"</span> )
			.children( <span class="hljs-string">"a:first"</span> )
			.addClass( <span class="hljs-string">"ui-state-active"</span> );

		<span class="hljs-keyword">if</span> ( event &amp;&amp; event.type === <span class="hljs-string">"keydown"</span> ) {
			<span class="hljs-keyword">this</span>._close();
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.timer = <span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">this</span>._close();
			}, <span class="hljs-keyword">this</span>.delay );
		}

		nested = item.children( <span class="hljs-string">".ui-menu"</span> );
		<span class="hljs-keyword">if</span> ( nested.length &amp;&amp; ( <span class="hljs-regexp">/^mouse/</span>.test( event.type ) ) ) {
			<span class="hljs-keyword">this</span>._startOpening(nested);
		}
		<span class="hljs-keyword">this</span>.activeMenu = item.parent();

		<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"focus"</span>, event, { item: item } );
	},

	_scrollIntoView: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( item )</span> {</span>
		<span class="hljs-keyword">var</span> borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._hasScroll() ) {
			borderTop = <span class="hljs-built_in">parseFloat</span>( $.css( <span class="hljs-keyword">this</span>.activeMenu[<span class="hljs-number">0</span>], <span class="hljs-string">"borderTopWidth"</span> ) ) || <span class="hljs-number">0</span>;
			paddingTop = <span class="hljs-built_in">parseFloat</span>( $.css( <span class="hljs-keyword">this</span>.activeMenu[<span class="hljs-number">0</span>], <span class="hljs-string">"paddingTop"</span> ) ) || <span class="hljs-number">0</span>;
			offset = item.offset().top - <span class="hljs-keyword">this</span>.activeMenu.offset().top - borderTop - paddingTop;
			scroll = <span class="hljs-keyword">this</span>.activeMenu.scrollTop();
			elementHeight = <span class="hljs-keyword">this</span>.activeMenu.height();
			itemHeight = item.height();

			<span class="hljs-keyword">if</span> ( offset &lt; <span class="hljs-number">0</span> ) {
				<span class="hljs-keyword">this</span>.activeMenu.scrollTop( scroll + offset );
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( offset + itemHeight &gt; elementHeight ) {
				<span class="hljs-keyword">this</span>.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );
			}
		}
	},

	blur: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, fromFocus )</span> {</span>
		<span class="hljs-keyword">if</span> ( !fromFocus ) {
			clearTimeout( <span class="hljs-keyword">this</span>.timer );
		}

		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.active ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">this</span>.active.children( <span class="hljs-string">"a"</span> ).removeClass( <span class="hljs-string">"ui-state-focus"</span> );
		<span class="hljs-keyword">this</span>.active = <span class="hljs-literal">null</span>;

		<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"blur"</span>, event, { item: <span class="hljs-keyword">this</span>.active } );
	},

	_startOpening: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( submenu )</span> {</span>
		clearTimeout( <span class="hljs-keyword">this</span>.timer );</pre></div></div>
            
        </li>
        
        
        <li id="section-425">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-425">&#182;</a>
              </div>
              <p>Don’t open if already open fixes a Firefox bug that caused a .5 pixel
shift in the submenu position when mousing over the carat icon</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( submenu.attr( <span class="hljs-string">"aria-hidden"</span> ) !== <span class="hljs-string">"true"</span> ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">this</span>.timer = <span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">this</span>._close();
			<span class="hljs-keyword">this</span>._open( submenu );
		}, <span class="hljs-keyword">this</span>.delay );
	},

	_open: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( submenu )</span> {</span>
		<span class="hljs-keyword">var</span> position = $.extend({
			of: <span class="hljs-keyword">this</span>.active
		}, <span class="hljs-keyword">this</span>.options.position );

		clearTimeout( <span class="hljs-keyword">this</span>.timer );
		<span class="hljs-keyword">this</span>.element.find( <span class="hljs-string">".ui-menu"</span> ).not( submenu.parents( <span class="hljs-string">".ui-menu"</span> ) )
			.hide()
			.attr( <span class="hljs-string">"aria-hidden"</span>, <span class="hljs-string">"true"</span> );

		submenu
			.show()
			.removeAttr( <span class="hljs-string">"aria-hidden"</span> )
			.attr( <span class="hljs-string">"aria-expanded"</span>, <span class="hljs-string">"true"</span> )
			.position( position );
	},

	collapseAll: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, all )</span> {</span>
		clearTimeout( <span class="hljs-keyword">this</span>.timer );
		<span class="hljs-keyword">this</span>.timer = <span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-426">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-426">&#182;</a>
              </div>
              <p>If we were passed an event, look for the submenu that contains the event</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">var</span> currentMenu = all ? <span class="hljs-keyword">this</span>.element :
				$( event &amp;&amp; event.target ).closest( <span class="hljs-keyword">this</span>.element.find( <span class="hljs-string">".ui-menu"</span> ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-427">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-427">&#182;</a>
              </div>
              <p>If we found no valid submenu ancestor, use the main menu to close all sub menus anyway</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( !currentMenu.length ) {
				currentMenu = <span class="hljs-keyword">this</span>.element;
			}

			<span class="hljs-keyword">this</span>._close( currentMenu );

			<span class="hljs-keyword">this</span>.blur( event );
			<span class="hljs-keyword">this</span>.activeMenu = currentMenu;
		}, <span class="hljs-keyword">this</span>.delay );
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-428">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-428">&#182;</a>
              </div>
              <p>With no arguments, closes the currently active menu - if nothing is active
it closes all menus.  If passed an argument, it will search for menus BELOW</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_close: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( startMenu )</span> {</span>
		<span class="hljs-keyword">if</span> ( !startMenu ) {
			startMenu = <span class="hljs-keyword">this</span>.active ? <span class="hljs-keyword">this</span>.active.parent() : <span class="hljs-keyword">this</span>.element;
		}

		startMenu
			.find( <span class="hljs-string">".ui-menu"</span> )
				.hide()
				.attr( <span class="hljs-string">"aria-hidden"</span>, <span class="hljs-string">"true"</span> )
				.attr( <span class="hljs-string">"aria-expanded"</span>, <span class="hljs-string">"false"</span> )
			.end()
			.find( <span class="hljs-string">"a.ui-state-active"</span> )
				.removeClass( <span class="hljs-string">"ui-state-active"</span> );
	},

	collapse: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> newItem = <span class="hljs-keyword">this</span>.active &amp;&amp;
			<span class="hljs-keyword">this</span>.active.parent().closest( <span class="hljs-string">".ui-menu-item"</span>, <span class="hljs-keyword">this</span>.element );
		<span class="hljs-keyword">if</span> ( newItem &amp;&amp; newItem.length ) {
			<span class="hljs-keyword">this</span>._close();
			<span class="hljs-keyword">this</span>.focus( event, newItem );
		}
	},

	expand: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> newItem = <span class="hljs-keyword">this</span>.active &amp;&amp;
			<span class="hljs-keyword">this</span>.active
				.children( <span class="hljs-string">".ui-menu "</span> )
				.children( <span class="hljs-string">".ui-menu-item"</span> )
				.first();

		<span class="hljs-keyword">if</span> ( newItem &amp;&amp; newItem.length ) {
			<span class="hljs-keyword">this</span>._open( newItem.parent() );</pre></div></div>
            
        </li>
        
        
        <li id="section-429">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-429">&#182;</a>
              </div>
              <p>Delay so Firefox will not hide activedescendant change in expanding submenu from AT</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">this</span>.focus( event, newItem );
			});
		}
	},

	next: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">this</span>._move( <span class="hljs-string">"next"</span>, <span class="hljs-string">"first"</span>, event );
	},

	previous: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">this</span>._move( <span class="hljs-string">"prev"</span>, <span class="hljs-string">"last"</span>, event );
	},

	isFirstItem: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.active &amp;&amp; !<span class="hljs-keyword">this</span>.active.prevAll( <span class="hljs-string">".ui-menu-item"</span> ).length;
	},

	isLastItem: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.active &amp;&amp; !<span class="hljs-keyword">this</span>.active.nextAll( <span class="hljs-string">".ui-menu-item"</span> ).length;
	},

	_move: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( direction, filter, event )</span> {</span>
		<span class="hljs-keyword">var</span> next;
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.active ) {
			<span class="hljs-keyword">if</span> ( direction === <span class="hljs-string">"first"</span> || direction === <span class="hljs-string">"last"</span> ) {
				next = <span class="hljs-keyword">this</span>.active
					[ direction === <span class="hljs-string">"first"</span> ? <span class="hljs-string">"prevAll"</span> : <span class="hljs-string">"nextAll"</span> ]( <span class="hljs-string">".ui-menu-item"</span> )
					.eq( -<span class="hljs-number">1</span> );
			} <span class="hljs-keyword">else</span> {
				next = <span class="hljs-keyword">this</span>.active
					[ direction + <span class="hljs-string">"All"</span> ]( <span class="hljs-string">".ui-menu-item"</span> )
					.eq( <span class="hljs-number">0</span> );
			}
		}
		<span class="hljs-keyword">if</span> ( !next || !next.length || !<span class="hljs-keyword">this</span>.active ) {
			next = <span class="hljs-keyword">this</span>.activeMenu.children( <span class="hljs-string">".ui-menu-item"</span> )[ filter ]();
		}

		<span class="hljs-keyword">this</span>.focus( event, next );
	},

	nextPage: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> item, base, height;

		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.active ) {
			<span class="hljs-keyword">this</span>.next( event );
			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.isLastItem() ) {
			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._hasScroll() ) {
			base = <span class="hljs-keyword">this</span>.active.offset().top;
			height = <span class="hljs-keyword">this</span>.element.height();
			<span class="hljs-keyword">this</span>.active.nextAll( <span class="hljs-string">".ui-menu-item"</span> ).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				item = $( <span class="hljs-keyword">this</span> );
				<span class="hljs-keyword">return</span> item.offset().top - base - height &lt; <span class="hljs-number">0</span>;
			});

			<span class="hljs-keyword">this</span>.focus( event, item );
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.focus( event, <span class="hljs-keyword">this</span>.activeMenu.children( <span class="hljs-string">".ui-menu-item"</span> )
				[ !<span class="hljs-keyword">this</span>.active ? <span class="hljs-string">"first"</span> : <span class="hljs-string">"last"</span> ]() );
		}
	},

	previousPage: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> item, base, height;
		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.active ) {
			<span class="hljs-keyword">this</span>.next( event );
			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.isFirstItem() ) {
			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._hasScroll() ) {
			base = <span class="hljs-keyword">this</span>.active.offset().top;
			height = <span class="hljs-keyword">this</span>.element.height();
			<span class="hljs-keyword">this</span>.active.prevAll( <span class="hljs-string">".ui-menu-item"</span> ).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				item = $( <span class="hljs-keyword">this</span> );
				<span class="hljs-keyword">return</span> item.offset().top - base + height &gt; <span class="hljs-number">0</span>;
			});

			<span class="hljs-keyword">this</span>.focus( event, item );
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.focus( event, <span class="hljs-keyword">this</span>.activeMenu.children( <span class="hljs-string">".ui-menu-item"</span> ).first() );
		}
	},

	_hasScroll: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.element.outerHeight() &lt; <span class="hljs-keyword">this</span>.element.prop( <span class="hljs-string">"scrollHeight"</span> );
	},

	select: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-430">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-430">&#182;</a>
              </div>
              <p>TODO: It should never be possible to not have an active item at this
point, but the tests don’t trigger mouseenter before click.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.active = <span class="hljs-keyword">this</span>.active || $( event.target ).closest( <span class="hljs-string">".ui-menu-item"</span> );
		<span class="hljs-keyword">var</span> ui = { item: <span class="hljs-keyword">this</span>.active };
		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.active.has( <span class="hljs-string">".ui-menu"</span> ).length ) {
			<span class="hljs-keyword">this</span>.collapseAll( event, <span class="hljs-literal">true</span> );
		}
		<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"select"</span>, event, ui );
	}
});

}( jQuery ));
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.widget( <span class="hljs-string">"ui.progressbar"</span>, {
	version: <span class="hljs-string">"1.10.3"</span>,
	options: {
		max: <span class="hljs-number">100</span>,
		value: <span class="hljs-number">0</span>,

		change: <span class="hljs-literal">null</span>,
		complete: <span class="hljs-literal">null</span>
	},

	min: <span class="hljs-number">0</span>,

	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-431">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-431">&#182;</a>
              </div>
              <p>Constrain initial value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.oldValue = <span class="hljs-keyword">this</span>.options.value = <span class="hljs-keyword">this</span>._constrainedValue();

		<span class="hljs-keyword">this</span>.element
			.addClass( <span class="hljs-string">"ui-progressbar ui-widget ui-widget-content ui-corner-all"</span> )
			.attr({</pre></div></div>
            
        </li>
        
        
        <li id="section-432">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-432">&#182;</a>
              </div>
              <p>Only set static values, aria-valuenow and aria-valuemax are
set inside _refreshValue()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				role: <span class="hljs-string">"progressbar"</span>,
				<span class="hljs-string">"aria-valuemin"</span>: <span class="hljs-keyword">this</span>.min
			});

		<span class="hljs-keyword">this</span>.valueDiv = $( <span class="hljs-string">"&lt;div class='ui-progressbar-value ui-widget-header ui-corner-left'&gt;&lt;/div&gt;"</span> )
			.appendTo( <span class="hljs-keyword">this</span>.element );

		<span class="hljs-keyword">this</span>._refreshValue();
	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.element
			.removeClass( <span class="hljs-string">"ui-progressbar ui-widget ui-widget-content ui-corner-all"</span> )
			.removeAttr( <span class="hljs-string">"role"</span> )
			.removeAttr( <span class="hljs-string">"aria-valuemin"</span> )
			.removeAttr( <span class="hljs-string">"aria-valuemax"</span> )
			.removeAttr( <span class="hljs-string">"aria-valuenow"</span> );

		<span class="hljs-keyword">this</span>.valueDiv.remove();
	},

	value: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( newValue )</span> {</span>
		<span class="hljs-keyword">if</span> ( newValue === <span class="hljs-literal">undefined</span> ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.value;
		}

		<span class="hljs-keyword">this</span>.options.value = <span class="hljs-keyword">this</span>._constrainedValue( newValue );
		<span class="hljs-keyword">this</span>._refreshValue();
	},

	_constrainedValue: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( newValue )</span> {</span>
		<span class="hljs-keyword">if</span> ( newValue === <span class="hljs-literal">undefined</span> ) {
			newValue = <span class="hljs-keyword">this</span>.options.value;
		}

		<span class="hljs-keyword">this</span>.indeterminate = newValue === <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-433">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-433">&#182;</a>
              </div>
              <p>sanitize value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> newValue !== <span class="hljs-string">"number"</span> ) {
			newValue = <span class="hljs-number">0</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.indeterminate ? <span class="hljs-literal">false</span> :
			<span class="hljs-built_in">Math</span>.min( <span class="hljs-keyword">this</span>.options.max, <span class="hljs-built_in">Math</span>.max( <span class="hljs-keyword">this</span>.min, newValue ) );
	},

	_setOptions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-434">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-434">&#182;</a>
              </div>
              <p>Ensure “value” option is set after other values (like max)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> value = options.value;
		<span class="hljs-keyword">delete</span> options.value;

		<span class="hljs-keyword">this</span>._super( options );

		<span class="hljs-keyword">this</span>.options.value = <span class="hljs-keyword">this</span>._constrainedValue( value );
		<span class="hljs-keyword">this</span>._refreshValue();
	},

	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"max"</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-435">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-435">&#182;</a>
              </div>
              <p>Don’t allow a max less than min</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			value = <span class="hljs-built_in">Math</span>.max( <span class="hljs-keyword">this</span>.min, value );
		}

		<span class="hljs-keyword">this</span>._super( key, value );
	},

	_percentage: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.indeterminate ? <span class="hljs-number">100</span> : <span class="hljs-number">100</span> * ( <span class="hljs-keyword">this</span>.options.value - <span class="hljs-keyword">this</span>.min ) / ( <span class="hljs-keyword">this</span>.options.max - <span class="hljs-keyword">this</span>.min );
	},

	_refreshValue: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>.options.value,
			percentage = <span class="hljs-keyword">this</span>._percentage();

		<span class="hljs-keyword">this</span>.valueDiv
			.toggle( <span class="hljs-keyword">this</span>.indeterminate || value &gt; <span class="hljs-keyword">this</span>.min )
			.toggleClass( <span class="hljs-string">"ui-corner-right"</span>, value === <span class="hljs-keyword">this</span>.options.max )
			.width( percentage.toFixed(<span class="hljs-number">0</span>) + <span class="hljs-string">"%"</span> );

		<span class="hljs-keyword">this</span>.element.toggleClass( <span class="hljs-string">"ui-progressbar-indeterminate"</span>, <span class="hljs-keyword">this</span>.indeterminate );

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.indeterminate ) {
			<span class="hljs-keyword">this</span>.element.removeAttr( <span class="hljs-string">"aria-valuenow"</span> );
			<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.overlayDiv ) {
				<span class="hljs-keyword">this</span>.overlayDiv = $( <span class="hljs-string">"&lt;div class='ui-progressbar-overlay'&gt;&lt;/div&gt;"</span> ).appendTo( <span class="hljs-keyword">this</span>.valueDiv );
			}
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.element.attr({
				<span class="hljs-string">"aria-valuemax"</span>: <span class="hljs-keyword">this</span>.options.max,
				<span class="hljs-string">"aria-valuenow"</span>: value
			});
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.overlayDiv ) {
				<span class="hljs-keyword">this</span>.overlayDiv.remove();
				<span class="hljs-keyword">this</span>.overlayDiv = <span class="hljs-literal">null</span>;
			}
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.oldValue !== value ) {
			<span class="hljs-keyword">this</span>.oldValue = value;
			<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"change"</span> );
		}
		<span class="hljs-keyword">if</span> ( value === <span class="hljs-keyword">this</span>.options.max ) {
			<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"complete"</span> );
		}
	}
});

})( jQuery );
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-436">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-436">&#182;</a>
              </div>
              <p>number of pages in a slider
(how many times can you page up/down to go through the whole range)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> numPages = <span class="hljs-number">5</span>;

$.widget( <span class="hljs-string">"ui.slider"</span>, $.ui.mouse, {
	version: <span class="hljs-string">"1.10.3"</span>,
	widgetEventPrefix: <span class="hljs-string">"slide"</span>,

	options: {
		animate: <span class="hljs-literal">false</span>,
		distance: <span class="hljs-number">0</span>,
		max: <span class="hljs-number">100</span>,
		min: <span class="hljs-number">0</span>,
		orientation: <span class="hljs-string">"horizontal"</span>,
		range: <span class="hljs-literal">false</span>,
		step: <span class="hljs-number">1</span>,
		value: <span class="hljs-number">0</span>,
		values: <span class="hljs-literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-437">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-437">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		change: <span class="hljs-literal">null</span>,
		slide: <span class="hljs-literal">null</span>,
		start: <span class="hljs-literal">null</span>,
		stop: <span class="hljs-literal">null</span>
	},

	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>._keySliding = <span class="hljs-literal">false</span>;
		<span class="hljs-keyword">this</span>._mouseSliding = <span class="hljs-literal">false</span>;
		<span class="hljs-keyword">this</span>._animateOff = <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">this</span>._handleIndex = <span class="hljs-literal">null</span>;
		<span class="hljs-keyword">this</span>._detectOrientation();
		<span class="hljs-keyword">this</span>._mouseInit();

		<span class="hljs-keyword">this</span>.element
			.addClass( <span class="hljs-string">"ui-slider"</span> +
				<span class="hljs-string">" ui-slider-"</span> + <span class="hljs-keyword">this</span>.orientation +
				<span class="hljs-string">" ui-widget"</span> +
				<span class="hljs-string">" ui-widget-content"</span> +
				<span class="hljs-string">" ui-corner-all"</span>);

		<span class="hljs-keyword">this</span>._refresh();
		<span class="hljs-keyword">this</span>._setOption( <span class="hljs-string">"disabled"</span>, <span class="hljs-keyword">this</span>.options.disabled );

		<span class="hljs-keyword">this</span>._animateOff = <span class="hljs-literal">false</span>;
	},

	_refresh: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>._createRange();
		<span class="hljs-keyword">this</span>._createHandles();
		<span class="hljs-keyword">this</span>._setupEvents();
		<span class="hljs-keyword">this</span>._refreshValue();
	},

	_createHandles: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> i, handleCount,
			options = <span class="hljs-keyword">this</span>.options,
			existingHandles = <span class="hljs-keyword">this</span>.element.find( <span class="hljs-string">".ui-slider-handle"</span> ).addClass( <span class="hljs-string">"ui-state-default ui-corner-all"</span> ),
			handle = <span class="hljs-string">"&lt;a class='ui-slider-handle ui-state-default ui-corner-all' href='#'&gt;&lt;/a&gt;"</span>,
			handles = [];

		handleCount = ( options.values &amp;&amp; options.values.length ) || <span class="hljs-number">1</span>;

		<span class="hljs-keyword">if</span> ( existingHandles.length &gt; handleCount ) {
			existingHandles.slice( handleCount ).remove();
			existingHandles = existingHandles.slice( <span class="hljs-number">0</span>, handleCount );
		}

		<span class="hljs-keyword">for</span> ( i = existingHandles.length; i &lt; handleCount; i++ ) {
			handles.push( handle );
		}

		<span class="hljs-keyword">this</span>.handles = existingHandles.add( $( handles.join( <span class="hljs-string">""</span> ) ).appendTo( <span class="hljs-keyword">this</span>.element ) );

		<span class="hljs-keyword">this</span>.handle = <span class="hljs-keyword">this</span>.handles.eq( <span class="hljs-number">0</span> );

		<span class="hljs-keyword">this</span>.handles.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i )</span> {</span>
			$( <span class="hljs-keyword">this</span> ).data( <span class="hljs-string">"ui-slider-handle-index"</span>, i );
		});
	},

	_createRange: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>.options,
			classes = <span class="hljs-string">""</span>;

		<span class="hljs-keyword">if</span> ( options.range ) {
			<span class="hljs-keyword">if</span> ( options.range === <span class="hljs-literal">true</span> ) {
				<span class="hljs-keyword">if</span> ( !options.values ) {
					options.values = [ <span class="hljs-keyword">this</span>._valueMin(), <span class="hljs-keyword">this</span>._valueMin() ];
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( options.values.length &amp;&amp; options.values.length !== <span class="hljs-number">2</span> ) {
					options.values = [ options.values[<span class="hljs-number">0</span>], options.values[<span class="hljs-number">0</span>] ];
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( $.isArray( options.values ) ) {
					options.values = options.values.slice(<span class="hljs-number">0</span>);
				}
			}

			<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.range || !<span class="hljs-keyword">this</span>.range.length ) {
				<span class="hljs-keyword">this</span>.range = $( <span class="hljs-string">"&lt;div&gt;&lt;/div&gt;"</span> )
					.appendTo( <span class="hljs-keyword">this</span>.element );

				classes = <span class="hljs-string">"ui-slider-range"</span> +</pre></div></div>
            
        </li>
        
        
        <li id="section-438">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-438">&#182;</a>
              </div>
              <p>note: this isn’t the most fittingly semantic framework class for this element,
but worked best visually with a variety of themes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-string">" ui-widget-header ui-corner-all"</span>;
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>.range.removeClass( <span class="hljs-string">"ui-slider-range-min ui-slider-range-max"</span> )</pre></div></div>
            
        </li>
        
        
        <li id="section-439">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-439">&#182;</a>
              </div>
              <p>Handle range switching from true to min/max</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					.css({
						<span class="hljs-string">"left"</span>: <span class="hljs-string">""</span>,
						<span class="hljs-string">"bottom"</span>: <span class="hljs-string">""</span>
					});
			}

			<span class="hljs-keyword">this</span>.range.addClass( classes +
				( ( options.range === <span class="hljs-string">"min"</span> || options.range === <span class="hljs-string">"max"</span> ) ? <span class="hljs-string">" ui-slider-range-"</span> + options.range : <span class="hljs-string">""</span> ) );
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.range = $([]);
		}
	},

	_setupEvents: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> elements = <span class="hljs-keyword">this</span>.handles.add( <span class="hljs-keyword">this</span>.range ).filter( <span class="hljs-string">"a"</span> );
		<span class="hljs-keyword">this</span>._off( elements );
		<span class="hljs-keyword">this</span>._on( elements, <span class="hljs-keyword">this</span>._handleEvents );
		<span class="hljs-keyword">this</span>._hoverable( elements );
		<span class="hljs-keyword">this</span>._focusable( elements );
	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.handles.remove();
		<span class="hljs-keyword">this</span>.range.remove();

		<span class="hljs-keyword">this</span>.element
			.removeClass( <span class="hljs-string">"ui-slider"</span> +
				<span class="hljs-string">" ui-slider-horizontal"</span> +
				<span class="hljs-string">" ui-slider-vertical"</span> +
				<span class="hljs-string">" ui-widget"</span> +
				<span class="hljs-string">" ui-widget-content"</span> +
				<span class="hljs-string">" ui-corner-all"</span> );

		<span class="hljs-keyword">this</span>._mouseDestroy();
	},

	_mouseCapture: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,
			that = <span class="hljs-keyword">this</span>,
			o = <span class="hljs-keyword">this</span>.options;

		<span class="hljs-keyword">if</span> ( o.disabled ) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		<span class="hljs-keyword">this</span>.elementSize = {
			width: <span class="hljs-keyword">this</span>.element.outerWidth(),
			height: <span class="hljs-keyword">this</span>.element.outerHeight()
		};
		<span class="hljs-keyword">this</span>.elementOffset = <span class="hljs-keyword">this</span>.element.offset();

		position = { x: event.pageX, y: event.pageY };
		normValue = <span class="hljs-keyword">this</span>._normValueFromMouse( position );
		distance = <span class="hljs-keyword">this</span>._valueMax() - <span class="hljs-keyword">this</span>._valueMin() + <span class="hljs-number">1</span>;
		<span class="hljs-keyword">this</span>.handles.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i )</span> {</span>
			<span class="hljs-keyword">var</span> thisDistance = <span class="hljs-built_in">Math</span>.abs( normValue - that.values(i) );
			<span class="hljs-keyword">if</span> (( distance &gt; thisDistance ) ||
				( distance === thisDistance &amp;&amp;
					(i === that._lastChangedValue || that.values(i) === o.min ))) {
				distance = thisDistance;
				closestHandle = $( <span class="hljs-keyword">this</span> );
				index = i;
			}
		});

		allowed = <span class="hljs-keyword">this</span>._start( event, index );
		<span class="hljs-keyword">if</span> ( allowed === <span class="hljs-literal">false</span> ) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}
		<span class="hljs-keyword">this</span>._mouseSliding = <span class="hljs-literal">true</span>;

		<span class="hljs-keyword">this</span>._handleIndex = index;

		closestHandle
			.addClass( <span class="hljs-string">"ui-state-active"</span> )
			.focus();

		offset = closestHandle.offset();
		mouseOverHandle = !$( event.target ).parents().addBack().is( <span class="hljs-string">".ui-slider-handle"</span> );
		<span class="hljs-keyword">this</span>._clickOffset = mouseOverHandle ? { left: <span class="hljs-number">0</span>, top: <span class="hljs-number">0</span> } : {
			left: event.pageX - offset.left - ( closestHandle.width() / <span class="hljs-number">2</span> ),
			top: event.pageY - offset.top -
				( closestHandle.height() / <span class="hljs-number">2</span> ) -
				( <span class="hljs-built_in">parseInt</span>( closestHandle.css(<span class="hljs-string">"borderTopWidth"</span>), <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span> ) -
				( <span class="hljs-built_in">parseInt</span>( closestHandle.css(<span class="hljs-string">"borderBottomWidth"</span>), <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span>) +
				( <span class="hljs-built_in">parseInt</span>( closestHandle.css(<span class="hljs-string">"marginTop"</span>), <span class="hljs-number">10</span> ) || <span class="hljs-number">0</span>)
		};

		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.handles.hasClass( <span class="hljs-string">"ui-state-hover"</span> ) ) {
			<span class="hljs-keyword">this</span>._slide( event, index, normValue );
		}
		<span class="hljs-keyword">this</span>._animateOff = <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	},

	_mouseStart: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	},

	_mouseDrag: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> position = { x: event.pageX, y: event.pageY },
			normValue = <span class="hljs-keyword">this</span>._normValueFromMouse( position );

		<span class="hljs-keyword">this</span>._slide( event, <span class="hljs-keyword">this</span>._handleIndex, normValue );

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	},

	_mouseStop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">this</span>.handles.removeClass( <span class="hljs-string">"ui-state-active"</span> );
		<span class="hljs-keyword">this</span>._mouseSliding = <span class="hljs-literal">false</span>;

		<span class="hljs-keyword">this</span>._stop( event, <span class="hljs-keyword">this</span>._handleIndex );
		<span class="hljs-keyword">this</span>._change( event, <span class="hljs-keyword">this</span>._handleIndex );

		<span class="hljs-keyword">this</span>._handleIndex = <span class="hljs-literal">null</span>;
		<span class="hljs-keyword">this</span>._clickOffset = <span class="hljs-literal">null</span>;
		<span class="hljs-keyword">this</span>._animateOff = <span class="hljs-literal">false</span>;

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	},

	_detectOrientation: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.orientation = ( <span class="hljs-keyword">this</span>.options.orientation === <span class="hljs-string">"vertical"</span> ) ? <span class="hljs-string">"vertical"</span> : <span class="hljs-string">"horizontal"</span>;
	},

	_normValueFromMouse: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( position )</span> {</span>
		<span class="hljs-keyword">var</span> pixelTotal,
			pixelMouse,
			percentMouse,
			valueTotal,
			valueMouse;

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.orientation === <span class="hljs-string">"horizontal"</span> ) {
			pixelTotal = <span class="hljs-keyword">this</span>.elementSize.width;
			pixelMouse = position.x - <span class="hljs-keyword">this</span>.elementOffset.left - ( <span class="hljs-keyword">this</span>._clickOffset ? <span class="hljs-keyword">this</span>._clickOffset.left : <span class="hljs-number">0</span> );
		} <span class="hljs-keyword">else</span> {
			pixelTotal = <span class="hljs-keyword">this</span>.elementSize.height;
			pixelMouse = position.y - <span class="hljs-keyword">this</span>.elementOffset.top - ( <span class="hljs-keyword">this</span>._clickOffset ? <span class="hljs-keyword">this</span>._clickOffset.top : <span class="hljs-number">0</span> );
		}

		percentMouse = ( pixelMouse / pixelTotal );
		<span class="hljs-keyword">if</span> ( percentMouse &gt; <span class="hljs-number">1</span> ) {
			percentMouse = <span class="hljs-number">1</span>;
		}
		<span class="hljs-keyword">if</span> ( percentMouse &lt; <span class="hljs-number">0</span> ) {
			percentMouse = <span class="hljs-number">0</span>;
		}
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.orientation === <span class="hljs-string">"vertical"</span> ) {
			percentMouse = <span class="hljs-number">1</span> - percentMouse;
		}

		valueTotal = <span class="hljs-keyword">this</span>._valueMax() - <span class="hljs-keyword">this</span>._valueMin();
		valueMouse = <span class="hljs-keyword">this</span>._valueMin() + percentMouse * valueTotal;

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._trimAlignValue( valueMouse );
	},

	_start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, index )</span> {</span>
		<span class="hljs-keyword">var</span> uiHash = {
			handle: <span class="hljs-keyword">this</span>.handles[ index ],
			value: <span class="hljs-keyword">this</span>.value()
		};
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.values &amp;&amp; <span class="hljs-keyword">this</span>.options.values.length ) {
			uiHash.value = <span class="hljs-keyword">this</span>.values( index );
			uiHash.values = <span class="hljs-keyword">this</span>.values();
		}
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"start"</span>, event, uiHash );
	},

	_slide: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, index, newVal )</span> {</span>
		<span class="hljs-keyword">var</span> otherVal,
			newValues,
			allowed;

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.values &amp;&amp; <span class="hljs-keyword">this</span>.options.values.length ) {
			otherVal = <span class="hljs-keyword">this</span>.values( index ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span> );

			<span class="hljs-keyword">if</span> ( ( <span class="hljs-keyword">this</span>.options.values.length === <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-keyword">this</span>.options.range === <span class="hljs-literal">true</span> ) &amp;&amp;
					( ( index === <span class="hljs-number">0</span> &amp;&amp; newVal &gt; otherVal) || ( index === <span class="hljs-number">1</span> &amp;&amp; newVal &lt; otherVal ) )
				) {
				newVal = otherVal;
			}

			<span class="hljs-keyword">if</span> ( newVal !== <span class="hljs-keyword">this</span>.values( index ) ) {
				newValues = <span class="hljs-keyword">this</span>.values();
				newValues[ index ] = newVal;</pre></div></div>
            
        </li>
        
        
        <li id="section-440">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-440">&#182;</a>
              </div>
              <p>A slide can be canceled by returning false from the slide callback</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				allowed = <span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"slide"</span>, event, {
					handle: <span class="hljs-keyword">this</span>.handles[ index ],
					value: newVal,
					values: newValues
				} );
				otherVal = <span class="hljs-keyword">this</span>.values( index ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span> );
				<span class="hljs-keyword">if</span> ( allowed !== <span class="hljs-literal">false</span> ) {
					<span class="hljs-keyword">this</span>.values( index, newVal, <span class="hljs-literal">true</span> );
				}
			}
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">if</span> ( newVal !== <span class="hljs-keyword">this</span>.value() ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-441">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-441">&#182;</a>
              </div>
              <p>A slide can be canceled by returning false from the slide callback</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				allowed = <span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"slide"</span>, event, {
					handle: <span class="hljs-keyword">this</span>.handles[ index ],
					value: newVal
				} );
				<span class="hljs-keyword">if</span> ( allowed !== <span class="hljs-literal">false</span> ) {
					<span class="hljs-keyword">this</span>.value( newVal );
				}
			}
		}
	},

	_stop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, index )</span> {</span>
		<span class="hljs-keyword">var</span> uiHash = {
			handle: <span class="hljs-keyword">this</span>.handles[ index ],
			value: <span class="hljs-keyword">this</span>.value()
		};
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.values &amp;&amp; <span class="hljs-keyword">this</span>.options.values.length ) {
			uiHash.value = <span class="hljs-keyword">this</span>.values( index );
			uiHash.values = <span class="hljs-keyword">this</span>.values();
		}

		<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"stop"</span>, event, uiHash );
	},

	_change: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, index )</span> {</span>
		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._keySliding &amp;&amp; !<span class="hljs-keyword">this</span>._mouseSliding ) {
			<span class="hljs-keyword">var</span> uiHash = {
				handle: <span class="hljs-keyword">this</span>.handles[ index ],
				value: <span class="hljs-keyword">this</span>.value()
			};
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.values &amp;&amp; <span class="hljs-keyword">this</span>.options.values.length ) {
				uiHash.value = <span class="hljs-keyword">this</span>.values( index );
				uiHash.values = <span class="hljs-keyword">this</span>.values();
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-442">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-442">&#182;</a>
              </div>
              <p>store the last changed value index for reference when handles overlap</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>._lastChangedValue = index;

			<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"change"</span>, event, uiHash );
		}
	},

	value: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( newValue )</span> {</span>
		<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">arguments</span>.length ) {
			<span class="hljs-keyword">this</span>.options.value = <span class="hljs-keyword">this</span>._trimAlignValue( newValue );
			<span class="hljs-keyword">this</span>._refreshValue();
			<span class="hljs-keyword">this</span>._change( <span class="hljs-literal">null</span>, <span class="hljs-number">0</span> );
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._value();
	},

	values: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index, newValue )</span> {</span>
		<span class="hljs-keyword">var</span> vals,
			newValues,
			i;

		<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> ) {
			<span class="hljs-keyword">this</span>.options.values[ index ] = <span class="hljs-keyword">this</span>._trimAlignValue( newValue );
			<span class="hljs-keyword">this</span>._refreshValue();
			<span class="hljs-keyword">this</span>._change( <span class="hljs-literal">null</span>, index );
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">arguments</span>.length ) {
			<span class="hljs-keyword">if</span> ( $.isArray( <span class="hljs-built_in">arguments</span>[ <span class="hljs-number">0</span> ] ) ) {
				vals = <span class="hljs-keyword">this</span>.options.values;
				newValues = <span class="hljs-built_in">arguments</span>[ <span class="hljs-number">0</span> ];
				<span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i &lt; vals.length; i += <span class="hljs-number">1</span> ) {
					vals[ i ] = <span class="hljs-keyword">this</span>._trimAlignValue( newValues[ i ] );
					<span class="hljs-keyword">this</span>._change( <span class="hljs-literal">null</span>, i );
				}
				<span class="hljs-keyword">this</span>._refreshValue();
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.values &amp;&amp; <span class="hljs-keyword">this</span>.options.values.length ) {
					<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._values( index );
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.value();
				}
			}
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._values();
		}
	},

	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
		<span class="hljs-keyword">var</span> i,
			valsLength = <span class="hljs-number">0</span>;

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"range"</span> &amp;&amp; <span class="hljs-keyword">this</span>.options.range === <span class="hljs-literal">true</span> ) {
			<span class="hljs-keyword">if</span> ( value === <span class="hljs-string">"min"</span> ) {
				<span class="hljs-keyword">this</span>.options.value = <span class="hljs-keyword">this</span>._values( <span class="hljs-number">0</span> );
				<span class="hljs-keyword">this</span>.options.values = <span class="hljs-literal">null</span>;
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( value === <span class="hljs-string">"max"</span> ) {
				<span class="hljs-keyword">this</span>.options.value = <span class="hljs-keyword">this</span>._values( <span class="hljs-keyword">this</span>.options.values.length-<span class="hljs-number">1</span> );
				<span class="hljs-keyword">this</span>.options.values = <span class="hljs-literal">null</span>;
			}
		}

		<span class="hljs-keyword">if</span> ( $.isArray( <span class="hljs-keyword">this</span>.options.values ) ) {
			valsLength = <span class="hljs-keyword">this</span>.options.values.length;
		}

		$.Widget.prototype._setOption.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );

		<span class="hljs-keyword">switch</span> ( key ) {
			<span class="hljs-keyword">case</span> <span class="hljs-string">"orientation"</span>:
				<span class="hljs-keyword">this</span>._detectOrientation();
				<span class="hljs-keyword">this</span>.element
					.removeClass( <span class="hljs-string">"ui-slider-horizontal ui-slider-vertical"</span> )
					.addClass( <span class="hljs-string">"ui-slider-"</span> + <span class="hljs-keyword">this</span>.orientation );
				<span class="hljs-keyword">this</span>._refreshValue();
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">"value"</span>:
				<span class="hljs-keyword">this</span>._animateOff = <span class="hljs-literal">true</span>;
				<span class="hljs-keyword">this</span>._refreshValue();
				<span class="hljs-keyword">this</span>._change( <span class="hljs-literal">null</span>, <span class="hljs-number">0</span> );
				<span class="hljs-keyword">this</span>._animateOff = <span class="hljs-literal">false</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">"values"</span>:
				<span class="hljs-keyword">this</span>._animateOff = <span class="hljs-literal">true</span>;
				<span class="hljs-keyword">this</span>._refreshValue();
				<span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i &lt; valsLength; i += <span class="hljs-number">1</span> ) {
					<span class="hljs-keyword">this</span>._change( <span class="hljs-literal">null</span>, i );
				}
				<span class="hljs-keyword">this</span>._animateOff = <span class="hljs-literal">false</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">"min"</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">"max"</span>:
				<span class="hljs-keyword">this</span>._animateOff = <span class="hljs-literal">true</span>;
				<span class="hljs-keyword">this</span>._refreshValue();
				<span class="hljs-keyword">this</span>._animateOff = <span class="hljs-literal">false</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">"range"</span>:
				<span class="hljs-keyword">this</span>._animateOff = <span class="hljs-literal">true</span>;
				<span class="hljs-keyword">this</span>._refresh();
				<span class="hljs-keyword">this</span>._animateOff = <span class="hljs-literal">false</span>;
				<span class="hljs-keyword">break</span>;
		}
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-443">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-443">&#182;</a>
              </div>
              <p>internal value getter
_value() returns value trimmed by min and max, aligned by step</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_value: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> val = <span class="hljs-keyword">this</span>.options.value;
		val = <span class="hljs-keyword">this</span>._trimAlignValue( val );

		<span class="hljs-keyword">return</span> val;
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-444">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-444">&#182;</a>
              </div>
              <p>internal values getter
_values() returns array of values trimmed by min and max, aligned by step
_values( index ) returns single value trimmed by min and max, aligned by step</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_values: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index )</span> {</span>
		<span class="hljs-keyword">var</span> val,
			vals,
			i;

		<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">arguments</span>.length ) {
			val = <span class="hljs-keyword">this</span>.options.values[ index ];
			val = <span class="hljs-keyword">this</span>._trimAlignValue( val );

			<span class="hljs-keyword">return</span> val;
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.values &amp;&amp; <span class="hljs-keyword">this</span>.options.values.length ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-445">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-445">&#182;</a>
              </div>
              <p>.slice() creates a copy of the array
this copy gets trimmed by min and max and then returned</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			vals = <span class="hljs-keyword">this</span>.options.values.slice();
			<span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i &lt; vals.length; i+= <span class="hljs-number">1</span>) {
				vals[ i ] = <span class="hljs-keyword">this</span>._trimAlignValue( vals[ i ] );
			}

			<span class="hljs-keyword">return</span> vals;
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">return</span> [];
		}
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-446">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-446">&#182;</a>
              </div>
              <p>returns the step-aligned value that val is closest to, between (inclusive) min and max</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_trimAlignValue: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( val )</span> {</span>
		<span class="hljs-keyword">if</span> ( val &lt;= <span class="hljs-keyword">this</span>._valueMin() ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._valueMin();
		}
		<span class="hljs-keyword">if</span> ( val &gt;= <span class="hljs-keyword">this</span>._valueMax() ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._valueMax();
		}
		<span class="hljs-keyword">var</span> step = ( <span class="hljs-keyword">this</span>.options.step &gt; <span class="hljs-number">0</span> ) ? <span class="hljs-keyword">this</span>.options.step : <span class="hljs-number">1</span>,
			valModStep = (val - <span class="hljs-keyword">this</span>._valueMin()) % step,
			alignValue = val - valModStep;

		<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">Math</span>.abs(valModStep) * <span class="hljs-number">2</span> &gt;= step ) {
			alignValue += ( valModStep &gt; <span class="hljs-number">0</span> ) ? step : ( -step );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-447">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-447">&#182;</a>
              </div>
              <p>Since JavaScript has problems with large floats, round
the final value to 5 digits after the decimal point (see #4124)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">return</span> <span class="hljs-built_in">parseFloat</span>( alignValue.toFixed(<span class="hljs-number">5</span>) );
	},

	_valueMin: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.min;
	},

	_valueMax: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.options.max;
	},

	_refreshValue: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> lastValPercent, valPercent, value, valueMin, valueMax,
			oRange = <span class="hljs-keyword">this</span>.options.range,
			o = <span class="hljs-keyword">this</span>.options,
			that = <span class="hljs-keyword">this</span>,
			animate = ( !<span class="hljs-keyword">this</span>._animateOff ) ? o.animate : <span class="hljs-literal">false</span>,
			_set = {};

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.values &amp;&amp; <span class="hljs-keyword">this</span>.options.values.length ) {
			<span class="hljs-keyword">this</span>.handles.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i )</span> {</span>
				valPercent = ( that.values(i) - that._valueMin() ) / ( that._valueMax() - that._valueMin() ) * <span class="hljs-number">100</span>;
				_set[ that.orientation === <span class="hljs-string">"horizontal"</span> ? <span class="hljs-string">"left"</span> : <span class="hljs-string">"bottom"</span> ] = valPercent + <span class="hljs-string">"%"</span>;
				$( <span class="hljs-keyword">this</span> ).stop( <span class="hljs-number">1</span>, <span class="hljs-number">1</span> )[ animate ? <span class="hljs-string">"animate"</span> : <span class="hljs-string">"css"</span> ]( _set, o.animate );
				<span class="hljs-keyword">if</span> ( that.options.range === <span class="hljs-literal">true</span> ) {
					<span class="hljs-keyword">if</span> ( that.orientation === <span class="hljs-string">"horizontal"</span> ) {
						<span class="hljs-keyword">if</span> ( i === <span class="hljs-number">0</span> ) {
							that.range.stop( <span class="hljs-number">1</span>, <span class="hljs-number">1</span> )[ animate ? <span class="hljs-string">"animate"</span> : <span class="hljs-string">"css"</span> ]( { left: valPercent + <span class="hljs-string">"%"</span> }, o.animate );
						}
						<span class="hljs-keyword">if</span> ( i === <span class="hljs-number">1</span> ) {
							that.range[ animate ? <span class="hljs-string">"animate"</span> : <span class="hljs-string">"css"</span> ]( { width: ( valPercent - lastValPercent ) + <span class="hljs-string">"%"</span> }, { queue: <span class="hljs-literal">false</span>, duration: o.animate } );
						}
					} <span class="hljs-keyword">else</span> {
						<span class="hljs-keyword">if</span> ( i === <span class="hljs-number">0</span> ) {
							that.range.stop( <span class="hljs-number">1</span>, <span class="hljs-number">1</span> )[ animate ? <span class="hljs-string">"animate"</span> : <span class="hljs-string">"css"</span> ]( { bottom: ( valPercent ) + <span class="hljs-string">"%"</span> }, o.animate );
						}
						<span class="hljs-keyword">if</span> ( i === <span class="hljs-number">1</span> ) {
							that.range[ animate ? <span class="hljs-string">"animate"</span> : <span class="hljs-string">"css"</span> ]( { height: ( valPercent - lastValPercent ) + <span class="hljs-string">"%"</span> }, { queue: <span class="hljs-literal">false</span>, duration: o.animate } );
						}
					}
				}
				lastValPercent = valPercent;
			});
		} <span class="hljs-keyword">else</span> {
			value = <span class="hljs-keyword">this</span>.value();
			valueMin = <span class="hljs-keyword">this</span>._valueMin();
			valueMax = <span class="hljs-keyword">this</span>._valueMax();
			valPercent = ( valueMax !== valueMin ) ?
					( value - valueMin ) / ( valueMax - valueMin ) * <span class="hljs-number">100</span> :
					<span class="hljs-number">0</span>;
			_set[ <span class="hljs-keyword">this</span>.orientation === <span class="hljs-string">"horizontal"</span> ? <span class="hljs-string">"left"</span> : <span class="hljs-string">"bottom"</span> ] = valPercent + <span class="hljs-string">"%"</span>;
			<span class="hljs-keyword">this</span>.handle.stop( <span class="hljs-number">1</span>, <span class="hljs-number">1</span> )[ animate ? <span class="hljs-string">"animate"</span> : <span class="hljs-string">"css"</span> ]( _set, o.animate );

			<span class="hljs-keyword">if</span> ( oRange === <span class="hljs-string">"min"</span> &amp;&amp; <span class="hljs-keyword">this</span>.orientation === <span class="hljs-string">"horizontal"</span> ) {
				<span class="hljs-keyword">this</span>.range.stop( <span class="hljs-number">1</span>, <span class="hljs-number">1</span> )[ animate ? <span class="hljs-string">"animate"</span> : <span class="hljs-string">"css"</span> ]( { width: valPercent + <span class="hljs-string">"%"</span> }, o.animate );
			}
			<span class="hljs-keyword">if</span> ( oRange === <span class="hljs-string">"max"</span> &amp;&amp; <span class="hljs-keyword">this</span>.orientation === <span class="hljs-string">"horizontal"</span> ) {
				<span class="hljs-keyword">this</span>.range[ animate ? <span class="hljs-string">"animate"</span> : <span class="hljs-string">"css"</span> ]( { width: ( <span class="hljs-number">100</span> - valPercent ) + <span class="hljs-string">"%"</span> }, { queue: <span class="hljs-literal">false</span>, duration: o.animate } );
			}
			<span class="hljs-keyword">if</span> ( oRange === <span class="hljs-string">"min"</span> &amp;&amp; <span class="hljs-keyword">this</span>.orientation === <span class="hljs-string">"vertical"</span> ) {
				<span class="hljs-keyword">this</span>.range.stop( <span class="hljs-number">1</span>, <span class="hljs-number">1</span> )[ animate ? <span class="hljs-string">"animate"</span> : <span class="hljs-string">"css"</span> ]( { height: valPercent + <span class="hljs-string">"%"</span> }, o.animate );
			}
			<span class="hljs-keyword">if</span> ( oRange === <span class="hljs-string">"max"</span> &amp;&amp; <span class="hljs-keyword">this</span>.orientation === <span class="hljs-string">"vertical"</span> ) {
				<span class="hljs-keyword">this</span>.range[ animate ? <span class="hljs-string">"animate"</span> : <span class="hljs-string">"css"</span> ]( { height: ( <span class="hljs-number">100</span> - valPercent ) + <span class="hljs-string">"%"</span> }, { queue: <span class="hljs-literal">false</span>, duration: o.animate } );
			}
		}
	},

	_handleEvents: {
		keydown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
			<span class="hljs-comment">/*jshint maxcomplexity:25*/</span>
			<span class="hljs-keyword">var</span> allowed, curVal, newVal, step,
				index = $( event.target ).data( <span class="hljs-string">"ui-slider-handle-index"</span> );

			<span class="hljs-keyword">switch</span> ( event.keyCode ) {
				<span class="hljs-keyword">case</span> $.ui.keyCode.HOME:
				<span class="hljs-keyword">case</span> $.ui.keyCode.END:
				<span class="hljs-keyword">case</span> $.ui.keyCode.PAGE_UP:
				<span class="hljs-keyword">case</span> $.ui.keyCode.PAGE_DOWN:
				<span class="hljs-keyword">case</span> $.ui.keyCode.UP:
				<span class="hljs-keyword">case</span> $.ui.keyCode.RIGHT:
				<span class="hljs-keyword">case</span> $.ui.keyCode.DOWN:
				<span class="hljs-keyword">case</span> $.ui.keyCode.LEFT:
					event.preventDefault();
					<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._keySliding ) {
						<span class="hljs-keyword">this</span>._keySliding = <span class="hljs-literal">true</span>;
						$( event.target ).addClass( <span class="hljs-string">"ui-state-active"</span> );
						allowed = <span class="hljs-keyword">this</span>._start( event, index );
						<span class="hljs-keyword">if</span> ( allowed === <span class="hljs-literal">false</span> ) {
							<span class="hljs-keyword">return</span>;
						}
					}
					<span class="hljs-keyword">break</span>;
			}

			step = <span class="hljs-keyword">this</span>.options.step;
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.values &amp;&amp; <span class="hljs-keyword">this</span>.options.values.length ) {
				curVal = newVal = <span class="hljs-keyword">this</span>.values( index );
			} <span class="hljs-keyword">else</span> {
				curVal = newVal = <span class="hljs-keyword">this</span>.value();
			}

			<span class="hljs-keyword">switch</span> ( event.keyCode ) {
				<span class="hljs-keyword">case</span> $.ui.keyCode.HOME:
					newVal = <span class="hljs-keyword">this</span>._valueMin();
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> $.ui.keyCode.END:
					newVal = <span class="hljs-keyword">this</span>._valueMax();
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> $.ui.keyCode.PAGE_UP:
					newVal = <span class="hljs-keyword">this</span>._trimAlignValue( curVal + ( (<span class="hljs-keyword">this</span>._valueMax() - <span class="hljs-keyword">this</span>._valueMin()) / numPages ) );
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> $.ui.keyCode.PAGE_DOWN:
					newVal = <span class="hljs-keyword">this</span>._trimAlignValue( curVal - ( (<span class="hljs-keyword">this</span>._valueMax() - <span class="hljs-keyword">this</span>._valueMin()) / numPages ) );
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> $.ui.keyCode.UP:
				<span class="hljs-keyword">case</span> $.ui.keyCode.RIGHT:
					<span class="hljs-keyword">if</span> ( curVal === <span class="hljs-keyword">this</span>._valueMax() ) {
						<span class="hljs-keyword">return</span>;
					}
					newVal = <span class="hljs-keyword">this</span>._trimAlignValue( curVal + step );
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> $.ui.keyCode.DOWN:
				<span class="hljs-keyword">case</span> $.ui.keyCode.LEFT:
					<span class="hljs-keyword">if</span> ( curVal === <span class="hljs-keyword">this</span>._valueMin() ) {
						<span class="hljs-keyword">return</span>;
					}
					newVal = <span class="hljs-keyword">this</span>._trimAlignValue( curVal - step );
					<span class="hljs-keyword">break</span>;
			}

			<span class="hljs-keyword">this</span>._slide( event, index, newVal );
		},
		click: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
			event.preventDefault();
		},
		keyup: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
			<span class="hljs-keyword">var</span> index = $( event.target ).data( <span class="hljs-string">"ui-slider-handle-index"</span> );

			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._keySliding ) {
				<span class="hljs-keyword">this</span>._keySliding = <span class="hljs-literal">false</span>;
				<span class="hljs-keyword">this</span>._stop( event, index );
				<span class="hljs-keyword">this</span>._change( event, index );
				$( event.target ).removeClass( <span class="hljs-string">"ui-state-active"</span> );
			}
		}
	}

});

}(jQuery));
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $ )</span> {</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">modifier</span><span class="hljs-params">( fn )</span> {</span>
	<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> previous = <span class="hljs-keyword">this</span>.element.val();
		fn.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
		<span class="hljs-keyword">this</span>._refresh();
		<span class="hljs-keyword">if</span> ( previous !== <span class="hljs-keyword">this</span>.element.val() ) {
			<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"change"</span> );
		}
	};
}

$.widget( <span class="hljs-string">"ui.spinner"</span>, {
	version: <span class="hljs-string">"1.10.3"</span>,
	defaultElement: <span class="hljs-string">"&lt;input&gt;"</span>,
	widgetEventPrefix: <span class="hljs-string">"spin"</span>,
	options: {
		culture: <span class="hljs-literal">null</span>,
		icons: {
			down: <span class="hljs-string">"ui-icon-triangle-1-s"</span>,
			up: <span class="hljs-string">"ui-icon-triangle-1-n"</span>
		},
		incremental: <span class="hljs-literal">true</span>,
		max: <span class="hljs-literal">null</span>,
		min: <span class="hljs-literal">null</span>,
		numberFormat: <span class="hljs-literal">null</span>,
		page: <span class="hljs-number">10</span>,
		step: <span class="hljs-number">1</span>,

		change: <span class="hljs-literal">null</span>,
		spin: <span class="hljs-literal">null</span>,
		start: <span class="hljs-literal">null</span>,
		stop: <span class="hljs-literal">null</span>
	},

	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-448">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-448">&#182;</a>
              </div>
              <p>handle string values that need to be parsed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._setOption( <span class="hljs-string">"max"</span>, <span class="hljs-keyword">this</span>.options.max );
		<span class="hljs-keyword">this</span>._setOption( <span class="hljs-string">"min"</span>, <span class="hljs-keyword">this</span>.options.min );
		<span class="hljs-keyword">this</span>._setOption( <span class="hljs-string">"step"</span>, <span class="hljs-keyword">this</span>.options.step );</pre></div></div>
            
        </li>
        
        
        <li id="section-449">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-449">&#182;</a>
              </div>
              <p>format the value, but don’t constrain</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._value( <span class="hljs-keyword">this</span>.element.val(), <span class="hljs-literal">true</span> );

		<span class="hljs-keyword">this</span>._draw();
		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>._events );
		<span class="hljs-keyword">this</span>._refresh();</pre></div></div>
            
        </li>
        
        
        <li id="section-450">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-450">&#182;</a>
              </div>
              <p>turning off autocomplete prevents the browser from remembering the
value when navigating through history, so we re-enable autocomplete
if the page is unloaded before the widget is destroyed. #7790</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.window, {
			beforeunload: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">this</span>.element.removeAttr( <span class="hljs-string">"autocomplete"</span> );
			}
		});
	},

	_getCreateOptions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> options = {},
			element = <span class="hljs-keyword">this</span>.element;

		$.each( [ <span class="hljs-string">"min"</span>, <span class="hljs-string">"max"</span>, <span class="hljs-string">"step"</span> ], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, option )</span> {</span>
			<span class="hljs-keyword">var</span> value = element.attr( option );
			<span class="hljs-keyword">if</span> ( value !== <span class="hljs-literal">undefined</span> &amp;&amp; value.length ) {
				options[ option ] = value;
			}
		});

		<span class="hljs-keyword">return</span> options;
	},

	_events: {
		keydown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._start( event ) &amp;&amp; <span class="hljs-keyword">this</span>._keydown( event ) ) {
				event.preventDefault();
			}
		},
		keyup: <span class="hljs-string">"_stop"</span>,
		focus: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">this</span>.previous = <span class="hljs-keyword">this</span>.element.val();
		},
		blur: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.cancelBlur ) {
				<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.cancelBlur;
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">this</span>._stop();
			<span class="hljs-keyword">this</span>._refresh();
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.previous !== <span class="hljs-keyword">this</span>.element.val() ) {
				<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"change"</span>, event );
			}
		},
		mousewheel: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, delta )</span> {</span>
			<span class="hljs-keyword">if</span> ( !delta ) {
				<span class="hljs-keyword">return</span>;
			}
			<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.spinning &amp;&amp; !<span class="hljs-keyword">this</span>._start( event ) ) {
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}

			<span class="hljs-keyword">this</span>._spin( (delta &gt; <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>) * <span class="hljs-keyword">this</span>.options.step, event );
			clearTimeout( <span class="hljs-keyword">this</span>.mousewheelTimer );
			<span class="hljs-keyword">this</span>.mousewheelTimer = <span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.spinning ) {
					<span class="hljs-keyword">this</span>._stop( event );
				}
			}, <span class="hljs-number">100</span> );
			event.preventDefault();
		},
		<span class="hljs-string">"mousedown .ui-spinner-button"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
			<span class="hljs-keyword">var</span> previous;</pre></div></div>
            
        </li>
        
        
        <li id="section-451">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-451">&#182;</a>
              </div>
              <p>We never want the buttons to have focus; whenever the user is
interacting with the spinner, the focus should be on the input.
If the input is focused then this.previous is properly set from
when the input first received focus. If the input is not focused
then we need to set this.previous based on the value before spinning.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			previous = <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].activeElement ?
				<span class="hljs-keyword">this</span>.previous : <span class="hljs-keyword">this</span>.element.val();
			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkFocus</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">var</span> isActive = <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>] === <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].activeElement;
				<span class="hljs-keyword">if</span> ( !isActive ) {
					<span class="hljs-keyword">this</span>.element.focus();
					<span class="hljs-keyword">this</span>.previous = previous;</pre></div></div>
            
        </li>
        
        
        <li id="section-452">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-452">&#182;</a>
              </div>
              <p>support: IE
IE sets focus asynchronously, so we need to check if focus
moved off of the input because the user clicked on the button.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
						<span class="hljs-keyword">this</span>.previous = previous;
					});
				}
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-453">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-453">&#182;</a>
              </div>
              <p>ensure focus is on (or stays on) the text field</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			event.preventDefault();
			checkFocus.call( <span class="hljs-keyword">this</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-454">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-454">&#182;</a>
              </div>
              <p>support: IE
IE doesn’t prevent moving focus even with event.preventDefault()
so we set a flag to know when we should ignore the blur event
and check (again) if focus moved off of the input.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>.cancelBlur = <span class="hljs-literal">true</span>;
			<span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.cancelBlur;
				checkFocus.call( <span class="hljs-keyword">this</span> );
			});

			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._start( event ) === <span class="hljs-literal">false</span> ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">this</span>._repeat( <span class="hljs-literal">null</span>, $( event.currentTarget ).hasClass( <span class="hljs-string">"ui-spinner-up"</span> ) ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>, event );
		},
		<span class="hljs-string">"mouseup .ui-spinner-button"</span>: <span class="hljs-string">"_stop"</span>,
		<span class="hljs-string">"mouseenter .ui-spinner-button"</span>: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-455">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-455">&#182;</a>
              </div>
              <p>button will add ui-state-active if mouse was down while mouseleave and kept down</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( !$( event.currentTarget ).hasClass( <span class="hljs-string">"ui-state-active"</span> ) ) {
				<span class="hljs-keyword">return</span>;
			}

			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._start( event ) === <span class="hljs-literal">false</span> ) {
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}
			<span class="hljs-keyword">this</span>._repeat( <span class="hljs-literal">null</span>, $( event.currentTarget ).hasClass( <span class="hljs-string">"ui-spinner-up"</span> ) ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>, event );
		},</pre></div></div>
            
        </li>
        
        
        <li id="section-456">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-456">&#182;</a>
              </div>
              <p>TODO: do we really want to consider this a stop?
shouldn’t we just stop the repeater and wait until mouseup before
we trigger the stop event?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-string">"mouseleave .ui-spinner-button"</span>: <span class="hljs-string">"_stop"</span>
	},

	_draw: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> uiSpinner = <span class="hljs-keyword">this</span>.uiSpinner = <span class="hljs-keyword">this</span>.element
			.addClass( <span class="hljs-string">"ui-spinner-input"</span> )
			.attr( <span class="hljs-string">"autocomplete"</span>, <span class="hljs-string">"off"</span> )
			.wrap( <span class="hljs-keyword">this</span>._uiSpinnerHtml() )
			.parent()</pre></div></div>
            
        </li>
        
        
        <li id="section-457">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-457">&#182;</a>
              </div>
              <p>add buttons</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				.append( <span class="hljs-keyword">this</span>._buttonHtml() );

		<span class="hljs-keyword">this</span>.element.attr( <span class="hljs-string">"role"</span>, <span class="hljs-string">"spinbutton"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-458">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-458">&#182;</a>
              </div>
              <p>button bindings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.buttons = uiSpinner.find( <span class="hljs-string">".ui-spinner-button"</span> )
			.attr( <span class="hljs-string">"tabIndex"</span>, -<span class="hljs-number">1</span> )
			.button()
			.removeClass( <span class="hljs-string">"ui-corner-all"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-459">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-459">&#182;</a>
              </div>
              <p>IE 6 doesn’t understand height: 50% for the buttons
unless the wrapper has an explicit height</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.buttons.height() &gt; <span class="hljs-built_in">Math</span>.ceil( uiSpinner.height() * <span class="hljs-number">0.5</span> ) &amp;&amp;
				uiSpinner.height() &gt; <span class="hljs-number">0</span> ) {
			uiSpinner.height( uiSpinner.height() );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-460">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-460">&#182;</a>
              </div>
              <p>disable spinner if element was already disabled</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.disabled ) {
			<span class="hljs-keyword">this</span>.disable();
		}
	},

	_keydown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>.options,
			keyCode = $.ui.keyCode;

		<span class="hljs-keyword">switch</span> ( event.keyCode ) {
		<span class="hljs-keyword">case</span> keyCode.UP:
			<span class="hljs-keyword">this</span>._repeat( <span class="hljs-literal">null</span>, <span class="hljs-number">1</span>, event );
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">case</span> keyCode.DOWN:
			<span class="hljs-keyword">this</span>._repeat( <span class="hljs-literal">null</span>, -<span class="hljs-number">1</span>, event );
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">case</span> keyCode.PAGE_UP:
			<span class="hljs-keyword">this</span>._repeat( <span class="hljs-literal">null</span>, options.page, event );
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">case</span> keyCode.PAGE_DOWN:
			<span class="hljs-keyword">this</span>._repeat( <span class="hljs-literal">null</span>, -options.page, event );
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	},

	_uiSpinnerHtml: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;span class='ui-spinner ui-widget ui-widget-content ui-corner-all'&gt;&lt;/span&gt;"</span>;
	},

	_buttonHtml: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-string">""</span> +
			<span class="hljs-string">"&lt;a class='ui-spinner-button ui-spinner-up ui-corner-tr'&gt;"</span> +
				<span class="hljs-string">"&lt;span class='ui-icon "</span> + <span class="hljs-keyword">this</span>.options.icons.up + <span class="hljs-string">"'&gt;&amp;#9650;&lt;/span&gt;"</span> +
			<span class="hljs-string">"&lt;/a&gt;"</span> +
			<span class="hljs-string">"&lt;a class='ui-spinner-button ui-spinner-down ui-corner-br'&gt;"</span> +
				<span class="hljs-string">"&lt;span class='ui-icon "</span> + <span class="hljs-keyword">this</span>.options.icons.down + <span class="hljs-string">"'&gt;&amp;#9660;&lt;/span&gt;"</span> +
			<span class="hljs-string">"&lt;/a&gt;"</span>;
	},

	_start: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.spinning &amp;&amp; <span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"start"</span>, event ) === <span class="hljs-literal">false</span> ) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.counter ) {
			<span class="hljs-keyword">this</span>.counter = <span class="hljs-number">1</span>;
		}
		<span class="hljs-keyword">this</span>.spinning = <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	},

	_repeat: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, steps, event )</span> {</span>
		i = i || <span class="hljs-number">500</span>;

		clearTimeout( <span class="hljs-keyword">this</span>.timer );
		<span class="hljs-keyword">this</span>.timer = <span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">this</span>._repeat( <span class="hljs-number">40</span>, steps, event );
		}, i );

		<span class="hljs-keyword">this</span>._spin( steps * <span class="hljs-keyword">this</span>.options.step, event );
	},

	_spin: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( step, event )</span> {</span>
		<span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>.value() || <span class="hljs-number">0</span>;

		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.counter ) {
			<span class="hljs-keyword">this</span>.counter = <span class="hljs-number">1</span>;
		}

		value = <span class="hljs-keyword">this</span>._adjustValue( value + step * <span class="hljs-keyword">this</span>._increment( <span class="hljs-keyword">this</span>.counter ) );

		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.spinning || <span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"spin"</span>, event, { value: value } ) !== <span class="hljs-literal">false</span>) {
			<span class="hljs-keyword">this</span>._value( value );
			<span class="hljs-keyword">this</span>.counter++;
		}
	},

	_increment: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i )</span> {</span>
		<span class="hljs-keyword">var</span> incremental = <span class="hljs-keyword">this</span>.options.incremental;

		<span class="hljs-keyword">if</span> ( incremental ) {
			<span class="hljs-keyword">return</span> $.isFunction( incremental ) ?
				incremental( i ) :
				<span class="hljs-built_in">Math</span>.floor( i*i*i/<span class="hljs-number">50000</span> - i*i/<span class="hljs-number">500</span> + <span class="hljs-number">17</span>*i/<span class="hljs-number">200</span> + <span class="hljs-number">1</span> );
		}

		<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
	},

	_precision: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> precision = <span class="hljs-keyword">this</span>._precisionOf( <span class="hljs-keyword">this</span>.options.step );
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.min !== <span class="hljs-literal">null</span> ) {
			precision = <span class="hljs-built_in">Math</span>.max( precision, <span class="hljs-keyword">this</span>._precisionOf( <span class="hljs-keyword">this</span>.options.min ) );
		}
		<span class="hljs-keyword">return</span> precision;
	},

	_precisionOf: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( num )</span> {</span>
		<span class="hljs-keyword">var</span> str = num.toString(),
			decimal = str.indexOf( <span class="hljs-string">"."</span> );
		<span class="hljs-keyword">return</span> decimal === -<span class="hljs-number">1</span> ? <span class="hljs-number">0</span> : str.length - decimal - <span class="hljs-number">1</span>;
	},

	_adjustValue: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( value )</span> {</span>
		<span class="hljs-keyword">var</span> base, aboveMin,
			options = <span class="hljs-keyword">this</span>.options;</pre></div></div>
            
        </li>
        
        
        <li id="section-461">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-461">&#182;</a>
              </div>
              <p>make sure we’re at a valid step</p>
<ul>
<li>find out where we are relative to the base (min or 0)</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>		base = options.min !== <span class="hljs-literal">null</span> ? options.min : <span class="hljs-number">0</span>;
		aboveMin = value - base;</pre></div></div>
            
        </li>
        
        
        <li id="section-462">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-462">&#182;</a>
              </div>
              <ul>
<li>round to the nearest step</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>		aboveMin = <span class="hljs-built_in">Math</span>.round(aboveMin / options.step) * options.step;</pre></div></div>
            
        </li>
        
        
        <li id="section-463">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-463">&#182;</a>
              </div>
              <ul>
<li>rounding is based on 0, so adjust back to our base</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>		value = base + aboveMin;</pre></div></div>
            
        </li>
        
        
        <li id="section-464">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-464">&#182;</a>
              </div>
              <p>fix precision from bad JS floating point math</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		value = <span class="hljs-built_in">parseFloat</span>( value.toFixed( <span class="hljs-keyword">this</span>._precision() ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-465">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-465">&#182;</a>
              </div>
              <p>clamp the value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( options.max !== <span class="hljs-literal">null</span> &amp;&amp; value &gt; options.max) {
			<span class="hljs-keyword">return</span> options.max;
		}
		<span class="hljs-keyword">if</span> ( options.min !== <span class="hljs-literal">null</span> &amp;&amp; value &lt; options.min ) {
			<span class="hljs-keyword">return</span> options.min;
		}

		<span class="hljs-keyword">return</span> value;
	},

	_stop: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.spinning ) {
			<span class="hljs-keyword">return</span>;
		}

		clearTimeout( <span class="hljs-keyword">this</span>.timer );
		clearTimeout( <span class="hljs-keyword">this</span>.mousewheelTimer );
		<span class="hljs-keyword">this</span>.counter = <span class="hljs-number">0</span>;
		<span class="hljs-keyword">this</span>.spinning = <span class="hljs-literal">false</span>;
		<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"stop"</span>, event );
	},

	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"culture"</span> || key === <span class="hljs-string">"numberFormat"</span> ) {
			<span class="hljs-keyword">var</span> prevValue = <span class="hljs-keyword">this</span>._parse( <span class="hljs-keyword">this</span>.element.val() );
			<span class="hljs-keyword">this</span>.options[ key ] = value;
			<span class="hljs-keyword">this</span>.element.val( <span class="hljs-keyword">this</span>._format( prevValue ) );
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"max"</span> || key === <span class="hljs-string">"min"</span> || key === <span class="hljs-string">"step"</span> ) {
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">"string"</span> ) {
				value = <span class="hljs-keyword">this</span>._parse( value );
			}
		}
		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"icons"</span> ) {
			<span class="hljs-keyword">this</span>.buttons.first().find( <span class="hljs-string">".ui-icon"</span> )
				.removeClass( <span class="hljs-keyword">this</span>.options.icons.up )
				.addClass( value.up );
			<span class="hljs-keyword">this</span>.buttons.last().find( <span class="hljs-string">".ui-icon"</span> )
				.removeClass( <span class="hljs-keyword">this</span>.options.icons.down )
				.addClass( value.down );
		}

		<span class="hljs-keyword">this</span>._super( key, value );

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"disabled"</span> ) {
			<span class="hljs-keyword">if</span> ( value ) {
				<span class="hljs-keyword">this</span>.element.prop( <span class="hljs-string">"disabled"</span>, <span class="hljs-literal">true</span> );
				<span class="hljs-keyword">this</span>.buttons.button( <span class="hljs-string">"disable"</span> );
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>.element.prop( <span class="hljs-string">"disabled"</span>, <span class="hljs-literal">false</span> );
				<span class="hljs-keyword">this</span>.buttons.button( <span class="hljs-string">"enable"</span> );
			}
		}
	},

	_setOptions: modifier(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span> {</span>
		<span class="hljs-keyword">this</span>._super( options );
		<span class="hljs-keyword">this</span>._value( <span class="hljs-keyword">this</span>.element.val() );
	}),

	_parse: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( val )</span> {</span>
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">"string"</span> &amp;&amp; val !== <span class="hljs-string">""</span> ) {
			val = window.Globalize &amp;&amp; <span class="hljs-keyword">this</span>.options.numberFormat ?
				Globalize.parseFloat( val, <span class="hljs-number">10</span>, <span class="hljs-keyword">this</span>.options.culture ) : +val;
		}
		<span class="hljs-keyword">return</span> val === <span class="hljs-string">""</span> || <span class="hljs-built_in">isNaN</span>( val ) ? <span class="hljs-literal">null</span> : val;
	},

	_format: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( value )</span> {</span>
		<span class="hljs-keyword">if</span> ( value === <span class="hljs-string">""</span> ) {
			<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
		}
		<span class="hljs-keyword">return</span> window.Globalize &amp;&amp; <span class="hljs-keyword">this</span>.options.numberFormat ?
			Globalize.format( value, <span class="hljs-keyword">this</span>.options.numberFormat, <span class="hljs-keyword">this</span>.options.culture ) :
			value;
	},

	_refresh: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.element.attr({
			<span class="hljs-string">"aria-valuemin"</span>: <span class="hljs-keyword">this</span>.options.min,
			<span class="hljs-string">"aria-valuemax"</span>: <span class="hljs-keyword">this</span>.options.max,</pre></div></div>
            
        </li>
        
        
        <li id="section-466">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-466">&#182;</a>
              </div>
              <p>TODO: what should we do with values that can’t be parsed?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-string">"aria-valuenow"</span>: <span class="hljs-keyword">this</span>._parse( <span class="hljs-keyword">this</span>.element.val() )
		});
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-467">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-467">&#182;</a>
              </div>
              <p>update the value without triggering change</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_value: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( value, allowAny )</span> {</span>
		<span class="hljs-keyword">var</span> parsed;
		<span class="hljs-keyword">if</span> ( value !== <span class="hljs-string">""</span> ) {
			parsed = <span class="hljs-keyword">this</span>._parse( value );
			<span class="hljs-keyword">if</span> ( parsed !== <span class="hljs-literal">null</span> ) {
				<span class="hljs-keyword">if</span> ( !allowAny ) {
					parsed = <span class="hljs-keyword">this</span>._adjustValue( parsed );
				}
				value = <span class="hljs-keyword">this</span>._format( parsed );
			}
		}
		<span class="hljs-keyword">this</span>.element.val( value );
		<span class="hljs-keyword">this</span>._refresh();
	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>.element
			.removeClass( <span class="hljs-string">"ui-spinner-input"</span> )
			.prop( <span class="hljs-string">"disabled"</span>, <span class="hljs-literal">false</span> )
			.removeAttr( <span class="hljs-string">"autocomplete"</span> )
			.removeAttr( <span class="hljs-string">"role"</span> )
			.removeAttr( <span class="hljs-string">"aria-valuemin"</span> )
			.removeAttr( <span class="hljs-string">"aria-valuemax"</span> )
			.removeAttr( <span class="hljs-string">"aria-valuenow"</span> );
		<span class="hljs-keyword">this</span>.uiSpinner.replaceWith( <span class="hljs-keyword">this</span>.element );
	},

	stepUp: modifier(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( steps )</span> {</span>
		<span class="hljs-keyword">this</span>._stepUp( steps );
	}),
	_stepUp: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( steps )</span> {</span>
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._start() ) {
			<span class="hljs-keyword">this</span>._spin( (steps || <span class="hljs-number">1</span>) * <span class="hljs-keyword">this</span>.options.step );
			<span class="hljs-keyword">this</span>._stop();
		}
	},

	stepDown: modifier(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( steps )</span> {</span>
		<span class="hljs-keyword">this</span>._stepDown( steps );
	}),
	_stepDown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( steps )</span> {</span>
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._start() ) {
			<span class="hljs-keyword">this</span>._spin( (steps || <span class="hljs-number">1</span>) * -<span class="hljs-keyword">this</span>.options.step );
			<span class="hljs-keyword">this</span>._stop();
		}
	},

	pageUp: modifier(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( pages )</span> {</span>
		<span class="hljs-keyword">this</span>._stepUp( (pages || <span class="hljs-number">1</span>) * <span class="hljs-keyword">this</span>.options.page );
	}),

	pageDown: modifier(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( pages )</span> {</span>
		<span class="hljs-keyword">this</span>._stepDown( (pages || <span class="hljs-number">1</span>) * <span class="hljs-keyword">this</span>.options.page );
	}),

	value: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( newVal )</span> {</span>
		<span class="hljs-keyword">if</span> ( !<span class="hljs-built_in">arguments</span>.length ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._parse( <span class="hljs-keyword">this</span>.element.val() );
		}
		modifier( <span class="hljs-keyword">this</span>._value ).call( <span class="hljs-keyword">this</span>, newVal );
	},

	widget: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.uiSpinner;
	}
});

}( jQuery ) );
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

<span class="hljs-keyword">var</span> tabId = <span class="hljs-number">0</span>,
	rhash = <span class="hljs-regexp">/#.*$/</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getNextTabId</span><span class="hljs-params">()</span> {</span>
	<span class="hljs-keyword">return</span> ++tabId;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isLocal</span><span class="hljs-params">( anchor )</span> {</span>
	<span class="hljs-keyword">return</span> anchor.hash.length &gt; <span class="hljs-number">1</span> &amp;&amp;
		<span class="hljs-built_in">decodeURIComponent</span>( anchor.href.replace( rhash, <span class="hljs-string">""</span> ) ) ===
			<span class="hljs-built_in">decodeURIComponent</span>( location.href.replace( rhash, <span class="hljs-string">""</span> ) );
}

$.widget( <span class="hljs-string">"ui.tabs"</span>, {
	version: <span class="hljs-string">"1.10.3"</span>,
	delay: <span class="hljs-number">300</span>,
	options: {
		active: <span class="hljs-literal">null</span>,
		collapsible: <span class="hljs-literal">false</span>,
		event: <span class="hljs-string">"click"</span>,
		heightStyle: <span class="hljs-string">"content"</span>,
		hide: <span class="hljs-literal">null</span>,
		show: <span class="hljs-literal">null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-468">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-468">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		activate: <span class="hljs-literal">null</span>,
		beforeActivate: <span class="hljs-literal">null</span>,
		beforeLoad: <span class="hljs-literal">null</span>,
		load: <span class="hljs-literal">null</span>
	},

	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			options = <span class="hljs-keyword">this</span>.options;

		<span class="hljs-keyword">this</span>.running = <span class="hljs-literal">false</span>;

		<span class="hljs-keyword">this</span>.element
			.addClass( <span class="hljs-string">"ui-tabs ui-widget ui-widget-content ui-corner-all"</span> )
			.toggleClass( <span class="hljs-string">"ui-tabs-collapsible"</span>, options.collapsible )</pre></div></div>
            
        </li>
        
        
        <li id="section-469">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-469">&#182;</a>
              </div>
              <p>Prevent users from focusing disabled tabs via click</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			.delegate( <span class="hljs-string">".ui-tabs-nav &gt; li"</span>, <span class="hljs-string">"mousedown"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-keyword">if</span> ( $( <span class="hljs-keyword">this</span> ).is( <span class="hljs-string">".ui-state-disabled"</span> ) ) {
					event.preventDefault();
				}
			})</pre></div></div>
            
        </li>
        
        
        <li id="section-470">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-470">&#182;</a>
              </div>
              <p>support: IE &lt;9
Preventing the default action in mousedown doesn’t prevent IE
from focusing the element, so if the anchor gets focused, blur.
We don’t have to worry about focusing the previously focused
element since clicking on a non-focusable element should focus
the body anyway.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			.delegate( <span class="hljs-string">".ui-tabs-anchor"</span>, <span class="hljs-string">"focus"</span> + <span class="hljs-keyword">this</span>.eventNamespace, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ( $( <span class="hljs-keyword">this</span> ).closest( <span class="hljs-string">"li"</span> ).is( <span class="hljs-string">".ui-state-disabled"</span> ) ) {
					<span class="hljs-keyword">this</span>.blur();
				}
			});

		<span class="hljs-keyword">this</span>._processTabs();
		options.active = <span class="hljs-keyword">this</span>._initialActive();</pre></div></div>
            
        </li>
        
        
        <li id="section-471">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-471">&#182;</a>
              </div>
              <p>Take disabling tabs via class attribute from HTML
into account and update option properly.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( $.isArray( options.disabled ) ) {
			options.disabled = $.unique( options.disabled.concat(
				$.map( <span class="hljs-keyword">this</span>.tabs.filter( <span class="hljs-string">".ui-state-disabled"</span> ), <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( li )</span> {</span>
					<span class="hljs-keyword">return</span> that.tabs.index( li );
				})
			) ).sort();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-472">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-472">&#182;</a>
              </div>
              <p>check for length avoids error when initializing empty list</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.active !== <span class="hljs-literal">false</span> &amp;&amp; <span class="hljs-keyword">this</span>.anchors.length ) {
			<span class="hljs-keyword">this</span>.active = <span class="hljs-keyword">this</span>._findActive( options.active );
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.active = $();
		}

		<span class="hljs-keyword">this</span>._refresh();

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.active.length ) {
			<span class="hljs-keyword">this</span>.load( options.active );
		}
	},

	_initialActive: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> active = <span class="hljs-keyword">this</span>.options.active,
			collapsible = <span class="hljs-keyword">this</span>.options.collapsible,
			locationHash = location.hash.substring( <span class="hljs-number">1</span> );

		<span class="hljs-keyword">if</span> ( active === <span class="hljs-literal">null</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-473">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-473">&#182;</a>
              </div>
              <p>check the fragment identifier in the URL</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( locationHash ) {
				<span class="hljs-keyword">this</span>.tabs.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, tab )</span> {</span>
					<span class="hljs-keyword">if</span> ( $( tab ).attr( <span class="hljs-string">"aria-controls"</span> ) === locationHash ) {
						active = i;
						<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
					}
				});
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-474">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-474">&#182;</a>
              </div>
              <p>check for a tab marked active via a class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( active === <span class="hljs-literal">null</span> ) {
				active = <span class="hljs-keyword">this</span>.tabs.index( <span class="hljs-keyword">this</span>.tabs.filter( <span class="hljs-string">".ui-tabs-active"</span> ) );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-475">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-475">&#182;</a>
              </div>
              <p>no active tab, set to false</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( active === <span class="hljs-literal">null</span> || active === -<span class="hljs-number">1</span> ) {
				active = <span class="hljs-keyword">this</span>.tabs.length ? <span class="hljs-number">0</span> : <span class="hljs-literal">false</span>;
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-476">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-476">&#182;</a>
              </div>
              <p>handle numbers: negative, out of range</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( active !== <span class="hljs-literal">false</span> ) {
			active = <span class="hljs-keyword">this</span>.tabs.index( <span class="hljs-keyword">this</span>.tabs.eq( active ) );
			<span class="hljs-keyword">if</span> ( active === -<span class="hljs-number">1</span> ) {
				active = collapsible ? <span class="hljs-literal">false</span> : <span class="hljs-number">0</span>;
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-477">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-477">&#182;</a>
              </div>
              <p>don’t allow collapsible: false and active: false</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( !collapsible &amp;&amp; active === <span class="hljs-literal">false</span> &amp;&amp; <span class="hljs-keyword">this</span>.anchors.length ) {
			active = <span class="hljs-number">0</span>;
		}

		<span class="hljs-keyword">return</span> active;
	},

	_getCreateEventData: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> {
			tab: <span class="hljs-keyword">this</span>.active,
			panel: !<span class="hljs-keyword">this</span>.active.length ? $() : <span class="hljs-keyword">this</span>._getPanelForTab( <span class="hljs-keyword">this</span>.active )
		};
	},

	_tabKeydown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-comment">/*jshint maxcomplexity:15*/</span>
		<span class="hljs-keyword">var</span> focusedTab = $( <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].activeElement ).closest( <span class="hljs-string">"li"</span> ),
			selectedIndex = <span class="hljs-keyword">this</span>.tabs.index( focusedTab ),
			goingForward = <span class="hljs-literal">true</span>;

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._handlePageNav( event ) ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">switch</span> ( event.keyCode ) {
			<span class="hljs-keyword">case</span> $.ui.keyCode.RIGHT:
			<span class="hljs-keyword">case</span> $.ui.keyCode.DOWN:
				selectedIndex++;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> $.ui.keyCode.UP:
			<span class="hljs-keyword">case</span> $.ui.keyCode.LEFT:
				goingForward = <span class="hljs-literal">false</span>;
				selectedIndex--;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> $.ui.keyCode.END:
				selectedIndex = <span class="hljs-keyword">this</span>.anchors.length - <span class="hljs-number">1</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> $.ui.keyCode.HOME:
				selectedIndex = <span class="hljs-number">0</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> $.ui.keyCode.SPACE:</pre></div></div>
            
        </li>
        
        
        <li id="section-478">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-478">&#182;</a>
              </div>
              <p>Activate only, no collapsing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				event.preventDefault();
				clearTimeout( <span class="hljs-keyword">this</span>.activating );
				<span class="hljs-keyword">this</span>._activate( selectedIndex );
				<span class="hljs-keyword">return</span>;
			<span class="hljs-keyword">case</span> $.ui.keyCode.ENTER:</pre></div></div>
            
        </li>
        
        
        <li id="section-479">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-479">&#182;</a>
              </div>
              <p>Toggle (cancel delayed activation, allow collapsing)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				event.preventDefault();
				clearTimeout( <span class="hljs-keyword">this</span>.activating );</pre></div></div>
            
        </li>
        
        
        <li id="section-480">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-480">&#182;</a>
              </div>
              <p>Determine if we should collapse or activate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">this</span>._activate( selectedIndex === <span class="hljs-keyword">this</span>.options.active ? <span class="hljs-literal">false</span> : selectedIndex );
				<span class="hljs-keyword">return</span>;
			<span class="hljs-keyword">default</span>:
				<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-481">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-481">&#182;</a>
              </div>
              <p>Focus the appropriate tab, based on which key was pressed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		event.preventDefault();
		clearTimeout( <span class="hljs-keyword">this</span>.activating );
		selectedIndex = <span class="hljs-keyword">this</span>._focusNextTab( selectedIndex, goingForward );</pre></div></div>
            
        </li>
        
        
        <li id="section-482">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-482">&#182;</a>
              </div>
              <p>Navigating with control key will prevent automatic activation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( !event.ctrlKey ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-483">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-483">&#182;</a>
              </div>
              <p>Update aria-selected immediately so that AT think the tab is already selected.
Otherwise AT may confuse the user by stating that they need to activate the tab,
but the tab will already be activated by the time the announcement finishes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			focusedTab.attr( <span class="hljs-string">"aria-selected"</span>, <span class="hljs-string">"false"</span> );
			<span class="hljs-keyword">this</span>.tabs.eq( selectedIndex ).attr( <span class="hljs-string">"aria-selected"</span>, <span class="hljs-string">"true"</span> );

			<span class="hljs-keyword">this</span>.activating = <span class="hljs-keyword">this</span>._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">this</span>.option( <span class="hljs-string">"active"</span>, selectedIndex );
			}, <span class="hljs-keyword">this</span>.delay );
		}
	},

	_panelKeydown: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._handlePageNav( event ) ) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-484">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-484">&#182;</a>
              </div>
              <p>Ctrl+up moves focus to the current tab</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( event.ctrlKey &amp;&amp; event.keyCode === $.ui.keyCode.UP ) {
			event.preventDefault();
			<span class="hljs-keyword">this</span>.active.focus();
		}
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-485">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-485">&#182;</a>
              </div>
              <p>Alt+page up/down moves focus to the previous/next tab (and activates)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_handlePageNav: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">if</span> ( event.altKey &amp;&amp; event.keyCode === $.ui.keyCode.PAGE_UP ) {
			<span class="hljs-keyword">this</span>._activate( <span class="hljs-keyword">this</span>._focusNextTab( <span class="hljs-keyword">this</span>.options.active - <span class="hljs-number">1</span>, <span class="hljs-literal">false</span> ) );
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		}
		<span class="hljs-keyword">if</span> ( event.altKey &amp;&amp; event.keyCode === $.ui.keyCode.PAGE_DOWN ) {
			<span class="hljs-keyword">this</span>._activate( <span class="hljs-keyword">this</span>._focusNextTab( <span class="hljs-keyword">this</span>.options.active + <span class="hljs-number">1</span>, <span class="hljs-literal">true</span> ) );
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		}
	},

	_findNextTab: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index, goingForward )</span> {</span>
		<span class="hljs-keyword">var</span> lastTabIndex = <span class="hljs-keyword">this</span>.tabs.length - <span class="hljs-number">1</span>;

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">constrain</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span> ( index &gt; lastTabIndex ) {
				index = <span class="hljs-number">0</span>;
			}
			<span class="hljs-keyword">if</span> ( index &lt; <span class="hljs-number">0</span> ) {
				index = lastTabIndex;
			}
			<span class="hljs-keyword">return</span> index;
		}

		<span class="hljs-keyword">while</span> ( $.inArray( constrain(), <span class="hljs-keyword">this</span>.options.disabled ) !== -<span class="hljs-number">1</span> ) {
			index = goingForward ? index + <span class="hljs-number">1</span> : index - <span class="hljs-number">1</span>;
		}

		<span class="hljs-keyword">return</span> index;
	},

	_focusNextTab: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index, goingForward )</span> {</span>
		index = <span class="hljs-keyword">this</span>._findNextTab( index, goingForward );
		<span class="hljs-keyword">this</span>.tabs.eq( index ).focus();
		<span class="hljs-keyword">return</span> index;
	},

	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"active"</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-486">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-486">&#182;</a>
              </div>
              <p>_activate() will handle invalid values and update this.options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>._activate( value );
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"disabled"</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-487">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-487">&#182;</a>
              </div>
              <p>don’t use the widget factory’s disabled handling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">this</span>._setupDisabled( value );
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">this</span>._super( key, value);

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"collapsible"</span> ) {
			<span class="hljs-keyword">this</span>.element.toggleClass( <span class="hljs-string">"ui-tabs-collapsible"</span>, value );</pre></div></div>
            
        </li>
        
        
        <li id="section-488">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-488">&#182;</a>
              </div>
              <p>Setting collapsible: false while collapsed; open first panel</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( !value &amp;&amp; <span class="hljs-keyword">this</span>.options.active === <span class="hljs-literal">false</span> ) {
				<span class="hljs-keyword">this</span>._activate( <span class="hljs-number">0</span> );
			}
		}

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"event"</span> ) {
			<span class="hljs-keyword">this</span>._setupEvents( value );
		}

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"heightStyle"</span> ) {
			<span class="hljs-keyword">this</span>._setupHeightStyle( value );
		}
	},

	_tabId: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( tab )</span> {</span>
		<span class="hljs-keyword">return</span> tab.attr( <span class="hljs-string">"aria-controls"</span> ) || <span class="hljs-string">"ui-tabs-"</span> + getNextTabId();
	},

	_sanitizeSelector: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( hash )</span> {</span>
		<span class="hljs-keyword">return</span> hash ? hash.replace( <span class="hljs-regexp">/[!"$%&amp;'()*+,.\/:;&lt;=&gt;?@\[\]\^`{|}~]/g</span>, <span class="hljs-string">"\\$&amp;"</span> ) : <span class="hljs-string">""</span>;
	},

	refresh: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>.options,
			lis = <span class="hljs-keyword">this</span>.tablist.children( <span class="hljs-string">":has(a[href])"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-489">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-489">&#182;</a>
              </div>
              <p>get disabled tabs from class attribute from HTML
this will get converted to a boolean if needed in _refresh()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		options.disabled = $.map( lis.filter( <span class="hljs-string">".ui-state-disabled"</span> ), <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( tab )</span> {</span>
			<span class="hljs-keyword">return</span> lis.index( tab );
		});

		<span class="hljs-keyword">this</span>._processTabs();</pre></div></div>
            
        </li>
        
        
        <li id="section-490">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-490">&#182;</a>
              </div>
              <p>was collapsed or no tabs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( options.active === <span class="hljs-literal">false</span> || !<span class="hljs-keyword">this</span>.anchors.length ) {
			options.active = <span class="hljs-literal">false</span>;
			<span class="hljs-keyword">this</span>.active = $();</pre></div></div>
            
        </li>
        
        
        <li id="section-491">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-491">&#182;</a>
              </div>
              <p>was active, but active tab is gone</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.active.length &amp;&amp; !$.contains( <span class="hljs-keyword">this</span>.tablist[ <span class="hljs-number">0</span> ], <span class="hljs-keyword">this</span>.active[ <span class="hljs-number">0</span> ] ) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-492">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-492">&#182;</a>
              </div>
              <p>all remaining tabs are disabled</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.tabs.length === options.disabled.length ) {
				options.active = <span class="hljs-literal">false</span>;
				<span class="hljs-keyword">this</span>.active = $();</pre></div></div>
            
        </li>
        
        
        <li id="section-493">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-493">&#182;</a>
              </div>
              <p>activate previous tab</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">this</span>._activate( <span class="hljs-keyword">this</span>._findNextTab( <span class="hljs-built_in">Math</span>.max( <span class="hljs-number">0</span>, options.active - <span class="hljs-number">1</span> ), <span class="hljs-literal">false</span> ) );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-494">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-494">&#182;</a>
              </div>
              <p>was active, active tab still exists</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-495">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-495">&#182;</a>
              </div>
              <p>make sure active index is correct</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			options.active = <span class="hljs-keyword">this</span>.tabs.index( <span class="hljs-keyword">this</span>.active );
		}

		<span class="hljs-keyword">this</span>._refresh();
	},

	_refresh: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>._setupDisabled( <span class="hljs-keyword">this</span>.options.disabled );
		<span class="hljs-keyword">this</span>._setupEvents( <span class="hljs-keyword">this</span>.options.event );
		<span class="hljs-keyword">this</span>._setupHeightStyle( <span class="hljs-keyword">this</span>.options.heightStyle );

		<span class="hljs-keyword">this</span>.tabs.not( <span class="hljs-keyword">this</span>.active ).attr({
			<span class="hljs-string">"aria-selected"</span>: <span class="hljs-string">"false"</span>,
			tabIndex: -<span class="hljs-number">1</span>
		});
		<span class="hljs-keyword">this</span>.panels.not( <span class="hljs-keyword">this</span>._getPanelForTab( <span class="hljs-keyword">this</span>.active ) )
			.hide()
			.attr({
				<span class="hljs-string">"aria-expanded"</span>: <span class="hljs-string">"false"</span>,
				<span class="hljs-string">"aria-hidden"</span>: <span class="hljs-string">"true"</span>
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-496">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-496">&#182;</a>
              </div>
              <p>Make sure one tab is in the tab order</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.active.length ) {
			<span class="hljs-keyword">this</span>.tabs.eq( <span class="hljs-number">0</span> ).attr( <span class="hljs-string">"tabIndex"</span>, <span class="hljs-number">0</span> );
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">this</span>.active
				.addClass( <span class="hljs-string">"ui-tabs-active ui-state-active"</span> )
				.attr({
					<span class="hljs-string">"aria-selected"</span>: <span class="hljs-string">"true"</span>,
					tabIndex: <span class="hljs-number">0</span>
				});
			<span class="hljs-keyword">this</span>._getPanelForTab( <span class="hljs-keyword">this</span>.active )
				.show()
				.attr({
					<span class="hljs-string">"aria-expanded"</span>: <span class="hljs-string">"true"</span>,
					<span class="hljs-string">"aria-hidden"</span>: <span class="hljs-string">"false"</span>
				});
		}
	},

	_processTabs: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;

		<span class="hljs-keyword">this</span>.tablist = <span class="hljs-keyword">this</span>._getList()
			.addClass( <span class="hljs-string">"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"</span> )
			.attr( <span class="hljs-string">"role"</span>, <span class="hljs-string">"tablist"</span> );

		<span class="hljs-keyword">this</span>.tabs = <span class="hljs-keyword">this</span>.tablist.find( <span class="hljs-string">"&gt; li:has(a[href])"</span> )
			.addClass( <span class="hljs-string">"ui-state-default ui-corner-top"</span> )
			.attr({
				role: <span class="hljs-string">"tab"</span>,
				tabIndex: -<span class="hljs-number">1</span>
			});

		<span class="hljs-keyword">this</span>.anchors = <span class="hljs-keyword">this</span>.tabs.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">return</span> $( <span class="hljs-string">"a"</span>, <span class="hljs-keyword">this</span> )[ <span class="hljs-number">0</span> ];
			})
			.addClass( <span class="hljs-string">"ui-tabs-anchor"</span> )
			.attr({
				role: <span class="hljs-string">"presentation"</span>,
				tabIndex: -<span class="hljs-number">1</span>
			});

		<span class="hljs-keyword">this</span>.panels = $();

		<span class="hljs-keyword">this</span>.anchors.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, anchor )</span> {</span>
			<span class="hljs-keyword">var</span> selector, panel, panelId,
				anchorId = $( anchor ).uniqueId().attr( <span class="hljs-string">"id"</span> ),
				tab = $( anchor ).closest( <span class="hljs-string">"li"</span> ),
				originalAriaControls = tab.attr( <span class="hljs-string">"aria-controls"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-497">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-497">&#182;</a>
              </div>
              <p>inline tab</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( isLocal( anchor ) ) {
				selector = anchor.hash;
				panel = that.element.find( that._sanitizeSelector( selector ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-498">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-498">&#182;</a>
              </div>
              <p>remote tab</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			} <span class="hljs-keyword">else</span> {
				panelId = that._tabId( tab );
				selector = <span class="hljs-string">"#"</span> + panelId;
				panel = that.element.find( selector );
				<span class="hljs-keyword">if</span> ( !panel.length ) {
					panel = that._createPanel( panelId );
					panel.insertAfter( that.panels[ i - <span class="hljs-number">1</span> ] || that.tablist );
				}
				panel.attr( <span class="hljs-string">"aria-live"</span>, <span class="hljs-string">"polite"</span> );
			}

			<span class="hljs-keyword">if</span> ( panel.length) {
				that.panels = that.panels.add( panel );
			}
			<span class="hljs-keyword">if</span> ( originalAriaControls ) {
				tab.data( <span class="hljs-string">"ui-tabs-aria-controls"</span>, originalAriaControls );
			}
			tab.attr({
				<span class="hljs-string">"aria-controls"</span>: selector.substring( <span class="hljs-number">1</span> ),
				<span class="hljs-string">"aria-labelledby"</span>: anchorId
			});
			panel.attr( <span class="hljs-string">"aria-labelledby"</span>, anchorId );
		});

		<span class="hljs-keyword">this</span>.panels
			.addClass( <span class="hljs-string">"ui-tabs-panel ui-widget-content ui-corner-bottom"</span> )
			.attr( <span class="hljs-string">"role"</span>, <span class="hljs-string">"tabpanel"</span> );
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-499">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-499">&#182;</a>
              </div>
              <p>allow overriding how to find the list for rare usage scenarios (#7715)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_getList: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.element.find( <span class="hljs-string">"ol,ul"</span> ).eq( <span class="hljs-number">0</span> );
	},

	_createPanel: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( id )</span> {</span>
		<span class="hljs-keyword">return</span> $( <span class="hljs-string">"&lt;div&gt;"</span> )
			.attr( <span class="hljs-string">"id"</span>, id )
			.addClass( <span class="hljs-string">"ui-tabs-panel ui-widget-content ui-corner-bottom"</span> )
			.data( <span class="hljs-string">"ui-tabs-destroy"</span>, <span class="hljs-literal">true</span> );
	},

	_setupDisabled: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( disabled )</span> {</span>
		<span class="hljs-keyword">if</span> ( $.isArray( disabled ) ) {
			<span class="hljs-keyword">if</span> ( !disabled.length ) {
				disabled = <span class="hljs-literal">false</span>;
			} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( disabled.length === <span class="hljs-keyword">this</span>.anchors.length ) {
				disabled = <span class="hljs-literal">true</span>;
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-500">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-500">&#182;</a>
              </div>
              <p>disable tabs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, li; ( li = <span class="hljs-keyword">this</span>.tabs[ i ] ); i++ ) {
			<span class="hljs-keyword">if</span> ( disabled === <span class="hljs-literal">true</span> || $.inArray( i, disabled ) !== -<span class="hljs-number">1</span> ) {
				$( li )
					.addClass( <span class="hljs-string">"ui-state-disabled"</span> )
					.attr( <span class="hljs-string">"aria-disabled"</span>, <span class="hljs-string">"true"</span> );
			} <span class="hljs-keyword">else</span> {
				$( li )
					.removeClass( <span class="hljs-string">"ui-state-disabled"</span> )
					.removeAttr( <span class="hljs-string">"aria-disabled"</span> );
			}
		}

		<span class="hljs-keyword">this</span>.options.disabled = disabled;
	},

	_setupEvents: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> events = {
			click: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				event.preventDefault();
			}
		};
		<span class="hljs-keyword">if</span> ( event ) {
			$.each( event.split(<span class="hljs-string">" "</span>), <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index, eventName )</span> {</span>
				events[ eventName ] = <span class="hljs-string">"_eventHandler"</span>;
			});
		}

		<span class="hljs-keyword">this</span>._off( <span class="hljs-keyword">this</span>.anchors.add( <span class="hljs-keyword">this</span>.tabs ).add( <span class="hljs-keyword">this</span>.panels ) );
		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.anchors, events );
		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.tabs, { keydown: <span class="hljs-string">"_tabKeydown"</span> } );
		<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.panels, { keydown: <span class="hljs-string">"_panelKeydown"</span> } );

		<span class="hljs-keyword">this</span>._focusable( <span class="hljs-keyword">this</span>.tabs );
		<span class="hljs-keyword">this</span>._hoverable( <span class="hljs-keyword">this</span>.tabs );
	},

	_setupHeightStyle: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( heightStyle )</span> {</span>
		<span class="hljs-keyword">var</span> maxHeight,
			parent = <span class="hljs-keyword">this</span>.element.parent();

		<span class="hljs-keyword">if</span> ( heightStyle === <span class="hljs-string">"fill"</span> ) {
			maxHeight = parent.height();
			maxHeight -= <span class="hljs-keyword">this</span>.element.outerHeight() - <span class="hljs-keyword">this</span>.element.height();

			<span class="hljs-keyword">this</span>.element.siblings( <span class="hljs-string">":visible"</span> ).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">var</span> elem = $( <span class="hljs-keyword">this</span> ),
					position = elem.css( <span class="hljs-string">"position"</span> );

				<span class="hljs-keyword">if</span> ( position === <span class="hljs-string">"absolute"</span> || position === <span class="hljs-string">"fixed"</span> ) {
					<span class="hljs-keyword">return</span>;
				}
				maxHeight -= elem.outerHeight( <span class="hljs-literal">true</span> );
			});

			<span class="hljs-keyword">this</span>.element.children().not( <span class="hljs-keyword">this</span>.panels ).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				maxHeight -= $( <span class="hljs-keyword">this</span> ).outerHeight( <span class="hljs-literal">true</span> );
			});

			<span class="hljs-keyword">this</span>.panels.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				$( <span class="hljs-keyword">this</span> ).height( <span class="hljs-built_in">Math</span>.max( <span class="hljs-number">0</span>, maxHeight -
					$( <span class="hljs-keyword">this</span> ).innerHeight() + $( <span class="hljs-keyword">this</span> ).height() ) );
			})
			.css( <span class="hljs-string">"overflow"</span>, <span class="hljs-string">"auto"</span> );
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( heightStyle === <span class="hljs-string">"auto"</span> ) {
			maxHeight = <span class="hljs-number">0</span>;
			<span class="hljs-keyword">this</span>.panels.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				maxHeight = <span class="hljs-built_in">Math</span>.max( maxHeight, $( <span class="hljs-keyword">this</span> ).height( <span class="hljs-string">""</span> ).height() );
			}).height( maxHeight );
		}
	},

	_eventHandler: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>.options,
			active = <span class="hljs-keyword">this</span>.active,
			anchor = $( event.currentTarget ),
			tab = anchor.closest( <span class="hljs-string">"li"</span> ),
			clickedIsActive = tab[ <span class="hljs-number">0</span> ] === active[ <span class="hljs-number">0</span> ],
			collapsing = clickedIsActive &amp;&amp; options.collapsible,
			toShow = collapsing ? $() : <span class="hljs-keyword">this</span>._getPanelForTab( tab ),
			toHide = !active.length ? $() : <span class="hljs-keyword">this</span>._getPanelForTab( active ),
			eventData = {
				oldTab: active,
				oldPanel: toHide,
				newTab: collapsing ? $() : tab,
				newPanel: toShow
			};

		event.preventDefault();

		<span class="hljs-keyword">if</span> ( tab.hasClass( <span class="hljs-string">"ui-state-disabled"</span> ) ||</pre></div></div>
            
        </li>
        
        
        <li id="section-501">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-501">&#182;</a>
              </div>
              <p>tab is already loading</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				tab.hasClass( <span class="hljs-string">"ui-tabs-loading"</span> ) ||</pre></div></div>
            
        </li>
        
        
        <li id="section-502">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-502">&#182;</a>
              </div>
              <p>can’t switch durning an animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">this</span>.running ||</pre></div></div>
            
        </li>
        
        
        <li id="section-503">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-503">&#182;</a>
              </div>
              <p>click on active header, but not collapsible</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				( clickedIsActive &amp;&amp; !options.collapsible ) ||</pre></div></div>
            
        </li>
        
        
        <li id="section-504">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-504">&#182;</a>
              </div>
              <p>allow canceling activation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				( <span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"beforeActivate"</span>, event, eventData ) === <span class="hljs-literal">false</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		options.active = collapsing ? <span class="hljs-literal">false</span> : <span class="hljs-keyword">this</span>.tabs.index( tab );

		<span class="hljs-keyword">this</span>.active = clickedIsActive ? $() : tab;
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.xhr ) {
			<span class="hljs-keyword">this</span>.xhr.abort();
		}

		<span class="hljs-keyword">if</span> ( !toHide.length &amp;&amp; !toShow.length ) {
			$.error( <span class="hljs-string">"jQuery UI Tabs: Mismatching fragment identifier."</span> );
		}

		<span class="hljs-keyword">if</span> ( toShow.length ) {
			<span class="hljs-keyword">this</span>.load( <span class="hljs-keyword">this</span>.tabs.index( tab ), event );
		}
		<span class="hljs-keyword">this</span>._toggle( event, eventData );
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-505">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-505">&#182;</a>
              </div>
              <p>handles show/hide for selecting tabs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	_toggle: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, eventData )</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			toShow = eventData.newPanel,
			toHide = eventData.oldPanel;

		<span class="hljs-keyword">this</span>.running = <span class="hljs-literal">true</span>;

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">complete</span><span class="hljs-params">()</span> {</span>
			that.running = <span class="hljs-literal">false</span>;
			that._trigger( <span class="hljs-string">"activate"</span>, event, eventData );
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span><span class="hljs-params">()</span> {</span>
			eventData.newTab.closest( <span class="hljs-string">"li"</span> ).addClass( <span class="hljs-string">"ui-tabs-active ui-state-active"</span> );

			<span class="hljs-keyword">if</span> ( toShow.length &amp;&amp; that.options.show ) {
				that._show( toShow, that.options.show, complete );
			} <span class="hljs-keyword">else</span> {
				toShow.show();
				complete();
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-506">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-506">&#182;</a>
              </div>
              <p>start out by hiding, then showing, then completing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( toHide.length &amp;&amp; <span class="hljs-keyword">this</span>.options.hide ) {
			<span class="hljs-keyword">this</span>._hide( toHide, <span class="hljs-keyword">this</span>.options.hide, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				eventData.oldTab.closest( <span class="hljs-string">"li"</span> ).removeClass( <span class="hljs-string">"ui-tabs-active ui-state-active"</span> );
				show();
			});
		} <span class="hljs-keyword">else</span> {
			eventData.oldTab.closest( <span class="hljs-string">"li"</span> ).removeClass( <span class="hljs-string">"ui-tabs-active ui-state-active"</span> );
			toHide.hide();
			show();
		}

		toHide.attr({
			<span class="hljs-string">"aria-expanded"</span>: <span class="hljs-string">"false"</span>,
			<span class="hljs-string">"aria-hidden"</span>: <span class="hljs-string">"true"</span>
		});
		eventData.oldTab.attr( <span class="hljs-string">"aria-selected"</span>, <span class="hljs-string">"false"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-507">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-507">&#182;</a>
              </div>
              <p>If we’re switching tabs, remove the old tab from the tab order.
If we’re opening from collapsed state, remove the previous tab from the tab order.
If we’re collapsing, then keep the collapsing tab in the tab order.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( toShow.length &amp;&amp; toHide.length ) {
			eventData.oldTab.attr( <span class="hljs-string">"tabIndex"</span>, -<span class="hljs-number">1</span> );
		} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( toShow.length ) {
			<span class="hljs-keyword">this</span>.tabs.filter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">return</span> $( <span class="hljs-keyword">this</span> ).attr( <span class="hljs-string">"tabIndex"</span> ) === <span class="hljs-number">0</span>;
			})
			.attr( <span class="hljs-string">"tabIndex"</span>, -<span class="hljs-number">1</span> );
		}

		toShow.attr({
			<span class="hljs-string">"aria-expanded"</span>: <span class="hljs-string">"true"</span>,
			<span class="hljs-string">"aria-hidden"</span>: <span class="hljs-string">"false"</span>
		});
		eventData.newTab.attr({
			<span class="hljs-string">"aria-selected"</span>: <span class="hljs-string">"true"</span>,
			tabIndex: <span class="hljs-number">0</span>
		});
	},

	_activate: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index )</span> {</span>
		<span class="hljs-keyword">var</span> anchor,
			active = <span class="hljs-keyword">this</span>._findActive( index );</pre></div></div>
            
        </li>
        
        
        <li id="section-508">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-508">&#182;</a>
              </div>
              <p>trying to activate the already active panel</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( active[ <span class="hljs-number">0</span> ] === <span class="hljs-keyword">this</span>.active[ <span class="hljs-number">0</span> ] ) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-509">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-509">&#182;</a>
              </div>
              <p>trying to collapse, simulate a click on the current active header</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( !active.length ) {
			active = <span class="hljs-keyword">this</span>.active;
		}

		anchor = active.find( <span class="hljs-string">".ui-tabs-anchor"</span> )[ <span class="hljs-number">0</span> ];
		<span class="hljs-keyword">this</span>._eventHandler({
			target: anchor,
			currentTarget: anchor,
			preventDefault: $.noop
		});
	},

	_findActive: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index )</span> {</span>
		<span class="hljs-keyword">return</span> index === <span class="hljs-literal">false</span> ? $() : <span class="hljs-keyword">this</span>.tabs.eq( index );
	},

	_getIndex: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-510">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-510">&#182;</a>
              </div>
              <p>meta-function to give users option to provide a href string instead of a numerical index.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> index === <span class="hljs-string">"string"</span> ) {
			index = <span class="hljs-keyword">this</span>.anchors.index( <span class="hljs-keyword">this</span>.anchors.filter( <span class="hljs-string">"[href$='"</span> + index + <span class="hljs-string">"']"</span> ) );
		}

		<span class="hljs-keyword">return</span> index;
	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.xhr ) {
			<span class="hljs-keyword">this</span>.xhr.abort();
		}

		<span class="hljs-keyword">this</span>.element.removeClass( <span class="hljs-string">"ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"</span> );

		<span class="hljs-keyword">this</span>.tablist
			.removeClass( <span class="hljs-string">"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"</span> )
			.removeAttr( <span class="hljs-string">"role"</span> );

		<span class="hljs-keyword">this</span>.anchors
			.removeClass( <span class="hljs-string">"ui-tabs-anchor"</span> )
			.removeAttr( <span class="hljs-string">"role"</span> )
			.removeAttr( <span class="hljs-string">"tabIndex"</span> )
			.removeUniqueId();

		<span class="hljs-keyword">this</span>.tabs.add( <span class="hljs-keyword">this</span>.panels ).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span> ( $.data( <span class="hljs-keyword">this</span>, <span class="hljs-string">"ui-tabs-destroy"</span> ) ) {
				$( <span class="hljs-keyword">this</span> ).remove();
			} <span class="hljs-keyword">else</span> {
				$( <span class="hljs-keyword">this</span> )
					.removeClass( <span class="hljs-string">"ui-state-default ui-state-active ui-state-disabled "</span> +
						<span class="hljs-string">"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel"</span> )
					.removeAttr( <span class="hljs-string">"tabIndex"</span> )
					.removeAttr( <span class="hljs-string">"aria-live"</span> )
					.removeAttr( <span class="hljs-string">"aria-busy"</span> )
					.removeAttr( <span class="hljs-string">"aria-selected"</span> )
					.removeAttr( <span class="hljs-string">"aria-labelledby"</span> )
					.removeAttr( <span class="hljs-string">"aria-hidden"</span> )
					.removeAttr( <span class="hljs-string">"aria-expanded"</span> )
					.removeAttr( <span class="hljs-string">"role"</span> );
			}
		});

		<span class="hljs-keyword">this</span>.tabs.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> li = $( <span class="hljs-keyword">this</span> ),
				prev = li.data( <span class="hljs-string">"ui-tabs-aria-controls"</span> );
			<span class="hljs-keyword">if</span> ( prev ) {
				li
					.attr( <span class="hljs-string">"aria-controls"</span>, prev )
					.removeData( <span class="hljs-string">"ui-tabs-aria-controls"</span> );
			} <span class="hljs-keyword">else</span> {
				li.removeAttr( <span class="hljs-string">"aria-controls"</span> );
			}
		});

		<span class="hljs-keyword">this</span>.panels.show();

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.heightStyle !== <span class="hljs-string">"content"</span> ) {
			<span class="hljs-keyword">this</span>.panels.css( <span class="hljs-string">"height"</span>, <span class="hljs-string">""</span> );
		}
	},

	enable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index )</span> {</span>
		<span class="hljs-keyword">var</span> disabled = <span class="hljs-keyword">this</span>.options.disabled;
		<span class="hljs-keyword">if</span> ( disabled === <span class="hljs-literal">false</span> ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( index === <span class="hljs-literal">undefined</span> ) {
			disabled = <span class="hljs-literal">false</span>;
		} <span class="hljs-keyword">else</span> {
			index = <span class="hljs-keyword">this</span>._getIndex( index );
			<span class="hljs-keyword">if</span> ( $.isArray( disabled ) ) {
				disabled = $.map( disabled, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( num )</span> {</span>
					<span class="hljs-keyword">return</span> num !== index ? num : <span class="hljs-literal">null</span>;
				});
			} <span class="hljs-keyword">else</span> {
				disabled = $.map( <span class="hljs-keyword">this</span>.tabs, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( li, num )</span> {</span>
					<span class="hljs-keyword">return</span> num !== index ? num : <span class="hljs-literal">null</span>;
				});
			}
		}
		<span class="hljs-keyword">this</span>._setupDisabled( disabled );
	},

	disable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index )</span> {</span>
		<span class="hljs-keyword">var</span> disabled = <span class="hljs-keyword">this</span>.options.disabled;
		<span class="hljs-keyword">if</span> ( disabled === <span class="hljs-literal">true</span> ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( index === <span class="hljs-literal">undefined</span> ) {
			disabled = <span class="hljs-literal">true</span>;
		} <span class="hljs-keyword">else</span> {
			index = <span class="hljs-keyword">this</span>._getIndex( index );
			<span class="hljs-keyword">if</span> ( $.inArray( index, disabled ) !== -<span class="hljs-number">1</span> ) {
				<span class="hljs-keyword">return</span>;
			}
			<span class="hljs-keyword">if</span> ( $.isArray( disabled ) ) {
				disabled = $.merge( [ index ], disabled ).sort();
			} <span class="hljs-keyword">else</span> {
				disabled = [ index ];
			}
		}
		<span class="hljs-keyword">this</span>._setupDisabled( disabled );
	},

	load: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( index, event )</span> {</span>
		index = <span class="hljs-keyword">this</span>._getIndex( index );
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			tab = <span class="hljs-keyword">this</span>.tabs.eq( index ),
			anchor = tab.find( <span class="hljs-string">".ui-tabs-anchor"</span> ),
			panel = <span class="hljs-keyword">this</span>._getPanelForTab( tab ),
			eventData = {
				tab: tab,
				panel: panel
			};</pre></div></div>
            
        </li>
        
        
        <li id="section-511">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-511">&#182;</a>
              </div>
              <p>not remote</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( isLocal( anchor[ <span class="hljs-number">0</span> ] ) ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">this</span>.xhr = $.ajax( <span class="hljs-keyword">this</span>._ajaxSettings( anchor, event, eventData ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-512">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-512">&#182;</a>
              </div>
              <p>support: jQuery &lt;1.8
jQuery &lt;1.8 returns false if the request is canceled in beforeSend,
but as of 1.8, $.ajax() always returns a jqXHR object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.xhr &amp;&amp; <span class="hljs-keyword">this</span>.xhr.statusText !== <span class="hljs-string">"canceled"</span> ) {
			tab.addClass( <span class="hljs-string">"ui-tabs-loading"</span> );
			panel.attr( <span class="hljs-string">"aria-busy"</span>, <span class="hljs-string">"true"</span> );

			<span class="hljs-keyword">this</span>.xhr
				.success(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( response )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-513">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-513">&#182;</a>
              </div>
              <p>support: jQuery &lt;1.8
<a href="http://bugs.jquery.com/ticket/11778">http://bugs.jquery.com/ticket/11778</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
						panel.html( response );
						that._trigger( <span class="hljs-string">"load"</span>, event, eventData );
					}, <span class="hljs-number">1</span> );
				})
				.complete(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( jqXHR, status )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-514">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-514">&#182;</a>
              </div>
              <p>support: jQuery &lt;1.8
<a href="http://bugs.jquery.com/ticket/11778">http://bugs.jquery.com/ticket/11778</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
						<span class="hljs-keyword">if</span> ( status === <span class="hljs-string">"abort"</span> ) {
							that.panels.stop( <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span> );
						}

						tab.removeClass( <span class="hljs-string">"ui-tabs-loading"</span> );
						panel.removeAttr( <span class="hljs-string">"aria-busy"</span> );

						<span class="hljs-keyword">if</span> ( jqXHR === that.xhr ) {
							<span class="hljs-keyword">delete</span> that.xhr;
						}
					}, <span class="hljs-number">1</span> );
				});
		}
	},

	_ajaxSettings: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( anchor, event, eventData )</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
		<span class="hljs-keyword">return</span> {
			url: anchor.attr( <span class="hljs-string">"href"</span> ),
			beforeSend: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( jqXHR, settings )</span> {</span>
				<span class="hljs-keyword">return</span> that._trigger( <span class="hljs-string">"beforeLoad"</span>, event,
					$.extend( { jqXHR : jqXHR, ajaxSettings: settings }, eventData ) );
			}
		};
	},

	_getPanelForTab: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( tab )</span> {</span>
		<span class="hljs-keyword">var</span> id = $( tab ).attr( <span class="hljs-string">"aria-controls"</span> );
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.element.find( <span class="hljs-keyword">this</span>._sanitizeSelector( <span class="hljs-string">"#"</span> + id ) );
	}
});

})( jQuery );
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $ )</span> {</span>

<span class="hljs-keyword">var</span> increments = <span class="hljs-number">0</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addDescribedBy</span><span class="hljs-params">( elem, id )</span> {</span>
	<span class="hljs-keyword">var</span> describedby = (elem.attr( <span class="hljs-string">"aria-describedby"</span> ) || <span class="hljs-string">""</span>).split( <span class="hljs-regexp">/\s+/</span> );
	describedby.push( id );
	elem
		.data( <span class="hljs-string">"ui-tooltip-id"</span>, id )
		.attr( <span class="hljs-string">"aria-describedby"</span>, $.trim( describedby.join( <span class="hljs-string">" "</span> ) ) );
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeDescribedBy</span><span class="hljs-params">( elem )</span> {</span>
	<span class="hljs-keyword">var</span> id = elem.data( <span class="hljs-string">"ui-tooltip-id"</span> ),
		describedby = (elem.attr( <span class="hljs-string">"aria-describedby"</span> ) || <span class="hljs-string">""</span>).split( <span class="hljs-regexp">/\s+/</span> ),
		index = $.inArray( id, describedby );
	<span class="hljs-keyword">if</span> ( index !== -<span class="hljs-number">1</span> ) {
		describedby.splice( index, <span class="hljs-number">1</span> );
	}

	elem.removeData( <span class="hljs-string">"ui-tooltip-id"</span> );
	describedby = $.trim( describedby.join( <span class="hljs-string">" "</span> ) );
	<span class="hljs-keyword">if</span> ( describedby ) {
		elem.attr( <span class="hljs-string">"aria-describedby"</span>, describedby );
	} <span class="hljs-keyword">else</span> {
		elem.removeAttr( <span class="hljs-string">"aria-describedby"</span> );
	}
}

$.widget( <span class="hljs-string">"ui.tooltip"</span>, {
	version: <span class="hljs-string">"1.10.3"</span>,
	options: {
		content: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-515">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-515">&#182;</a>
              </div>
              <p>support: IE&lt;9, Opera in jQuery &lt;1.7
.text() can’t accept undefined, so coerce to a string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">var</span> title = $( <span class="hljs-keyword">this</span> ).attr( <span class="hljs-string">"title"</span> ) || <span class="hljs-string">""</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-516">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-516">&#182;</a>
              </div>
              <p>Escape title, since we’re going from an attribute to raw HTML</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">return</span> $( <span class="hljs-string">"&lt;a&gt;"</span> ).text( title ).html();
		},
		hide: <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-517">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-517">&#182;</a>
              </div>
              <p>Disabled elements have inconsistent behavior across browsers (#8661)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		items: <span class="hljs-string">"[title]:not([disabled])"</span>,
		position: {
			my: <span class="hljs-string">"left top+15"</span>,
			at: <span class="hljs-string">"left bottom"</span>,
			collision: <span class="hljs-string">"flipfit flip"</span>
		},
		show: <span class="hljs-literal">true</span>,
		tooltipClass: <span class="hljs-literal">null</span>,
		track: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-518">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-518">&#182;</a>
              </div>
              <p>callbacks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		close: <span class="hljs-literal">null</span>,
		open: <span class="hljs-literal">null</span>
	},

	_create: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">this</span>._on({
			mouseover: <span class="hljs-string">"open"</span>,
			focusin: <span class="hljs-string">"open"</span>
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-519">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-519">&#182;</a>
              </div>
              <p>IDs of generated tooltips, needed for destroy</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.tooltips = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-520">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-520">&#182;</a>
              </div>
              <p>IDs of parent tooltips where we removed the title attribute</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.parents = {};

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.disabled ) {
			<span class="hljs-keyword">this</span>._disable();
		}
	},

	_setOption: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, value )</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"disabled"</span> ) {
			<span class="hljs-keyword">this</span>[ value ? <span class="hljs-string">"_disable"</span> : <span class="hljs-string">"_enable"</span> ]();
			<span class="hljs-keyword">this</span>.options[ key ] = value;</pre></div></div>
            
        </li>
        
        
        <li id="section-521">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-521">&#182;</a>
              </div>
              <p>disable element style changes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">this</span>._super( key, value );

		<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"content"</span> ) {
			$.each( <span class="hljs-keyword">this</span>.tooltips, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( id, element )</span> {</span>
				that._updateContent( element );
			});
		}
	},

	_disable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-522">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-522">&#182;</a>
              </div>
              <p>close open tooltips</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$.each( <span class="hljs-keyword">this</span>.tooltips, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( id, element )</span> {</span>
			<span class="hljs-keyword">var</span> event = $.Event( <span class="hljs-string">"blur"</span> );
			event.target = event.currentTarget = element[<span class="hljs-number">0</span>];
			that.close( event, <span class="hljs-literal">true</span> );
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-523">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-523">&#182;</a>
              </div>
              <p>remove title attributes to prevent native tooltips</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.element.find( <span class="hljs-keyword">this</span>.options.items ).addBack().each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> element = $( <span class="hljs-keyword">this</span> );
			<span class="hljs-keyword">if</span> ( element.is( <span class="hljs-string">"[title]"</span> ) ) {
				element
					.data( <span class="hljs-string">"ui-tooltip-title"</span>, element.attr( <span class="hljs-string">"title"</span> ) )
					.attr( <span class="hljs-string">"title"</span>, <span class="hljs-string">""</span> );
			}
		});
	},

	_enable: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-524">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-524">&#182;</a>
              </div>
              <p>restore title attributes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">this</span>.element.find( <span class="hljs-keyword">this</span>.options.items ).addBack().each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> element = $( <span class="hljs-keyword">this</span> );
			<span class="hljs-keyword">if</span> ( element.data( <span class="hljs-string">"ui-tooltip-title"</span> ) ) {
				element.attr( <span class="hljs-string">"title"</span>, element.data( <span class="hljs-string">"ui-tooltip-title"</span> ) );
			}
		});
	},

	open: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			target = $( event ? event.target : <span class="hljs-keyword">this</span>.element )</pre></div></div>
            
        </li>
        
        
        <li id="section-525">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-525">&#182;</a>
              </div>
              <p>we need closest here due to mouseover bubbling,
but always pointing at the same event target</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				.closest( <span class="hljs-keyword">this</span>.options.items );</pre></div></div>
            
        </li>
        
        
        <li id="section-526">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-526">&#182;</a>
              </div>
              <p>No element to show a tooltip for or the tooltip is already open</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( !target.length || target.data( <span class="hljs-string">"ui-tooltip-id"</span> ) ) {
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">if</span> ( target.attr( <span class="hljs-string">"title"</span> ) ) {
			target.data( <span class="hljs-string">"ui-tooltip-title"</span>, target.attr( <span class="hljs-string">"title"</span> ) );
		}

		target.data( <span class="hljs-string">"ui-tooltip-open"</span>, <span class="hljs-literal">true</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-527">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-527">&#182;</a>
              </div>
              <p>kill parent tooltips, custom or native, for hover</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( event &amp;&amp; event.type === <span class="hljs-string">"mouseover"</span> ) {
			target.parents().each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">var</span> parent = $( <span class="hljs-keyword">this</span> ),
					blurEvent;
				<span class="hljs-keyword">if</span> ( parent.data( <span class="hljs-string">"ui-tooltip-open"</span> ) ) {
					blurEvent = $.Event( <span class="hljs-string">"blur"</span> );
					blurEvent.target = blurEvent.currentTarget = <span class="hljs-keyword">this</span>;
					that.close( blurEvent, <span class="hljs-literal">true</span> );
				}
				<span class="hljs-keyword">if</span> ( parent.attr( <span class="hljs-string">"title"</span> ) ) {
					parent.uniqueId();
					that.parents[ <span class="hljs-keyword">this</span>.id ] = {
						element: <span class="hljs-keyword">this</span>,
						title: parent.attr( <span class="hljs-string">"title"</span> )
					};
					parent.attr( <span class="hljs-string">"title"</span>, <span class="hljs-string">""</span> );
				}
			});
		}

		<span class="hljs-keyword">this</span>._updateContent( target, event );
	},

	_updateContent: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( target, event )</span> {</span>
		<span class="hljs-keyword">var</span> content,
			contentOption = <span class="hljs-keyword">this</span>.options.content,
			that = <span class="hljs-keyword">this</span>,
			eventType = event ? event.type : <span class="hljs-literal">null</span>;

		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> contentOption === <span class="hljs-string">"string"</span> ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._open( event, target, contentOption );
		}

		content = contentOption.call( target[<span class="hljs-number">0</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( response )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-528">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-528">&#182;</a>
              </div>
              <p>ignore async response if tooltip was closed already</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( !target.data( <span class="hljs-string">"ui-tooltip-open"</span> ) ) {
				<span class="hljs-keyword">return</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-529">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-529">&#182;</a>
              </div>
              <p>IE may instantly serve a cached response for ajax requests
delay this call to _open so the other call to _open runs first</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			that._delay(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-530">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-530">&#182;</a>
              </div>
              <p>jQuery creates a special event for focusin when it doesn’t
exist natively. To improve performance, the native event
object is reused and the type is changed. Therefore, we can’t
rely on the type being correct after the event finished
bubbling, so we set it back to the previous value. (#8740)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( event ) {
					event.type = eventType;
				}
				<span class="hljs-keyword">this</span>._open( event, target, response );
			});
		});
		<span class="hljs-keyword">if</span> ( content ) {
			<span class="hljs-keyword">this</span>._open( event, target, content );
		}
	},

	_open: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event, target, content )</span> {</span>
		<span class="hljs-keyword">var</span> tooltip, events, delayedShow,
			positionOption = $.extend( {}, <span class="hljs-keyword">this</span>.options.position );

		<span class="hljs-keyword">if</span> ( !content ) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-531">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-531">&#182;</a>
              </div>
              <p>Content can be updated multiple times. If the tooltip already
exists, then just update the content and bail.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		tooltip = <span class="hljs-keyword">this</span>._find( target );
		<span class="hljs-keyword">if</span> ( tooltip.length ) {
			tooltip.find( <span class="hljs-string">".ui-tooltip-content"</span> ).html( content );
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-532">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-532">&#182;</a>
              </div>
              <p>if we have a title, clear it to prevent the native tooltip
we have to check first to avoid defining a title if none exists
(we don’t want to cause an element to start matching [title])</p>
<p>We use removeAttr only for key events, to allow IE to export the correct
accessible attributes. For mouse events, set to empty string to avoid
native tooltip showing up (happens only when removing inside mouseover).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( target.is( <span class="hljs-string">"[title]"</span> ) ) {
			<span class="hljs-keyword">if</span> ( event &amp;&amp; event.type === <span class="hljs-string">"mouseover"</span> ) {
				target.attr( <span class="hljs-string">"title"</span>, <span class="hljs-string">""</span> );
			} <span class="hljs-keyword">else</span> {
				target.removeAttr( <span class="hljs-string">"title"</span> );
			}
		}

		tooltip = <span class="hljs-keyword">this</span>._tooltip( target );
		addDescribedBy( target, tooltip.attr( <span class="hljs-string">"id"</span> ) );
		tooltip.find( <span class="hljs-string">".ui-tooltip-content"</span> ).html( content );

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">position</span><span class="hljs-params">( event )</span> {</span>
			positionOption.of = event;
			<span class="hljs-keyword">if</span> ( tooltip.is( <span class="hljs-string">":hidden"</span> ) ) {
				<span class="hljs-keyword">return</span>;
			}
			tooltip.position( positionOption );
		}
		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.track &amp;&amp; event &amp;&amp; <span class="hljs-regexp">/^mouse/</span>.test( event.type ) ) {
			<span class="hljs-keyword">this</span>._on( <span class="hljs-keyword">this</span>.document, {
				mousemove: position
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-533">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-533">&#182;</a>
              </div>
              <p>trigger once to override element-relative positioning</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			position( event );
		} <span class="hljs-keyword">else</span> {
			tooltip.position( $.extend({
				of: target
			}, <span class="hljs-keyword">this</span>.options.position ) );
		}

		tooltip.hide();

		<span class="hljs-keyword">this</span>._show( tooltip, <span class="hljs-keyword">this</span>.options.show );</pre></div></div>
            
        </li>
        
        
        <li id="section-534">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-534">&#182;</a>
              </div>
              <p>Handle tracking tooltips that are shown with a delay (#8644). As soon
as the tooltip is visible, position the tooltip using the most recent
event.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.show &amp;&amp; <span class="hljs-keyword">this</span>.options.show.delay ) {
			delayedShow = <span class="hljs-keyword">this</span>.delayedShow = setInterval(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ( tooltip.is( <span class="hljs-string">":visible"</span> ) ) {
					position( positionOption.of );
					clearInterval( delayedShow );
				}
			}, $.fx.interval );
		}

		<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"open"</span>, event, { tooltip: tooltip } );

		events = {
			keyup: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
				<span class="hljs-keyword">if</span> ( event.keyCode === $.ui.keyCode.ESCAPE ) {
					<span class="hljs-keyword">var</span> fakeEvent = $.Event(event);
					fakeEvent.currentTarget = target[<span class="hljs-number">0</span>];
					<span class="hljs-keyword">this</span>.close( fakeEvent, <span class="hljs-literal">true</span> );
				}
			},
			remove: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">this</span>._removeTooltip( tooltip );
			}
		};
		<span class="hljs-keyword">if</span> ( !event || event.type === <span class="hljs-string">"mouseover"</span> ) {
			events.mouseleave = <span class="hljs-string">"close"</span>;
		}
		<span class="hljs-keyword">if</span> ( !event || event.type === <span class="hljs-string">"focusin"</span> ) {
			events.focusout = <span class="hljs-string">"close"</span>;
		}
		<span class="hljs-keyword">this</span>._on( <span class="hljs-literal">true</span>, target, events );
	},

	close: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( event )</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>,
			target = $( event ? event.currentTarget : <span class="hljs-keyword">this</span>.element ),
			tooltip = <span class="hljs-keyword">this</span>._find( target );</pre></div></div>
            
        </li>
        
        
        <li id="section-535">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-535">&#182;</a>
              </div>
              <p>disabling closes the tooltip, so we need to track when we’re closing
to avoid an infinite loop in case the tooltip becomes disabled on close</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.closing ) {
			<span class="hljs-keyword">return</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-536">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-536">&#182;</a>
              </div>
              <p>Clear the interval for delayed tracking tooltips</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		clearInterval( <span class="hljs-keyword">this</span>.delayedShow );</pre></div></div>
            
        </li>
        
        
        <li id="section-537">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-537">&#182;</a>
              </div>
              <p>only set title if we had one before (see comment in _open())</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( target.data( <span class="hljs-string">"ui-tooltip-title"</span> ) ) {
			target.attr( <span class="hljs-string">"title"</span>, target.data( <span class="hljs-string">"ui-tooltip-title"</span> ) );
		}

		removeDescribedBy( target );

		tooltip.stop( <span class="hljs-literal">true</span> );
		<span class="hljs-keyword">this</span>._hide( tooltip, <span class="hljs-keyword">this</span>.options.hide, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			that._removeTooltip( $( <span class="hljs-keyword">this</span> ) );
		});

		target.removeData( <span class="hljs-string">"ui-tooltip-open"</span> );
		<span class="hljs-keyword">this</span>._off( target, <span class="hljs-string">"mouseleave focusout keyup"</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-538">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-538">&#182;</a>
              </div>
              <p>Remove ‘remove’ binding only on delegated targets</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( target[<span class="hljs-number">0</span>] !== <span class="hljs-keyword">this</span>.element[<span class="hljs-number">0</span>] ) {
			<span class="hljs-keyword">this</span>._off( target, <span class="hljs-string">"remove"</span> );
		}
		<span class="hljs-keyword">this</span>._off( <span class="hljs-keyword">this</span>.document, <span class="hljs-string">"mousemove"</span> );

		<span class="hljs-keyword">if</span> ( event &amp;&amp; event.type === <span class="hljs-string">"mouseleave"</span> ) {
			$.each( <span class="hljs-keyword">this</span>.parents, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( id, parent )</span> {</span>
				$( parent.element ).attr( <span class="hljs-string">"title"</span>, parent.title );
				<span class="hljs-keyword">delete</span> that.parents[ id ];
			});
		}

		<span class="hljs-keyword">this</span>.closing = <span class="hljs-literal">true</span>;
		<span class="hljs-keyword">this</span>._trigger( <span class="hljs-string">"close"</span>, event, { tooltip: tooltip } );
		<span class="hljs-keyword">this</span>.closing = <span class="hljs-literal">false</span>;
	},

	_tooltip: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> {</span>
		<span class="hljs-keyword">var</span> id = <span class="hljs-string">"ui-tooltip-"</span> + increments++,
			tooltip = $( <span class="hljs-string">"&lt;div&gt;"</span> )
				.attr({
					id: id,
					role: <span class="hljs-string">"tooltip"</span>
				})
				.addClass( <span class="hljs-string">"ui-tooltip ui-widget ui-corner-all ui-widget-content "</span> +
					( <span class="hljs-keyword">this</span>.options.tooltipClass || <span class="hljs-string">""</span> ) );
		$( <span class="hljs-string">"&lt;div&gt;"</span> )
			.addClass( <span class="hljs-string">"ui-tooltip-content"</span> )
			.appendTo( tooltip );
		tooltip.appendTo( <span class="hljs-keyword">this</span>.document[<span class="hljs-number">0</span>].body );
		<span class="hljs-keyword">this</span>.tooltips[ id ] = element;
		<span class="hljs-keyword">return</span> tooltip;
	},

	_find: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( target )</span> {</span>
		<span class="hljs-keyword">var</span> id = target.data( <span class="hljs-string">"ui-tooltip-id"</span> );
		<span class="hljs-keyword">return</span> id ? $( <span class="hljs-string">"#"</span> + id ) : $();
	},

	_removeTooltip: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( tooltip )</span> {</span>
		tooltip.remove();
		<span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>.tooltips[ tooltip.attr( <span class="hljs-string">"id"</span> ) ];
	},

	_destroy: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-539">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-539">&#182;</a>
              </div>
              <p>close open tooltips</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$.each( <span class="hljs-keyword">this</span>.tooltips, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( id, element )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-540">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-540">&#182;</a>
              </div>
              <p>Delegate to close method to handle common cleanup</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">var</span> event = $.Event( <span class="hljs-string">"blur"</span> );
			event.target = event.currentTarget = element[<span class="hljs-number">0</span>];
			that.close( event, <span class="hljs-literal">true</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-541">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-541">&#182;</a>
              </div>
              <p>Remove immediately; destroying an open tooltip doesn’t use the
hide animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$( <span class="hljs-string">"#"</span> + id ).remove();</pre></div></div>
            
        </li>
        
        
        <li id="section-542">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-542">&#182;</a>
              </div>
              <p>Restore the title</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( element.data( <span class="hljs-string">"ui-tooltip-title"</span> ) ) {
				element.attr( <span class="hljs-string">"title"</span>, element.data( <span class="hljs-string">"ui-tooltip-title"</span> ) );
				element.removeData( <span class="hljs-string">"ui-tooltip-title"</span> );
			}
		});
	}
});

}( jQuery ) );
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($, undefined)</span> {</span>

<span class="hljs-keyword">var</span> dataSpace = <span class="hljs-string">"ui-effects-"</span>;

$.effects = {
	effect: {}
};

<span class="hljs-comment">/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( jQuery, undefined )</span> {</span>

	<span class="hljs-keyword">var</span> stepHooks = <span class="hljs-string">"backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-543">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-543">&#182;</a>
              </div>
              <p>plusequals test for += 100 -= 100</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	rplusequals = <span class="hljs-regexp">/^([\-+])=\s*(\d+\.?\d*)/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-544">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-544">&#182;</a>
              </div>
              <p>a set of RE’s that can match strings and generate color tuples.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	stringParsers = [{
			re: <span class="hljs-regexp">/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/</span>,
			parse: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( execResult )</span> {</span>
				<span class="hljs-keyword">return</span> [
					execResult[ <span class="hljs-number">1</span> ],
					execResult[ <span class="hljs-number">2</span> ],
					execResult[ <span class="hljs-number">3</span> ],
					execResult[ <span class="hljs-number">4</span> ]
				];
			}
		}, {
			re: <span class="hljs-regexp">/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/</span>,
			parse: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( execResult )</span> {</span>
				<span class="hljs-keyword">return</span> [
					execResult[ <span class="hljs-number">1</span> ] * <span class="hljs-number">2.55</span>,
					execResult[ <span class="hljs-number">2</span> ] * <span class="hljs-number">2.55</span>,
					execResult[ <span class="hljs-number">3</span> ] * <span class="hljs-number">2.55</span>,
					execResult[ <span class="hljs-number">4</span> ]
				];
			}
		}, {</pre></div></div>
            
        </li>
        
        
        <li id="section-545">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-545">&#182;</a>
              </div>
              <p>this regex ignores A-F because it’s compared against an already lowercased string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			re: <span class="hljs-regexp">/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/</span>,
			parse: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( execResult )</span> {</span>
				<span class="hljs-keyword">return</span> [
					<span class="hljs-built_in">parseInt</span>( execResult[ <span class="hljs-number">1</span> ], <span class="hljs-number">16</span> ),
					<span class="hljs-built_in">parseInt</span>( execResult[ <span class="hljs-number">2</span> ], <span class="hljs-number">16</span> ),
					<span class="hljs-built_in">parseInt</span>( execResult[ <span class="hljs-number">3</span> ], <span class="hljs-number">16</span> )
				];
			}
		}, {</pre></div></div>
            
        </li>
        
        
        <li id="section-546">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-546">&#182;</a>
              </div>
              <p>this regex ignores A-F because it’s compared against an already lowercased string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			re: <span class="hljs-regexp">/#([a-f0-9])([a-f0-9])([a-f0-9])/</span>,
			parse: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( execResult )</span> {</span>
				<span class="hljs-keyword">return</span> [
					<span class="hljs-built_in">parseInt</span>( execResult[ <span class="hljs-number">1</span> ] + execResult[ <span class="hljs-number">1</span> ], <span class="hljs-number">16</span> ),
					<span class="hljs-built_in">parseInt</span>( execResult[ <span class="hljs-number">2</span> ] + execResult[ <span class="hljs-number">2</span> ], <span class="hljs-number">16</span> ),
					<span class="hljs-built_in">parseInt</span>( execResult[ <span class="hljs-number">3</span> ] + execResult[ <span class="hljs-number">3</span> ], <span class="hljs-number">16</span> )
				];
			}
		}, {
			re: <span class="hljs-regexp">/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/</span>,
			space: <span class="hljs-string">"hsla"</span>,
			parse: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( execResult )</span> {</span>
				<span class="hljs-keyword">return</span> [
					execResult[ <span class="hljs-number">1</span> ],
					execResult[ <span class="hljs-number">2</span> ] / <span class="hljs-number">100</span>,
					execResult[ <span class="hljs-number">3</span> ] / <span class="hljs-number">100</span>,
					execResult[ <span class="hljs-number">4</span> ]
				];
			}
		}],</pre></div></div>
            
        </li>
        
        
        <li id="section-547">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-547">&#182;</a>
              </div>
              <p>jQuery.Color( )</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	color = jQuery.Color = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( color, green, blue, alpha )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> jQuery.Color.fn.parse( color, green, blue, alpha );
	},
	spaces = {
		rgba: {
			props: {
				red: {
					idx: <span class="hljs-number">0</span>,
					type: <span class="hljs-string">"byte"</span>
				},
				green: {
					idx: <span class="hljs-number">1</span>,
					type: <span class="hljs-string">"byte"</span>
				},
				blue: {
					idx: <span class="hljs-number">2</span>,
					type: <span class="hljs-string">"byte"</span>
				}
			}
		},

		hsla: {
			props: {
				hue: {
					idx: <span class="hljs-number">0</span>,
					type: <span class="hljs-string">"degrees"</span>
				},
				saturation: {
					idx: <span class="hljs-number">1</span>,
					type: <span class="hljs-string">"percent"</span>
				},
				lightness: {
					idx: <span class="hljs-number">2</span>,
					type: <span class="hljs-string">"percent"</span>
				}
			}
		}
	},
	propTypes = {
		<span class="hljs-string">"byte"</span>: {
			floor: <span class="hljs-literal">true</span>,
			max: <span class="hljs-number">255</span>
		},
		<span class="hljs-string">"percent"</span>: {
			max: <span class="hljs-number">1</span>
		},
		<span class="hljs-string">"degrees"</span>: {
			mod: <span class="hljs-number">360</span>,
			floor: <span class="hljs-literal">true</span>
		}
	},
	support = color.support = {},</pre></div></div>
            
        </li>
        
        
        <li id="section-548">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-548">&#182;</a>
              </div>
              <p>element for support tests</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	supportElem = jQuery( <span class="hljs-string">"&lt;p&gt;"</span> )[ <span class="hljs-number">0</span> ],</pre></div></div>
            
        </li>
        
        
        <li id="section-549">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-549">&#182;</a>
              </div>
              <p>colors = jQuery.Color.names</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	colors,</pre></div></div>
            
        </li>
        
        
        <li id="section-550">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-550">&#182;</a>
              </div>
              <p>local aliases of functions called often</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	each = jQuery.each;</pre></div></div>
            
        </li>
        
        
        <li id="section-551">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-551">&#182;</a>
              </div>
              <p>determine rgba support immediately</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>supportElem.style.cssText = <span class="hljs-string">"background-color:rgba(1,1,1,.5)"</span>;
support.rgba = supportElem.style.backgroundColor.indexOf( <span class="hljs-string">"rgba"</span> ) &gt; -<span class="hljs-number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-552">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-552">&#182;</a>
              </div>
              <p>define cache name and alpha properties
for rgba and hsla spaces</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>each( spaces, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( spaceName, space )</span> {</span>
	space.cache = <span class="hljs-string">"_"</span> + spaceName;
	space.props.alpha = {
		idx: <span class="hljs-number">3</span>,
		type: <span class="hljs-string">"percent"</span>,
		def: <span class="hljs-number">1</span>
	};
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clamp</span><span class="hljs-params">( value, prop, allowEmpty )</span> {</span>
	<span class="hljs-keyword">var</span> type = propTypes[ prop.type ] || {};

	<span class="hljs-keyword">if</span> ( value == <span class="hljs-literal">null</span> ) {
		<span class="hljs-keyword">return</span> (allowEmpty || !prop.def) ? <span class="hljs-literal">null</span> : prop.def;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-553">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-553">&#182;</a>
              </div>
              <p>~~ is an short way of doing floor for positive numbers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	value = type.floor ? ~~value : <span class="hljs-built_in">parseFloat</span>( value );</pre></div></div>
            
        </li>
        
        
        <li id="section-554">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-554">&#182;</a>
              </div>
              <p>IE will pass in empty strings as value for alpha,
which will hit this case</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">isNaN</span>( value ) ) {
		<span class="hljs-keyword">return</span> prop.def;
	}

	<span class="hljs-keyword">if</span> ( type.mod ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-555">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-555">&#182;</a>
              </div>
              <p>we add mod before modding to make sure that negatives values
get converted properly: -10 -&gt; 350</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">return</span> (value + type.mod) % type.mod;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-556">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-556">&#182;</a>
              </div>
              <p>for now all property types without mod have min and max</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span> &gt; value ? <span class="hljs-number">0</span> : type.max &lt; value ? type.max : value;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stringParse</span><span class="hljs-params">( string )</span> {</span>
	<span class="hljs-keyword">var</span> inst = color(),
		rgba = inst._rgba = [];

	string = string.toLowerCase();

	each( stringParsers, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, parser )</span> {</span>
		<span class="hljs-keyword">var</span> parsed,
			match = parser.re.exec( string ),
			values = match &amp;&amp; parser.parse( match ),
			spaceName = parser.space || <span class="hljs-string">"rgba"</span>;

		<span class="hljs-keyword">if</span> ( values ) {
			parsed = inst[ spaceName ]( values );</pre></div></div>
            
        </li>
        
        
        <li id="section-557">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-557">&#182;</a>
              </div>
              <p>if this was an rgba parse the assignment might happen twice
oh well….</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			inst[ spaces[ spaceName ].cache ] = parsed[ spaces[ spaceName ].cache ];
			rgba = inst._rgba = parsed._rgba;</pre></div></div>
            
        </li>
        
        
        <li id="section-558">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-558">&#182;</a>
              </div>
              <p>exit each( stringParsers ) here because we matched</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}
	});</pre></div></div>
            
        </li>
        
        
        <li id="section-559">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-559">&#182;</a>
              </div>
              <p>Found a stringParser that handled it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( rgba.length ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-560">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-560">&#182;</a>
              </div>
              <p>if this came from a parsed string, force “transparent” when alpha is 0
chrome, (and maybe others) return “transparent” as rgba(0,0,0,0)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( rgba.join() === <span class="hljs-string">"0,0,0,0"</span> ) {
			jQuery.extend( rgba, colors.transparent );
		}
		<span class="hljs-keyword">return</span> inst;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-561">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-561">&#182;</a>
              </div>
              <p>named colors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">return</span> colors[ string ];
}

color.fn = jQuery.extend( color.prototype, {
	parse: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( red, green, blue, alpha )</span> {</span>
		<span class="hljs-keyword">if</span> ( red === <span class="hljs-literal">undefined</span> ) {
			<span class="hljs-keyword">this</span>._rgba = [ <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span> ];
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
		}
		<span class="hljs-keyword">if</span> ( red.jquery || red.nodeType ) {
			red = jQuery( red ).css( green );
			green = <span class="hljs-literal">undefined</span>;
		}

		<span class="hljs-keyword">var</span> inst = <span class="hljs-keyword">this</span>,
			type = jQuery.type( red ),
			rgba = <span class="hljs-keyword">this</span>._rgba = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-562">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-562">&#182;</a>
              </div>
              <p>more than 1 argument specified - assume ( red, green, blue, alpha )</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( green !== <span class="hljs-literal">undefined</span> ) {
			red = [ red, green, blue, alpha ];
			type = <span class="hljs-string">"array"</span>;
		}

		<span class="hljs-keyword">if</span> ( type === <span class="hljs-string">"string"</span> ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.parse( stringParse( red ) || colors._default );
		}

		<span class="hljs-keyword">if</span> ( type === <span class="hljs-string">"array"</span> ) {
			each( spaces.rgba.props, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, prop )</span> {</span>
				rgba[ prop.idx ] = clamp( red[ prop.idx ], prop );
			});
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
		}

		<span class="hljs-keyword">if</span> ( type === <span class="hljs-string">"object"</span> ) {
			<span class="hljs-keyword">if</span> ( red <span class="hljs-keyword">instanceof</span> color ) {
				each( spaces, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( spaceName, space )</span> {</span>
					<span class="hljs-keyword">if</span> ( red[ space.cache ] ) {
						inst[ space.cache ] = red[ space.cache ].slice();
					}
				});
			} <span class="hljs-keyword">else</span> {
				each( spaces, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( spaceName, space )</span> {</span>
					<span class="hljs-keyword">var</span> cache = space.cache;
					each( space.props, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, prop )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-563">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-563">&#182;</a>
              </div>
              <p>if the cache doesn’t exist, and we know how to convert</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						<span class="hljs-keyword">if</span> ( !inst[ cache ] &amp;&amp; space.to ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-564">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-564">&#182;</a>
              </div>
              <p>if the value was null, we don’t need to copy it
if the key was alpha, we don’t need to copy it either</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							<span class="hljs-keyword">if</span> ( key === <span class="hljs-string">"alpha"</span> || red[ key ] == <span class="hljs-literal">null</span> ) {
								<span class="hljs-keyword">return</span>;
							}
							inst[ cache ] = space.to( inst._rgba );
						}</pre></div></div>
            
        </li>
        
        
        <li id="section-565">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-565">&#182;</a>
              </div>
              <p>this is the only case where we allow nulls for ALL properties.
call clamp with alwaysAllowEmpty</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						inst[ cache ][ prop.idx ] = clamp( red[ key ], prop, <span class="hljs-literal">true</span> );
					});</pre></div></div>
            
        </li>
        
        
        <li id="section-566">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-566">&#182;</a>
              </div>
              <p>everything defined but alpha?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">if</span> ( inst[ cache ] &amp;&amp; jQuery.inArray( <span class="hljs-literal">null</span>, inst[ cache ].slice( <span class="hljs-number">0</span>, <span class="hljs-number">3</span> ) ) &lt; <span class="hljs-number">0</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-567">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-567">&#182;</a>
              </div>
              <p>use the default of 1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>						inst[ cache ][ <span class="hljs-number">3</span> ] = <span class="hljs-number">1</span>;
						<span class="hljs-keyword">if</span> ( space.from ) {
							inst._rgba = space.from( inst[ cache ] );
						}
					}
				});
			}
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
		}
	},
	is: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( compare )</span> {</span>
		<span class="hljs-keyword">var</span> is = color( compare ),
			same = <span class="hljs-literal">true</span>,
			inst = <span class="hljs-keyword">this</span>;

		each( spaces, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( _, space )</span> {</span>
			<span class="hljs-keyword">var</span> localCache,
				isCache = is[ space.cache ];
			<span class="hljs-keyword">if</span> (isCache) {
				localCache = inst[ space.cache ] || space.to &amp;&amp; space.to( inst._rgba ) || [];
				each( space.props, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( _, prop )</span> {</span>
					<span class="hljs-keyword">if</span> ( isCache[ prop.idx ] != <span class="hljs-literal">null</span> ) {
						same = ( isCache[ prop.idx ] === localCache[ prop.idx ] );
						<span class="hljs-keyword">return</span> same;
					}
				});
			}
			<span class="hljs-keyword">return</span> same;
		});
		<span class="hljs-keyword">return</span> same;
	},
	_space: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> used = [],
			inst = <span class="hljs-keyword">this</span>;
		each( spaces, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( spaceName, space )</span> {</span>
			<span class="hljs-keyword">if</span> ( inst[ space.cache ] ) {
				used.push( spaceName );
			}
		});
		<span class="hljs-keyword">return</span> used.pop();
	},
	transition: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( other, distance )</span> {</span>
		<span class="hljs-keyword">var</span> end = color( other ),
			spaceName = end._space(),
			space = spaces[ spaceName ],
			startColor = <span class="hljs-keyword">this</span>.alpha() === <span class="hljs-number">0</span> ? color( <span class="hljs-string">"transparent"</span> ) : <span class="hljs-keyword">this</span>,
			start = startColor[ space.cache ] || space.to( startColor._rgba ),
			result = start.slice();

		end = end[ space.cache ];
		each( space.props, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, prop )</span> {</span>
			<span class="hljs-keyword">var</span> index = prop.idx,
				startValue = start[ index ],
				endValue = end[ index ],
				type = propTypes[ prop.type ] || {};</pre></div></div>
            
        </li>
        
        
        <li id="section-568">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-568">&#182;</a>
              </div>
              <p>if null, don’t override start value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( endValue === <span class="hljs-literal">null</span> ) {
				<span class="hljs-keyword">return</span>;
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-569">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-569">&#182;</a>
              </div>
              <p>if null - use end</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( startValue === <span class="hljs-literal">null</span> ) {
				result[ index ] = endValue;
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">if</span> ( type.mod ) {
					<span class="hljs-keyword">if</span> ( endValue - startValue &gt; type.mod / <span class="hljs-number">2</span> ) {
						startValue += type.mod;
					} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( startValue - endValue &gt; type.mod / <span class="hljs-number">2</span> ) {
						startValue -= type.mod;
					}
				}
				result[ index ] = clamp( ( endValue - startValue ) * distance + startValue, prop );
			}
		});
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[ spaceName ]( result );
	},
	blend: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( opaque )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-570">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-570">&#182;</a>
              </div>
              <p>if we are already opaque - return ourself</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._rgba[ <span class="hljs-number">3</span> ] === <span class="hljs-number">1</span> ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
		}

		<span class="hljs-keyword">var</span> rgb = <span class="hljs-keyword">this</span>._rgba.slice(),
			a = rgb.pop(),
			blend = color( opaque )._rgba;

		<span class="hljs-keyword">return</span> color( jQuery.map( rgb, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( v, i )</span> {</span>
			<span class="hljs-keyword">return</span> ( <span class="hljs-number">1</span> - a ) * blend[ i ] + a * v;
		}));
	},
	toRgbaString: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> prefix = <span class="hljs-string">"rgba("</span>,
			rgba = jQuery.map( <span class="hljs-keyword">this</span>._rgba, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( v, i )</span> {</span>
				<span class="hljs-keyword">return</span> v == <span class="hljs-literal">null</span> ? ( i &gt; <span class="hljs-number">2</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span> ) : v;
			});

		<span class="hljs-keyword">if</span> ( rgba[ <span class="hljs-number">3</span> ] === <span class="hljs-number">1</span> ) {
			rgba.pop();
			prefix = <span class="hljs-string">"rgb("</span>;
		}

		<span class="hljs-keyword">return</span> prefix + rgba.join() + <span class="hljs-string">")"</span>;
	},
	toHslaString: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> prefix = <span class="hljs-string">"hsla("</span>,
			hsla = jQuery.map( <span class="hljs-keyword">this</span>.hsla(), <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( v, i )</span> {</span>
				<span class="hljs-keyword">if</span> ( v == <span class="hljs-literal">null</span> ) {
					v = i &gt; <span class="hljs-number">2</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
				}</pre></div></div>
            
        </li>
        
        
        <li id="section-571">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-571">&#182;</a>
              </div>
              <p>catch 1 and 2</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( i &amp;&amp; i &lt; <span class="hljs-number">3</span> ) {
					v = <span class="hljs-built_in">Math</span>.round( v * <span class="hljs-number">100</span> ) + <span class="hljs-string">"%"</span>;
				}
				<span class="hljs-keyword">return</span> v;
			});

		<span class="hljs-keyword">if</span> ( hsla[ <span class="hljs-number">3</span> ] === <span class="hljs-number">1</span> ) {
			hsla.pop();
			prefix = <span class="hljs-string">"hsl("</span>;
		}
		<span class="hljs-keyword">return</span> prefix + hsla.join() + <span class="hljs-string">")"</span>;
	},
	toHexString: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( includeAlpha )</span> {</span>
		<span class="hljs-keyword">var</span> rgba = <span class="hljs-keyword">this</span>._rgba.slice(),
			alpha = rgba.pop();

		<span class="hljs-keyword">if</span> ( includeAlpha ) {
			rgba.push( ~~( alpha * <span class="hljs-number">255</span> ) );
		}

		<span class="hljs-keyword">return</span> <span class="hljs-string">"#"</span> + jQuery.map( rgba, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( v )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-572">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-572">&#182;</a>
              </div>
              <p>default to 0 when nulls exist</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			v = ( v || <span class="hljs-number">0</span> ).toString( <span class="hljs-number">16</span> );
			<span class="hljs-keyword">return</span> v.length === <span class="hljs-number">1</span> ? <span class="hljs-string">"0"</span> + v : v;
		}).join(<span class="hljs-string">""</span>);
	},
	toString: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._rgba[ <span class="hljs-number">3</span> ] === <span class="hljs-number">0</span> ? <span class="hljs-string">"transparent"</span> : <span class="hljs-keyword">this</span>.toRgbaString();
	}
});
color.fn.parse.prototype = color.fn;</pre></div></div>
            
        </li>
        
        
        <li id="section-573">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-573">&#182;</a>
              </div>
              <p>hsla conversions adapted from:
<a href="https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021">https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hue2rgb</span><span class="hljs-params">( p, q, h )</span> {</span>
	h = ( h + <span class="hljs-number">1</span> ) % <span class="hljs-number">1</span>;
	<span class="hljs-keyword">if</span> ( h * <span class="hljs-number">6</span> &lt; <span class="hljs-number">1</span> ) {
		<span class="hljs-keyword">return</span> p + (q - p) * h * <span class="hljs-number">6</span>;
	}
	<span class="hljs-keyword">if</span> ( h * <span class="hljs-number">2</span> &lt; <span class="hljs-number">1</span>) {
		<span class="hljs-keyword">return</span> q;
	}
	<span class="hljs-keyword">if</span> ( h * <span class="hljs-number">3</span> &lt; <span class="hljs-number">2</span> ) {
		<span class="hljs-keyword">return</span> p + (q - p) * ((<span class="hljs-number">2</span>/<span class="hljs-number">3</span>) - h) * <span class="hljs-number">6</span>;
	}
	<span class="hljs-keyword">return</span> p;
}

spaces.hsla.to = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( rgba )</span> {</span>
	<span class="hljs-keyword">if</span> ( rgba[ <span class="hljs-number">0</span> ] == <span class="hljs-literal">null</span> || rgba[ <span class="hljs-number">1</span> ] == <span class="hljs-literal">null</span> || rgba[ <span class="hljs-number">2</span> ] == <span class="hljs-literal">null</span> ) {
		<span class="hljs-keyword">return</span> [ <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, rgba[ <span class="hljs-number">3</span> ] ];
	}
	<span class="hljs-keyword">var</span> r = rgba[ <span class="hljs-number">0</span> ] / <span class="hljs-number">255</span>,
		g = rgba[ <span class="hljs-number">1</span> ] / <span class="hljs-number">255</span>,
		b = rgba[ <span class="hljs-number">2</span> ] / <span class="hljs-number">255</span>,
		a = rgba[ <span class="hljs-number">3</span> ],
		max = <span class="hljs-built_in">Math</span>.max( r, g, b ),
		min = <span class="hljs-built_in">Math</span>.min( r, g, b ),
		diff = max - min,
		add = max + min,
		l = add * <span class="hljs-number">0.5</span>,
		h, s;

	<span class="hljs-keyword">if</span> ( min === max ) {
		h = <span class="hljs-number">0</span>;
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( r === max ) {
		h = ( <span class="hljs-number">60</span> * ( g - b ) / diff ) + <span class="hljs-number">360</span>;
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( g === max ) {
		h = ( <span class="hljs-number">60</span> * ( b - r ) / diff ) + <span class="hljs-number">120</span>;
	} <span class="hljs-keyword">else</span> {
		h = ( <span class="hljs-number">60</span> * ( r - g ) / diff ) + <span class="hljs-number">240</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-574">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-574">&#182;</a>
              </div>
              <p>chroma (diff) == 0 means greyscale which, by definition, saturation = 0%
otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( diff === <span class="hljs-number">0</span> ) {
		s = <span class="hljs-number">0</span>;
	} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( l &lt;= <span class="hljs-number">0.5</span> ) {
		s = diff / add;
	} <span class="hljs-keyword">else</span> {
		s = diff / ( <span class="hljs-number">2</span> - add );
	}
	<span class="hljs-keyword">return</span> [ <span class="hljs-built_in">Math</span>.round(h) % <span class="hljs-number">360</span>, s, l, a == <span class="hljs-literal">null</span> ? <span class="hljs-number">1</span> : a ];
};

spaces.hsla.from = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( hsla )</span> {</span>
	<span class="hljs-keyword">if</span> ( hsla[ <span class="hljs-number">0</span> ] == <span class="hljs-literal">null</span> || hsla[ <span class="hljs-number">1</span> ] == <span class="hljs-literal">null</span> || hsla[ <span class="hljs-number">2</span> ] == <span class="hljs-literal">null</span> ) {
		<span class="hljs-keyword">return</span> [ <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, hsla[ <span class="hljs-number">3</span> ] ];
	}
	<span class="hljs-keyword">var</span> h = hsla[ <span class="hljs-number">0</span> ] / <span class="hljs-number">360</span>,
		s = hsla[ <span class="hljs-number">1</span> ],
		l = hsla[ <span class="hljs-number">2</span> ],
		a = hsla[ <span class="hljs-number">3</span> ],
		q = l &lt;= <span class="hljs-number">0.5</span> ? l * ( <span class="hljs-number">1</span> + s ) : l + s - l * s,
		p = <span class="hljs-number">2</span> * l - q;

	<span class="hljs-keyword">return</span> [
		<span class="hljs-built_in">Math</span>.round( hue2rgb( p, q, h + ( <span class="hljs-number">1</span> / <span class="hljs-number">3</span> ) ) * <span class="hljs-number">255</span> ),
		<span class="hljs-built_in">Math</span>.round( hue2rgb( p, q, h ) * <span class="hljs-number">255</span> ),
		<span class="hljs-built_in">Math</span>.round( hue2rgb( p, q, h - ( <span class="hljs-number">1</span> / <span class="hljs-number">3</span> ) ) * <span class="hljs-number">255</span> ),
		a
	];
};


each( spaces, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( spaceName, space )</span> {</span>
	<span class="hljs-keyword">var</span> props = space.props,
		cache = space.cache,
		to = space.to,
		from = space.from;</pre></div></div>
            
        </li>
        
        
        <li id="section-575">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-575">&#182;</a>
              </div>
              <p>makes rgba() and hsla()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	color.fn[ spaceName ] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( value )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-576">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-576">&#182;</a>
              </div>
              <p>generate a cache for this space if it doesn’t exist</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( to &amp;&amp; !<span class="hljs-keyword">this</span>[ cache ] ) {
			<span class="hljs-keyword">this</span>[ cache ] = to( <span class="hljs-keyword">this</span>._rgba );
		}
		<span class="hljs-keyword">if</span> ( value === <span class="hljs-literal">undefined</span> ) {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[ cache ].slice();
		}

		<span class="hljs-keyword">var</span> ret,
			type = jQuery.type( value ),
			arr = ( type === <span class="hljs-string">"array"</span> || type === <span class="hljs-string">"object"</span> ) ? value : <span class="hljs-built_in">arguments</span>,
			local = <span class="hljs-keyword">this</span>[ cache ].slice();

		each( props, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, prop )</span> {</span>
			<span class="hljs-keyword">var</span> val = arr[ type === <span class="hljs-string">"object"</span> ? key : prop.idx ];
			<span class="hljs-keyword">if</span> ( val == <span class="hljs-literal">null</span> ) {
				val = local[ prop.idx ];
			}
			local[ prop.idx ] = clamp( val, prop );
		});

		<span class="hljs-keyword">if</span> ( from ) {
			ret = color( from( local ) );
			ret[ cache ] = local;
			<span class="hljs-keyword">return</span> ret;
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">return</span> color( local );
		}
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-577">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-577">&#182;</a>
              </div>
              <p>makes red() green() blue() alpha() hue() saturation() lightness()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	each( props, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( key, prop )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-578">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-578">&#182;</a>
              </div>
              <p>alpha is included in more than one space</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( color.fn[ key ] ) {
			<span class="hljs-keyword">return</span>;
		}
		color.fn[ key ] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( value )</span> {</span>
			<span class="hljs-keyword">var</span> vtype = jQuery.type( value ),
				fn = ( key === <span class="hljs-string">"alpha"</span> ? ( <span class="hljs-keyword">this</span>._hsla ? <span class="hljs-string">"hsla"</span> : <span class="hljs-string">"rgba"</span> ) : spaceName ),
				local = <span class="hljs-keyword">this</span>[ fn ](),
				cur = local[ prop.idx ],
				match;

			<span class="hljs-keyword">if</span> ( vtype === <span class="hljs-string">"undefined"</span> ) {
				<span class="hljs-keyword">return</span> cur;
			}

			<span class="hljs-keyword">if</span> ( vtype === <span class="hljs-string">"function"</span> ) {
				value = value.call( <span class="hljs-keyword">this</span>, cur );
				vtype = jQuery.type( value );
			}
			<span class="hljs-keyword">if</span> ( value == <span class="hljs-literal">null</span> &amp;&amp; prop.empty ) {
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
			}
			<span class="hljs-keyword">if</span> ( vtype === <span class="hljs-string">"string"</span> ) {
				match = rplusequals.exec( value );
				<span class="hljs-keyword">if</span> ( match ) {
					value = cur + <span class="hljs-built_in">parseFloat</span>( match[ <span class="hljs-number">2</span> ] ) * ( match[ <span class="hljs-number">1</span> ] === <span class="hljs-string">"+"</span> ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span> );
				}
			}
			local[ prop.idx ] = value;
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[ fn ]( local );
		};
	});
});</pre></div></div>
            
        </li>
        
        
        <li id="section-579">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-579">&#182;</a>
              </div>
              <p>add cssHook and .fx.step function for each named hook.
accept a space separated string of properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>color.hook = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( hook )</span> {</span>
	<span class="hljs-keyword">var</span> hooks = hook.split( <span class="hljs-string">" "</span> );
	each( hooks, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, hook )</span> {</span>
		jQuery.cssHooks[ hook ] = {
			set: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( elem, value )</span> {</span>
				<span class="hljs-keyword">var</span> parsed, curElem,
					backgroundColor = <span class="hljs-string">""</span>;

				<span class="hljs-keyword">if</span> ( value !== <span class="hljs-string">"transparent"</span> &amp;&amp; ( jQuery.type( value ) !== <span class="hljs-string">"string"</span> || ( parsed = stringParse( value ) ) ) ) {
					value = color( parsed || value );
					<span class="hljs-keyword">if</span> ( !support.rgba &amp;&amp; value._rgba[ <span class="hljs-number">3</span> ] !== <span class="hljs-number">1</span> ) {
						curElem = hook === <span class="hljs-string">"backgroundColor"</span> ? elem.parentNode : elem;
						<span class="hljs-keyword">while</span> (
							(backgroundColor === <span class="hljs-string">""</span> || backgroundColor === <span class="hljs-string">"transparent"</span>) &amp;&amp;
							curElem &amp;&amp; curElem.style
						) {
							<span class="hljs-keyword">try</span> {
								backgroundColor = jQuery.css( curElem, <span class="hljs-string">"backgroundColor"</span> );
								curElem = curElem.parentNode;
							} <span class="hljs-keyword">catch</span> ( e ) {
							}
						}

						value = value.blend( backgroundColor &amp;&amp; backgroundColor !== <span class="hljs-string">"transparent"</span> ?
							backgroundColor :
							<span class="hljs-string">"_default"</span> );
					}

					value = value.toRgbaString();
				}
				<span class="hljs-keyword">try</span> {
					elem.style[ hook ] = value;
				} <span class="hljs-keyword">catch</span>( e ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-580">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-580">&#182;</a>
              </div>
              <p>wrapped to prevent IE from throwing errors on “invalid” values like ‘auto’ or ‘inherit’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				}
			}
		};
		jQuery.fx.step[ hook ] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( fx )</span> {</span>
			<span class="hljs-keyword">if</span> ( !fx.colorInit ) {
				fx.start = color( fx.elem, hook );
				fx.end = color( fx.end );
				fx.colorInit = <span class="hljs-literal">true</span>;
			}
			jQuery.cssHooks[ hook ].set( fx.elem, fx.start.transition( fx.end, fx.pos ) );
		};
	});

};

color.hook( stepHooks );

jQuery.cssHooks.borderColor = {
	expand: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( value )</span> {</span>
		<span class="hljs-keyword">var</span> expanded = {};

		each( [ <span class="hljs-string">"Top"</span>, <span class="hljs-string">"Right"</span>, <span class="hljs-string">"Bottom"</span>, <span class="hljs-string">"Left"</span> ], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, part )</span> {</span>
			expanded[ <span class="hljs-string">"border"</span> + part + <span class="hljs-string">"Color"</span> ] = value;
		});
		<span class="hljs-keyword">return</span> expanded;
	}
};</pre></div></div>
            
        </li>
        
        
        <li id="section-581">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-581">&#182;</a>
              </div>
              <p>Basic color names only.
Usage of any of the other color names requires adding yourself or including
jquery.color.svg-names.js.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>colors = jQuery.Color.names = {</pre></div></div>
            
        </li>
        
        
        <li id="section-582">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-582">&#182;</a>
              </div>
              <p>4.1. Basic color keywords</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	aqua: <span class="hljs-string">"#00ffff"</span>,
	black: <span class="hljs-string">"#000000"</span>,
	blue: <span class="hljs-string">"#0000ff"</span>,
	fuchsia: <span class="hljs-string">"#ff00ff"</span>,
	gray: <span class="hljs-string">"#808080"</span>,
	green: <span class="hljs-string">"#008000"</span>,
	lime: <span class="hljs-string">"#00ff00"</span>,
	maroon: <span class="hljs-string">"#800000"</span>,
	navy: <span class="hljs-string">"#000080"</span>,
	olive: <span class="hljs-string">"#808000"</span>,
	purple: <span class="hljs-string">"#800080"</span>,
	red: <span class="hljs-string">"#ff0000"</span>,
	silver: <span class="hljs-string">"#c0c0c0"</span>,
	teal: <span class="hljs-string">"#008080"</span>,
	white: <span class="hljs-string">"#ffffff"</span>,
	yellow: <span class="hljs-string">"#ffff00"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-583">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-583">&#182;</a>
              </div>
              <p>4.2.3. “transparent” color keyword</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	transparent: [ <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">0</span> ],

	_default: <span class="hljs-string">"#ffffff"</span>
};

})( jQuery );


<span class="hljs-comment">/******************************************************************************/</span>
<span class="hljs-comment">/****************************** CLASS ANIMATIONS ******************************/</span>
<span class="hljs-comment">/******************************************************************************/</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

<span class="hljs-keyword">var</span> classAnimationActions = [ <span class="hljs-string">"add"</span>, <span class="hljs-string">"remove"</span>, <span class="hljs-string">"toggle"</span> ],
	shorthandStyles = {
		border: <span class="hljs-number">1</span>,
		borderBottom: <span class="hljs-number">1</span>,
		borderColor: <span class="hljs-number">1</span>,
		borderLeft: <span class="hljs-number">1</span>,
		borderRight: <span class="hljs-number">1</span>,
		borderTop: <span class="hljs-number">1</span>,
		borderWidth: <span class="hljs-number">1</span>,
		margin: <span class="hljs-number">1</span>,
		padding: <span class="hljs-number">1</span>
	};

$.each([ <span class="hljs-string">"borderLeftStyle"</span>, <span class="hljs-string">"borderRightStyle"</span>, <span class="hljs-string">"borderBottomStyle"</span>, <span class="hljs-string">"borderTopStyle"</span> ], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( _, prop )</span> {</span>
	$.fx.step[ prop ] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( fx )</span> {</span>
		<span class="hljs-keyword">if</span> ( fx.end !== <span class="hljs-string">"none"</span> &amp;&amp; !fx.setAttr || fx.pos === <span class="hljs-number">1</span> &amp;&amp; !fx.setAttr ) {
			jQuery.style( fx.elem, prop, fx.end );
			fx.setAttr = <span class="hljs-literal">true</span>;
		}
	};
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getElementStyles</span><span class="hljs-params">( elem )</span> {</span>
	<span class="hljs-keyword">var</span> key, len,
		style = elem.ownerDocument.defaultView ?
			elem.ownerDocument.defaultView.getComputedStyle( elem, <span class="hljs-literal">null</span> ) :
			elem.currentStyle,
		styles = {};

	<span class="hljs-keyword">if</span> ( style &amp;&amp; style.length &amp;&amp; style[ <span class="hljs-number">0</span> ] &amp;&amp; style[ style[ <span class="hljs-number">0</span> ] ] ) {
		len = style.length;
		<span class="hljs-keyword">while</span> ( len-- ) {
			key = style[ len ];
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> style[ key ] === <span class="hljs-string">"string"</span> ) {
				styles[ $.camelCase( key ) ] = style[ key ];
			}
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-584">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-584">&#182;</a>
              </div>
              <p>support: Opera, IE &lt;9</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	} <span class="hljs-keyword">else</span> {
		<span class="hljs-keyword">for</span> ( key <span class="hljs-keyword">in</span> style ) {
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> style[ key ] === <span class="hljs-string">"string"</span> ) {
				styles[ key ] = style[ key ];
			}
		}
	}

	<span class="hljs-keyword">return</span> styles;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">styleDifference</span><span class="hljs-params">( oldStyle, newStyle )</span> {</span>
	<span class="hljs-keyword">var</span> diff = {},
		name, value;

	<span class="hljs-keyword">for</span> ( name <span class="hljs-keyword">in</span> newStyle ) {
		value = newStyle[ name ];
		<span class="hljs-keyword">if</span> ( oldStyle[ name ] !== value ) {
			<span class="hljs-keyword">if</span> ( !shorthandStyles[ name ] ) {
				<span class="hljs-keyword">if</span> ( $.fx.step[ name ] || !<span class="hljs-built_in">isNaN</span>( <span class="hljs-built_in">parseFloat</span>( value ) ) ) {
					diff[ name ] = value;
				}
			}
		}
	}

	<span class="hljs-keyword">return</span> diff;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-585">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-585">&#182;</a>
              </div>
              <p>support: jQuery &lt;1.8</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">if</span> ( !$.fn.addBack ) {
	$.fn.addBack = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( selector )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.add( selector == <span class="hljs-literal">null</span> ?
			<span class="hljs-keyword">this</span>.prevObject : <span class="hljs-keyword">this</span>.prevObject.filter( selector )
		);
	};
}

$.effects.animateClass = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( value, duration, easing, callback )</span> {</span>
	<span class="hljs-keyword">var</span> o = $.speed( duration, easing, callback );

	<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.queue( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">var</span> animated = $( <span class="hljs-keyword">this</span> ),
			baseClass = animated.attr( <span class="hljs-string">"class"</span> ) || <span class="hljs-string">""</span>,
			applyClassChange,
			allAnimations = o.children ? animated.find( <span class="hljs-string">"*"</span> ).addBack() : animated;</pre></div></div>
            
        </li>
        
        
        <li id="section-586">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-586">&#182;</a>
              </div>
              <p>map the animated objects to store the original styles.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		allAnimations = allAnimations.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> el = $( <span class="hljs-keyword">this</span> );
			<span class="hljs-keyword">return</span> {
				el: el,
				start: getElementStyles( <span class="hljs-keyword">this</span> )
			};
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-587">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-587">&#182;</a>
              </div>
              <p>apply class change</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		applyClassChange = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			$.each( classAnimationActions, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(i, action)</span> {</span>
				<span class="hljs-keyword">if</span> ( value[ action ] ) {
					animated[ action + <span class="hljs-string">"Class"</span> ]( value[ action ] );
				}
			});
		};
		applyClassChange();</pre></div></div>
            
        </li>
        
        
        <li id="section-588">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-588">&#182;</a>
              </div>
              <p>map all animated objects again - calculate new styles and diff</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		allAnimations = allAnimations.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">this</span>.end = getElementStyles( <span class="hljs-keyword">this</span>.el[ <span class="hljs-number">0</span> ] );
			<span class="hljs-keyword">this</span>.diff = styleDifference( <span class="hljs-keyword">this</span>.start, <span class="hljs-keyword">this</span>.end );
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-589">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-589">&#182;</a>
              </div>
              <p>apply original class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		animated.attr( <span class="hljs-string">"class"</span>, baseClass );</pre></div></div>
            
        </li>
        
        
        <li id="section-590">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-590">&#182;</a>
              </div>
              <p>map all animated objects again - this time collecting a promise</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		allAnimations = allAnimations.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">var</span> styleInfo = <span class="hljs-keyword">this</span>,
				dfd = $.Deferred(),
				opts = $.extend({}, o, {
					queue: <span class="hljs-literal">false</span>,
					complete: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
						dfd.resolve( styleInfo );
					}
				});

			<span class="hljs-keyword">this</span>.el.animate( <span class="hljs-keyword">this</span>.diff, opts );
			<span class="hljs-keyword">return</span> dfd.promise();
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-591">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-591">&#182;</a>
              </div>
              <p>once all animations have completed:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		$.when.apply( $, allAnimations.get() ).done(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-592">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-592">&#182;</a>
              </div>
              <p>set the final class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			applyClassChange();</pre></div></div>
            
        </li>
        
        
        <li id="section-593">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-593">&#182;</a>
              </div>
              <p>for each animated element,
clear all css properties that were animated</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			$.each( <span class="hljs-built_in">arguments</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">var</span> el = <span class="hljs-keyword">this</span>.el;
				$.each( <span class="hljs-keyword">this</span>.diff, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(key)</span> {</span>
					el.css( key, <span class="hljs-string">""</span> );
				});
			});</pre></div></div>
            
        </li>
        
        
        <li id="section-594">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-594">&#182;</a>
              </div>
              <p>this is guarnteed to be there if you use jQuery.speed()
it also handles dequeuing the next anim…</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			o.complete.call( animated[ <span class="hljs-number">0</span> ] );
		});
	});
};

$.fn.extend({
	addClass: (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( orig )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( classNames, speed, easing, callback )</span> {</span>
			<span class="hljs-keyword">return</span> speed ?
				$.effects.animateClass.call( <span class="hljs-keyword">this</span>,
					{ add: classNames }, speed, easing, callback ) :
				orig.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
		};
	})( $.fn.addClass ),

	removeClass: (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( orig )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( classNames, speed, easing, callback )</span> {</span>
			<span class="hljs-keyword">return</span> <span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span> ?
				$.effects.animateClass.call( <span class="hljs-keyword">this</span>,
					{ remove: classNames }, speed, easing, callback ) :
				orig.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
		};
	})( $.fn.removeClass ),

	toggleClass: (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( orig )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( classNames, force, speed, easing, callback )</span> {</span>
			<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> force === <span class="hljs-string">"boolean"</span> || force === <span class="hljs-literal">undefined</span> ) {
				<span class="hljs-keyword">if</span> ( !speed ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-595">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-595">&#182;</a>
              </div>
              <p>without speed parameter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>					<span class="hljs-keyword">return</span> orig.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">return</span> $.effects.animateClass.call( <span class="hljs-keyword">this</span>,
						(force ? { add: classNames } : { remove: classNames }),
						speed, easing, callback );
				}
			} <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-596">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-596">&#182;</a>
              </div>
              <p>without force parameter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">return</span> $.effects.animateClass.call( <span class="hljs-keyword">this</span>,
					{ toggle: classNames }, force, speed, easing );
			}
		};
	})( $.fn.toggleClass ),

	switchClass: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( remove, add, speed, easing, callback)</span> {</span>
		<span class="hljs-keyword">return</span> $.effects.animateClass.call( <span class="hljs-keyword">this</span>, {
			add: add,
			remove: remove
		}, speed, easing, callback );
	}
});

})();

<span class="hljs-comment">/******************************************************************************/</span>
<span class="hljs-comment">/*********************************** EFFECTS **********************************/</span>
<span class="hljs-comment">/******************************************************************************/</span>

(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>

$.extend( $.effects, {
	version: <span class="hljs-string">"1.10.3"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-597">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-597">&#182;</a>
              </div>
              <p>Saves a set of properties in a data storage</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	save: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element, set )</span> {</span>
		<span class="hljs-keyword">for</span>( <span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i &lt; set.length; i++ ) {
			<span class="hljs-keyword">if</span> ( set[ i ] !== <span class="hljs-literal">null</span> ) {
				element.data( dataSpace + set[ i ], element[ <span class="hljs-number">0</span> ].style[ set[ i ] ] );
			}
		}
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-598">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-598">&#182;</a>
              </div>
              <p>Restores a set of previously saved properties from a data storage</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	restore: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element, set )</span> {</span>
		<span class="hljs-keyword">var</span> val, i;
		<span class="hljs-keyword">for</span>( i=<span class="hljs-number">0</span>; i &lt; set.length; i++ ) {
			<span class="hljs-keyword">if</span> ( set[ i ] !== <span class="hljs-literal">null</span> ) {
				val = element.data( dataSpace + set[ i ] );</pre></div></div>
            
        </li>
        
        
        <li id="section-599">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-599">&#182;</a>
              </div>
              <p>support: jQuery 1.6.2
<a href="http://bugs.jquery.com/ticket/9917">http://bugs.jquery.com/ticket/9917</a>
jQuery 1.6.2 incorrectly returns undefined for any falsy value.
We can’t differentiate between “” and 0 here, so we just assume
empty string since it’s likely to be a more common value…</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( val === <span class="hljs-literal">undefined</span> ) {
					val = <span class="hljs-string">""</span>;
				}
				element.css( set[ i ], val );
			}
		}
	},

	setMode: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( el, mode )</span> {</span>
		<span class="hljs-keyword">if</span> (mode === <span class="hljs-string">"toggle"</span>) {
			mode = el.is( <span class="hljs-string">":hidden"</span> ) ? <span class="hljs-string">"show"</span> : <span class="hljs-string">"hide"</span>;
		}
		<span class="hljs-keyword">return</span> mode;
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-600">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-600">&#182;</a>
              </div>
              <p>Translates a [top,left] array into a baseline value
this should be a little more flexible in the future to handle a string &amp; hash</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	getBaseline: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( origin, original )</span> {</span>
		<span class="hljs-keyword">var</span> y, x;
		<span class="hljs-keyword">switch</span> ( origin[ <span class="hljs-number">0</span> ] ) {
			<span class="hljs-keyword">case</span> <span class="hljs-string">"top"</span>: y = <span class="hljs-number">0</span>; <span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">"middle"</span>: y = <span class="hljs-number">0.5</span>; <span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">"bottom"</span>: y = <span class="hljs-number">1</span>; <span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">default</span>: y = origin[ <span class="hljs-number">0</span> ] / original.height;
		}
		<span class="hljs-keyword">switch</span> ( origin[ <span class="hljs-number">1</span> ] ) {
			<span class="hljs-keyword">case</span> <span class="hljs-string">"left"</span>: x = <span class="hljs-number">0</span>; <span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">"center"</span>: x = <span class="hljs-number">0.5</span>; <span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">"right"</span>: x = <span class="hljs-number">1</span>; <span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">default</span>: x = origin[ <span class="hljs-number">1</span> ] / original.width;
		}
		<span class="hljs-keyword">return</span> {
			x: x,
			y: y
		};
	},</pre></div></div>
            
        </li>
        
        
        <li id="section-601">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-601">&#182;</a>
              </div>
              <p>Wraps the element around a wrapper that copies position properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	createWrapper: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-602">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-602">&#182;</a>
              </div>
              <p>if the element is already wrapped, return it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( element.parent().is( <span class="hljs-string">".ui-effects-wrapper"</span> )) {
			<span class="hljs-keyword">return</span> element.parent();
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-603">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-603">&#182;</a>
              </div>
              <p>wrap the element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">var</span> props = {
				width: element.outerWidth(<span class="hljs-literal">true</span>),
				height: element.outerHeight(<span class="hljs-literal">true</span>),
				<span class="hljs-string">"float"</span>: element.css( <span class="hljs-string">"float"</span> )
			},
			wrapper = $( <span class="hljs-string">"&lt;div&gt;&lt;/div&gt;"</span> )
				.addClass( <span class="hljs-string">"ui-effects-wrapper"</span> )
				.css({
					fontSize: <span class="hljs-string">"100%"</span>,
					background: <span class="hljs-string">"transparent"</span>,
					border: <span class="hljs-string">"none"</span>,
					margin: <span class="hljs-number">0</span>,
					padding: <span class="hljs-number">0</span>
				}),</pre></div></div>
            
        </li>
        
        
        <li id="section-604">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-604">&#182;</a>
              </div>
              <p>Store the size in case width/height are defined in % - Fixes #5245</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			size = {
				width: element.width(),
				height: element.height()
			},
			active = document.activeElement;</pre></div></div>
            
        </li>
        
        
        <li id="section-605">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-605">&#182;</a>
              </div>
              <p>support: Firefox
Firefox incorrectly exposes anonymous content
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=561664">https://bugzilla.mozilla.org/show_bug.cgi?id=561664</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">try</span> {
			active.id;
		} <span class="hljs-keyword">catch</span>( e ) {
			active = document.body;
		}

		element.wrap( wrapper );</pre></div></div>
            
        </li>
        
        
        <li id="section-606">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-606">&#182;</a>
              </div>
              <p>Fixes #7595 - Elements lose focus when wrapped.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( element[ <span class="hljs-number">0</span> ] === active || $.contains( element[ <span class="hljs-number">0</span> ], active ) ) {
			$( active ).focus();
		}

		wrapper = element.parent(); <span class="hljs-comment">//Hotfix for jQuery 1.4 since some change in wrap() seems to actually lose the reference to the wrapped element</span></pre></div></div>
            
        </li>
        
        
        <li id="section-607">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-607">&#182;</a>
              </div>
              <p>transfer positioning properties to the wrapper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( element.css( <span class="hljs-string">"position"</span> ) === <span class="hljs-string">"static"</span> ) {
			wrapper.css({ position: <span class="hljs-string">"relative"</span> });
			element.css({ position: <span class="hljs-string">"relative"</span> });
		} <span class="hljs-keyword">else</span> {
			$.extend( props, {
				position: element.css( <span class="hljs-string">"position"</span> ),
				zIndex: element.css( <span class="hljs-string">"z-index"</span> )
			});
			$.each([ <span class="hljs-string">"top"</span>, <span class="hljs-string">"left"</span>, <span class="hljs-string">"bottom"</span>, <span class="hljs-string">"right"</span> ], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(i, pos)</span> {</span>
				props[ pos ] = element.css( pos );
				<span class="hljs-keyword">if</span> ( <span class="hljs-built_in">isNaN</span>( <span class="hljs-built_in">parseInt</span>( props[ pos ], <span class="hljs-number">10</span> ) ) ) {
					props[ pos ] = <span class="hljs-string">"auto"</span>;
				}
			});
			element.css({
				position: <span class="hljs-string">"relative"</span>,
				top: <span class="hljs-number">0</span>,
				left: <span class="hljs-number">0</span>,
				right: <span class="hljs-string">"auto"</span>,
				bottom: <span class="hljs-string">"auto"</span>
			});
		}
		element.css(size);

		<span class="hljs-keyword">return</span> wrapper.css( props ).show();
	},

	removeWrapper: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> {</span>
		<span class="hljs-keyword">var</span> active = document.activeElement;

		<span class="hljs-keyword">if</span> ( element.parent().is( <span class="hljs-string">".ui-effects-wrapper"</span> ) ) {
			element.parent().replaceWith( element );</pre></div></div>
            
        </li>
        
        
        <li id="section-608">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-608">&#182;</a>
              </div>
              <p>Fixes #7595 - Elements lose focus when wrapped.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( element[ <span class="hljs-number">0</span> ] === active || $.contains( element[ <span class="hljs-number">0</span> ], active ) ) {
				$( active ).focus();
			}
		}


		<span class="hljs-keyword">return</span> element;
	},

	setTransition: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element, list, factor, value )</span> {</span>
		value = value || {};
		$.each( list, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, x )</span> {</span>
			<span class="hljs-keyword">var</span> unit = element.cssUnit( x );
			<span class="hljs-keyword">if</span> ( unit[ <span class="hljs-number">0</span> ] &gt; <span class="hljs-number">0</span> ) {
				value[ x ] = unit[ <span class="hljs-number">0</span> ] * factor + unit[ <span class="hljs-number">1</span> ];
			}
		});
		<span class="hljs-keyword">return</span> value;
	}
});</pre></div></div>
            
        </li>
        
        
        <li id="section-609">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-609">&#182;</a>
              </div>
              <p>return an effect options object for the given parameters:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_normalizeArguments</span><span class="hljs-params">( effect, options, speed, callback )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-610">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-610">&#182;</a>
              </div>
              <p>allow passing all options as the first parameter</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( $.isPlainObject( effect ) ) {
		options = effect;
		effect = effect.effect;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-611">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-611">&#182;</a>
              </div>
              <p>convert to an object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	effect = { effect: effect };</pre></div></div>
            
        </li>
        
        
        <li id="section-612">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-612">&#182;</a>
              </div>
              <p>catch (effect, null, …)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( options == <span class="hljs-literal">null</span> ) {
		options = {};
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-613">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-613">&#182;</a>
              </div>
              <p>catch (effect, callback)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( $.isFunction( options ) ) {
		callback = options;
		speed = <span class="hljs-literal">null</span>;
		options = {};
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-614">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-614">&#182;</a>
              </div>
              <p>catch (effect, speed, ?)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">"number"</span> || $.fx.speeds[ options ] ) {
		callback = speed;
		speed = options;
		options = {};
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-615">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-615">&#182;</a>
              </div>
              <p>catch (effect, options, callback)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( $.isFunction( speed ) ) {
		callback = speed;
		speed = <span class="hljs-literal">null</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-616">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-616">&#182;</a>
              </div>
              <p>add options to effect</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( options ) {
		$.extend( effect, options );
	}

	speed = speed || options.duration;
	effect.duration = $.fx.off ? <span class="hljs-number">0</span> :
		<span class="hljs-keyword">typeof</span> speed === <span class="hljs-string">"number"</span> ? speed :
		speed <span class="hljs-keyword">in</span> $.fx.speeds ? $.fx.speeds[ speed ] :
		$.fx.speeds._default;

	effect.complete = callback || options.complete;

	<span class="hljs-keyword">return</span> effect;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">standardAnimationOption</span><span class="hljs-params">( option )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-617">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-617">&#182;</a>
              </div>
              <p>Valid standard speeds (nothing, number, named speed)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( !option || <span class="hljs-keyword">typeof</span> option === <span class="hljs-string">"number"</span> || $.fx.speeds[ option ] ) {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-618">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-618">&#182;</a>
              </div>
              <p>Invalid strings - treat as “normal” speed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> option === <span class="hljs-string">"string"</span> &amp;&amp; !$.effects.effect[ option ] ) {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-619">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-619">&#182;</a>
              </div>
              <p>Complete callback</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( $.isFunction( option ) ) {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-620">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-620">&#182;</a>
              </div>
              <p>Options hash (but not naming an effect)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> option === <span class="hljs-string">"object"</span> &amp;&amp; !option.effect ) {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-621">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-621">&#182;</a>
              </div>
              <p>Didn’t match any standard API</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}

$.fn.extend({
	effect: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( <span class="hljs-comment">/* effect, options, speed, callback */</span> )</span> {</span>
		<span class="hljs-keyword">var</span> args = _normalizeArguments.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> ),
			mode = args.mode,
			queue = args.queue,
			effectMethod = $.effects.effect[ args.effect ];

		<span class="hljs-keyword">if</span> ( $.fx.off || !effectMethod ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-622">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-622">&#182;</a>
              </div>
              <p>delegate to the original method (e.g., .show()) if possible</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( mode ) {
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[ mode ]( args.duration, args.complete );
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
					<span class="hljs-keyword">if</span> ( args.complete ) {
						args.complete.call( <span class="hljs-keyword">this</span> );
					}
				});
			}
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span><span class="hljs-params">( next )</span> {</span>
			<span class="hljs-keyword">var</span> elem = $( <span class="hljs-keyword">this</span> ),
				complete = args.complete,
				mode = args.mode;

			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">done</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ( $.isFunction( complete ) ) {
					complete.call( elem[<span class="hljs-number">0</span>] );
				}
				<span class="hljs-keyword">if</span> ( $.isFunction( next ) ) {
					next();
				}
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-623">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-623">&#182;</a>
              </div>
              <p>If the element already has the correct final state, delegate to
the core methods so the internal tracking of “olddisplay” works.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( elem.is( <span class="hljs-string">":hidden"</span> ) ? mode === <span class="hljs-string">"hide"</span> : mode === <span class="hljs-string">"show"</span> ) {
				elem[ mode ]();
				done();
			} <span class="hljs-keyword">else</span> {
				effectMethod.call( elem[<span class="hljs-number">0</span>], args, done );
			}
		}

		<span class="hljs-keyword">return</span> queue === <span class="hljs-literal">false</span> ? <span class="hljs-keyword">this</span>.each( run ) : <span class="hljs-keyword">this</span>.queue( queue || <span class="hljs-string">"fx"</span>, run );
	},

	show: (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( orig )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( option )</span> {</span>
			<span class="hljs-keyword">if</span> ( standardAnimationOption( option ) ) {
				<span class="hljs-keyword">return</span> orig.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">var</span> args = _normalizeArguments.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
				args.mode = <span class="hljs-string">"show"</span>;
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.effect.call( <span class="hljs-keyword">this</span>, args );
			}
		};
	})( $.fn.show ),

	hide: (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( orig )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( option )</span> {</span>
			<span class="hljs-keyword">if</span> ( standardAnimationOption( option ) ) {
				<span class="hljs-keyword">return</span> orig.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">var</span> args = _normalizeArguments.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
				args.mode = <span class="hljs-string">"hide"</span>;
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.effect.call( <span class="hljs-keyword">this</span>, args );
			}
		};
	})( $.fn.hide ),

	toggle: (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( orig )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( option )</span> {</span>
			<span class="hljs-keyword">if</span> ( standardAnimationOption( option ) || <span class="hljs-keyword">typeof</span> option === <span class="hljs-string">"boolean"</span> ) {
				<span class="hljs-keyword">return</span> orig.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
			} <span class="hljs-keyword">else</span> {
				<span class="hljs-keyword">var</span> args = _normalizeArguments.apply( <span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span> );
				args.mode = <span class="hljs-string">"toggle"</span>;
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.effect.call( <span class="hljs-keyword">this</span>, args );
			}
		};
	})( $.fn.toggle ),</pre></div></div>
            
        </li>
        
        
        <li id="section-624">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-624">&#182;</a>
              </div>
              <p>helper functions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	cssUnit: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(key)</span> {</span>
		<span class="hljs-keyword">var</span> style = <span class="hljs-keyword">this</span>.css( key ),
			val = [];

		$.each( [ <span class="hljs-string">"em"</span>, <span class="hljs-string">"px"</span>, <span class="hljs-string">"%"</span>, <span class="hljs-string">"pt"</span> ], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, unit )</span> {</span>
			<span class="hljs-keyword">if</span> ( style.indexOf( unit ) &gt; <span class="hljs-number">0</span> ) {
				val = [ <span class="hljs-built_in">parseFloat</span>( style ), unit ];
			}
		});
		<span class="hljs-keyword">return</span> val;
	}
});

})();

<span class="hljs-comment">/******************************************************************************/</span>
<span class="hljs-comment">/*********************************** EASING ***********************************/</span>
<span class="hljs-comment">/******************************************************************************/</span>

(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-625">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-625">&#182;</a>
              </div>
              <p>based on easing equations from Robert Penner (<a href="http://www.robertpenner.com/easing">http://www.robertpenner.com/easing</a>)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">var</span> baseEasings = {};

$.each( [ <span class="hljs-string">"Quad"</span>, <span class="hljs-string">"Cubic"</span>, <span class="hljs-string">"Quart"</span>, <span class="hljs-string">"Quint"</span>, <span class="hljs-string">"Expo"</span> ], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( i, name )</span> {</span>
	baseEasings[ name ] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( p )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.pow( p, i + <span class="hljs-number">2</span> );
	};
});

$.extend( baseEasings, {
	Sine: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( p )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-number">1</span> - <span class="hljs-built_in">Math</span>.cos( p * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">2</span> );
	},
	Circ: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( p )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-number">1</span> - <span class="hljs-built_in">Math</span>.sqrt( <span class="hljs-number">1</span> - p * p );
	},
	Elastic: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( p )</span> {</span>
		<span class="hljs-keyword">return</span> p === <span class="hljs-number">0</span> || p === <span class="hljs-number">1</span> ? p :
			-<span class="hljs-built_in">Math</span>.pow( <span class="hljs-number">2</span>, <span class="hljs-number">8</span> * (p - <span class="hljs-number">1</span>) ) * <span class="hljs-built_in">Math</span>.sin( ( (p - <span class="hljs-number">1</span>) * <span class="hljs-number">80</span> - <span class="hljs-number">7.5</span> ) * <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">15</span> );
	},
	Back: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( p )</span> {</span>
		<span class="hljs-keyword">return</span> p * p * ( <span class="hljs-number">3</span> * p - <span class="hljs-number">2</span> );
	},
	Bounce: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( p )</span> {</span>
		<span class="hljs-keyword">var</span> pow2,
			bounce = <span class="hljs-number">4</span>;

		<span class="hljs-keyword">while</span> ( p &lt; ( ( pow2 = <span class="hljs-built_in">Math</span>.pow( <span class="hljs-number">2</span>, --bounce ) ) - <span class="hljs-number">1</span> ) / <span class="hljs-number">11</span> ) {}
		<span class="hljs-keyword">return</span> <span class="hljs-number">1</span> / <span class="hljs-built_in">Math</span>.pow( <span class="hljs-number">4</span>, <span class="hljs-number">3</span> - bounce ) - <span class="hljs-number">7.5625</span> * <span class="hljs-built_in">Math</span>.pow( ( pow2 * <span class="hljs-number">3</span> - <span class="hljs-number">2</span> ) / <span class="hljs-number">22</span> - p, <span class="hljs-number">2</span> );
	}
});

$.each( baseEasings, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( name, easeIn )</span> {</span>
	$.easing[ <span class="hljs-string">"easeIn"</span> + name ] = easeIn;
	$.easing[ <span class="hljs-string">"easeOut"</span> + name ] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( p )</span> {</span>
		<span class="hljs-keyword">return</span> <span class="hljs-number">1</span> - easeIn( <span class="hljs-number">1</span> - p );
	};
	$.easing[ <span class="hljs-string">"easeInOut"</span> + name ] = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( p )</span> {</span>
		<span class="hljs-keyword">return</span> p &lt; <span class="hljs-number">0.5</span> ?
			easeIn( p * <span class="hljs-number">2</span> ) / <span class="hljs-number">2</span> :
			<span class="hljs-number">1</span> - easeIn( p * -<span class="hljs-number">2</span> + <span class="hljs-number">2</span> ) / <span class="hljs-number">2</span>;
	};
});

})();

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

<span class="hljs-keyword">var</span> rvertical = <span class="hljs-regexp">/up|down|vertical/</span>,
	rpositivemotion = <span class="hljs-regexp">/up|left|vertical|horizontal/</span>;

$.effects.effect.blind = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-626">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-626">&#182;</a>
              </div>
              <p>Create element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> el = $( <span class="hljs-keyword">this</span> ),
		props = [ <span class="hljs-string">"position"</span>, <span class="hljs-string">"top"</span>, <span class="hljs-string">"bottom"</span>, <span class="hljs-string">"left"</span>, <span class="hljs-string">"right"</span>, <span class="hljs-string">"height"</span>, <span class="hljs-string">"width"</span> ],
		mode = $.effects.setMode( el, o.mode || <span class="hljs-string">"hide"</span> ),
		direction = o.direction || <span class="hljs-string">"up"</span>,
		vertical = rvertical.test( direction ),
		ref = vertical ? <span class="hljs-string">"height"</span> : <span class="hljs-string">"width"</span>,
		ref2 = vertical ? <span class="hljs-string">"top"</span> : <span class="hljs-string">"left"</span>,
		motion = rpositivemotion.test( direction ),
		animation = {},
		show = mode === <span class="hljs-string">"show"</span>,
		wrapper, distance, margin;</pre></div></div>
            
        </li>
        
        
        <li id="section-627">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-627">&#182;</a>
              </div>
              <p>if already wrapped, the wrapper’s properties are my property. #6245</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( el.parent().is( <span class="hljs-string">".ui-effects-wrapper"</span> ) ) {
		$.effects.save( el.parent(), props );
	} <span class="hljs-keyword">else</span> {
		$.effects.save( el, props );
	}
	el.show();
	wrapper = $.effects.createWrapper( el ).css({
		overflow: <span class="hljs-string">"hidden"</span>
	});

	distance = wrapper[ ref ]();
	margin = <span class="hljs-built_in">parseFloat</span>( wrapper.css( ref2 ) ) || <span class="hljs-number">0</span>;

	animation[ ref ] = show ? distance : <span class="hljs-number">0</span>;
	<span class="hljs-keyword">if</span> ( !motion ) {
		el
			.css( vertical ? <span class="hljs-string">"bottom"</span> : <span class="hljs-string">"right"</span>, <span class="hljs-number">0</span> )
			.css( vertical ? <span class="hljs-string">"top"</span> : <span class="hljs-string">"left"</span>, <span class="hljs-string">"auto"</span> )
			.css({ position: <span class="hljs-string">"absolute"</span> });

		animation[ ref2 ] = show ? margin : distance + margin;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-628">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-628">&#182;</a>
              </div>
              <p>start at 0 if we are showing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( show ) {
		wrapper.css( ref, <span class="hljs-number">0</span> );
		<span class="hljs-keyword">if</span> ( ! motion ) {
			wrapper.css( ref2, margin + distance );
		}
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-629">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-629">&#182;</a>
              </div>
              <p>Animate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	wrapper.animate( animation, {
		duration: o.duration,
		easing: o.easing,
		queue: <span class="hljs-literal">false</span>,
		complete: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span> ( mode === <span class="hljs-string">"hide"</span> ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});

};

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.effects.effect.bounce = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span>
	<span class="hljs-keyword">var</span> el = $( <span class="hljs-keyword">this</span> ),
		props = [ <span class="hljs-string">"position"</span>, <span class="hljs-string">"top"</span>, <span class="hljs-string">"bottom"</span>, <span class="hljs-string">"left"</span>, <span class="hljs-string">"right"</span>, <span class="hljs-string">"height"</span>, <span class="hljs-string">"width"</span> ],</pre></div></div>
            
        </li>
        
        
        <li id="section-630">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-630">&#182;</a>
              </div>
              <p>defaults:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		mode = $.effects.setMode( el, o.mode || <span class="hljs-string">"effect"</span> ),
		hide = mode === <span class="hljs-string">"hide"</span>,
		show = mode === <span class="hljs-string">"show"</span>,
		direction = o.direction || <span class="hljs-string">"up"</span>,
		distance = o.distance,
		times = o.times || <span class="hljs-number">5</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-631">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-631">&#182;</a>
              </div>
              <p>number of internal animations</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		anims = times * <span class="hljs-number">2</span> + ( show || hide ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span> ),
		speed = o.duration / anims,
		easing = o.easing,</pre></div></div>
            
        </li>
        
        
        <li id="section-632">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-632">&#182;</a>
              </div>
              <p>utility:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		ref = ( direction === <span class="hljs-string">"up"</span> || direction === <span class="hljs-string">"down"</span> ) ? <span class="hljs-string">"top"</span> : <span class="hljs-string">"left"</span>,
		motion = ( direction === <span class="hljs-string">"up"</span> || direction === <span class="hljs-string">"left"</span> ),
		i,
		upAnim,
		downAnim,</pre></div></div>
            
        </li>
        
        
        <li id="section-633">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-633">&#182;</a>
              </div>
              <p>we will need to re-assemble the queue to stack our animations in place</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		queue = el.queue(),
		queuelen = queue.length;</pre></div></div>
            
        </li>
        
        
        <li id="section-634">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-634">&#182;</a>
              </div>
              <p>Avoid touching opacity to prevent clearType and PNG issues in IE</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( show || hide ) {
		props.push( <span class="hljs-string">"opacity"</span> );
	}

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el ); <span class="hljs-comment">// Create Wrapper</span></pre></div></div>
            
        </li>
        
        
        <li id="section-635">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-635">&#182;</a>
              </div>
              <p>default distance for the BIGGEST bounce is the outer Distance / 3</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( !distance ) {
		distance = el[ ref === <span class="hljs-string">"top"</span> ? <span class="hljs-string">"outerHeight"</span> : <span class="hljs-string">"outerWidth"</span> ]() / <span class="hljs-number">3</span>;
	}

	<span class="hljs-keyword">if</span> ( show ) {
		downAnim = { opacity: <span class="hljs-number">1</span> };
		downAnim[ ref ] = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-636">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-636">&#182;</a>
              </div>
              <p>if we are showing, force opacity 0 and set the initial position
then do the “first” animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		el.css( <span class="hljs-string">"opacity"</span>, <span class="hljs-number">0</span> )
			.css( ref, motion ? -distance * <span class="hljs-number">2</span> : distance * <span class="hljs-number">2</span> )
			.animate( downAnim, speed, easing );
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-637">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-637">&#182;</a>
              </div>
              <p>start at the smallest distance if we are hiding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( hide ) {
		distance = distance / <span class="hljs-built_in">Math</span>.pow( <span class="hljs-number">2</span>, times - <span class="hljs-number">1</span> );
	}

	downAnim = {};
	downAnim[ ref ] = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-638">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-638">&#182;</a>
              </div>
              <p>Bounces up/down/left/right then back to 0 — times * 2 animations happen here</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i &lt; times; i++ ) {
		upAnim = {};
		upAnim[ ref ] = ( motion ? <span class="hljs-string">"-="</span> : <span class="hljs-string">"+="</span> ) + distance;

		el.animate( upAnim, speed, easing )
			.animate( downAnim, speed, easing );

		distance = hide ? distance * <span class="hljs-number">2</span> : distance / <span class="hljs-number">2</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-639">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-639">&#182;</a>
              </div>
              <p>Last Bounce when Hiding</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( hide ) {
		upAnim = { opacity: <span class="hljs-number">0</span> };
		upAnim[ ref ] = ( motion ? <span class="hljs-string">"-="</span> : <span class="hljs-string">"+="</span> ) + distance;

		el.animate( upAnim, speed, easing );
	}

	el.queue(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">if</span> ( hide ) {
			el.hide();
		}
		$.effects.restore( el, props );
		$.effects.removeWrapper( el );
		done();
	});</pre></div></div>
            
        </li>
        
        
        <li id="section-640">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-640">&#182;</a>
              </div>
              <p>inject all the animations we just queued to be first in line (after “inprogress”)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( queuelen &gt; <span class="hljs-number">1</span>) {
		queue.splice.apply( queue,
			[ <span class="hljs-number">1</span>, <span class="hljs-number">0</span> ].concat( queue.splice( queuelen, anims + <span class="hljs-number">1</span> ) ) );
	}
	el.dequeue();

};

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.effects.effect.clip = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-641">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-641">&#182;</a>
              </div>
              <p>Create element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> el = $( <span class="hljs-keyword">this</span> ),
		props = [ <span class="hljs-string">"position"</span>, <span class="hljs-string">"top"</span>, <span class="hljs-string">"bottom"</span>, <span class="hljs-string">"left"</span>, <span class="hljs-string">"right"</span>, <span class="hljs-string">"height"</span>, <span class="hljs-string">"width"</span> ],
		mode = $.effects.setMode( el, o.mode || <span class="hljs-string">"hide"</span> ),
		show = mode === <span class="hljs-string">"show"</span>,
		direction = o.direction || <span class="hljs-string">"vertical"</span>,
		vert = direction === <span class="hljs-string">"vertical"</span>,
		size = vert ? <span class="hljs-string">"height"</span> : <span class="hljs-string">"width"</span>,
		position = vert ? <span class="hljs-string">"top"</span> : <span class="hljs-string">"left"</span>,
		animation = {},
		wrapper, animate, distance;</pre></div></div>
            
        </li>
        
        
        <li id="section-642">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-642">&#182;</a>
              </div>
              <p>Save &amp; Show</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	$.effects.save( el, props );
	el.show();</pre></div></div>
            
        </li>
        
        
        <li id="section-643">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-643">&#182;</a>
              </div>
              <p>Create Wrapper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	wrapper = $.effects.createWrapper( el ).css({
		overflow: <span class="hljs-string">"hidden"</span>
	});
	animate = ( el[<span class="hljs-number">0</span>].tagName === <span class="hljs-string">"IMG"</span> ) ? wrapper : el;
	distance = animate[ size ]();</pre></div></div>
            
        </li>
        
        
        <li id="section-644">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-644">&#182;</a>
              </div>
              <p>Shift</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( show ) {
		animate.css( size, <span class="hljs-number">0</span> );
		animate.css( position, distance / <span class="hljs-number">2</span> );
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-645">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-645">&#182;</a>
              </div>
              <p>Create Animation Object:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	animation[ size ] = show ? distance : <span class="hljs-number">0</span>;
	animation[ position ] = show ? <span class="hljs-number">0</span> : distance / <span class="hljs-number">2</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-646">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-646">&#182;</a>
              </div>
              <p>Animate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	animate.animate( animation, {
		queue: <span class="hljs-literal">false</span>,
		duration: o.duration,
		easing: o.easing,
		complete: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span> ( !show ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});

};

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.effects.effect.drop = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span>

	<span class="hljs-keyword">var</span> el = $( <span class="hljs-keyword">this</span> ),
		props = [ <span class="hljs-string">"position"</span>, <span class="hljs-string">"top"</span>, <span class="hljs-string">"bottom"</span>, <span class="hljs-string">"left"</span>, <span class="hljs-string">"right"</span>, <span class="hljs-string">"opacity"</span>, <span class="hljs-string">"height"</span>, <span class="hljs-string">"width"</span> ],
		mode = $.effects.setMode( el, o.mode || <span class="hljs-string">"hide"</span> ),
		show = mode === <span class="hljs-string">"show"</span>,
		direction = o.direction || <span class="hljs-string">"left"</span>,
		ref = ( direction === <span class="hljs-string">"up"</span> || direction === <span class="hljs-string">"down"</span> ) ? <span class="hljs-string">"top"</span> : <span class="hljs-string">"left"</span>,
		motion = ( direction === <span class="hljs-string">"up"</span> || direction === <span class="hljs-string">"left"</span> ) ? <span class="hljs-string">"pos"</span> : <span class="hljs-string">"neg"</span>,
		animation = {
			opacity: show ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>
		},
		distance;</pre></div></div>
            
        </li>
        
        
        <li id="section-647">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-647">&#182;</a>
              </div>
              <p>Adjust</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );

	distance = o.distance || el[ ref === <span class="hljs-string">"top"</span> ? <span class="hljs-string">"outerHeight"</span>: <span class="hljs-string">"outerWidth"</span> ]( <span class="hljs-literal">true</span> ) / <span class="hljs-number">2</span>;

	<span class="hljs-keyword">if</span> ( show ) {
		el
			.css( <span class="hljs-string">"opacity"</span>, <span class="hljs-number">0</span> )
			.css( ref, motion === <span class="hljs-string">"pos"</span> ? -distance : distance );
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-648">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-648">&#182;</a>
              </div>
              <p>Animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	animation[ ref ] = ( show ?
		( motion === <span class="hljs-string">"pos"</span> ? <span class="hljs-string">"+="</span> : <span class="hljs-string">"-="</span> ) :
		( motion === <span class="hljs-string">"pos"</span> ? <span class="hljs-string">"-="</span> : <span class="hljs-string">"+="</span> ) ) +
		distance;</pre></div></div>
            
        </li>
        
        
        <li id="section-649">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-649">&#182;</a>
              </div>
              <p>Animate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	el.animate( animation, {
		queue: <span class="hljs-literal">false</span>,
		duration: o.duration,
		easing: o.easing,
		complete: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span> ( mode === <span class="hljs-string">"hide"</span> ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});
};

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.effects.effect.explode = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span>

	<span class="hljs-keyword">var</span> rows = o.pieces ? <span class="hljs-built_in">Math</span>.round( <span class="hljs-built_in">Math</span>.sqrt( o.pieces ) ) : <span class="hljs-number">3</span>,
		cells = rows,
		el = $( <span class="hljs-keyword">this</span> ),
		mode = $.effects.setMode( el, o.mode || <span class="hljs-string">"hide"</span> ),
		show = mode === <span class="hljs-string">"show"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-650">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-650">&#182;</a>
              </div>
              <p>show and then visibility:hidden the element before calculating offset</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		offset = el.show().css( <span class="hljs-string">"visibility"</span>, <span class="hljs-string">"hidden"</span> ).offset(),</pre></div></div>
            
        </li>
        
        
        <li id="section-651">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-651">&#182;</a>
              </div>
              <p>width and height of a piece</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		width = <span class="hljs-built_in">Math</span>.ceil( el.outerWidth() / cells ),
		height = <span class="hljs-built_in">Math</span>.ceil( el.outerHeight() / rows ),
		pieces = [],</pre></div></div>
            
        </li>
        
        
        <li id="section-652">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-652">&#182;</a>
              </div>
              <p>loop</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		i, j, left, top, mx, my;</pre></div></div>
            
        </li>
        
        
        <li id="section-653">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-653">&#182;</a>
              </div>
              <p>children animate complete:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">childComplete</span><span class="hljs-params">()</span> {</span>
		pieces.push( <span class="hljs-keyword">this</span> );
		<span class="hljs-keyword">if</span> ( pieces.length === rows * cells ) {
			animComplete();
		}
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-654">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-654">&#182;</a>
              </div>
              <p>clone the element for each row and cell.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">for</span>( i = <span class="hljs-number">0</span>; i &lt; rows ; i++ ) { <span class="hljs-comment">// ===&gt;</span>
		top = offset.top + i * height;
		my = i - ( rows - <span class="hljs-number">1</span> ) / <span class="hljs-number">2</span> ;

		<span class="hljs-keyword">for</span>( j = <span class="hljs-number">0</span>; j &lt; cells ; j++ ) { <span class="hljs-comment">// |||</span>
			left = offset.left + j * width;
			mx = j - ( cells - <span class="hljs-number">1</span> ) / <span class="hljs-number">2</span> ;</pre></div></div>
            
        </li>
        
        
        <li id="section-655">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-655">&#182;</a>
              </div>
              <p>Create a clone of the now hidden main element that will be absolute positioned
within a wrapper div off the -left and -top equal to size of our pieces</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			el
				.clone()
				.appendTo( <span class="hljs-string">"body"</span> )
				.wrap( <span class="hljs-string">"&lt;div&gt;&lt;/div&gt;"</span> )
				.css({
					position: <span class="hljs-string">"absolute"</span>,
					visibility: <span class="hljs-string">"visible"</span>,
					left: -j * width,
					top: -i * height
				})</pre></div></div>
            
        </li>
        
        
        <li id="section-656">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-656">&#182;</a>
              </div>
              <p>select the wrapper - make it overflow: hidden and absolute positioned based on
where the original was located +left and +top equal to the size of pieces</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				.parent()
				.addClass( <span class="hljs-string">"ui-effects-explode"</span> )
				.css({
					position: <span class="hljs-string">"absolute"</span>,
					overflow: <span class="hljs-string">"hidden"</span>,
					width: width,
					height: height,
					left: left + ( show ? mx * width : <span class="hljs-number">0</span> ),
					top: top + ( show ? my * height : <span class="hljs-number">0</span> ),
					opacity: show ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>
				}).animate({
					left: left + ( show ? <span class="hljs-number">0</span> : mx * width ),
					top: top + ( show ? <span class="hljs-number">0</span> : my * height ),
					opacity: show ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>
				}, o.duration || <span class="hljs-number">500</span>, o.easing, childComplete );
		}
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">animComplete</span><span class="hljs-params">()</span> {</span>
		el.css({
			visibility: <span class="hljs-string">"visible"</span>
		});
		$( pieces ).remove();
		<span class="hljs-keyword">if</span> ( !show ) {
			el.hide();
		}
		done();
	}
};

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.effects.effect.fade = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span>
	<span class="hljs-keyword">var</span> el = $( <span class="hljs-keyword">this</span> ),
		mode = $.effects.setMode( el, o.mode || <span class="hljs-string">"toggle"</span> );

	el.animate({
		opacity: mode
	}, {
		queue: <span class="hljs-literal">false</span>,
		duration: o.duration,
		easing: o.easing,
		complete: done
	});
};

})( jQuery );
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.effects.effect.fold = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-657">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-657">&#182;</a>
              </div>
              <p>Create element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> el = $( <span class="hljs-keyword">this</span> ),
		props = [ <span class="hljs-string">"position"</span>, <span class="hljs-string">"top"</span>, <span class="hljs-string">"bottom"</span>, <span class="hljs-string">"left"</span>, <span class="hljs-string">"right"</span>, <span class="hljs-string">"height"</span>, <span class="hljs-string">"width"</span> ],
		mode = $.effects.setMode( el, o.mode || <span class="hljs-string">"hide"</span> ),
		show = mode === <span class="hljs-string">"show"</span>,
		hide = mode === <span class="hljs-string">"hide"</span>,
		size = o.size || <span class="hljs-number">15</span>,
		percent = <span class="hljs-regexp">/([0-9]+)%/</span>.exec( size ),
		horizFirst = !!o.horizFirst,
		widthFirst = show !== horizFirst,
		ref = widthFirst ? [ <span class="hljs-string">"width"</span>, <span class="hljs-string">"height"</span> ] : [ <span class="hljs-string">"height"</span>, <span class="hljs-string">"width"</span> ],
		duration = o.duration / <span class="hljs-number">2</span>,
		wrapper, distance,
		animation1 = {},
		animation2 = {};

	$.effects.save( el, props );
	el.show();</pre></div></div>
            
        </li>
        
        
        <li id="section-658">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-658">&#182;</a>
              </div>
              <p>Create Wrapper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	wrapper = $.effects.createWrapper( el ).css({
		overflow: <span class="hljs-string">"hidden"</span>
	});
	distance = widthFirst ?
		[ wrapper.width(), wrapper.height() ] :
		[ wrapper.height(), wrapper.width() ];

	<span class="hljs-keyword">if</span> ( percent ) {
		size = <span class="hljs-built_in">parseInt</span>( percent[ <span class="hljs-number">1</span> ], <span class="hljs-number">10</span> ) / <span class="hljs-number">100</span> * distance[ hide ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span> ];
	}
	<span class="hljs-keyword">if</span> ( show ) {
		wrapper.css( horizFirst ? {
			height: <span class="hljs-number">0</span>,
			width: size
		} : {
			height: size,
			width: <span class="hljs-number">0</span>
		});
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-659">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-659">&#182;</a>
              </div>
              <p>Animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	animation1[ ref[ <span class="hljs-number">0</span> ] ] = show ? distance[ <span class="hljs-number">0</span> ] : size;
	animation2[ ref[ <span class="hljs-number">1</span> ] ] = show ? distance[ <span class="hljs-number">1</span> ] : <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-660">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-660">&#182;</a>
              </div>
              <p>Animate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	wrapper
		.animate( animation1, duration, o.easing )
		.animate( animation2, duration, o.easing, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span> ( hide ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		});

};

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.effects.effect.highlight = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span>
	<span class="hljs-keyword">var</span> elem = $( <span class="hljs-keyword">this</span> ),
		props = [ <span class="hljs-string">"backgroundImage"</span>, <span class="hljs-string">"backgroundColor"</span>, <span class="hljs-string">"opacity"</span> ],
		mode = $.effects.setMode( elem, o.mode || <span class="hljs-string">"show"</span> ),
		animation = {
			backgroundColor: elem.css( <span class="hljs-string">"backgroundColor"</span> )
		};

	<span class="hljs-keyword">if</span> (mode === <span class="hljs-string">"hide"</span>) {
		animation.opacity = <span class="hljs-number">0</span>;
	}

	$.effects.save( elem, props );

	elem
		.show()
		.css({
			backgroundImage: <span class="hljs-string">"none"</span>,
			backgroundColor: o.color || <span class="hljs-string">"#ffff99"</span>
		})
		.animate( animation, {
			queue: <span class="hljs-literal">false</span>,
			duration: o.duration,
			easing: o.easing,
			complete: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				<span class="hljs-keyword">if</span> ( mode === <span class="hljs-string">"hide"</span> ) {
					elem.hide();
				}
				$.effects.restore( elem, props );
				done();
			}
		});
};

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.effects.effect.pulsate = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span>
	<span class="hljs-keyword">var</span> elem = $( <span class="hljs-keyword">this</span> ),
		mode = $.effects.setMode( elem, o.mode || <span class="hljs-string">"show"</span> ),
		show = mode === <span class="hljs-string">"show"</span>,
		hide = mode === <span class="hljs-string">"hide"</span>,
		showhide = ( show || mode === <span class="hljs-string">"hide"</span> ),</pre></div></div>
            
        </li>
        
        
        <li id="section-661">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-661">&#182;</a>
              </div>
              <p>showing or hiding leaves of the “last” animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		anims = ( ( o.times || <span class="hljs-number">5</span> ) * <span class="hljs-number">2</span> ) + ( showhide ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span> ),
		duration = o.duration / anims,
		animateTo = <span class="hljs-number">0</span>,
		queue = elem.queue(),
		queuelen = queue.length,
		i;

	<span class="hljs-keyword">if</span> ( show || !elem.is(<span class="hljs-string">":visible"</span>)) {
		elem.css( <span class="hljs-string">"opacity"</span>, <span class="hljs-number">0</span> ).show();
		animateTo = <span class="hljs-number">1</span>;
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-662">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-662">&#182;</a>
              </div>
              <p>anims - 1 opacity “toggles”</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">for</span> ( i = <span class="hljs-number">1</span>; i &lt; anims; i++ ) {
		elem.animate({
			opacity: animateTo
		}, duration, o.easing );
		animateTo = <span class="hljs-number">1</span> - animateTo;
	}

	elem.animate({
		opacity: animateTo
	}, duration, o.easing);

	elem.queue(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
		<span class="hljs-keyword">if</span> ( hide ) {
			elem.hide();
		}
		done();
	});</pre></div></div>
            
        </li>
        
        
        <li id="section-663">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-663">&#182;</a>
              </div>
              <p>We just queued up “anims” animations, we need to put them next in the queue</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( queuelen &gt; <span class="hljs-number">1</span> ) {
		queue.splice.apply( queue,
			[ <span class="hljs-number">1</span>, <span class="hljs-number">0</span> ].concat( queue.splice( queuelen, anims + <span class="hljs-number">1</span> ) ) );
	}
	elem.dequeue();
};

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.effects.effect.puff = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span>
	<span class="hljs-keyword">var</span> elem = $( <span class="hljs-keyword">this</span> ),
		mode = $.effects.setMode( elem, o.mode || <span class="hljs-string">"hide"</span> ),
		hide = mode === <span class="hljs-string">"hide"</span>,
		percent = <span class="hljs-built_in">parseInt</span>( o.percent, <span class="hljs-number">10</span> ) || <span class="hljs-number">150</span>,
		factor = percent / <span class="hljs-number">100</span>,
		original = {
			height: elem.height(),
			width: elem.width(),
			outerHeight: elem.outerHeight(),
			outerWidth: elem.outerWidth()
		};

	$.extend( o, {
		effect: <span class="hljs-string">"scale"</span>,
		queue: <span class="hljs-literal">false</span>,
		fade: <span class="hljs-literal">true</span>,
		mode: mode,
		complete: done,
		percent: hide ? percent : <span class="hljs-number">100</span>,
		from: hide ?
			original :
			{
				height: original.height * factor,
				width: original.width * factor,
				outerHeight: original.outerHeight * factor,
				outerWidth: original.outerWidth * factor
			}
	});

	elem.effect( o );
};

$.effects.effect.scale = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-664">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-664">&#182;</a>
              </div>
              <p>Create element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> el = $( <span class="hljs-keyword">this</span> ),
		options = $.extend( <span class="hljs-literal">true</span>, {}, o ),
		mode = $.effects.setMode( el, o.mode || <span class="hljs-string">"effect"</span> ),
		percent = <span class="hljs-built_in">parseInt</span>( o.percent, <span class="hljs-number">10</span> ) ||
			( <span class="hljs-built_in">parseInt</span>( o.percent, <span class="hljs-number">10</span> ) === <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : ( mode === <span class="hljs-string">"hide"</span> ? <span class="hljs-number">0</span> : <span class="hljs-number">100</span> ) ),
		direction = o.direction || <span class="hljs-string">"both"</span>,
		origin = o.origin,
		original = {
			height: el.height(),
			width: el.width(),
			outerHeight: el.outerHeight(),
			outerWidth: el.outerWidth()
		},
		factor = {
			y: direction !== <span class="hljs-string">"horizontal"</span> ? (percent / <span class="hljs-number">100</span>) : <span class="hljs-number">1</span>,
			x: direction !== <span class="hljs-string">"vertical"</span> ? (percent / <span class="hljs-number">100</span>) : <span class="hljs-number">1</span>
		};</pre></div></div>
            
        </li>
        
        
        <li id="section-665">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-665">&#182;</a>
              </div>
              <p>We are going to pass this effect to the size effect:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	options.effect = <span class="hljs-string">"size"</span>;
	options.queue = <span class="hljs-literal">false</span>;
	options.complete = done;</pre></div></div>
            
        </li>
        
        
        <li id="section-666">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-666">&#182;</a>
              </div>
              <p>Set default origin and restore for show/hide</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( mode !== <span class="hljs-string">"effect"</span> ) {
		options.origin = origin || [<span class="hljs-string">"middle"</span>,<span class="hljs-string">"center"</span>];
		options.restore = <span class="hljs-literal">true</span>;
	}

	options.from = o.from || ( mode === <span class="hljs-string">"show"</span> ? {
		height: <span class="hljs-number">0</span>,
		width: <span class="hljs-number">0</span>,
		outerHeight: <span class="hljs-number">0</span>,
		outerWidth: <span class="hljs-number">0</span>
	} : original );
	options.to = {
		height: original.height * factor.y,
		width: original.width * factor.x,
		outerHeight: original.outerHeight * factor.y,
		outerWidth: original.outerWidth * factor.x
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-667">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-667">&#182;</a>
              </div>
              <p>Fade option to support puff</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( options.fade ) {
		<span class="hljs-keyword">if</span> ( mode === <span class="hljs-string">"show"</span> ) {
			options.from.opacity = <span class="hljs-number">0</span>;
			options.to.opacity = <span class="hljs-number">1</span>;
		}
		<span class="hljs-keyword">if</span> ( mode === <span class="hljs-string">"hide"</span> ) {
			options.from.opacity = <span class="hljs-number">1</span>;
			options.to.opacity = <span class="hljs-number">0</span>;
		}
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-668">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-668">&#182;</a>
              </div>
              <p>Animate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	el.effect( options );

};

$.effects.effect.size = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-669">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-669">&#182;</a>
              </div>
              <p>Create element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> original, baseline, factor,
		el = $( <span class="hljs-keyword">this</span> ),
		props0 = [ <span class="hljs-string">"position"</span>, <span class="hljs-string">"top"</span>, <span class="hljs-string">"bottom"</span>, <span class="hljs-string">"left"</span>, <span class="hljs-string">"right"</span>, <span class="hljs-string">"width"</span>, <span class="hljs-string">"height"</span>, <span class="hljs-string">"overflow"</span>, <span class="hljs-string">"opacity"</span> ],</pre></div></div>
            
        </li>
        
        
        <li id="section-670">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-670">&#182;</a>
              </div>
              <p>Always restore</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		props1 = [ <span class="hljs-string">"position"</span>, <span class="hljs-string">"top"</span>, <span class="hljs-string">"bottom"</span>, <span class="hljs-string">"left"</span>, <span class="hljs-string">"right"</span>, <span class="hljs-string">"overflow"</span>, <span class="hljs-string">"opacity"</span> ],</pre></div></div>
            
        </li>
        
        
        <li id="section-671">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-671">&#182;</a>
              </div>
              <p>Copy for children</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		props2 = [ <span class="hljs-string">"width"</span>, <span class="hljs-string">"height"</span>, <span class="hljs-string">"overflow"</span> ],
		cProps = [ <span class="hljs-string">"fontSize"</span> ],
		vProps = [ <span class="hljs-string">"borderTopWidth"</span>, <span class="hljs-string">"borderBottomWidth"</span>, <span class="hljs-string">"paddingTop"</span>, <span class="hljs-string">"paddingBottom"</span> ],
		hProps = [ <span class="hljs-string">"borderLeftWidth"</span>, <span class="hljs-string">"borderRightWidth"</span>, <span class="hljs-string">"paddingLeft"</span>, <span class="hljs-string">"paddingRight"</span> ],</pre></div></div>
            
        </li>
        
        
        <li id="section-672">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-672">&#182;</a>
              </div>
              <p>Set options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		mode = $.effects.setMode( el, o.mode || <span class="hljs-string">"effect"</span> ),
		restore = o.restore || mode !== <span class="hljs-string">"effect"</span>,
		scale = o.scale || <span class="hljs-string">"both"</span>,
		origin = o.origin || [ <span class="hljs-string">"middle"</span>, <span class="hljs-string">"center"</span> ],
		position = el.css( <span class="hljs-string">"position"</span> ),
		props = restore ? props0 : props1,
		zero = {
			height: <span class="hljs-number">0</span>,
			width: <span class="hljs-number">0</span>,
			outerHeight: <span class="hljs-number">0</span>,
			outerWidth: <span class="hljs-number">0</span>
		};

	<span class="hljs-keyword">if</span> ( mode === <span class="hljs-string">"show"</span> ) {
		el.show();
	}
	original = {
		height: el.height(),
		width: el.width(),
		outerHeight: el.outerHeight(),
		outerWidth: el.outerWidth()
	};

	<span class="hljs-keyword">if</span> ( o.mode === <span class="hljs-string">"toggle"</span> &amp;&amp; mode === <span class="hljs-string">"show"</span> ) {
		el.from = o.to || zero;
		el.to = o.from || original;
	} <span class="hljs-keyword">else</span> {
		el.from = o.from || ( mode === <span class="hljs-string">"show"</span> ? zero : original );
		el.to = o.to || ( mode === <span class="hljs-string">"hide"</span> ? zero : original );
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-673">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-673">&#182;</a>
              </div>
              <p>Set scaling factor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	factor = {
		from: {
			y: el.from.height / original.height,
			x: el.from.width / original.width
		},
		to: {
			y: el.to.height / original.height,
			x: el.to.width / original.width
		}
	};</pre></div></div>
            
        </li>
        
        
        <li id="section-674">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-674">&#182;</a>
              </div>
              <p>Scale the css box</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( scale === <span class="hljs-string">"box"</span> || scale === <span class="hljs-string">"both"</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-675">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-675">&#182;</a>
              </div>
              <p>Vertical props scaling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( factor.from.y !== factor.to.y ) {
			props = props.concat( vProps );
			el.from = $.effects.setTransition( el, vProps, factor.from.y, el.from );
			el.to = $.effects.setTransition( el, vProps, factor.to.y, el.to );
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-676">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-676">&#182;</a>
              </div>
              <p>Horizontal props scaling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( factor.from.x !== factor.to.x ) {
			props = props.concat( hProps );
			el.from = $.effects.setTransition( el, hProps, factor.from.x, el.from );
			el.to = $.effects.setTransition( el, hProps, factor.to.x, el.to );
		}
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-677">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-677">&#182;</a>
              </div>
              <p>Scale the content</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( scale === <span class="hljs-string">"content"</span> || scale === <span class="hljs-string">"both"</span> ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-678">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-678">&#182;</a>
              </div>
              <p>Vertical props scaling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> ( factor.from.y !== factor.to.y ) {
			props = props.concat( cProps ).concat( props2 );
			el.from = $.effects.setTransition( el, cProps, factor.from.y, el.from );
			el.to = $.effects.setTransition( el, cProps, factor.to.y, el.to );
		}
	}

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );
	el.css( <span class="hljs-string">"overflow"</span>, <span class="hljs-string">"hidden"</span> ).css( el.from );</pre></div></div>
            
        </li>
        
        
        <li id="section-679">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-679">&#182;</a>
              </div>
              <p>Adjust</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> (origin) { <span class="hljs-comment">// Calculate baseline shifts</span>
		baseline = $.effects.getBaseline( origin, original );
		el.from.top = ( original.outerHeight - el.outerHeight() ) * baseline.y;
		el.from.left = ( original.outerWidth - el.outerWidth() ) * baseline.x;
		el.to.top = ( original.outerHeight - el.to.outerHeight ) * baseline.y;
		el.to.left = ( original.outerWidth - el.to.outerWidth ) * baseline.x;
	}
	el.css( el.from ); <span class="hljs-comment">// set top &amp; left</span></pre></div></div>
            
        </li>
        
        
        <li id="section-680">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-680">&#182;</a>
              </div>
              <p>Animate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( scale === <span class="hljs-string">"content"</span> || scale === <span class="hljs-string">"both"</span> ) { <span class="hljs-comment">// Scale the children</span></pre></div></div>
            
        </li>
        
        
        <li id="section-681">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-681">&#182;</a>
              </div>
              <p>Add margins/font-size</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		vProps = vProps.concat([ <span class="hljs-string">"marginTop"</span>, <span class="hljs-string">"marginBottom"</span> ]).concat(cProps);
		hProps = hProps.concat([ <span class="hljs-string">"marginLeft"</span>, <span class="hljs-string">"marginRight"</span> ]);
		props2 = props0.concat(vProps).concat(hProps);

		el.find( <span class="hljs-string">"*[width]"</span> ).each( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
			<span class="hljs-keyword">var</span> child = $( <span class="hljs-keyword">this</span> ),
				c_original = {
					height: child.height(),
					width: child.width(),
					outerHeight: child.outerHeight(),
					outerWidth: child.outerWidth()
				};
			<span class="hljs-keyword">if</span> (restore) {
				$.effects.save(child, props2);
			}

			child.from = {
				height: c_original.height * factor.from.y,
				width: c_original.width * factor.from.x,
				outerHeight: c_original.outerHeight * factor.from.y,
				outerWidth: c_original.outerWidth * factor.from.x
			};
			child.to = {
				height: c_original.height * factor.to.y,
				width: c_original.width * factor.to.x,
				outerHeight: c_original.height * factor.to.y,
				outerWidth: c_original.width * factor.to.x
			};</pre></div></div>
            
        </li>
        
        
        <li id="section-682">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-682">&#182;</a>
              </div>
              <p>Vertical props scaling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( factor.from.y !== factor.to.y ) {
				child.from = $.effects.setTransition( child, vProps, factor.from.y, child.from );
				child.to = $.effects.setTransition( child, vProps, factor.to.y, child.to );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-683">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-683">&#182;</a>
              </div>
              <p>Horizontal props scaling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-keyword">if</span> ( factor.from.x !== factor.to.x ) {
				child.from = $.effects.setTransition( child, hProps, factor.from.x, child.from );
				child.to = $.effects.setTransition( child, hProps, factor.to.x, child.to );
			}</pre></div></div>
            
        </li>
        
        
        <li id="section-684">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-684">&#182;</a>
              </div>
              <p>Animate children</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			child.css( child.from );
			child.animate( child.to, o.duration, o.easing, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-685">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-685">&#182;</a>
              </div>
              <p>Restore children</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( restore ) {
					$.effects.restore( child, props2 );
				}
			});
		});
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-686">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-686">&#182;</a>
              </div>
              <p>Animate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	el.animate( el.to, {
		queue: <span class="hljs-literal">false</span>,
		duration: o.duration,
		easing: o.easing,
		complete: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span> ( el.to.opacity === <span class="hljs-number">0</span> ) {
				el.css( <span class="hljs-string">"opacity"</span>, el.from.opacity );
			}
			<span class="hljs-keyword">if</span>( mode === <span class="hljs-string">"hide"</span> ) {
				el.hide();
			}
			$.effects.restore( el, props );
			<span class="hljs-keyword">if</span> ( !restore ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-687">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-687">&#182;</a>
              </div>
              <p>we need to calculate our new positioning based on the scaling</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> ( position === <span class="hljs-string">"static"</span> ) {
					el.css({
						position: <span class="hljs-string">"relative"</span>,
						top: el.to.top,
						left: el.to.left
					});
				} <span class="hljs-keyword">else</span> {
					$.each([ <span class="hljs-string">"top"</span>, <span class="hljs-string">"left"</span> ], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( idx, pos )</span> {</span>
						el.css( pos, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( _, str )</span> {</span>
							<span class="hljs-keyword">var</span> val = <span class="hljs-built_in">parseInt</span>( str, <span class="hljs-number">10</span> ),
								toRef = idx ? el.to.left : el.to.top;</pre></div></div>
            
        </li>
        
        
        <li id="section-688">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-688">&#182;</a>
              </div>
              <p>if original was “auto”, recalculate the new value from wrapper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							<span class="hljs-keyword">if</span> ( str === <span class="hljs-string">"auto"</span> ) {
								<span class="hljs-keyword">return</span> toRef + <span class="hljs-string">"px"</span>;
							}

							<span class="hljs-keyword">return</span> val + toRef + <span class="hljs-string">"px"</span>;
						});
					});
				}
			}

			$.effects.removeWrapper( el );
			done();
		}
	});

};

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.effects.effect.shake = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span>

	<span class="hljs-keyword">var</span> el = $( <span class="hljs-keyword">this</span> ),
		props = [ <span class="hljs-string">"position"</span>, <span class="hljs-string">"top"</span>, <span class="hljs-string">"bottom"</span>, <span class="hljs-string">"left"</span>, <span class="hljs-string">"right"</span>, <span class="hljs-string">"height"</span>, <span class="hljs-string">"width"</span> ],
		mode = $.effects.setMode( el, o.mode || <span class="hljs-string">"effect"</span> ),
		direction = o.direction || <span class="hljs-string">"left"</span>,
		distance = o.distance || <span class="hljs-number">20</span>,
		times = o.times || <span class="hljs-number">3</span>,
		anims = times * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>,
		speed = <span class="hljs-built_in">Math</span>.round(o.duration/anims),
		ref = (direction === <span class="hljs-string">"up"</span> || direction === <span class="hljs-string">"down"</span>) ? <span class="hljs-string">"top"</span> : <span class="hljs-string">"left"</span>,
		positiveMotion = (direction === <span class="hljs-string">"up"</span> || direction === <span class="hljs-string">"left"</span>),
		animation = {},
		animation1 = {},
		animation2 = {},
		i,</pre></div></div>
            
        </li>
        
        
        <li id="section-689">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-689">&#182;</a>
              </div>
              <p>we will need to re-assemble the queue to stack our animations in place</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		queue = el.queue(),
		queuelen = queue.length;

	$.effects.save( el, props );
	el.show();
	$.effects.createWrapper( el );</pre></div></div>
            
        </li>
        
        
        <li id="section-690">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-690">&#182;</a>
              </div>
              <p>Animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	animation[ ref ] = ( positiveMotion ? <span class="hljs-string">"-="</span> : <span class="hljs-string">"+="</span> ) + distance;
	animation1[ ref ] = ( positiveMotion ? <span class="hljs-string">"+="</span> : <span class="hljs-string">"-="</span> ) + distance * <span class="hljs-number">2</span>;
	animation2[ ref ] = ( positiveMotion ? <span class="hljs-string">"-="</span> : <span class="hljs-string">"+="</span> ) + distance * <span class="hljs-number">2</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-691">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-691">&#182;</a>
              </div>
              <p>Animate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	el.animate( animation, speed, o.easing );</pre></div></div>
            
        </li>
        
        
        <li id="section-692">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-692">&#182;</a>
              </div>
              <p>Shakes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">for</span> ( i = <span class="hljs-number">1</span>; i &lt; times; i++ ) {
		el.animate( animation1, speed, o.easing ).animate( animation2, speed, o.easing );
	}
	el
		.animate( animation1, speed, o.easing )
		.animate( animation, speed / <span class="hljs-number">2</span>, o.easing )
		.queue(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span> ( mode === <span class="hljs-string">"hide"</span> ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		});</pre></div></div>
            
        </li>
        
        
        <li id="section-693">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-693">&#182;</a>
              </div>
              <p>inject all the animations we just queued to be first in line (after “inprogress”)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">if</span> ( queuelen &gt; <span class="hljs-number">1</span>) {
		queue.splice.apply( queue,
			[ <span class="hljs-number">1</span>, <span class="hljs-number">0</span> ].concat( queue.splice( queuelen, anims + <span class="hljs-number">1</span> ) ) );
	}
	el.dequeue();

};

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.effects.effect.slide = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-694">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-694">&#182;</a>
              </div>
              <p>Create element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-keyword">var</span> el = $( <span class="hljs-keyword">this</span> ),
		props = [ <span class="hljs-string">"position"</span>, <span class="hljs-string">"top"</span>, <span class="hljs-string">"bottom"</span>, <span class="hljs-string">"left"</span>, <span class="hljs-string">"right"</span>, <span class="hljs-string">"width"</span>, <span class="hljs-string">"height"</span> ],
		mode = $.effects.setMode( el, o.mode || <span class="hljs-string">"show"</span> ),
		show = mode === <span class="hljs-string">"show"</span>,
		direction = o.direction || <span class="hljs-string">"left"</span>,
		ref = (direction === <span class="hljs-string">"up"</span> || direction === <span class="hljs-string">"down"</span>) ? <span class="hljs-string">"top"</span> : <span class="hljs-string">"left"</span>,
		positiveMotion = (direction === <span class="hljs-string">"up"</span> || direction === <span class="hljs-string">"left"</span>),
		distance,
		animation = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-695">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-695">&#182;</a>
              </div>
              <p>Adjust</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	$.effects.save( el, props );
	el.show();
	distance = o.distance || el[ ref === <span class="hljs-string">"top"</span> ? <span class="hljs-string">"outerHeight"</span> : <span class="hljs-string">"outerWidth"</span> ]( <span class="hljs-literal">true</span> );

	$.effects.createWrapper( el ).css({
		overflow: <span class="hljs-string">"hidden"</span>
	});

	<span class="hljs-keyword">if</span> ( show ) {
		el.css( ref, positiveMotion ? (<span class="hljs-built_in">isNaN</span>(distance) ? <span class="hljs-string">"-"</span> + distance : -distance) : distance );
	}</pre></div></div>
            
        </li>
        
        
        <li id="section-696">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-696">&#182;</a>
              </div>
              <p>Animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	animation[ ref ] = ( show ?
		( positiveMotion ? <span class="hljs-string">"+="</span> : <span class="hljs-string">"-="</span>) :
		( positiveMotion ? <span class="hljs-string">"-="</span> : <span class="hljs-string">"+="</span>)) +
		distance;</pre></div></div>
            
        </li>
        
        
        <li id="section-697">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-697">&#182;</a>
              </div>
              <p>Animate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	el.animate( animation, {
		queue: <span class="hljs-literal">false</span>,
		duration: o.duration,
		easing: o.easing,
		complete: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
			<span class="hljs-keyword">if</span> ( mode === <span class="hljs-string">"hide"</span> ) {
				el.hide();
			}
			$.effects.restore( el, props );
			$.effects.removeWrapper( el );
			done();
		}
	});
};

})(jQuery);
(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $, undefined )</span> {</span>

$.effects.effect.transfer = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( o, done )</span> {</span>
	<span class="hljs-keyword">var</span> elem = $( <span class="hljs-keyword">this</span> ),
		target = $( o.to ),
		targetFixed = target.css( <span class="hljs-string">"position"</span> ) === <span class="hljs-string">"fixed"</span>,
		body = $(<span class="hljs-string">"body"</span>),
		fixTop = targetFixed ? body.scrollTop() : <span class="hljs-number">0</span>,
		fixLeft = targetFixed ? body.scrollLeft() : <span class="hljs-number">0</span>,
		endPosition = target.offset(),
		animation = {
			top: endPosition.top - fixTop ,
			left: endPosition.left - fixLeft ,
			height: target.innerHeight(),
			width: target.innerWidth()
		},
		startPosition = elem.offset(),
		transfer = $( <span class="hljs-string">"&lt;div class='ui-effects-transfer'&gt;&lt;/div&gt;"</span> )
			.appendTo( document.body )
			.addClass( o.className )
			.css({
				top: startPosition.top - fixTop ,
				left: startPosition.left - fixLeft ,
				height: elem.innerHeight(),
				width: elem.innerWidth(),
				position: targetFixed ? <span class="hljs-string">"fixed"</span> : <span class="hljs-string">"absolute"</span>
			})
			.animate( animation, o.duration, o.easing, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
				transfer.remove();
				done();
			});
};

})(jQuery);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
