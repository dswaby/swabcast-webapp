<!DOCTYPE html>

<html>
<head>
  <title>foundation.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="SpecRunner.html">
                SpecRunner.js
              </a>
            
              
              <a class="source" href="app.html">
                app.js
              </a>
            
              
              <a class="source" href="dialog.html">
                dialog.js
              </a>
            
              
              <a class="source" href="modal.html">
                modal.js
              </a>
            
              
              <a class="source" href="revealoptions.html">
                revealoptions.js
              </a>
            
              
              <a class="source" href="localstorage.html">
                localstorage.js
              </a>
            
              
              <a class="source" href="alert_controller.html">
                alert_controller.js
              </a>
            
              
              <a class="source" href="alert_view.html">
                alert_view.js
              </a>
            
              
              <a class="source" href="edit_controller.html">
                edit_controller.js
              </a>
            
              
              <a class="source" href="edit_view.html">
                edit_view.js
              </a>
            
              
              <a class="source" href="episodes_app.html">
                episodes_app.js
              </a>
            
              
              <a class="source" href="feed_controller.html">
                feed_controller.js
              </a>
            
              
              <a class="source" href="feed_view.html">
                feed_view.js
              </a>
            
              
              <a class="source" href="list_controller.html">
                list_controller.js
              </a>
            
              
              <a class="source" href="list_view.html">
                list_view.js
              </a>
            
              
              <a class="source" href="nav_controller.html">
                nav_controller.js
              </a>
            
              
              <a class="source" href="nav_view.html">
                nav_view.js
              </a>
            
              
              <a class="source" href="new_view.html">
                new_view.js
              </a>
            
              
              <a class="source" href="player_controller.html">
                player_controller.js
              </a>
            
              
              <a class="source" href="player_view.html">
                player_view.js
              </a>
            
              
              <a class="source" href="playlist_controller.html">
                playlist_controller.js
              </a>
            
              
              <a class="source" href="playlist_view.html">
                playlist_view.js
              </a>
            
              
              <a class="source" href="show_controller.html">
                show_controller.js
              </a>
            
              
              <a class="source" href="show_view.html">
                show_view.js
              </a>
            
              
              <a class="source" href="FeedSpec.html">
                FeedSpec.js
              </a>
            
              
              <a class="source" href="async.html">
                async.js
              </a>
            
              
              <a class="source" href="list_controller.html">
                list_controller.js
              </a>
            
              
              <a class="source" href="list_view.html">
                list_view.js
              </a>
            
              
              <a class="source" href="show_controller.html">
                show_controller.js
              </a>
            
              
              <a class="source" href="show_view.html">
                show_view.js
              </a>
            
              
              <a class="source" href="subscriptions_app.html">
                subscriptions_app.js
              </a>
            
              
              <a class="source" href="build.html">
                build.js
              </a>
            
              
              <a class="source" href="modal.html">
                modal.js
              </a>
            
              
              <a class="source" href="utils.html">
                utils.js
              </a>
            
              
              <a class="source" href="view.html">
                view.js
              </a>
            
              
              <a class="source" href="views.html">
                views.js
              </a>
            
              
              <a class="source" href="episode.html">
                episode.js
              </a>
            
              
              <a class="source" href="feed.html">
                feed.js
              </a>
            
              
              <a class="source" href="player.html">
                player.js
              </a>
            
              
              <a class="source" href="playlist.html">
                playlist.js
              </a>
            
              
              <a class="source" href="subscriptions.html">
                subscriptions.js
              </a>
            
              
              <a class="source" href="topics.html">
                topics.js
              </a>
            
              
              <a class="source" href="require_main.html">
                require_main.js
              </a>
            
              
              <a class="source" href="require_main_built.html">
                require_main_built.js
              </a>
            
              
              <a class="source" href="almond.html">
                almond.js
              </a>
            
              
              <a class="source" href="backbone.babysitter.html">
                backbone.babysitter.js
              </a>
            
              
              <a class="source" href="backbone.html">
                backbone.js
              </a>
            
              
              <a class="source" href="backbone.localstorage.html">
                backbone.localstorage.js
              </a>
            
              
              <a class="source" href="backbone.localstorage.min.html">
                backbone.localstorage.min.js
              </a>
            
              
              <a class="source" href="backbone.marionette.html">
                backbone.marionette.js
              </a>
            
              
              <a class="source" href="backbone.marionette.min.html">
                backbone.marionette.min.js
              </a>
            
              
              <a class="source" href="backbone.picky.html">
                backbone.picky.js
              </a>
            
              
              <a class="source" href="backbone.syphon.html">
                backbone.syphon.js
              </a>
            
              
              <a class="source" href="backbone.wreqr.html">
                backbone.wreqr.js
              </a>
            
              
              <a class="source" href="foundation.fastclick.html">
                foundation.fastclick.js
              </a>
            
              
              <a class="source" href="foundation.html">
                foundation.js
              </a>
            
              
              <a class="source" href="foundation.min.html">
                foundation.min.js
              </a>
            
              
              <a class="source" href="foundation.offcanvas.html">
                foundation.offcanvas.js
              </a>
            
              
              <a class="source" href="foundation.reveal.html">
                foundation.reveal.js
              </a>
            
              
              <a class="source" href="jasmine-html.html">
                jasmine-html.js
              </a>
            
              
              <a class="source" href="jasmine.html">
                jasmine.js
              </a>
            
              
              <a class="source" href="jasmine-html.html">
                jasmine-html.js
              </a>
            
              
              <a class="source" href="jasmine.html">
                jasmine.js
              </a>
            
              
              <a class="source" href="jquery-ui-1.10.3.min.html">
                jquery-ui-1.10.3.min.js
              </a>
            
              
              <a class="source" href="jquery-ui.html">
                jquery-ui.js
              </a>
            
              
              <a class="source" href="jquery.html">
                jquery.js
              </a>
            
              
              <a class="source" href="jquery.transit.html">
                jquery.transit.js
              </a>
            
              
              <a class="source" href="jquery.transmit.html">
                jquery.transmit.js
              </a>
            
              
              <a class="source" href="json2.html">
                json2.js
              </a>
            
              
              <a class="source" href="log.html">
                log.js
              </a>
            
              
              <a class="source" href="modernizr.html">
                modernizr.js
              </a>
            
              
              <a class="source" href="require.html">
                require.js
              </a>
            
              
              <a class="source" href="jasmine-sinon.html">
                jasmine-sinon.js
              </a>
            
              
              <a class="source" href="sinon.html">
                sinon.js
              </a>
            
              
              <a class="source" href="spin.jquery.html">
                spin.jquery.js
              </a>
            
              
              <a class="source" href="spin.html">
                spin.js
              </a>
            
              
              <a class="source" href="tpl.html">
                tpl.js
              </a>
            
              
              <a class="source" href="underscore.html">
                underscore.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>foundation.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*
 * Foundation Responsive Library
 * http://foundation.zurb.com
 * Copyright 2013, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/</span>

(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Used to retrieve Foundation media queries from CSS.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span>($(<span class="hljs-string">'head'</span>).has(<span class="hljs-string">'.foundation-mq-small'</span>).length === <span class="hljs-number">0</span>) {
    $(<span class="hljs-string">'head'</span>).append(<span class="hljs-string">'&lt;meta class="foundation-mq-small"&gt;'</span>);
  }

  <span class="hljs-keyword">if</span>($(<span class="hljs-string">'head'</span>).has(<span class="hljs-string">'.foundation-mq-medium'</span>).length === <span class="hljs-number">0</span>) {
    $(<span class="hljs-string">'head'</span>).append(<span class="hljs-string">'&lt;meta class="foundation-mq-medium"&gt;'</span>);
  }

  <span class="hljs-keyword">if</span>($(<span class="hljs-string">'head'</span>).has(<span class="hljs-string">'.foundation-mq-large'</span>).length === <span class="hljs-number">0</span>) {
    $(<span class="hljs-string">'head'</span>).append(<span class="hljs-string">'&lt;meta class="foundation-mq-large"&gt;'</span>);
  }

  <span class="hljs-keyword">if</span>($(<span class="hljs-string">'head'</span>).has(<span class="hljs-string">'.foundation-mq-xlarge'</span>).length === <span class="hljs-number">0</span>) {
    $(<span class="hljs-string">'head'</span>).append(<span class="hljs-string">'&lt;meta class="foundation-mq-xlarge"&gt;'</span>);
  }

  <span class="hljs-keyword">if</span>($(<span class="hljs-string">'head'</span>).has(<span class="hljs-string">'.foundation-mq-xxlarge'</span>).length === <span class="hljs-number">0</span>) {
    $(<span class="hljs-string">'head'</span>).append(<span class="hljs-string">'&lt;meta class="foundation-mq-xxlarge"&gt;'</span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Embed FastClick (this should be removed later)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FastClick</span><span class="hljs-params">(layer)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">var</span> oldOnClick,self=<span class="hljs-keyword">this</span>;<span class="hljs-keyword">this</span>.trackingClick=<span class="hljs-literal">false</span>;<span class="hljs-keyword">this</span>.trackingClickStart=<span class="hljs-number">0</span>;<span class="hljs-keyword">this</span>.targetElement=<span class="hljs-literal">null</span>;<span class="hljs-keyword">this</span>.touchStartX=<span class="hljs-number">0</span>;<span class="hljs-keyword">this</span>.touchStartY=<span class="hljs-number">0</span>;<span class="hljs-keyword">this</span>.lastTouchIdentifier=<span class="hljs-number">0</span>;<span class="hljs-keyword">this</span>.touchBoundary=<span class="hljs-number">10</span>;<span class="hljs-keyword">this</span>.layer=layer;<span class="hljs-keyword">if</span>(!layer||!layer.nodeType){<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Layer must be a document node'</span>);}<span class="hljs-keyword">this</span>.onClick=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span><span class="hljs-keyword">return</span> FastClick.prototype.onClick.apply(self,<span class="hljs-built_in">arguments</span>)};<span class="hljs-keyword">this</span>.onMouse=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span><span class="hljs-keyword">return</span> FastClick.prototype.onMouse.apply(self,<span class="hljs-built_in">arguments</span>)};<span class="hljs-keyword">this</span>.onTouchStart=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span><span class="hljs-keyword">return</span> FastClick.prototype.onTouchStart.apply(self,<span class="hljs-built_in">arguments</span>)};<span class="hljs-keyword">this</span>.onTouchMove=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span><span class="hljs-keyword">return</span> FastClick.prototype.onTouchMove.apply(self,<span class="hljs-built_in">arguments</span>)};<span class="hljs-keyword">this</span>.onTouchEnd=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span><span class="hljs-keyword">return</span> FastClick.prototype.onTouchEnd.apply(self,<span class="hljs-built_in">arguments</span>)};<span class="hljs-keyword">this</span>.onTouchCancel=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span><span class="hljs-keyword">return</span> FastClick.prototype.onTouchCancel.apply(self,<span class="hljs-built_in">arguments</span>)};<span class="hljs-keyword">if</span>(FastClick.notNeeded(layer)){<span class="hljs-keyword">return</span>}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.deviceIsAndroid){layer.addEventListener(<span class="hljs-string">'mouseover'</span>,<span class="hljs-keyword">this</span>.onMouse,<span class="hljs-literal">true</span>);layer.addEventListener(<span class="hljs-string">'mousedown'</span>,<span class="hljs-keyword">this</span>.onMouse,<span class="hljs-literal">true</span>);layer.addEventListener(<span class="hljs-string">'mouseup'</span>,<span class="hljs-keyword">this</span>.onMouse,<span class="hljs-literal">true</span>)}layer.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-keyword">this</span>.onClick,<span class="hljs-literal">true</span>);layer.addEventListener(<span class="hljs-string">'touchstart'</span>,<span class="hljs-keyword">this</span>.onTouchStart,<span class="hljs-literal">false</span>);layer.addEventListener(<span class="hljs-string">'touchmove'</span>,<span class="hljs-keyword">this</span>.onTouchMove,<span class="hljs-literal">false</span>);layer.addEventListener(<span class="hljs-string">'touchend'</span>,<span class="hljs-keyword">this</span>.onTouchEnd,<span class="hljs-literal">false</span>);layer.addEventListener(<span class="hljs-string">'touchcancel'</span>,<span class="hljs-keyword">this</span>.onTouchCancel,<span class="hljs-literal">false</span>);<span class="hljs-keyword">if</span>(!Event.prototype.stopImmediatePropagation){layer.removeEventListener=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(type,callback,capture)</span>{</span><span class="hljs-keyword">var</span> rmv=Node.prototype.removeEventListener;<span class="hljs-keyword">if</span>(type===<span class="hljs-string">'click'</span>){rmv.call(layer,type,callback.hijacked||callback,capture)}<span class="hljs-keyword">else</span>{rmv.call(layer,type,callback,capture)}};layer.addEventListener=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(type,callback,capture)</span>{</span><span class="hljs-keyword">var</span> adv=Node.prototype.addEventListener;<span class="hljs-keyword">if</span>(type===<span class="hljs-string">'click'</span>){adv.call(layer,type,callback.hijacked||(callback.hijacked=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>{</span><span class="hljs-keyword">if</span>(!event.propagationStopped){callback(event)}}),capture)}<span class="hljs-keyword">else</span>{adv.call(layer,type,callback,capture)}}}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> layer.onclick===<span class="hljs-string">'function'</span>){oldOnClick=layer.onclick;layer.addEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>{</span>oldOnClick(event)},<span class="hljs-literal">false</span>);layer.onclick=<span class="hljs-literal">null</span>}}FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf(<span class="hljs-string">'Android'</span>)&gt;<span class="hljs-number">0</span>;FastClick.prototype.deviceIsIOS=<span class="hljs-regexp">/iP(ad|hone|od)/</span>.test(navigator.userAgent);FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&amp;&amp;(<span class="hljs-regexp">/OS 4_\d(_\d)?/</span>).test(navigator.userAgent);FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&amp;&amp;(<span class="hljs-regexp">/OS ([6-9]|\d{2})_\d/</span>).test(navigator.userAgent);FastClick.prototype.needsClick=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">switch</span>(target.nodeName.toLowerCase()){<span class="hljs-keyword">case</span><span class="hljs-string">'button'</span>:<span class="hljs-keyword">case</span><span class="hljs-string">'select'</span>:<span class="hljs-keyword">case</span><span class="hljs-string">'textarea'</span>:<span class="hljs-keyword">if</span>(target.disabled){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">'input'</span>:<span class="hljs-keyword">if</span>((<span class="hljs-keyword">this</span>.deviceIsIOS&amp;&amp;target.type===<span class="hljs-string">'file'</span>)||target.disabled){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">break</span>;<span class="hljs-keyword">case</span><span class="hljs-string">'label'</span>:<span class="hljs-keyword">case</span><span class="hljs-string">'video'</span>:<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">return</span>(<span class="hljs-regexp">/\bneedsclick\b/</span>).test(target.className)};FastClick.prototype.needsFocus=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">switch</span>(target.nodeName.toLowerCase()){<span class="hljs-keyword">case</span><span class="hljs-string">'textarea'</span>:<span class="hljs-keyword">case</span><span class="hljs-string">'select'</span>:<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<span class="hljs-keyword">case</span><span class="hljs-string">'input'</span>:<span class="hljs-keyword">switch</span>(target.type){<span class="hljs-keyword">case</span><span class="hljs-string">'button'</span>:<span class="hljs-keyword">case</span><span class="hljs-string">'checkbox'</span>:<span class="hljs-keyword">case</span><span class="hljs-string">'file'</span>:<span class="hljs-keyword">case</span><span class="hljs-string">'image'</span>:<span class="hljs-keyword">case</span><span class="hljs-string">'radio'</span>:<span class="hljs-keyword">case</span><span class="hljs-string">'submit'</span>:<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>}<span class="hljs-keyword">return</span>!target.disabled&amp;&amp;!target.readOnly;<span class="hljs-keyword">default</span>:<span class="hljs-keyword">return</span>(<span class="hljs-regexp">/\bneedsfocus\b/</span>).test(target.className)}};FastClick.prototype.sendClick=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(targetElement,event)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">var</span> clickEvent,touch;<span class="hljs-keyword">if</span>(document.activeElement&amp;&amp;document.activeElement!==targetElement){document.activeElement.blur()}touch=event.changedTouches[<span class="hljs-number">0</span>];clickEvent=document.createEvent(<span class="hljs-string">'MouseEvents'</span>);clickEvent.initMouseEvent(<span class="hljs-string">'click'</span>,<span class="hljs-literal">true</span>,<span class="hljs-literal">true</span>,window,<span class="hljs-number">1</span>,touch.screenX,touch.screenY,touch.clientX,touch.clientY,<span class="hljs-literal">false</span>,<span class="hljs-literal">false</span>,<span class="hljs-literal">false</span>,<span class="hljs-literal">false</span>,<span class="hljs-number">0</span>,<span class="hljs-literal">null</span>);clickEvent.forwardedTouchEvent=<span class="hljs-literal">true</span>;targetElement.dispatchEvent(clickEvent)};FastClick.prototype.focus=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(targetElement)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">var</span> length;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.deviceIsIOS&amp;&amp;targetElement.setSelectionRange){length=targetElement.value.length;targetElement.setSelectionRange(length,length)}<span class="hljs-keyword">else</span>{targetElement.focus()}};FastClick.prototype.updateScrollParent=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(targetElement)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">var</span> scrollParent,parentElement;scrollParent=targetElement.fastClickScrollParent;<span class="hljs-keyword">if</span>(!scrollParent||!scrollParent.contains(targetElement)){parentElement=targetElement;<span class="hljs-keyword">do</span>{<span class="hljs-keyword">if</span>(parentElement.scrollHeight&gt;parentElement.offsetHeight){scrollParent=parentElement;targetElement.fastClickScrollParent=parentElement;<span class="hljs-keyword">break</span>}parentElement=parentElement.parentElement}<span class="hljs-keyword">while</span>(parentElement)}<span class="hljs-keyword">if</span>(scrollParent){scrollParent.fastClickLastScrollTop=scrollParent.scrollTop}};FastClick.prototype.getTargetElementFromEventTarget=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(eventTarget)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">if</span>(eventTarget.nodeType===Node.TEXT_NODE){<span class="hljs-keyword">return</span> eventTarget.parentNode}<span class="hljs-keyword">return</span> eventTarget};FastClick.prototype.onTouchStart=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">var</span> targetElement,touch,selection;<span class="hljs-keyword">if</span>(event.targetTouches.length&gt;<span class="hljs-number">1</span>){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}targetElement=<span class="hljs-keyword">this</span>.getTargetElementFromEventTarget(event.target);touch=event.targetTouches[<span class="hljs-number">0</span>];<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.deviceIsIOS){selection=window.getSelection();<span class="hljs-keyword">if</span>(selection.rangeCount&amp;&amp;!selection.isCollapsed){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.deviceIsIOS4){<span class="hljs-keyword">if</span>(touch.identifier===<span class="hljs-keyword">this</span>.lastTouchIdentifier){event.preventDefault();<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>}<span class="hljs-keyword">this</span>.lastTouchIdentifier=touch.identifier;<span class="hljs-keyword">this</span>.updateScrollParent(targetElement)}}<span class="hljs-keyword">this</span>.trackingClick=<span class="hljs-literal">true</span>;<span class="hljs-keyword">this</span>.trackingClickStart=event.timeStamp;<span class="hljs-keyword">this</span>.targetElement=targetElement;<span class="hljs-keyword">this</span>.touchStartX=touch.pageX;<span class="hljs-keyword">this</span>.touchStartY=touch.pageY;<span class="hljs-keyword">if</span>((event.timeStamp-<span class="hljs-keyword">this</span>.lastClickTime)&lt;<span class="hljs-number">200</span>){event.preventDefault()}<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>};FastClick.prototype.touchHasMoved=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">var</span> touch=event.changedTouches[<span class="hljs-number">0</span>],boundary=<span class="hljs-keyword">this</span>.touchBoundary;<span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.abs(touch.pageX-<span class="hljs-keyword">this</span>.touchStartX)&gt;boundary||<span class="hljs-built_in">Math</span>.abs(touch.pageY-<span class="hljs-keyword">this</span>.touchStartY)&gt;boundary){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>};FastClick.prototype.onTouchMove=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.trackingClick){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.targetElement!==<span class="hljs-keyword">this</span>.getTargetElementFromEventTarget(event.target)||<span class="hljs-keyword">this</span>.touchHasMoved(event)){<span class="hljs-keyword">this</span>.trackingClick=<span class="hljs-literal">false</span>;<span class="hljs-keyword">this</span>.targetElement=<span class="hljs-literal">null</span>}<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>};FastClick.prototype.findControl=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(labelElement)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">if</span>(labelElement.control!==<span class="hljs-literal">undefined</span>){<span class="hljs-keyword">return</span> labelElement.control}<span class="hljs-keyword">if</span>(labelElement.htmlFor){<span class="hljs-keyword">return</span> document.getElementById(labelElement.htmlFor)}<span class="hljs-keyword">return</span> labelElement.querySelector(<span class="hljs-string">'button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea'</span>)};FastClick.prototype.onTouchEnd=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">var</span> forElement,trackingClickStart,targetTagName,scrollParent,touch,targetElement=<span class="hljs-keyword">this</span>.targetElement;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.trackingClick){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">if</span>((event.timeStamp-<span class="hljs-keyword">this</span>.lastClickTime)&lt;<span class="hljs-number">200</span>){<span class="hljs-keyword">this</span>.cancelNextClick=<span class="hljs-literal">true</span>;<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">this</span>.lastClickTime=event.timeStamp;trackingClickStart=<span class="hljs-keyword">this</span>.trackingClickStart;<span class="hljs-keyword">this</span>.trackingClick=<span class="hljs-literal">false</span>;<span class="hljs-keyword">this</span>.trackingClickStart=<span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.deviceIsIOSWithBadTarget){touch=event.changedTouches[<span class="hljs-number">0</span>];targetElement=document.elementFromPoint(touch.pageX-window.pageXOffset,touch.pageY-window.pageYOffset)||targetElement;targetElement.fastClickScrollParent=<span class="hljs-keyword">this</span>.targetElement.fastClickScrollParent}targetTagName=targetElement.tagName.toLowerCase();<span class="hljs-keyword">if</span>(targetTagName===<span class="hljs-string">'label'</span>){forElement=<span class="hljs-keyword">this</span>.findControl(targetElement);<span class="hljs-keyword">if</span>(forElement){<span class="hljs-keyword">this</span>.focus(targetElement);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.deviceIsAndroid){<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>}targetElement=forElement}}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.needsFocus(targetElement)){<span class="hljs-keyword">if</span>((event.timeStamp-trackingClickStart)&gt;<span class="hljs-number">100</span>||(<span class="hljs-keyword">this</span>.deviceIsIOS&amp;&amp;window.top!==window&amp;&amp;targetTagName===<span class="hljs-string">'input'</span>)){<span class="hljs-keyword">this</span>.targetElement=<span class="hljs-literal">null</span>;<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>}<span class="hljs-keyword">this</span>.focus(targetElement);<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.deviceIsIOS4||targetTagName!==<span class="hljs-string">'select'</span>){<span class="hljs-keyword">this</span>.targetElement=<span class="hljs-literal">null</span>;event.preventDefault()}<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>}<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.deviceIsIOS&amp;&amp;!<span class="hljs-keyword">this</span>.deviceIsIOS4){scrollParent=targetElement.fastClickScrollParent;<span class="hljs-keyword">if</span>(scrollParent&amp;&amp;scrollParent.fastClickLastScrollTop!==scrollParent.scrollTop){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}}<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.needsClick(targetElement)){event.preventDefault();<span class="hljs-keyword">this</span>.sendClick(targetElement,event)}<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>};FastClick.prototype.onTouchCancel=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">this</span>.trackingClick=<span class="hljs-literal">false</span>;<span class="hljs-keyword">this</span>.targetElement=<span class="hljs-literal">null</span>};FastClick.prototype.onMouse=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.targetElement){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">if</span>(event.forwardedTouchEvent){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">if</span>(!event.cancelable){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.needsClick(<span class="hljs-keyword">this</span>.targetElement)||<span class="hljs-keyword">this</span>.cancelNextClick){<span class="hljs-keyword">if</span>(event.stopImmediatePropagation){event.stopImmediatePropagation()}<span class="hljs-keyword">else</span>{event.propagationStopped=<span class="hljs-literal">true</span>}event.stopPropagation();event.preventDefault();<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>}<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>};FastClick.prototype.onClick=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">var</span> permitted;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.trackingClick){<span class="hljs-keyword">this</span>.targetElement=<span class="hljs-literal">null</span>;<span class="hljs-keyword">this</span>.trackingClick=<span class="hljs-literal">false</span>;<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">if</span>(event.target.type===<span class="hljs-string">'submit'</span>&amp;&amp;event.detail===<span class="hljs-number">0</span>){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}permitted=<span class="hljs-keyword">this</span>.onMouse(event);<span class="hljs-keyword">if</span>(!permitted){<span class="hljs-keyword">this</span>.targetElement=<span class="hljs-literal">null</span>}<span class="hljs-keyword">return</span> permitted};FastClick.prototype.destroy=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">var</span> layer=<span class="hljs-keyword">this</span>.layer;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.deviceIsAndroid){layer.removeEventListener(<span class="hljs-string">'mouseover'</span>,<span class="hljs-keyword">this</span>.onMouse,<span class="hljs-literal">true</span>);layer.removeEventListener(<span class="hljs-string">'mousedown'</span>,<span class="hljs-keyword">this</span>.onMouse,<span class="hljs-literal">true</span>);layer.removeEventListener(<span class="hljs-string">'mouseup'</span>,<span class="hljs-keyword">this</span>.onMouse,<span class="hljs-literal">true</span>)}layer.removeEventListener(<span class="hljs-string">'click'</span>,<span class="hljs-keyword">this</span>.onClick,<span class="hljs-literal">true</span>);layer.removeEventListener(<span class="hljs-string">'touchstart'</span>,<span class="hljs-keyword">this</span>.onTouchStart,<span class="hljs-literal">false</span>);layer.removeEventListener(<span class="hljs-string">'touchmove'</span>,<span class="hljs-keyword">this</span>.onTouchMove,<span class="hljs-literal">false</span>);layer.removeEventListener(<span class="hljs-string">'touchend'</span>,<span class="hljs-keyword">this</span>.onTouchEnd,<span class="hljs-literal">false</span>);layer.removeEventListener(<span class="hljs-string">'touchcancel'</span>,<span class="hljs-keyword">this</span>.onTouchCancel,<span class="hljs-literal">false</span>)};FastClick.notNeeded=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(layer)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">var</span> metaViewport;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> window.ontouchstart===<span class="hljs-string">'undefined'</span>){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">if</span>((<span class="hljs-regexp">/Chrome\/[0-9]+/</span>).test(navigator.userAgent)){<span class="hljs-keyword">if</span>(FastClick.prototype.deviceIsAndroid){metaViewport=document.querySelector(<span class="hljs-string">'meta[name=viewport]'</span>);<span class="hljs-keyword">if</span>(metaViewport&amp;&amp;metaViewport.content.indexOf(<span class="hljs-string">'user-scalable=no'</span>)!==-<span class="hljs-number">1</span>){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}}<span class="hljs-keyword">if</span>(layer.style.msTouchAction===<span class="hljs-string">'none'</span>){<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>}<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>};FastClick.attach=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(layer)</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FastClick(layer)};<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> define!==<span class="hljs-string">'undefined'</span>&amp;&amp;define.amd){define(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span><span class="hljs-string">'use strict'</span>;<span class="hljs-keyword">return</span> FastClick})}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> module!==<span class="hljs-string">'undefined'</span>&amp;&amp;module.exports){module.exports=FastClick.attach;module.exports.FastClick=FastClick}<span class="hljs-keyword">else</span>{window.FastClick=FastClick}</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Enable FastClick</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> FastClick !== <span class="hljs-string">'undefined'</span>) {
    FastClick.attach(document.body);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>private Fast Selector wrapper,
returns jQuery object. Only use where
getElementById is not available.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> S = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(selector, context)</span> {</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> selector === <span class="hljs-string">'string'</span>) {
      <span class="hljs-keyword">if</span> (context) {
        <span class="hljs-keyword">return</span> $(context.querySelectorAll(selector));
      }

      <span class="hljs-keyword">return</span> $(document.querySelectorAll(selector));
    }

    <span class="hljs-keyword">return</span> $(selector, context);
  };

  <span class="hljs-comment">/*
    https://github.com/paulirish/matchMedia.js
  */</span>

  window.matchMedia = window.matchMedia || (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( doc, undefined )</span> {</span>
<span class="hljs-pi">
    "use strict"</span>;

    <span class="hljs-keyword">var</span> bool,
        docElem = doc.documentElement,
        refNode = docElem.firstElementChild || docElem.firstChild,</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>fakeBody required for <FF4 when executed in <head></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        fakeBody = doc.createElement( <span class="hljs-string">"body"</span> ),
        div = doc.createElement( <span class="hljs-string">"div"</span> );

    div.id = <span class="hljs-string">"mq-test-1"</span>;
    div.style.cssText = <span class="hljs-string">"position:absolute;top:-100em"</span>;
    fakeBody.style.background = <span class="hljs-string">"none"</span>;
    fakeBody.appendChild(div);

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(q)</span>{</span>

      div.innerHTML = <span class="hljs-string">"&amp;shy;&lt;style media=\""</span> + q + <span class="hljs-string">"\"&gt; #mq-test-1 { width: 42px; }&lt;/style&gt;"</span>;

      docElem.insertBefore( fakeBody, refNode );
      bool = div.offsetWidth === <span class="hljs-number">42</span>;
      docElem.removeChild( fakeBody );

      <span class="hljs-keyword">return</span> {
        matches: bool,
        media: q
      };

    };

  }( document ));

  <span class="hljs-comment">/*
   * jquery.requestAnimationFrame
   * https://github.com/gnarf37/jquery-requestAnimationFrame
   * Requires jQuery 1.8+
   *
   * Copyright (c) 2012 Corey Frang
   * Licensed under the MIT license.
   */</span>

  (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $ )</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>requestAnimationFrame polyfill adapted from Erik MÃ¶ller
fixes from Paul Irish and Tino Zijdel
<a href="http://paulirish.com/2011/requestanimationframe-for-smart-animating/">http://paulirish.com/2011/requestanimationframe-for-smart-animating/</a>
<a href="http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating">http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

  <span class="hljs-keyword">var</span> animating,
    lastTime = <span class="hljs-number">0</span>,
    vendors = [<span class="hljs-string">'webkit'</span>, <span class="hljs-string">'moz'</span>],
    requestAnimationFrame = window.requestAnimationFrame,
    cancelAnimationFrame = window.cancelAnimationFrame;

  <span class="hljs-keyword">for</span>(; lastTime &lt; vendors.length &amp;&amp; !requestAnimationFrame; lastTime++) {
    requestAnimationFrame = window[ vendors[lastTime] + <span class="hljs-string">"RequestAnimationFrame"</span> ];
    cancelAnimationFrame = cancelAnimationFrame ||
      window[ vendors[lastTime] + <span class="hljs-string">"CancelAnimationFrame"</span> ] || 
      window[ vendors[lastTime] + <span class="hljs-string">"CancelRequestAnimationFrame"</span> ];
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">raf</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> ( animating ) {
      requestAnimationFrame( raf );
      jQuery.fx.tick();
    }
  }

  <span class="hljs-keyword">if</span> ( requestAnimationFrame ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>use rAF</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    window.requestAnimationFrame = requestAnimationFrame;
    window.cancelAnimationFrame = cancelAnimationFrame;
    jQuery.fx.timer = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( timer )</span> {</span>
      <span class="hljs-keyword">if</span> ( timer() &amp;&amp; jQuery.timers.push( timer ) &amp;&amp; !animating ) {
        animating = <span class="hljs-literal">true</span>;
        raf();
      }
    };

    jQuery.fx.stop = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      animating = <span class="hljs-literal">false</span>;
    };
  } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>polyfill</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    window.requestAnimationFrame = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( callback, element )</span> {</span>
      <span class="hljs-keyword">var</span> currTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime(),
        timeToCall = <span class="hljs-built_in">Math</span>.max( <span class="hljs-number">0</span>, <span class="hljs-number">16</span> - ( currTime - lastTime ) ),
        id = window.setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          callback( currTime + timeToCall );
        }, timeToCall );
      lastTime = currTime + timeToCall;
      <span class="hljs-keyword">return</span> id;
    };

    window.cancelAnimationFrame = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id)</span> {</span>
      clearTimeout(id);
    };
      
  }

  }( jQuery ));


  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeQuotes</span> <span class="hljs-params">(string)</span> {</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> string === <span class="hljs-string">'string'</span> || string <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">String</span>) {
      string = string.replace(<span class="hljs-regexp">/^[\\/'"]+|(;\s?})+|[\\/'"]+$/g</span>, <span class="hljs-string">''</span>);
    }

    <span class="hljs-keyword">return</span> string;
  }

  window.Foundation = {
    name : <span class="hljs-string">'Foundation'</span>,

    version : <span class="hljs-string">'5.0.0'</span>,

    media_queries : {
      small : S(<span class="hljs-string">'.foundation-mq-small'</span>).css(<span class="hljs-string">'font-family'</span>).replace(<span class="hljs-regexp">/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g</span>, <span class="hljs-string">''</span>),
      medium : S(<span class="hljs-string">'.foundation-mq-medium'</span>).css(<span class="hljs-string">'font-family'</span>).replace(<span class="hljs-regexp">/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g</span>, <span class="hljs-string">''</span>),
      large : S(<span class="hljs-string">'.foundation-mq-large'</span>).css(<span class="hljs-string">'font-family'</span>).replace(<span class="hljs-regexp">/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g</span>, <span class="hljs-string">''</span>),
      xlarge: S(<span class="hljs-string">'.foundation-mq-xlarge'</span>).css(<span class="hljs-string">'font-family'</span>).replace(<span class="hljs-regexp">/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g</span>, <span class="hljs-string">''</span>),
      xxlarge: S(<span class="hljs-string">'.foundation-mq-xxlarge'</span>).css(<span class="hljs-string">'font-family'</span>).replace(<span class="hljs-regexp">/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g</span>, <span class="hljs-string">''</span>)
    },

    stylesheet : $(<span class="hljs-string">'&lt;style&gt;&lt;/style&gt;'</span>).appendTo(<span class="hljs-string">'head'</span>)[<span class="hljs-number">0</span>].sheet,

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, libraries, method, options, response)</span> {</span>
      <span class="hljs-keyword">var</span> library_arr,
          args = [scope, method, options, response],
          responses = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>check RTL</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.rtl = <span class="hljs-regexp">/rtl/i</span>.test(S(<span class="hljs-string">'html'</span>).attr(<span class="hljs-string">'dir'</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>set foundation global scope</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.scope = scope || <span class="hljs-keyword">this</span>.scope;

      <span class="hljs-keyword">if</span> (libraries &amp;&amp; <span class="hljs-keyword">typeof</span> libraries === <span class="hljs-string">'string'</span> &amp;&amp; !<span class="hljs-regexp">/reflow/i</span>.test(libraries)) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.libs.hasOwnProperty(libraries)) {
          responses.push(<span class="hljs-keyword">this</span>.init_lib(libraries, args));
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> lib <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.libs) {
          responses.push(<span class="hljs-keyword">this</span>.init_lib(lib, libraries));
        }
      }

      <span class="hljs-keyword">return</span> scope;
    },

    init_lib : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(lib, args)</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.libs.hasOwnProperty(lib)) {
        <span class="hljs-keyword">this</span>.patch(<span class="hljs-keyword">this</span>.libs[lib]);

        <span class="hljs-keyword">if</span> (args &amp;&amp; args.hasOwnProperty(lib)) {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.libs[lib].init.apply(<span class="hljs-keyword">this</span>.libs[lib], [<span class="hljs-keyword">this</span>.scope, args[lib]]);
        }

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.libs[lib].init.apply(<span class="hljs-keyword">this</span>.libs[lib], args);
      }

      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>};
    },

    patch : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(lib)</span> {</span>
      lib.scope = <span class="hljs-keyword">this</span>.scope;
      lib[<span class="hljs-string">'data_options'</span>] = <span class="hljs-keyword">this</span>.lib_methods.data_options;
      lib[<span class="hljs-string">'bindings'</span>] = <span class="hljs-keyword">this</span>.lib_methods.bindings;
      lib[<span class="hljs-string">'S'</span>] = S;
      lib.rtl = <span class="hljs-keyword">this</span>.rtl;
    },

    inherit : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, methods)</span> {</span>
      <span class="hljs-keyword">var</span> methods_arr = methods.split(<span class="hljs-string">' '</span>);

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = methods_arr.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.lib_methods.hasOwnProperty(methods_arr[i])) {
          <span class="hljs-keyword">this</span>.libs[scope.name][methods_arr[i]] = <span class="hljs-keyword">this</span>.lib_methods[methods_arr[i]];
        }
      }
    },

    random_str : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(length)</span> {</span>
      <span class="hljs-keyword">var</span> chars = <span class="hljs-string">'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'</span>.split(<span class="hljs-string">''</span>);

      <span class="hljs-keyword">if</span> (!length) {
        length = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * chars.length);
      }

      <span class="hljs-keyword">var</span> str = <span class="hljs-string">''</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {
        str += chars[<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * chars.length)];
      }
      <span class="hljs-keyword">return</span> str;
    },

    libs : {},</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>methods that can be inherited in libraries</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    lib_methods : {
      throttle : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fun, delay)</span> {</span>
        <span class="hljs-keyword">var</span> timer = <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">var</span> context = <span class="hljs-keyword">this</span>, args = <span class="hljs-built_in">arguments</span>;

          clearTimeout(timer);
          timer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            fun.apply(context, args);
          }, delay);
        };
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>parses data-options attribute</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      data_options : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(el)</span> {</span>
        <span class="hljs-keyword">var</span> opts = {}, ii, p, opts_arr, opts_len,
            data_options = el.data(<span class="hljs-string">'options'</span>);

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data_options === <span class="hljs-string">'object'</span>) {
          <span class="hljs-keyword">return</span> data_options;
        }

        opts_arr = (data_options || <span class="hljs-string">':'</span>).split(<span class="hljs-string">';'</span>),
        opts_len = opts_arr.length;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumber</span> <span class="hljs-params">(o)</span> {</span>
          <span class="hljs-keyword">return</span> ! <span class="hljs-built_in">isNaN</span> (o-<span class="hljs-number">0</span>) &amp;&amp; o !== <span class="hljs-literal">null</span> &amp;&amp; o !== <span class="hljs-string">""</span> &amp;&amp; o !== <span class="hljs-literal">false</span> &amp;&amp; o !== <span class="hljs-literal">true</span>;
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">trim</span><span class="hljs-params">(str)</span> {</span>
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> str === <span class="hljs-string">'string'</span>) <span class="hljs-keyword">return</span> $.trim(str);
          <span class="hljs-keyword">return</span> str;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>parse options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">for</span> (ii = opts_len - <span class="hljs-number">1</span>; ii &gt;= <span class="hljs-number">0</span>; ii--) {
          p = opts_arr[ii].split(<span class="hljs-string">':'</span>);

          <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/true/i</span>.test(p[<span class="hljs-number">1</span>])) p[<span class="hljs-number">1</span>] = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/false/i</span>.test(p[<span class="hljs-number">1</span>])) p[<span class="hljs-number">1</span>] = <span class="hljs-literal">false</span>;
          <span class="hljs-keyword">if</span> (isNumber(p[<span class="hljs-number">1</span>])) p[<span class="hljs-number">1</span>] = <span class="hljs-built_in">parseInt</span>(p[<span class="hljs-number">1</span>], <span class="hljs-number">10</span>);

          <span class="hljs-keyword">if</span> (p.length === <span class="hljs-number">2</span> &amp;&amp; p[<span class="hljs-number">0</span>].length &gt; <span class="hljs-number">0</span>) {
            opts[trim(p[<span class="hljs-number">0</span>])] = trim(p[<span class="hljs-number">1</span>]);
          }
        }

        <span class="hljs-keyword">return</span> opts;
      },

      delay : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(fun, delay)</span> {</span>
        <span class="hljs-keyword">return</span> setTimeout(fun, delay);
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>test for empty object or array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      empty : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(obj)</span> {</span>
        <span class="hljs-keyword">if</span> (obj.length &amp;&amp; obj.length &gt; <span class="hljs-number">0</span>)    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (obj.length &amp;&amp; obj.length === <span class="hljs-number">0</span>)  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) {
          <span class="hljs-keyword">if</span> (hasOwnProperty.call(obj, key))    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      },

      register_media : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(media, media_class)</span> {</span>
        <span class="hljs-keyword">if</span>(Foundation.media_queries[media] === <span class="hljs-literal">undefined</span>) {
          $(<span class="hljs-string">'head'</span>).append(<span class="hljs-string">'&lt;meta class="'</span> + media_class + <span class="hljs-string">'"&gt;'</span>);
          Foundation.media_queries[media] = removeQuotes($(<span class="hljs-string">'.'</span> + media_class).css(<span class="hljs-string">'font-family'</span>));
        }
      },

      addCustomRule : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(rule, media)</span> {</span>
        <span class="hljs-keyword">if</span>(media === <span class="hljs-literal">undefined</span>) {
          Foundation.stylesheet.insertRule(rule, Foundation.stylesheet.cssRules.length);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">var</span> query = Foundation.media_queries[media];
          <span class="hljs-keyword">if</span>(query !== <span class="hljs-literal">undefined</span>) {
            Foundation.stylesheet.insertRule(<span class="hljs-string">'@media '</span> + 
              Foundation.media_queries[media] + <span class="hljs-string">'{ '</span> + rule + <span class="hljs-string">' }'</span>);
          }
        }
      },

      loaded : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(image, callback)</span> {</span>
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loaded</span> <span class="hljs-params">()</span> {</span>
          callback(image[<span class="hljs-number">0</span>]);
        }

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bindLoad</span> <span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">this</span>.one(<span class="hljs-string">'load'</span>, loaded);

          <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/MSIE (\d+\.\d+);/</span>.test(navigator.userAgent)) {
            <span class="hljs-keyword">var</span> src = <span class="hljs-keyword">this</span>.attr( <span class="hljs-string">'src'</span> ),
                param = src.match( <span class="hljs-regexp">/\?/</span> ) ? <span class="hljs-string">'&amp;'</span> : <span class="hljs-string">'?'</span>;

            param += <span class="hljs-string">'random='</span> + (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()).getTime();
            <span class="hljs-keyword">this</span>.attr(<span class="hljs-string">'src'</span>, src + param);
          }
        }

        <span class="hljs-keyword">if</span> (!image.attr(<span class="hljs-string">'src'</span>)) {
          loaded();
          <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">if</span> (image[<span class="hljs-number">0</span>].complete || image[<span class="hljs-number">0</span>].readyState === <span class="hljs-number">4</span>) {
          loaded();
        } <span class="hljs-keyword">else</span> {
          bindLoad.call(image);
        }
      },

      bindings : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(method, options)</span> {</span>
        <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
            should_bind_events = !S(<span class="hljs-keyword">this</span>).data(<span class="hljs-keyword">this</span>.name + <span class="hljs-string">'-init'</span>);

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> method === <span class="hljs-string">'string'</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[method].call(<span class="hljs-keyword">this</span>);
        }

        <span class="hljs-keyword">if</span> (S(<span class="hljs-keyword">this</span>.scope).is(<span class="hljs-string">'[data-'</span> + <span class="hljs-keyword">this</span>.name +<span class="hljs-string">']'</span>)) {
          S(<span class="hljs-keyword">this</span>.scope).data(<span class="hljs-keyword">this</span>.name + <span class="hljs-string">'-init'</span>, $.extend({}, <span class="hljs-keyword">this</span>.settings, (options || method), <span class="hljs-keyword">this</span>.data_options(S(<span class="hljs-keyword">this</span>.scope))));

          <span class="hljs-keyword">if</span> (should_bind_events) {
            <span class="hljs-keyword">this</span>.events(<span class="hljs-keyword">this</span>.scope);
          }

        } <span class="hljs-keyword">else</span> {
          S(<span class="hljs-string">'[data-'</span> + <span class="hljs-keyword">this</span>.name + <span class="hljs-string">']'</span>, <span class="hljs-keyword">this</span>.scope).each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> should_bind_events = !S(<span class="hljs-keyword">this</span>).data(self.name + <span class="hljs-string">'-init'</span>);

            S(<span class="hljs-keyword">this</span>).data(self.name + <span class="hljs-string">'-init'</span>, $.extend({}, self.settings, (options || method), self.data_options(S(<span class="hljs-keyword">this</span>))));

            <span class="hljs-keyword">if</span> (should_bind_events) {
              self.events(<span class="hljs-keyword">this</span>);
            }
          });
        }
      }
    }
  };

  $.fn.foundation = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">0</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      Foundation.init.apply(Foundation, [<span class="hljs-keyword">this</span>].concat(args));
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    });
  };

}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));

;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  Foundation.libs.abide = {
    name : <span class="hljs-string">'abide'</span>,

    version : <span class="hljs-string">'5.0.0'</span>,

    settings : {
      focus_on_invalid : <span class="hljs-literal">true</span>,
      timeout : <span class="hljs-number">1000</span>,
      patterns : {
        alpha: <span class="hljs-regexp">/[a-zA-Z]+/</span>,
        alpha_numeric : <span class="hljs-regexp">/[a-zA-Z0-9]+/</span>,
        integer: <span class="hljs-regexp">/-?\d+/</span>,
        number: <span class="hljs-regexp">/-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>generic password: upper-case, lower-case, number/special character, and min 8 characters</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        password : <span class="hljs-regexp">/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>amex, visa, diners</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        card : <span class="hljs-regexp">/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/</span>,
        cvv : <span class="hljs-regexp">/^([0-9]){3,4}$/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#valid-e-mail-address">http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#valid-e-mail-address</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        email : <span class="hljs-regexp">/^[a-zA-Z0-9.!#$%&amp;'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/</span>,

        url: <span class="hljs-regexp">/(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|\/|\?)*)?/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>abc.de</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        domain: <span class="hljs-regexp">/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/</span>,

        datetime: <span class="hljs-regexp">/([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>YYYY-MM-DD</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        date: <span class="hljs-regexp">/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>HH:MM:SS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        time : <span class="hljs-regexp">/(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}/</span>,
        dateISO: <span class="hljs-regexp">/\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>MM/DD/YYYY</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        month_day_year : <span class="hljs-regexp">/(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <h1 id="fff-or-ffffff">FFF or #FFFFFF</h1>

            </div>
            
            <div class="content"><div class='highlight'><pre>        color: <span class="hljs-regexp">/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/</span>
      }
    },

    timer : <span class="hljs-literal">null</span>,

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, method, options)</span> {</span>
      <span class="hljs-keyword">this</span>.bindings(method, options);
    },

    events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope)</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
          form = $(scope).attr(<span class="hljs-string">'novalidate'</span>, <span class="hljs-string">'novalidate'</span>),
          settings = form.data(<span class="hljs-string">'abide-init'</span>);

      form
        .off(<span class="hljs-string">'.abide'</span>)
        .on(<span class="hljs-string">'submit.fndtn.abide validate.fndtn.abide'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">var</span> is_ajax = <span class="hljs-regexp">/ajax/i</span>.test($(<span class="hljs-keyword">this</span>).attr(<span class="hljs-string">'data-abide'</span>));
          <span class="hljs-keyword">return</span> self.validate($(<span class="hljs-keyword">this</span>).find(<span class="hljs-string">'input, textarea, select'</span>).get(), e, is_ajax);
        })
        .find(<span class="hljs-string">'input, textarea, select'</span>)
          .off(<span class="hljs-string">'.abide'</span>)
          .on(<span class="hljs-string">'blur.fndtn.abide change.fndtn.abide'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
            self.validate([<span class="hljs-keyword">this</span>], e);
          })
          .on(<span class="hljs-string">'keydown.fndtn.abide'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
            <span class="hljs-keyword">var</span> settings = $(<span class="hljs-keyword">this</span>).closest(<span class="hljs-string">'form'</span>).data(<span class="hljs-string">'abide-init'</span>);
            clearTimeout(self.timer);
            self.timer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
              self.validate([<span class="hljs-keyword">this</span>], e);
            }.bind(<span class="hljs-keyword">this</span>), settings.timeout);
          });
    },

    validate : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(els, e, is_ajax)</span> {</span>
      <span class="hljs-keyword">var</span> validations = <span class="hljs-keyword">this</span>.parse_patterns(els),
          validation_count = validations.length,
          form = $(els[<span class="hljs-number">0</span>]).closest(<span class="hljs-string">'form'</span>),
          submit_event = <span class="hljs-regexp">/submit/</span>.test(e.type);

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i &lt; validation_count; i++) {
        <span class="hljs-keyword">if</span> (!validations[i] &amp;&amp; (submit_event || is_ajax)) {
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.focus_on_invalid) els[i].focus();
          form.trigger(<span class="hljs-string">'invalid'</span>);
          $(els[i]).closest(<span class="hljs-string">'form'</span>).attr(<span class="hljs-string">'data-invalid'</span>, <span class="hljs-string">''</span>);
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
      }

      <span class="hljs-keyword">if</span> (submit_event || is_ajax) {
        form.trigger(<span class="hljs-string">'valid'</span>);
      }

      form.removeAttr(<span class="hljs-string">'data-invalid'</span>);

      <span class="hljs-keyword">if</span> (is_ajax) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },

    parse_patterns : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(els)</span> {</span>
      <span class="hljs-keyword">var</span> count = els.length,
          el_patterns = [];

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = count - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
        el_patterns.push(<span class="hljs-keyword">this</span>.pattern(els[i]));
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.check_validation_and_apply_styles(el_patterns);
    },

    pattern : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(el)</span> {</span>
      <span class="hljs-keyword">var</span> type = el.getAttribute(<span class="hljs-string">'type'</span>),
          required = <span class="hljs-keyword">typeof</span> el.getAttribute(<span class="hljs-string">'required'</span>) === <span class="hljs-string">'string'</span>;

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.patterns.hasOwnProperty(type)) {
        <span class="hljs-keyword">return</span> [el, <span class="hljs-keyword">this</span>.settings.patterns[type], required];
      }

      <span class="hljs-keyword">var</span> pattern = el.getAttribute(<span class="hljs-string">'pattern'</span>) || <span class="hljs-string">''</span>;

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.patterns.hasOwnProperty(pattern) &amp;&amp; pattern.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> [el, <span class="hljs-keyword">this</span>.settings.patterns[pattern], required];
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pattern.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> [el, <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(pattern), required];
      }

      pattern = <span class="hljs-regexp">/.*/</span>;

      <span class="hljs-keyword">return</span> [el, pattern, required];
    },

    check_validation_and_apply_styles : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(el_patterns)</span> {</span>
      <span class="hljs-keyword">var</span> count = el_patterns.length,
          validations = [];

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = count - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
        <span class="hljs-keyword">var</span> el = el_patterns[i][<span class="hljs-number">0</span>],
            required = el_patterns[i][<span class="hljs-number">2</span>],
            value = el.value,
            is_equal = el.getAttribute(<span class="hljs-string">'data-equalto'</span>),
            is_radio = el.type === <span class="hljs-string">"radio"</span>,
            valid_length = (required) ? (el.value.length &gt; <span class="hljs-number">0</span>) : <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">if</span> (is_radio &amp;&amp; required) {
          validations.push(<span class="hljs-keyword">this</span>.valid_radio(el, required));
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (is_equal &amp;&amp; required) {
          validations.push(<span class="hljs-keyword">this</span>.valid_equal(el, required));
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">if</span> (el_patterns[i][<span class="hljs-number">1</span>].test(value) &amp;&amp; valid_length ||
            !required &amp;&amp; el.value.length &lt; <span class="hljs-number">1</span>) {
            $(el).removeAttr(<span class="hljs-string">'data-invalid'</span>).parent().removeClass(<span class="hljs-string">'error'</span>);
            validations.push(<span class="hljs-literal">true</span>);
          } <span class="hljs-keyword">else</span> {
            $(el).attr(<span class="hljs-string">'data-invalid'</span>, <span class="hljs-string">''</span>).parent().addClass(<span class="hljs-string">'error'</span>);
            validations.push(<span class="hljs-literal">false</span>);
          }
        }
      }

      <span class="hljs-keyword">return</span> validations;
    },

    valid_radio : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(el, required)</span> {</span>
      <span class="hljs-keyword">var</span> name = el.getAttribute(<span class="hljs-string">'name'</span>),
          group = document.getElementsByName(name),
          count = group.length,
          valid = <span class="hljs-literal">false</span>;

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i &lt; count; i++) {
        <span class="hljs-keyword">if</span> (group[i].checked) valid = <span class="hljs-literal">true</span>;
      }

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i &lt; count; i++) {
        <span class="hljs-keyword">if</span> (valid) {
          $(group[i]).removeAttr(<span class="hljs-string">'data-invalid'</span>).parent().removeClass(<span class="hljs-string">'error'</span>);
        } <span class="hljs-keyword">else</span> {
          $(group[i]).attr(<span class="hljs-string">'data-invalid'</span>, <span class="hljs-string">''</span>).parent().addClass(<span class="hljs-string">'error'</span>);
        }
      }

      <span class="hljs-keyword">return</span> valid;
    },

    valid_equal: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el, required)</span> {</span>
      <span class="hljs-keyword">var</span> from  = document.getElementById(el.getAttribute(<span class="hljs-string">'data-equalto'</span>)).value,
          to    = el.value,
          valid = (from === to);

      <span class="hljs-keyword">if</span> (valid) {
        $(el).removeAttr(<span class="hljs-string">'data-invalid'</span>).parent().removeClass(<span class="hljs-string">'error'</span>);
      } <span class="hljs-keyword">else</span> {
        $(el).attr(<span class="hljs-string">'data-invalid'</span>, <span class="hljs-string">''</span>).parent().addClass(<span class="hljs-string">'error'</span>);
      }

      <span class="hljs-keyword">return</span> valid;
    }
  };
}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));
;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  Foundation.libs.accordion = {
    name : <span class="hljs-string">'accordion'</span>,

    version : <span class="hljs-string">'5.0.1'</span>,

    settings : {
      active_class: <span class="hljs-string">'active'</span>,
      toggleable: <span class="hljs-literal">true</span>
    },

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, method, options)</span> {</span>
      <span class="hljs-keyword">this</span>.bindings(method, options);
    },

    events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      $(<span class="hljs-keyword">this</span>.scope).off(<span class="hljs-string">'.accordion'</span>).on(<span class="hljs-string">'click.fndtn.accordion'</span>, <span class="hljs-string">'[data-accordion] &gt; dd &gt; a'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
        <span class="hljs-keyword">var</span> accordion = $(<span class="hljs-keyword">this</span>).parent(),
            target = $(<span class="hljs-string">'#'</span> + <span class="hljs-keyword">this</span>.href.split(<span class="hljs-string">'#'</span>)[<span class="hljs-number">1</span>]),
            siblings = $(<span class="hljs-string">'&gt; dd &gt; .content'</span>, target.closest(<span class="hljs-string">'[data-accordion]'</span>)),
            settings = accordion.parent().data(<span class="hljs-string">'accordion-init'</span>),
            active = $(<span class="hljs-string">'&gt; dd &gt; .content.'</span> + settings.active_class, accordion.parent());

        e.preventDefault();

        <span class="hljs-keyword">if</span> (active[<span class="hljs-number">0</span>] == target[<span class="hljs-number">0</span>] &amp;&amp; settings.toggleable) {
          <span class="hljs-keyword">return</span> target.toggleClass(settings.active_class);
        }

        siblings.removeClass(settings.active_class);
        target.addClass(settings.active_class);
      });
    },

    off : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>},

    reflow : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>}
  };
}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));

;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  Foundation.libs.alert = {
    name : <span class="hljs-string">'alert'</span>,

    version : <span class="hljs-string">'5.0.0'</span>,

    settings : {
      animation: <span class="hljs-string">'fadeOut'</span>,
      speed: <span class="hljs-number">300</span>, <span class="hljs-comment">// fade out speed</span>
      callback: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>{</span>}
    },

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, method, options)</span> {</span>
      <span class="hljs-keyword">this</span>.bindings(method, options);
    },

    events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      $(<span class="hljs-keyword">this</span>.scope).off(<span class="hljs-string">'.alert'</span>).on(<span class="hljs-string">'click.fndtn.alert'</span>, <span class="hljs-string">'[data-alert] a.close'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">var</span> alertBox = $(<span class="hljs-keyword">this</span>).closest(<span class="hljs-string">"[data-alert]"</span>),
              settings = alertBox.data(<span class="hljs-string">'alert-init'</span>);

        e.preventDefault();
        alertBox[settings.animation](settings.speed, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
          $(<span class="hljs-keyword">this</span>).trigger(<span class="hljs-string">'closed'</span>).remove();
          settings.callback();
        });
      });
    },

    reflow : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>}
  };
}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));
;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  Foundation.libs.clearing = {
    name : <span class="hljs-string">'clearing'</span>,

    version: <span class="hljs-string">'5.0.0'</span>,

    settings : {
      templates : {
        viewing : <span class="hljs-string">'&lt;a href="#" class="clearing-close"&gt;&amp;times;&lt;/a&gt;'</span> +
          <span class="hljs-string">'&lt;div class="visible-img" style="display: none"&gt;&lt;img src="//:0"&gt;'</span> +
          <span class="hljs-string">'&lt;p class="clearing-caption"&gt;&lt;/p&gt;&lt;a href="#" class="clearing-main-prev"&gt;&lt;span&gt;&lt;/span&gt;&lt;/a&gt;'</span> +
          <span class="hljs-string">'&lt;a href="#" class="clearing-main-next"&gt;&lt;span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;'</span>
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>comma delimited list of selectors that, on click, will close clearing,
add âdiv.clearing-blackout, div.visible-imgâ to close on background click</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      close_selectors : <span class="hljs-string">'.clearing-close'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>event initializers and locks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      init : <span class="hljs-literal">false</span>,
      locked : <span class="hljs-literal">false</span>
    },

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, method, options)</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
      Foundation.inherit(<span class="hljs-keyword">this</span>, <span class="hljs-string">'throttle loaded'</span>);

      <span class="hljs-keyword">this</span>.bindings(method, options);

      <span class="hljs-keyword">if</span> ($(<span class="hljs-keyword">this</span>.scope).is(<span class="hljs-string">'[data-clearing]'</span>)) {
        <span class="hljs-keyword">this</span>.assemble($(<span class="hljs-string">'li'</span>, <span class="hljs-keyword">this</span>.scope));
      } <span class="hljs-keyword">else</span> {
        $(<span class="hljs-string">'[data-clearing]'</span>, <span class="hljs-keyword">this</span>.scope).each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
          self.assemble($(<span class="hljs-string">'li'</span>, <span class="hljs-keyword">this</span>));
        });
      }
    },

    events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope)</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

      $(<span class="hljs-keyword">this</span>.scope)
        .off(<span class="hljs-string">'.clearing'</span>)
        .on(<span class="hljs-string">'click.fndtn.clearing'</span>, <span class="hljs-string">'ul[data-clearing] li'</span>,
          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e, current, target)</span> {</span>
            <span class="hljs-keyword">var</span> current = current || $(<span class="hljs-keyword">this</span>),
                target = target || current,
                next = current.next(<span class="hljs-string">'li'</span>),
                settings = current.closest(<span class="hljs-string">'[data-clearing]'</span>).data(<span class="hljs-string">'clearing-init'</span>),
                image = $(e.target);

            e.preventDefault();

            <span class="hljs-keyword">if</span> (!settings) {
              self.init();
              settings = current.closest(<span class="hljs-string">'[data-clearing]'</span>).data(<span class="hljs-string">'clearing-init'</span>);
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>if clearing is open and the current image is
clicked, go to the next image in sequence</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (target.hasClass(<span class="hljs-string">'visible'</span>) &amp;&amp; 
              current[<span class="hljs-number">0</span>] === target[<span class="hljs-number">0</span>] &amp;&amp; 
              next.length &gt; <span class="hljs-number">0</span> &amp;&amp; self.is_open(current)) {
              target = next;
              image = $(<span class="hljs-string">'img'</span>, target);
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>set current and target to the clicked li if not otherwise defined.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            self.open(image, current, target);
            self.update_paddles(target);
          })

        .on(<span class="hljs-string">'click.fndtn.clearing'</span>, <span class="hljs-string">'.clearing-main-next'</span>,
          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span> self.nav(e, <span class="hljs-string">'next'</span>) })
        .on(<span class="hljs-string">'click.fndtn.clearing'</span>, <span class="hljs-string">'.clearing-main-prev'</span>,
          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span> self.nav(e, <span class="hljs-string">'prev'</span>) })
        .on(<span class="hljs-string">'click.fndtn.clearing'</span>, <span class="hljs-keyword">this</span>.settings.close_selectors,
          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span> Foundation.libs.clearing.close(e, <span class="hljs-keyword">this</span>) })
        .on(<span class="hljs-string">'keydown.fndtn.clearing'</span>,
          <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span> self.keydown(e) });

      $(window).off(<span class="hljs-string">'.clearing'</span>).on(<span class="hljs-string">'resize.fndtn.clearing'</span>,
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span> self.resize() });

      <span class="hljs-keyword">this</span>.swipe_events(scope);
    },

    swipe_events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope)</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

      $(<span class="hljs-keyword">this</span>.scope)
        .on(<span class="hljs-string">'touchstart.fndtn.clearing'</span>, <span class="hljs-string">'.visible-img'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">if</span> (!e.touches) { e = e.originalEvent; }
          <span class="hljs-keyword">var</span> data = {
                start_page_x: e.touches[<span class="hljs-number">0</span>].pageX,
                start_page_y: e.touches[<span class="hljs-number">0</span>].pageY,
                start_time: (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()).getTime(),
                delta_x: <span class="hljs-number">0</span>,
                is_scrolling: <span class="hljs-literal">undefined</span>
              };

          $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">'swipe-transition'</span>, data);
          e.stopPropagation();
        })
        .on(<span class="hljs-string">'touchmove.fndtn.clearing'</span>, <span class="hljs-string">'.visible-img'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">if</span> (!e.touches) { e = e.originalEvent; }</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Ignore pinch/zoom events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span>(e.touches.length &gt; <span class="hljs-number">1</span> || e.scale &amp;&amp; e.scale !== <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;

          <span class="hljs-keyword">var</span> data = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">'swipe-transition'</span>);

          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'undefined'</span>) {
            data = {};
          }

          data.delta_x = e.touches[<span class="hljs-number">0</span>].pageX - data.start_page_x;

          <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> data.is_scrolling === <span class="hljs-string">'undefined'</span>) {
            data.is_scrolling = !!( data.is_scrolling || <span class="hljs-built_in">Math</span>.abs(data.delta_x) &lt; <span class="hljs-built_in">Math</span>.abs(e.touches[<span class="hljs-number">0</span>].pageY - data.start_page_y) );
          }

          <span class="hljs-keyword">if</span> (!data.is_scrolling &amp;&amp; !data.active) {
            e.preventDefault();
            <span class="hljs-keyword">var</span> direction = (data.delta_x &lt; <span class="hljs-number">0</span>) ? <span class="hljs-string">'next'</span> : <span class="hljs-string">'prev'</span>;
            data.active = <span class="hljs-literal">true</span>;
            self.nav(e, direction);
          }
        })
        .on(<span class="hljs-string">'touchend.fndtn.clearing'</span>, <span class="hljs-string">'.visible-img'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
          $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">'swipe-transition'</span>, {});
          e.stopPropagation();
        });
    },

    assemble : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($li)</span> {</span>
      <span class="hljs-keyword">var</span> $el = $li.parent();

      <span class="hljs-keyword">if</span> ($el.parent().hasClass(<span class="hljs-string">'carousel'</span>)) <span class="hljs-keyword">return</span>;
      $el.after(<span class="hljs-string">'&lt;div id="foundationClearingHolder"&gt;&lt;/div&gt;'</span>);

      <span class="hljs-keyword">var</span> holder = $(<span class="hljs-string">'#foundationClearingHolder'</span>),
          settings = $el.data(<span class="hljs-string">'clearing-init'</span>),
          grid = $el.detach(),
          data = {
            grid: <span class="hljs-string">'&lt;div class="carousel"&gt;'</span> + grid[<span class="hljs-number">0</span>].outerHTML + <span class="hljs-string">'&lt;/div&gt;'</span>,
            viewing: settings.templates.viewing
          },
          wrapper = <span class="hljs-string">'&lt;div class="clearing-assembled"&gt;&lt;div&gt;'</span> + data.viewing +
            data.grid + <span class="hljs-string">'&lt;/div&gt;&lt;/div&gt;'</span>;

      <span class="hljs-keyword">return</span> holder.after(wrapper).remove();
    },

    open : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($image, current, target)</span> {</span>
      <span class="hljs-keyword">var</span> root = target.closest(<span class="hljs-string">'.clearing-assembled'</span>),
          container = $(<span class="hljs-string">'div'</span>, root).first(),
          visible_image = $(<span class="hljs-string">'.visible-img'</span>, container),
          image = $(<span class="hljs-string">'img'</span>, visible_image).not($image);

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.locked()) {</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>set the image to the selected thumbnail</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        image
          .attr(<span class="hljs-string">'src'</span>, <span class="hljs-keyword">this</span>.load($image))
          .css(<span class="hljs-string">'visibility'</span>, <span class="hljs-string">'hidden'</span>);

        <span class="hljs-keyword">this</span>.loaded(image, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
          image.css(<span class="hljs-string">'visibility'</span>, <span class="hljs-string">'visible'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>toggle the gallery</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          root.addClass(<span class="hljs-string">'clearing-blackout'</span>);
          container.addClass(<span class="hljs-string">'clearing-container'</span>);
          visible_image.show();
          <span class="hljs-keyword">this</span>.fix_height(target)
            .caption($(<span class="hljs-string">'.clearing-caption'</span>, visible_image), $image)
            .center(image)
            .shift(current, target, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
              target.siblings().removeClass(<span class="hljs-string">'visible'</span>);
              target.addClass(<span class="hljs-string">'visible'</span>);
            });
        }.bind(<span class="hljs-keyword">this</span>));
      }
    },

    close : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e, el)</span> {</span>
      e.preventDefault();

      <span class="hljs-keyword">var</span> root = (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(target)</span> {</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/blackout/</span>.test(target.selector)) {
              <span class="hljs-keyword">return</span> target;
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">return</span> target.closest(<span class="hljs-string">'.clearing-blackout'</span>);
            }
          }($(el))), container, visible_image;

      <span class="hljs-keyword">if</span> (el === e.target &amp;&amp; root) {
        container = $(<span class="hljs-string">'div'</span>, root).first();
        visible_image = $(<span class="hljs-string">'.visible-img'</span>, container);
        <span class="hljs-keyword">this</span>.settings.prev_index = <span class="hljs-number">0</span>;
        $(<span class="hljs-string">'ul[data-clearing]'</span>, root)
          .attr(<span class="hljs-string">'style'</span>, <span class="hljs-string">''</span>).closest(<span class="hljs-string">'.clearing-blackout'</span>)
          .removeClass(<span class="hljs-string">'clearing-blackout'</span>);
        container.removeClass(<span class="hljs-string">'clearing-container'</span>);
        visible_image.hide();
      }

      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },

    is_open : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(current)</span> {</span>
      <span class="hljs-keyword">return</span> current.parent().prop(<span class="hljs-string">'style'</span>).length &gt; <span class="hljs-number">0</span>;
    },

    keydown : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
      <span class="hljs-keyword">var</span> clearing = $(<span class="hljs-string">'ul[data-clearing]'</span>, <span class="hljs-string">'.clearing-blackout'</span>);

      <span class="hljs-keyword">if</span> (e.which === <span class="hljs-number">39</span>) <span class="hljs-keyword">this</span>.go(clearing, <span class="hljs-string">'next'</span>);
      <span class="hljs-keyword">if</span> (e.which === <span class="hljs-number">37</span>) <span class="hljs-keyword">this</span>.go(clearing, <span class="hljs-string">'prev'</span>);
      <span class="hljs-keyword">if</span> (e.which === <span class="hljs-number">27</span>) $(<span class="hljs-string">'a.clearing-close'</span>).trigger(<span class="hljs-string">'click'</span>);
    },

    nav : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e, direction)</span> {</span>
      <span class="hljs-keyword">var</span> clearing = $(<span class="hljs-string">'ul[data-clearing]'</span>, <span class="hljs-string">'.clearing-blackout'</span>);

      e.preventDefault();
      <span class="hljs-keyword">this</span>.go(clearing, direction);
    },

    resize : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> image = $(<span class="hljs-string">'img'</span>, <span class="hljs-string">'.clearing-blackout .visible-img'</span>);

      <span class="hljs-keyword">if</span> (image.length) {
        <span class="hljs-keyword">this</span>.center(image);
      }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>visual adjustments</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    fix_height : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(target)</span> {</span>
      <span class="hljs-keyword">var</span> lis = target.parent().children(),
          self = <span class="hljs-keyword">this</span>;

      lis.each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">var</span> li = $(<span class="hljs-keyword">this</span>),
              image = li.find(<span class="hljs-string">'img'</span>);

          <span class="hljs-keyword">if</span> (li.height() &gt; image.outerHeight()) {
            li.addClass(<span class="hljs-string">'fix-height'</span>);
          }
        })
        .closest(<span class="hljs-string">'ul'</span>)
        .width(lis.length * <span class="hljs-number">100</span> + <span class="hljs-string">'%'</span>);

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },

    update_paddles : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(target)</span> {</span>
      <span class="hljs-keyword">var</span> visible_image = target
        .closest(<span class="hljs-string">'.carousel'</span>)
        .siblings(<span class="hljs-string">'.visible-img'</span>);

      <span class="hljs-keyword">if</span> (target.next().length &gt; <span class="hljs-number">0</span>) {
        $(<span class="hljs-string">'.clearing-main-next'</span>, visible_image)
          .removeClass(<span class="hljs-string">'disabled'</span>);
      } <span class="hljs-keyword">else</span> {
        $(<span class="hljs-string">'.clearing-main-next'</span>, visible_image)
          .addClass(<span class="hljs-string">'disabled'</span>);
      }

      <span class="hljs-keyword">if</span> (target.prev().length &gt; <span class="hljs-number">0</span>) {
        $(<span class="hljs-string">'.clearing-main-prev'</span>, visible_image)
          .removeClass(<span class="hljs-string">'disabled'</span>);
      } <span class="hljs-keyword">else</span> {
        $(<span class="hljs-string">'.clearing-main-prev'</span>, visible_image)
          .addClass(<span class="hljs-string">'disabled'</span>);
      }
    },

    center : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(target)</span> {</span>
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.rtl) {
        target.css({
          marginLeft : -(target.outerWidth() / <span class="hljs-number">2</span>),
          marginTop : -(target.outerHeight() / <span class="hljs-number">2</span>)
        });
      } <span class="hljs-keyword">else</span> {
        target.css({
          marginRight : -(target.outerWidth() / <span class="hljs-number">2</span>),
          marginTop : -(target.outerHeight() / <span class="hljs-number">2</span>)
        });
      }
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>image loading and preloading</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    load : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($image)</span> {</span>
      <span class="hljs-keyword">if</span> ($image[<span class="hljs-number">0</span>].nodeName === <span class="hljs-string">"A"</span>) {
        <span class="hljs-keyword">var</span> href = $image.attr(<span class="hljs-string">'href'</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> href = $image.parent().attr(<span class="hljs-string">'href'</span>);
      }

      <span class="hljs-keyword">this</span>.preload($image);

      <span class="hljs-keyword">if</span> (href) <span class="hljs-keyword">return</span> href;
      <span class="hljs-keyword">return</span> $image.attr(<span class="hljs-string">'src'</span>);
    },

    preload : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($image)</span> {</span>
      <span class="hljs-keyword">this</span>
        .img($image.closest(<span class="hljs-string">'li'</span>).next())
        .img($image.closest(<span class="hljs-string">'li'</span>).prev());
    },

    img : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(img)</span> {</span>
      <span class="hljs-keyword">if</span> (img.length) {
        <span class="hljs-keyword">var</span> new_img = <span class="hljs-keyword">new</span> Image(),
            new_a = $(<span class="hljs-string">'a'</span>, img);

        <span class="hljs-keyword">if</span> (new_a.length) {
          new_img.src = new_a.attr(<span class="hljs-string">'href'</span>);
        } <span class="hljs-keyword">else</span> {
          new_img.src = $(<span class="hljs-string">'img'</span>, img).attr(<span class="hljs-string">'src'</span>);
        }
      }
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>image caption</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    caption : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(container, $image)</span> {</span>
      <span class="hljs-keyword">var</span> caption = $image.data(<span class="hljs-string">'caption'</span>);

      <span class="hljs-keyword">if</span> (caption) {
        container
          .html(caption)
          .show();
      } <span class="hljs-keyword">else</span> {
        container
          .text(<span class="hljs-string">''</span>)
          .hide();
      }
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>directional methods</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    go : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($ul, direction)</span> {</span>
      <span class="hljs-keyword">var</span> current = $(<span class="hljs-string">'.visible'</span>, $ul),
          target = current[direction]();

      <span class="hljs-keyword">if</span> (target.length) {
        $(<span class="hljs-string">'img'</span>, target)
          .trigger(<span class="hljs-string">'click'</span>, [current, target]);
      }
    },

    shift : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(current, target, callback)</span> {</span>
      <span class="hljs-keyword">var</span> clearing = target.parent(),
          old_index = <span class="hljs-keyword">this</span>.settings.prev_index || target.index(),
          direction = <span class="hljs-keyword">this</span>.direction(clearing, current, target),
          left = <span class="hljs-built_in">parseInt</span>(clearing.css(<span class="hljs-string">'left'</span>), <span class="hljs-number">10</span>),
          width = target.outerWidth(),
          skip_shift;</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>we use jQuery animate instead of CSS transitions because we
need a callback to unlock the next animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (target.index() !== old_index &amp;&amp; !<span class="hljs-regexp">/skip/</span>.test(direction)){
        <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/left/</span>.test(direction)) {
          <span class="hljs-keyword">this</span>.lock();
          clearing.animate({left : left + width}, <span class="hljs-number">300</span>, <span class="hljs-keyword">this</span>.unlock());
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/right/</span>.test(direction)) {
          <span class="hljs-keyword">this</span>.lock();
          clearing.animate({left : left - width}, <span class="hljs-number">300</span>, <span class="hljs-keyword">this</span>.unlock());
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/skip/</span>.test(direction)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>the target image is not adjacent to the current image, so
do we scroll right or not</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        skip_shift = target.index() - <span class="hljs-keyword">this</span>.settings.up_count;
        <span class="hljs-keyword">this</span>.lock();

        <span class="hljs-keyword">if</span> (skip_shift &gt; <span class="hljs-number">0</span>) {
          clearing.animate({left : -(skip_shift * width)}, <span class="hljs-number">300</span>, <span class="hljs-keyword">this</span>.unlock());
        } <span class="hljs-keyword">else</span> {
          clearing.animate({left : <span class="hljs-number">0</span>}, <span class="hljs-number">300</span>, <span class="hljs-keyword">this</span>.unlock());
        }
      }

      callback();
    },

    direction : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($el, current, target)</span> {</span>
      <span class="hljs-keyword">var</span> lis = $(<span class="hljs-string">'li'</span>, $el),
          li_width = lis.outerWidth() + (lis.outerWidth() / <span class="hljs-number">4</span>),
          up_count = <span class="hljs-built_in">Math</span>.floor($(<span class="hljs-string">'.clearing-container'</span>).outerWidth() / li_width) - <span class="hljs-number">1</span>,
          target_index = lis.index(target),
          response;

      <span class="hljs-keyword">this</span>.settings.up_count = up_count;

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.adjacent(<span class="hljs-keyword">this</span>.settings.prev_index, target_index)) {
        <span class="hljs-keyword">if</span> ((target_index &gt; up_count)
          &amp;&amp; target_index &gt; <span class="hljs-keyword">this</span>.settings.prev_index) {
          response = <span class="hljs-string">'right'</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((target_index &gt; up_count - <span class="hljs-number">1</span>)
          &amp;&amp; target_index &lt;= <span class="hljs-keyword">this</span>.settings.prev_index) {
          response = <span class="hljs-string">'left'</span>;
        } <span class="hljs-keyword">else</span> {
          response = <span class="hljs-literal">false</span>;
        }
      } <span class="hljs-keyword">else</span> {
        response = <span class="hljs-string">'skip'</span>;
      }

      <span class="hljs-keyword">this</span>.settings.prev_index = target_index;

      <span class="hljs-keyword">return</span> response;
    },

    adjacent : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(current_index, target_index)</span> {</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = target_index + <span class="hljs-number">1</span>; i &gt;= target_index - <span class="hljs-number">1</span>; i--) {
        <span class="hljs-keyword">if</span> (i === current_index) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>lock management</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    lock : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.settings.locked = <span class="hljs-literal">true</span>;
    },

    unlock : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.settings.locked = <span class="hljs-literal">false</span>;
    },

    locked : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.settings.locked;
    },

    off : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      $(<span class="hljs-keyword">this</span>.scope).off(<span class="hljs-string">'.fndtn.clearing'</span>);
      $(window).off(<span class="hljs-string">'.fndtn.clearing'</span>);
    },

    reflow : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.init();
    }
  };

}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));

;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  Foundation.libs.dropdown = {
    name : <span class="hljs-string">'dropdown'</span>,

    version : <span class="hljs-string">'5.0.0'</span>,

    settings : {
      active_class: <span class="hljs-string">'open'</span>,
      is_hover: <span class="hljs-literal">false</span>,
      opened: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>},
      closed: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>}
    },

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, method, options)</span> {</span>
      Foundation.inherit(<span class="hljs-keyword">this</span>, <span class="hljs-string">'throttle'</span>);

      <span class="hljs-keyword">this</span>.bindings(method, options);
    },

    events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope)</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

      $(<span class="hljs-keyword">this</span>.scope)
        .off(<span class="hljs-string">'.dropdown'</span>)
        .on(<span class="hljs-string">'click.fndtn.dropdown'</span>, <span class="hljs-string">'[data-dropdown]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">var</span> settings = $(<span class="hljs-keyword">this</span>).data(<span class="hljs-string">'dropdown-init'</span>);
          e.preventDefault();

          <span class="hljs-keyword">if</span> (!settings.is_hover || Modernizr.touch) self.toggle($(<span class="hljs-keyword">this</span>));
        })
        .on(<span class="hljs-string">'mouseenter.fndtn.dropdown'</span>, <span class="hljs-string">'[data-dropdown], [data-dropdown-content]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>);
          clearTimeout(self.timeout);

          <span class="hljs-keyword">if</span> ($<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'dropdown'</span>)) {
            <span class="hljs-keyword">var</span> dropdown = $(<span class="hljs-string">'#'</span> + $<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'dropdown'</span>)),
                target = $<span class="hljs-keyword">this</span>;
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">var</span> dropdown = $<span class="hljs-keyword">this</span>;
                target = $(<span class="hljs-string">"[data-dropdown='"</span> + dropdown.attr(<span class="hljs-string">'id'</span>) + <span class="hljs-string">"']"</span>);
          }

          <span class="hljs-keyword">var</span> settings = target.data(<span class="hljs-string">'dropdown-init'</span>);
          <span class="hljs-keyword">if</span> (settings.is_hover) self.open.apply(self, [dropdown, target]);
        })
        .on(<span class="hljs-string">'mouseleave.fndtn.dropdown'</span>, <span class="hljs-string">'[data-dropdown], [data-dropdown-content]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>);
          self.timeout = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">if</span> ($<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'dropdown'</span>)) {
              <span class="hljs-keyword">var</span> settings = $<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'dropdown-init'</span>);
              <span class="hljs-keyword">if</span> (settings.is_hover) self.close.call(self, $(<span class="hljs-string">'#'</span> + $<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'dropdown'</span>)));
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">var</span> target = $(<span class="hljs-string">'[data-dropdown="'</span> + $(<span class="hljs-keyword">this</span>).attr(<span class="hljs-string">'id'</span>) + <span class="hljs-string">'"]'</span>),
                  settings = target.data(<span class="hljs-string">'dropdown-init'</span>);
              <span class="hljs-keyword">if</span> (settings.is_hover) self.close.call(self, $<span class="hljs-keyword">this</span>);
            }
          }.bind(<span class="hljs-keyword">this</span>), <span class="hljs-number">150</span>);
        })
        .on(<span class="hljs-string">'click.fndtn.dropdown'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">var</span> parent = $(e.target).closest(<span class="hljs-string">'[data-dropdown-content]'</span>);

          <span class="hljs-keyword">if</span> ($(e.target).data(<span class="hljs-string">'dropdown'</span>) || $(e.target).parent().data(<span class="hljs-string">'dropdown'</span>)) {
            <span class="hljs-keyword">return</span>;
          }
          <span class="hljs-keyword">if</span> (!($(e.target).data(<span class="hljs-string">'revealId'</span>)) &amp;&amp; 
            (parent.length &gt; <span class="hljs-number">0</span> &amp;&amp; ($(e.target).is(<span class="hljs-string">'[data-dropdown-content]'</span>) || 
              $.contains(parent.first()[<span class="hljs-number">0</span>], e.target)))) {
            e.stopPropagation();
            <span class="hljs-keyword">return</span>;
          }

          self.close.call(self, $(<span class="hljs-string">'[data-dropdown-content]'</span>));
        })
        .on(<span class="hljs-string">'opened.fndtn.dropdown'</span>, <span class="hljs-string">'[data-dropdown-content]'</span>, <span class="hljs-keyword">this</span>.settings.opened)
        .on(<span class="hljs-string">'closed.fndtn.dropdown'</span>, <span class="hljs-string">'[data-dropdown-content]'</span>, <span class="hljs-keyword">this</span>.settings.closed);

      $(window)
        .off(<span class="hljs-string">'.dropdown'</span>)
        .on(<span class="hljs-string">'resize.fndtn.dropdown'</span>, self.throttle(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
          self.resize.call(self);
        }, <span class="hljs-number">50</span>)).trigger(<span class="hljs-string">'resize'</span>);
    },

    close: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(dropdown)</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
      dropdown.each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">if</span> ($(<span class="hljs-keyword">this</span>).hasClass(self.settings.active_class)) {
          $(<span class="hljs-keyword">this</span>)
            .css(Foundation.rtl ? <span class="hljs-string">'right'</span>:<span class="hljs-string">'left'</span>, <span class="hljs-string">'-99999px'</span>)
            .removeClass(self.settings.active_class);
          $(<span class="hljs-keyword">this</span>).trigger(<span class="hljs-string">'closed'</span>);
        }
      });
    },

    open: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(dropdown, target)</span> {</span>
        <span class="hljs-keyword">this</span>
          .css(dropdown
            .addClass(<span class="hljs-keyword">this</span>.settings.active_class), target);
        dropdown.trigger(<span class="hljs-string">'opened'</span>);
    },

    toggle : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(target)</span> {</span>
      <span class="hljs-keyword">var</span> dropdown = $(<span class="hljs-string">'#'</span> + target.data(<span class="hljs-string">'dropdown'</span>));
      <span class="hljs-keyword">if</span> (dropdown.length === <span class="hljs-number">0</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>No dropdown found, not continuing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">this</span>.close.call(<span class="hljs-keyword">this</span>, $(<span class="hljs-string">'[data-dropdown-content]'</span>).not(dropdown));

      <span class="hljs-keyword">if</span> (dropdown.hasClass(<span class="hljs-keyword">this</span>.settings.active_class)) {
        <span class="hljs-keyword">this</span>.close.call(<span class="hljs-keyword">this</span>, dropdown);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.close.call(<span class="hljs-keyword">this</span>, $(<span class="hljs-string">'[data-dropdown-content]'</span>))
        <span class="hljs-keyword">this</span>.open.call(<span class="hljs-keyword">this</span>, dropdown, target);
      }
    },

    resize : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> dropdown = $(<span class="hljs-string">'[data-dropdown-content].open'</span>),
          target = $(<span class="hljs-string">"[data-dropdown='"</span> + dropdown.attr(<span class="hljs-string">'id'</span>) + <span class="hljs-string">"']"</span>);

      <span class="hljs-keyword">if</span> (dropdown.length &amp;&amp; target.length) {
        <span class="hljs-keyword">this</span>.css(dropdown, target);
      }
    },

    css : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(dropdown, target)</span> {</span>
      <span class="hljs-keyword">var</span> offset_parent = dropdown.offsetParent(),
          position = target.offset();

      position.top -= offset_parent.offset().top;
      position.left -= offset_parent.offset().left;

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.small()) {
        dropdown.css({
          position : <span class="hljs-string">'absolute'</span>,
          width: <span class="hljs-string">'95%'</span>,
          <span class="hljs-string">'max-width'</span>: <span class="hljs-string">'none'</span>,
          top: position.top + target.outerHeight()
        });
        dropdown.css(Foundation.rtl ? <span class="hljs-string">'right'</span>:<span class="hljs-string">'left'</span>, <span class="hljs-string">'2.5%'</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (!Foundation.rtl &amp;&amp; $(window).width() &gt; dropdown.outerWidth() + target.offset().left) {
          <span class="hljs-keyword">var</span> left = position.left;
          <span class="hljs-keyword">if</span> (dropdown.hasClass(<span class="hljs-string">'right'</span>)) {
            dropdown.removeClass(<span class="hljs-string">'right'</span>);
          }
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">if</span> (!dropdown.hasClass(<span class="hljs-string">'right'</span>)) {
            dropdown.addClass(<span class="hljs-string">'right'</span>);
          }
          <span class="hljs-keyword">var</span> left = position.left - (dropdown.outerWidth() - target.outerWidth());
        }

        dropdown.attr(<span class="hljs-string">'style'</span>, <span class="hljs-string">''</span>).css({
          position : <span class="hljs-string">'absolute'</span>,
          top: position.top + target.outerHeight(),
          left: left
        });
      }

      <span class="hljs-keyword">return</span> dropdown;
    },

    small : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">return</span> matchMedia(Foundation.media_queries.small).matches &amp;&amp;
        !matchMedia(Foundation.media_queries.medium).matches;
    },

    off: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      $(<span class="hljs-keyword">this</span>.scope).off(<span class="hljs-string">'.fndtn.dropdown'</span>);
      $(<span class="hljs-string">'html, body'</span>).off(<span class="hljs-string">'.fndtn.dropdown'</span>);
      $(window).off(<span class="hljs-string">'.fndtn.dropdown'</span>);
      $(<span class="hljs-string">'[data-dropdown-content]'</span>).off(<span class="hljs-string">'.fndtn.dropdown'</span>);
      <span class="hljs-keyword">this</span>.settings.init = <span class="hljs-literal">false</span>;
    },

    reflow : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>}
  };
}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));

;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  Foundation.libs.interchange = {
    name : <span class="hljs-string">'interchange'</span>,

    version : <span class="hljs-string">'5.0.0'</span>,

    cache : {},

    images_loaded : <span class="hljs-literal">false</span>,
    nodes_loaded : <span class="hljs-literal">false</span>,

    settings : {
      load_attr : <span class="hljs-string">'interchange'</span>,

      named_queries : {
        <span class="hljs-string">'default'</span> : Foundation.media_queries.small,
        small : Foundation.media_queries.small,
        medium : Foundation.media_queries.medium,
        large : Foundation.media_queries.large,
        xlarge : Foundation.media_queries.xlarge,
        xxlarge: Foundation.media_queries.xxlarge,
        landscape : <span class="hljs-string">'only screen and (orientation: landscape)'</span>,
        portrait : <span class="hljs-string">'only screen and (orientation: portrait)'</span>,
        retina : <span class="hljs-string">'only screen and (-webkit-min-device-pixel-ratio: 2),'</span> + 
          <span class="hljs-string">'only screen and (min--moz-device-pixel-ratio: 2),'</span> + 
          <span class="hljs-string">'only screen and (-o-min-device-pixel-ratio: 2/1),'</span> + 
          <span class="hljs-string">'only screen and (min-device-pixel-ratio: 2),'</span> + 
          <span class="hljs-string">'only screen and (min-resolution: 192dpi),'</span> + 
          <span class="hljs-string">'only screen and (min-resolution: 2dppx)'</span>
      },

      directives : {
        replace: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(el, path, trigger)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>The trigger argument, if called within the directive, fires
an event named after the directive on the element, passing
any parameters along to the event that you pass to trigger.</p>
<p>ex. trigger(), trigger([a, b, c]), or trigger(a, b, c)</p>
<p>This allows you to bind a callback like so:
$(â#interchangeContainerâ).on(âreplaceâ, function (e, a, b, c) {
  console.log($(this).html(), a, b, c);
});</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
          <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/IMG/</span>.test(el[<span class="hljs-number">0</span>].nodeName)) {
            <span class="hljs-keyword">var</span> orig_path = el[<span class="hljs-number">0</span>].src;

            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(path, <span class="hljs-string">'i'</span>).test(orig_path)) <span class="hljs-keyword">return</span>;

            el[<span class="hljs-number">0</span>].src = path;

            <span class="hljs-keyword">return</span> trigger(el[<span class="hljs-number">0</span>].src);
          }
          <span class="hljs-keyword">var</span> last_path = el.data(<span class="hljs-string">'interchange-last-path'</span>);

          <span class="hljs-keyword">if</span> (last_path == path) <span class="hljs-keyword">return</span>;

          <span class="hljs-keyword">return</span> $.get(path, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(response)</span> {</span>
            el.html(response);
            el.data(<span class="hljs-string">'interchange-last-path'</span>, path);
            trigger();
          });

        }
      }
    },

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, method, options)</span> {</span>
      Foundation.inherit(<span class="hljs-keyword">this</span>, <span class="hljs-string">'throttle'</span>);

      <span class="hljs-keyword">this</span>.data_attr = <span class="hljs-string">'data-'</span> + <span class="hljs-keyword">this</span>.settings.load_attr;

      <span class="hljs-keyword">this</span>.bindings(method, options);
      <span class="hljs-keyword">this</span>.load(<span class="hljs-string">'images'</span>);
      <span class="hljs-keyword">this</span>.load(<span class="hljs-string">'nodes'</span>);
    },

    events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

      $(window)
        .off(<span class="hljs-string">'.interchange'</span>)
        .on(<span class="hljs-string">'resize.fndtn.interchange'</span>, self.throttle(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
          self.resize.call(self);
        }, <span class="hljs-number">50</span>));

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },

    resize : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> cache = <span class="hljs-keyword">this</span>.cache;

      <span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>.images_loaded || !<span class="hljs-keyword">this</span>.nodes_loaded) {
        setTimeout($.proxy(<span class="hljs-keyword">this</span>.resize, <span class="hljs-keyword">this</span>), <span class="hljs-number">50</span>);
        <span class="hljs-keyword">return</span>;
      }

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> uuid <span class="hljs-keyword">in</span> cache) {
        <span class="hljs-keyword">if</span> (cache.hasOwnProperty(uuid)) {
          <span class="hljs-keyword">var</span> passed = <span class="hljs-keyword">this</span>.results(uuid, cache[uuid]);

          <span class="hljs-keyword">if</span> (passed) {
            <span class="hljs-keyword">this</span>.settings.directives[passed
              .scenario[<span class="hljs-number">1</span>]](passed.el, passed.scenario[<span class="hljs-number">0</span>], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>) { 
                  <span class="hljs-keyword">var</span> args = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>];
                } <span class="hljs-keyword">else</span> { 
                  <span class="hljs-keyword">var</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">0</span>);
                }

                passed.el.trigger(passed.scenario[<span class="hljs-number">1</span>], args);
              });
          }
        }
      }

    },

    results : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(uuid, scenarios)</span> {</span>
      <span class="hljs-keyword">var</span> count = scenarios.length;

      <span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">var</span> el = <span class="hljs-keyword">this</span>.S(<span class="hljs-string">'[data-uuid="'</span> + uuid + <span class="hljs-string">'"]'</span>);

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = count - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
          <span class="hljs-keyword">var</span> mq, rule = scenarios[i][<span class="hljs-number">2</span>];
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.named_queries.hasOwnProperty(rule)) {
            mq = matchMedia(<span class="hljs-keyword">this</span>.settings.named_queries[rule]);
          } <span class="hljs-keyword">else</span> {
            mq = matchMedia(rule);
          }
          <span class="hljs-keyword">if</span> (mq.matches) {
            <span class="hljs-keyword">return</span> {el: el, scenario: scenarios[i]};
          }
        }
      }

      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },

    load : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(type, force_update)</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>[<span class="hljs-string">'cached_'</span> + type] === <span class="hljs-string">'undefined'</span> || force_update) {
        <span class="hljs-keyword">this</span>[<span class="hljs-string">'update_'</span> + type]();
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[<span class="hljs-string">'cached_'</span> + type];
    },

    update_images : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> images = <span class="hljs-keyword">this</span>.S(<span class="hljs-string">'img['</span> + <span class="hljs-keyword">this</span>.data_attr + <span class="hljs-string">']'</span>),
          count = images.length,
          loaded_count = <span class="hljs-number">0</span>,
          data_attr = <span class="hljs-keyword">this</span>.data_attr;

      <span class="hljs-keyword">this</span>.cache = {};
      <span class="hljs-keyword">this</span>.cached_images = [];
      <span class="hljs-keyword">this</span>.images_loaded = (count === <span class="hljs-number">0</span>);

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = count - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
        loaded_count++;
        <span class="hljs-keyword">if</span> (images[i]) {
          <span class="hljs-keyword">var</span> str = images[i].getAttribute(data_attr) || <span class="hljs-string">''</span>;

          <span class="hljs-keyword">if</span> (str.length &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">this</span>.cached_images.push(images[i]);
          }
        }

        <span class="hljs-keyword">if</span>(loaded_count === count) {
          <span class="hljs-keyword">this</span>.images_loaded = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">this</span>.enhance(<span class="hljs-string">'images'</span>);
        }
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },

    update_nodes : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> nodes = <span class="hljs-keyword">this</span>.S(<span class="hljs-string">'['</span> + <span class="hljs-keyword">this</span>.data_attr + <span class="hljs-string">']:not(img)'</span>),
          count = nodes.length,
          loaded_count = <span class="hljs-number">0</span>,
          data_attr = <span class="hljs-keyword">this</span>.data_attr;

      <span class="hljs-keyword">this</span>.cached_nodes = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Set nodes_loaded to true if there are no nodes
this.nodes_loaded = false;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.nodes_loaded = (count === <span class="hljs-number">0</span>);


      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = count - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
        loaded_count++;
        <span class="hljs-keyword">var</span> str = nodes[i].getAttribute(data_attr) || <span class="hljs-string">''</span>;

        <span class="hljs-keyword">if</span> (str.length &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">this</span>.cached_nodes.push(nodes[i]);
        }

        <span class="hljs-keyword">if</span>(loaded_count === count) {
          <span class="hljs-keyword">this</span>.nodes_loaded = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">this</span>.enhance(<span class="hljs-string">'nodes'</span>);
        }
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    },

    enhance : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(type)</span> {</span>
      <span class="hljs-keyword">var</span> count = <span class="hljs-keyword">this</span>[<span class="hljs-string">'cached_'</span> + type].length;

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = count - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
        <span class="hljs-keyword">this</span>.object($(<span class="hljs-keyword">this</span>[<span class="hljs-string">'cached_'</span> + type][i]));
      }

      <span class="hljs-keyword">return</span> $(window).trigger(<span class="hljs-string">'resize'</span>);
    },

    parse_params : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(path, directive, mq)</span> {</span>
      <span class="hljs-keyword">return</span> [<span class="hljs-keyword">this</span>.trim(path), <span class="hljs-keyword">this</span>.convert_directive(directive), <span class="hljs-keyword">this</span>.trim(mq)];
    },

    convert_directive : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(directive)</span> {</span>
      <span class="hljs-keyword">var</span> trimmed = <span class="hljs-keyword">this</span>.trim(directive);

      <span class="hljs-keyword">if</span> (trimmed.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> trimmed;
      }

      <span class="hljs-keyword">return</span> <span class="hljs-string">'replace'</span>;
    },

    object : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span> {</span>
      <span class="hljs-keyword">var</span> raw_arr = <span class="hljs-keyword">this</span>.parse_data_attr(el),
          scenarios = [], count = raw_arr.length;

      <span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = count - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
          <span class="hljs-keyword">var</span> split = raw_arr[i].split(<span class="hljs-regexp">/\((.*?)(\))$/</span>);

          <span class="hljs-keyword">if</span> (split.length &gt; <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">var</span> cached_split = split[<span class="hljs-number">0</span>].split(<span class="hljs-string">','</span>),
                params = <span class="hljs-keyword">this</span>.parse_params(cached_split[<span class="hljs-number">0</span>],
                  cached_split[<span class="hljs-number">1</span>], split[<span class="hljs-number">1</span>]);

            scenarios.push(params);
          }
        }
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.store(el, scenarios);
    },

    uuid : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(separator)</span> {</span>
      <span class="hljs-keyword">var</span> delim = separator || <span class="hljs-string">"-"</span>;

      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">S4</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">return</span> (((<span class="hljs-number">1</span> + <span class="hljs-built_in">Math</span>.random()) * <span class="hljs-number">0x10000</span>) | <span class="hljs-number">0</span>).toString(<span class="hljs-number">16</span>).substring(<span class="hljs-number">1</span>);
      }

      <span class="hljs-keyword">return</span> (S4() + S4() + delim + S4() + delim + S4()
        + delim + S4() + delim + S4() + S4() + S4());
    },

    store : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(el, scenarios)</span> {</span>
      <span class="hljs-keyword">var</span> uuid = <span class="hljs-keyword">this</span>.uuid(),
          current_uuid = el.data(<span class="hljs-string">'uuid'</span>);

      <span class="hljs-keyword">if</span> (current_uuid) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.cache[current_uuid];

      el.attr(<span class="hljs-string">'data-uuid'</span>, uuid);

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.cache[uuid] = scenarios;
    },

    trim : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(str)</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> str === <span class="hljs-string">'string'</span>) {
        <span class="hljs-keyword">return</span> $.trim(str);
      }

      <span class="hljs-keyword">return</span> str;
    },

    parse_data_attr : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(el)</span> {</span>
      <span class="hljs-keyword">var</span> raw = el.data(<span class="hljs-keyword">this</span>.settings.load_attr).split(<span class="hljs-regexp">/\[(.*?)\]/</span>),
          count = raw.length, output = [];

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = count - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
        <span class="hljs-keyword">if</span> (raw[i].replace(<span class="hljs-regexp">/[\W\d]+/</span>, <span class="hljs-string">''</span>).length &gt; <span class="hljs-number">4</span>) {
          output.push(raw[i]);
        }
      }

      <span class="hljs-keyword">return</span> output;
    },

    reflow : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.load(<span class="hljs-string">'images'</span>, <span class="hljs-literal">true</span>);
      <span class="hljs-keyword">this</span>.load(<span class="hljs-string">'nodes'</span>, <span class="hljs-literal">true</span>);
    }

  };

}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));
;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  <span class="hljs-keyword">var</span> Modernizr = Modernizr || <span class="hljs-literal">false</span>;

  Foundation.libs.joyride = {
    name : <span class="hljs-string">'joyride'</span>,

    version : <span class="hljs-string">'5.0.0'</span>,

    defaults : {
      expose               : <span class="hljs-literal">false</span>,      <span class="hljs-comment">// turn on or off the expose feature</span>
      modal                : <span class="hljs-literal">true</span>,      <span class="hljs-comment">// Whether to cover page with modal during the tour</span>
      tip_location          : <span class="hljs-string">'bottom'</span>,  <span class="hljs-comment">// 'top' or 'bottom' in relation to parent</span>
      nub_position          : <span class="hljs-string">'auto'</span>,    <span class="hljs-comment">// override on a per tooltip bases</span>
      scroll_speed          : <span class="hljs-number">1500</span>,       <span class="hljs-comment">// Page scrolling speed in milliseconds, 0 = no scroll animation</span>
      scroll_animation     : <span class="hljs-string">'linear'</span>,   <span class="hljs-comment">// supports 'swing' and 'linear', extend with jQuery UI.</span>
      timer                : <span class="hljs-number">0</span>,         <span class="hljs-comment">// 0 = no timer , all other numbers = timer in milliseconds</span>
      start_timer_on_click    : <span class="hljs-literal">true</span>,      <span class="hljs-comment">// true or false - true requires clicking the first button start the timer</span>
      start_offset          : <span class="hljs-number">0</span>,         <span class="hljs-comment">// the index of the tooltip you want to start on (index of the li)</span>
      next_button           : <span class="hljs-literal">true</span>,      <span class="hljs-comment">// true or false to control whether a next button is used</span>
      tip_animation         : <span class="hljs-string">'fade'</span>,    <span class="hljs-comment">// 'pop' or 'fade' in each tip</span>
      pause_after           : [],        <span class="hljs-comment">// array of indexes where to pause the tour after</span>
      exposed              : [],        <span class="hljs-comment">// array of expose elements</span>
      tip_animation_fade_speed: <span class="hljs-number">300</span>,       <span class="hljs-comment">// when tipAnimation = 'fade' this is speed in milliseconds for the transition</span>
      cookie_monster        : <span class="hljs-literal">false</span>,     <span class="hljs-comment">// true or false to control whether cookies are used</span>
      cookie_name           : <span class="hljs-string">'joyride'</span>, <span class="hljs-comment">// Name the cookie you'll use</span>
      cookie_domain         : <span class="hljs-literal">false</span>,     <span class="hljs-comment">// Will this cookie be attached to a domain, ie. '.notableapp.com'</span>
      cookie_expires        : <span class="hljs-number">365</span>,       <span class="hljs-comment">// set when you would like the cookie to expire.</span>
      tip_container         : <span class="hljs-string">'body'</span>,    <span class="hljs-comment">// Where will the tip be attached</span>
      tip_location_patterns : {
        top: [<span class="hljs-string">'bottom'</span>],
        bottom: [], <span class="hljs-comment">// bottom should not need to be repositioned</span>
        left: [<span class="hljs-string">'right'</span>, <span class="hljs-string">'top'</span>, <span class="hljs-string">'bottom'</span>],
        right: [<span class="hljs-string">'left'</span>, <span class="hljs-string">'top'</span>, <span class="hljs-string">'bottom'</span>]
      },
      post_ride_callback     : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>{</span>},    <span class="hljs-comment">// A method to call once the tour closes (canceled or complete)</span>
      post_step_callback     : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>{</span>},    <span class="hljs-comment">// A method to call after each step</span>
      pre_step_callback      : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>{</span>},    <span class="hljs-comment">// A method to call before each step</span>
      pre_ride_callback      : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>{</span>},    <span class="hljs-comment">// A method to call before the tour starts (passed index, tip, and cloned exposed element)</span>
      post_expose_callback   : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span>{</span>},    <span class="hljs-comment">// A method to call after an element has been exposed</span>
      template : { <span class="hljs-comment">// HTML segments for tip layout</span>
        link    : <span class="hljs-string">'&lt;a href="#close" class="joyride-close-tip"&gt;&amp;times;&lt;/a&gt;'</span>,
        timer   : <span class="hljs-string">'&lt;div class="joyride-timer-indicator-wrap"&gt;&lt;span class="joyride-timer-indicator"&gt;&lt;/span&gt;&lt;/div&gt;'</span>,
        tip     : <span class="hljs-string">'&lt;div class="joyride-tip-guide"&gt;&lt;span class="joyride-nub"&gt;&lt;/span&gt;&lt;/div&gt;'</span>,
        wrapper : <span class="hljs-string">'&lt;div class="joyride-content-wrapper"&gt;&lt;/div&gt;'</span>,
        button  : <span class="hljs-string">'&lt;a href="#" class="small button joyride-next-tip"&gt;&lt;/a&gt;'</span>,
        modal   : <span class="hljs-string">'&lt;div class="joyride-modal-bg"&gt;&lt;/div&gt;'</span>,
        expose  : <span class="hljs-string">'&lt;div class="joyride-expose-wrapper"&gt;&lt;/div&gt;'</span>,
        expose_cover: <span class="hljs-string">'&lt;div class="joyride-expose-cover"&gt;&lt;/div&gt;'</span>
      },
      expose_add_class : <span class="hljs-string">''</span> <span class="hljs-comment">// One or more space-separated class names to be added to exposed element</span>
    },

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, method, options)</span> {</span>
      Foundation.inherit(<span class="hljs-keyword">this</span>, <span class="hljs-string">'throttle delay'</span>);

      <span class="hljs-keyword">this</span>.settings = <span class="hljs-keyword">this</span>.defaults;

      <span class="hljs-keyword">this</span>.bindings(method, options)
    },

    events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

      $(<span class="hljs-keyword">this</span>.scope)
        .off(<span class="hljs-string">'.joyride'</span>)
        .on(<span class="hljs-string">'click.fndtn.joyride'</span>, <span class="hljs-string">'.joyride-next-tip, .joyride-modal-bg'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          e.preventDefault();

          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.$li.next().length &lt; <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">this</span>.end();
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.timer &gt; <span class="hljs-number">0</span>) {
            clearTimeout(<span class="hljs-keyword">this</span>.settings.automate);
            <span class="hljs-keyword">this</span>.hide();
            <span class="hljs-keyword">this</span>.show();
            <span class="hljs-keyword">this</span>.startTimer();
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.hide();
            <span class="hljs-keyword">this</span>.show();
          }

        }.bind(<span class="hljs-keyword">this</span>))

        .on(<span class="hljs-string">'click.fndtn.joyride'</span>, <span class="hljs-string">'.joyride-close-tip'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          e.preventDefault();
          <span class="hljs-keyword">this</span>.end();
        }.bind(<span class="hljs-keyword">this</span>));

      $(window)
        .off(<span class="hljs-string">'.joyride'</span>)
        .on(<span class="hljs-string">'resize.fndtn.joyride'</span>, self.throttle(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">if</span> ($(<span class="hljs-string">'[data-joyride]'</span>).length &gt; <span class="hljs-number">0</span> &amp;&amp; self.settings.$next_tip) {
            <span class="hljs-keyword">if</span> (self.settings.exposed.length &gt; <span class="hljs-number">0</span>) {
              <span class="hljs-keyword">var</span> $els = $(self.settings.exposed);

              $els.each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>);
                self.un_expose($<span class="hljs-keyword">this</span>);
                self.expose($<span class="hljs-keyword">this</span>);
              });
            }

            <span class="hljs-keyword">if</span> (self.is_phone()) {
              self.pos_phone();
            } <span class="hljs-keyword">else</span> {
              self.pos_default(<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
            }
          }
        }, <span class="hljs-number">100</span>));
    },

    start : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
          $<span class="hljs-keyword">this</span> = $(<span class="hljs-string">'[data-joyride]'</span>, <span class="hljs-keyword">this</span>.scope),
          integer_settings = [<span class="hljs-string">'timer'</span>, <span class="hljs-string">'scrollSpeed'</span>, <span class="hljs-string">'startOffset'</span>, <span class="hljs-string">'tipAnimationFadeSpeed'</span>, <span class="hljs-string">'cookieExpires'</span>],
          int_settings_count = integer_settings.length;

      <span class="hljs-keyword">if</span> (!$<span class="hljs-keyword">this</span>.length &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.settings.init) <span class="hljs-keyword">this</span>.events();

      <span class="hljs-keyword">this</span>.settings = $<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'joyride-init'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>non configureable settings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.settings.$content_el = $<span class="hljs-keyword">this</span>;
      <span class="hljs-keyword">this</span>.settings.$body = $(<span class="hljs-keyword">this</span>.settings.tip_container);
      <span class="hljs-keyword">this</span>.settings.body_offset = $(<span class="hljs-keyword">this</span>.settings.tip_container).position();
      <span class="hljs-keyword">this</span>.settings.$tip_content = <span class="hljs-keyword">this</span>.settings.$content_el.find(<span class="hljs-string">'&gt; li'</span>);
      <span class="hljs-keyword">this</span>.settings.paused = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">this</span>.settings.attempts = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>can we create cookies?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> $.cookie !== <span class="hljs-string">'function'</span>) {
        <span class="hljs-keyword">this</span>.settings.cookie_monster = <span class="hljs-literal">false</span>;
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>generate the tips and insert into dom.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.settings.cookie_monster || <span class="hljs-keyword">this</span>.settings.cookie_monster &amp;&amp; $.cookie(<span class="hljs-keyword">this</span>.settings.cookie_name) === <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">this</span>.settings.$tip_content.each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(index)</span> {</span>
          <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>);
          <span class="hljs-keyword">this</span>.settings = $.extend({}, self.defaults, self.data_options($<span class="hljs-keyword">this</span>))</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Make sure that settings parsed from data_options are integers where necessary</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = int_settings_count - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
            self.settings[integer_settings[i]] = <span class="hljs-built_in">parseInt</span>(self.settings[integer_settings[i]], <span class="hljs-number">10</span>);
          }
          self.create({$li : $<span class="hljs-keyword">this</span>, index : index});
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>show first tip</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.settings.start_timer_on_click &amp;&amp; <span class="hljs-keyword">this</span>.settings.timer &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">this</span>.show(<span class="hljs-string">'init'</span>);
          <span class="hljs-keyword">this</span>.startTimer();
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">this</span>.show(<span class="hljs-string">'init'</span>);
        }

      }
    },

    resume : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.set_li();
      <span class="hljs-keyword">this</span>.show();
    },

    tip_template : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(opts)</span> {</span>
      <span class="hljs-keyword">var</span> $blank, content;

      opts.tip_class = opts.tip_class || <span class="hljs-string">''</span>;

      $blank = $(<span class="hljs-keyword">this</span>.settings.template.tip).addClass(opts.tip_class);
      content = $.trim($(opts.li).html()) +
        <span class="hljs-keyword">this</span>.button_text(opts.button_text) +
        <span class="hljs-keyword">this</span>.settings.template.link +
        <span class="hljs-keyword">this</span>.timer_instance(opts.index);

      $blank.append($(<span class="hljs-keyword">this</span>.settings.template.wrapper));
      $blank.first().attr(<span class="hljs-string">'data-index'</span>, opts.index);
      $(<span class="hljs-string">'.joyride-content-wrapper'</span>, $blank).append(content);

      <span class="hljs-keyword">return</span> $blank[<span class="hljs-number">0</span>];
    },

    timer_instance : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">var</span> txt;

      <span class="hljs-keyword">if</span> ((index === <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">this</span>.settings.start_timer_on_click &amp;&amp; <span class="hljs-keyword">this</span>.settings.timer &gt; <span class="hljs-number">0</span>) || <span class="hljs-keyword">this</span>.settings.timer === <span class="hljs-number">0</span>) {
        txt = <span class="hljs-string">''</span>;
      } <span class="hljs-keyword">else</span> {
        txt = $(<span class="hljs-keyword">this</span>.settings.template.timer)[<span class="hljs-number">0</span>].outerHTML;
      }
      <span class="hljs-keyword">return</span> txt;
    },

    button_text : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(txt)</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.next_button) {
        txt = $.trim(txt) || <span class="hljs-string">'Next'</span>;
        txt = $(<span class="hljs-keyword">this</span>.settings.template.button).append(txt)[<span class="hljs-number">0</span>].outerHTML;
      } <span class="hljs-keyword">else</span> {
        txt = <span class="hljs-string">''</span>;
      }
      <span class="hljs-keyword">return</span> txt;
    },

    create : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(opts)</span> {</span>
      <span class="hljs-keyword">var</span> buttonText = opts.$li.attr(<span class="hljs-string">'data-button'</span>) || opts.$li.attr(<span class="hljs-string">'data-text'</span>),
        tipClass = opts.$li.attr(<span class="hljs-string">'class'</span>),
        $tip_content = $(<span class="hljs-keyword">this</span>.tip_template({
          tip_class : tipClass,
          index : opts.index,
          button_text : buttonText,
          li : opts.$li
        }));

      $(<span class="hljs-keyword">this</span>.settings.tip_container).append($tip_content);
    },

    show : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(init)</span> {</span>
      <span class="hljs-keyword">var</span> $timer = <span class="hljs-literal">null</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>are we paused?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.$li === <span class="hljs-literal">undefined</span>
        || ($.inArray(<span class="hljs-keyword">this</span>.settings.$li.index(), <span class="hljs-keyword">this</span>.settings.pause_after) === -<span class="hljs-number">1</span>)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>donât go to the next li if the tour was paused</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.paused) {
          <span class="hljs-keyword">this</span>.settings.paused = <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">this</span>.set_li(init);
        }

        <span class="hljs-keyword">this</span>.settings.attempts = <span class="hljs-number">0</span>;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.$li.length &amp;&amp; <span class="hljs-keyword">this</span>.settings.$target.length &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">if</span> (init) { <span class="hljs-comment">//run when we first start</span>
            <span class="hljs-keyword">this</span>.settings.pre_ride_callback(<span class="hljs-keyword">this</span>.settings.$li.index(), <span class="hljs-keyword">this</span>.settings.$next_tip);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.modal) {
              <span class="hljs-keyword">this</span>.show_modal();
            }
          }

          <span class="hljs-keyword">this</span>.settings.pre_step_callback(<span class="hljs-keyword">this</span>.settings.$li.index(), <span class="hljs-keyword">this</span>.settings.$next_tip);

          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.modal &amp;&amp; <span class="hljs-keyword">this</span>.settings.expose) {
            <span class="hljs-keyword">this</span>.expose();
          }

          <span class="hljs-keyword">this</span>.settings.tip_settings = $.extend({}, <span class="hljs-keyword">this</span>.settings, <span class="hljs-keyword">this</span>.data_options(<span class="hljs-keyword">this</span>.settings.$li));

          <span class="hljs-keyword">this</span>.settings.timer = <span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.settings.timer, <span class="hljs-number">10</span>);

          <span class="hljs-keyword">this</span>.settings.tip_settings.tip_location_pattern = <span class="hljs-keyword">this</span>.settings.tip_location_patterns[<span class="hljs-keyword">this</span>.settings.tip_settings.tip_location];</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>scroll if not modal</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/body/i</span>.test(<span class="hljs-keyword">this</span>.settings.$target.selector)) {
            <span class="hljs-keyword">this</span>.scroll_to();
          }

          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.is_phone()) {
            <span class="hljs-keyword">this</span>.pos_phone(<span class="hljs-literal">true</span>);
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.pos_default(<span class="hljs-literal">true</span>);
          }

          $timer = <span class="hljs-keyword">this</span>.settings.$next_tip.find(<span class="hljs-string">'.joyride-timer-indicator'</span>);

          <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/pop/i</span>.test(<span class="hljs-keyword">this</span>.settings.tip_animation)) {

            $timer.width(<span class="hljs-number">0</span>);

            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.timer &gt; <span class="hljs-number">0</span>) {

              <span class="hljs-keyword">this</span>.settings.$next_tip.show();

              <span class="hljs-keyword">this</span>.delay(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                $timer.animate({
                  width: $timer.parent().width()
                }, <span class="hljs-keyword">this</span>.settings.timer, <span class="hljs-string">'linear'</span>);
              }.bind(<span class="hljs-keyword">this</span>), <span class="hljs-keyword">this</span>.settings.tip_animation_fade_speed);

            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">this</span>.settings.$next_tip.show();

            }


          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/fade/i</span>.test(<span class="hljs-keyword">this</span>.settings.tip_animation)) {

            $timer.width(<span class="hljs-number">0</span>);

            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.timer &gt; <span class="hljs-number">0</span>) {

              <span class="hljs-keyword">this</span>.settings.$next_tip
                .fadeIn(<span class="hljs-keyword">this</span>.settings.tip_animation_fade_speed)
                .show();

              <span class="hljs-keyword">this</span>.delay(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                $timer.animate({
                  width: $timer.parent().width()
                }, <span class="hljs-keyword">this</span>.settings.timer, <span class="hljs-string">'linear'</span>);
              }.bind(<span class="hljs-keyword">this</span>), <span class="hljs-keyword">this</span>.settings.tip_animation_fadeSpeed);

            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">this</span>.settings.$next_tip.fadeIn(<span class="hljs-keyword">this</span>.settings.tip_animation_fade_speed);
            }
          }

          <span class="hljs-keyword">this</span>.settings.$current_tip = <span class="hljs-keyword">this</span>.settings.$next_tip;</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>skip non-existant targets</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.$li &amp;&amp; <span class="hljs-keyword">this</span>.settings.$target.length &lt; <span class="hljs-number">1</span>) {

          <span class="hljs-keyword">this</span>.show();

        } <span class="hljs-keyword">else</span> {

          <span class="hljs-keyword">this</span>.end();

        }
      } <span class="hljs-keyword">else</span> {

        <span class="hljs-keyword">this</span>.settings.paused = <span class="hljs-literal">true</span>;

      }

    },

    is_phone : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">return</span> matchMedia(Foundation.media_queries.small).matches &amp;&amp;
        !matchMedia(Foundation.media_queries.medium).matches;
    },

    hide : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.modal &amp;&amp; <span class="hljs-keyword">this</span>.settings.expose) {
        <span class="hljs-keyword">this</span>.un_expose();
      }

      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.settings.modal) {
        $(<span class="hljs-string">'.joyride-modal-bg'</span>).hide();
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Prevent scroll bouncingâ¦wait to remove from layout</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.settings.$current_tip.css(<span class="hljs-string">'visibility'</span>, <span class="hljs-string">'hidden'</span>);
      setTimeout($.proxy(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">this</span>.hide();
        <span class="hljs-keyword">this</span>.css(<span class="hljs-string">'visibility'</span>, <span class="hljs-string">'visible'</span>);
      }, <span class="hljs-keyword">this</span>.settings.$current_tip), <span class="hljs-number">0</span>);
      <span class="hljs-keyword">this</span>.settings.post_step_callback(<span class="hljs-keyword">this</span>.settings.$li.index(),
        <span class="hljs-keyword">this</span>.settings.$current_tip);
    },

    set_li : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(init)</span> {</span>
      <span class="hljs-keyword">if</span> (init) {
        <span class="hljs-keyword">this</span>.settings.$li = <span class="hljs-keyword">this</span>.settings.$tip_content.eq(<span class="hljs-keyword">this</span>.settings.start_offset);
        <span class="hljs-keyword">this</span>.set_next_tip();
        <span class="hljs-keyword">this</span>.settings.$current_tip = <span class="hljs-keyword">this</span>.settings.$next_tip;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.settings.$li = <span class="hljs-keyword">this</span>.settings.$li.next();
        <span class="hljs-keyword">this</span>.set_next_tip();
      }

      <span class="hljs-keyword">this</span>.set_target();
    },

    set_next_tip : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.settings.$next_tip = $(<span class="hljs-string">".joyride-tip-guide"</span>).eq(<span class="hljs-keyword">this</span>.settings.$li.index());
      <span class="hljs-keyword">this</span>.settings.$next_tip.data(<span class="hljs-string">'closed'</span>, <span class="hljs-string">''</span>);
    },

    set_target : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> cl = <span class="hljs-keyword">this</span>.settings.$li.attr(<span class="hljs-string">'data-class'</span>),
          id = <span class="hljs-keyword">this</span>.settings.$li.attr(<span class="hljs-string">'data-id'</span>),
          $sel = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">if</span> (id) {
              <span class="hljs-keyword">return</span> $(document.getElementById(id));
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cl) {
              <span class="hljs-keyword">return</span> $(<span class="hljs-string">'.'</span> + cl).first();
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">return</span> $(<span class="hljs-string">'body'</span>);
            }
          };

      <span class="hljs-keyword">this</span>.settings.$target = $sel();
    },

    scroll_to : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> window_half, tipOffset;

      window_half = $(window).height() / <span class="hljs-number">2</span>;
      tipOffset = <span class="hljs-built_in">Math</span>.ceil(<span class="hljs-keyword">this</span>.settings.$target.offset().top - window_half + <span class="hljs-keyword">this</span>.settings.$next_tip.outerHeight());

      <span class="hljs-keyword">if</span> (tipOffset &gt; <span class="hljs-number">0</span>) {
        $(<span class="hljs-string">'html, body'</span>).animate({
          scrollTop: tipOffset
        }, <span class="hljs-keyword">this</span>.settings.scroll_speed, <span class="hljs-string">'swing'</span>);
      }
    },

    paused : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">return</span> ($.inArray((<span class="hljs-keyword">this</span>.settings.$li.index() + <span class="hljs-number">1</span>), <span class="hljs-keyword">this</span>.settings.pause_after) === -<span class="hljs-number">1</span>);
    },

    restart : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">this</span>.hide();
      <span class="hljs-keyword">this</span>.settings.$li = <span class="hljs-literal">undefined</span>;
      <span class="hljs-keyword">this</span>.show(<span class="hljs-string">'init'</span>);
    },

    pos_default : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(init, resizing)</span> {</span>
      <span class="hljs-keyword">var</span> half_fold = <span class="hljs-built_in">Math</span>.ceil($(window).height() / <span class="hljs-number">2</span>),
          tip_position = <span class="hljs-keyword">this</span>.settings.$next_tip.offset(),
          $nub = <span class="hljs-keyword">this</span>.settings.$next_tip.find(<span class="hljs-string">'.joyride-nub'</span>),
          nub_width = <span class="hljs-built_in">Math</span>.ceil($nub.outerWidth() / <span class="hljs-number">2</span>),
          nub_height = <span class="hljs-built_in">Math</span>.ceil($nub.outerHeight() / <span class="hljs-number">2</span>),
          toggle = init || <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>tip must not be âdisplay: noneâ to calculate position</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (toggle) {
        <span class="hljs-keyword">this</span>.settings.$next_tip.css(<span class="hljs-string">'visibility'</span>, <span class="hljs-string">'hidden'</span>);
        <span class="hljs-keyword">this</span>.settings.$next_tip.show();
      }

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> resizing === <span class="hljs-string">'undefined'</span>) {
        resizing = <span class="hljs-literal">false</span>;
      }

      <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/body/i</span>.test(<span class="hljs-keyword">this</span>.settings.$target.selector)) {

          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.bottom()) {
            <span class="hljs-keyword">var</span> leftOffset = <span class="hljs-keyword">this</span>.settings.$target.offset().left;
            <span class="hljs-keyword">if</span> (Foundation.rtl) {
              leftOffset = <span class="hljs-keyword">this</span>.settings.$target.offset().width - <span class="hljs-keyword">this</span>.settings.$next_tip.width() + leftOffset;
            }
            <span class="hljs-keyword">this</span>.settings.$next_tip.css({
              top: (<span class="hljs-keyword">this</span>.settings.$target.offset().top + nub_height + <span class="hljs-keyword">this</span>.settings.$target.outerHeight()),
              left: leftOffset});

            <span class="hljs-keyword">this</span>.nub_position($nub, <span class="hljs-keyword">this</span>.settings.tip_settings.nub_position, <span class="hljs-string">'top'</span>);

          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.top()) {
            <span class="hljs-keyword">var</span> leftOffset = <span class="hljs-keyword">this</span>.settings.$target.offset().left;
            <span class="hljs-keyword">if</span> (Foundation.rtl) {
              leftOffset = <span class="hljs-keyword">this</span>.settings.$target.offset().width - <span class="hljs-keyword">this</span>.settings.$next_tip.width() + leftOffset;
            }
            <span class="hljs-keyword">this</span>.settings.$next_tip.css({
              top: (<span class="hljs-keyword">this</span>.settings.$target.offset().top - <span class="hljs-keyword">this</span>.settings.$next_tip.outerHeight() - nub_height),
              left: leftOffset});

            <span class="hljs-keyword">this</span>.nub_position($nub, <span class="hljs-keyword">this</span>.settings.tip_settings.nub_position, <span class="hljs-string">'bottom'</span>);

          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.right()) {

            <span class="hljs-keyword">this</span>.settings.$next_tip.css({
              top: <span class="hljs-keyword">this</span>.settings.$target.offset().top,
              left: (<span class="hljs-keyword">this</span>.outerWidth(<span class="hljs-keyword">this</span>.settings.$target) + <span class="hljs-keyword">this</span>.settings.$target.offset().left + nub_width)});

            <span class="hljs-keyword">this</span>.nub_position($nub, <span class="hljs-keyword">this</span>.settings.tip_settings.nub_position, <span class="hljs-string">'left'</span>);

          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.left()) {

            <span class="hljs-keyword">this</span>.settings.$next_tip.css({
              top: <span class="hljs-keyword">this</span>.settings.$target.offset().top,
              left: (<span class="hljs-keyword">this</span>.settings.$target.offset().left - <span class="hljs-keyword">this</span>.outerWidth(<span class="hljs-keyword">this</span>.settings.$next_tip) - nub_width)});

            <span class="hljs-keyword">this</span>.nub_position($nub, <span class="hljs-keyword">this</span>.settings.tip_settings.nub_position, <span class="hljs-string">'right'</span>);

          }

          <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.visible(<span class="hljs-keyword">this</span>.corners(<span class="hljs-keyword">this</span>.settings.$next_tip)) &amp;&amp; <span class="hljs-keyword">this</span>.settings.attempts &lt; <span class="hljs-keyword">this</span>.settings.tip_settings.tip_location_pattern.length) {

            $nub.removeClass(<span class="hljs-string">'bottom'</span>)
              .removeClass(<span class="hljs-string">'top'</span>)
              .removeClass(<span class="hljs-string">'right'</span>)
              .removeClass(<span class="hljs-string">'left'</span>);

            <span class="hljs-keyword">this</span>.settings.tip_settings.tip_location = <span class="hljs-keyword">this</span>.settings.tip_settings.tip_location_pattern[<span class="hljs-keyword">this</span>.settings.attempts];

            <span class="hljs-keyword">this</span>.settings.attempts++;

            <span class="hljs-keyword">this</span>.pos_default();

          }

      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.$li.length) {

        <span class="hljs-keyword">this</span>.pos_modal($nub);

      }

      <span class="hljs-keyword">if</span> (toggle) {
        <span class="hljs-keyword">this</span>.settings.$next_tip.hide();
        <span class="hljs-keyword">this</span>.settings.$next_tip.css(<span class="hljs-string">'visibility'</span>, <span class="hljs-string">'visible'</span>);
      }

    },

    pos_phone : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(init)</span> {</span>
      <span class="hljs-keyword">var</span> tip_height = <span class="hljs-keyword">this</span>.settings.$next_tip.outerHeight(),
          tip_offset = <span class="hljs-keyword">this</span>.settings.$next_tip.offset(),
          target_height = <span class="hljs-keyword">this</span>.settings.$target.outerHeight(),
          $nub = $(<span class="hljs-string">'.joyride-nub'</span>, <span class="hljs-keyword">this</span>.settings.$next_tip),
          nub_height = <span class="hljs-built_in">Math</span>.ceil($nub.outerHeight() / <span class="hljs-number">2</span>),
          toggle = init || <span class="hljs-literal">false</span>;

      $nub.removeClass(<span class="hljs-string">'bottom'</span>)
        .removeClass(<span class="hljs-string">'top'</span>)
        .removeClass(<span class="hljs-string">'right'</span>)
        .removeClass(<span class="hljs-string">'left'</span>);

      <span class="hljs-keyword">if</span> (toggle) {
        <span class="hljs-keyword">this</span>.settings.$next_tip.css(<span class="hljs-string">'visibility'</span>, <span class="hljs-string">'hidden'</span>);
        <span class="hljs-keyword">this</span>.settings.$next_tip.show();
      }

      <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/body/i</span>.test(<span class="hljs-keyword">this</span>.settings.$target.selector)) {

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.top()) {

            <span class="hljs-keyword">this</span>.settings.$next_tip.offset({top: <span class="hljs-keyword">this</span>.settings.$target.offset().top - tip_height - nub_height});
            $nub.addClass(<span class="hljs-string">'bottom'</span>);

        } <span class="hljs-keyword">else</span> {

          <span class="hljs-keyword">this</span>.settings.$next_tip.offset({top: <span class="hljs-keyword">this</span>.settings.$target.offset().top + target_height + nub_height});
          $nub.addClass(<span class="hljs-string">'top'</span>);

        }

      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.$li.length) {
        <span class="hljs-keyword">this</span>.pos_modal($nub);
      }

      <span class="hljs-keyword">if</span> (toggle) {
        <span class="hljs-keyword">this</span>.settings.$next_tip.hide();
        <span class="hljs-keyword">this</span>.settings.$next_tip.css(<span class="hljs-string">'visibility'</span>, <span class="hljs-string">'visible'</span>);
      }
    },

    pos_modal : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($nub)</span> {</span>
      <span class="hljs-keyword">this</span>.center();
      $nub.hide();

      <span class="hljs-keyword">this</span>.show_modal();
    },

    show_modal : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.settings.$next_tip.data(<span class="hljs-string">'closed'</span>)) {
        <span class="hljs-keyword">var</span> joyridemodalbg =  $(<span class="hljs-string">'.joyride-modal-bg'</span>);
        <span class="hljs-keyword">if</span> (joyridemodalbg.length &lt; <span class="hljs-number">1</span>) {
          $(<span class="hljs-string">'body'</span>).append(<span class="hljs-keyword">this</span>.settings.template.modal).show();
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/pop/i</span>.test(<span class="hljs-keyword">this</span>.settings.tip_animation)) {
            joyridemodalbg.show();
        } <span class="hljs-keyword">else</span> {
            joyridemodalbg.fadeIn(<span class="hljs-keyword">this</span>.settings.tip_animation_fade_speed);
        }
      }
    },

    expose : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> expose,
          exposeCover,
          el,
          origCSS,
          origClasses,
          randId = <span class="hljs-string">'expose-'</span>+<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random()*<span class="hljs-number">10000</span>);

      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] <span class="hljs-keyword">instanceof</span> $) {
        el = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>];
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.settings.$target &amp;&amp; !<span class="hljs-regexp">/body/i</span>.test(<span class="hljs-keyword">this</span>.settings.$target.selector)){
        el = <span class="hljs-keyword">this</span>.settings.$target;
      }  <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }

      <span class="hljs-keyword">if</span>(el.length &lt; <span class="hljs-number">1</span>){
        <span class="hljs-keyword">if</span>(window.console){
          console.error(<span class="hljs-string">'element not valid'</span>, el);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }

      expose = $(<span class="hljs-keyword">this</span>.settings.template.expose);
      <span class="hljs-keyword">this</span>.settings.$body.append(expose);
      expose.css({
        top: el.offset().top,
        left: el.offset().left,
        width: el.outerWidth(<span class="hljs-literal">true</span>),
        height: el.outerHeight(<span class="hljs-literal">true</span>)
      });

      exposeCover = $(<span class="hljs-keyword">this</span>.settings.template.expose_cover);

      origCSS = {
        zIndex: el.css(<span class="hljs-string">'z-index'</span>),
        position: el.css(<span class="hljs-string">'position'</span>)
      };

      origClasses = el.attr(<span class="hljs-string">'class'</span>) == <span class="hljs-literal">null</span> ? <span class="hljs-string">''</span> : el.attr(<span class="hljs-string">'class'</span>);

      el.css(<span class="hljs-string">'z-index'</span>,<span class="hljs-built_in">parseInt</span>(expose.css(<span class="hljs-string">'z-index'</span>))+<span class="hljs-number">1</span>);

      <span class="hljs-keyword">if</span> (origCSS.position == <span class="hljs-string">'static'</span>) {
        el.css(<span class="hljs-string">'position'</span>,<span class="hljs-string">'relative'</span>);
      }

      el.data(<span class="hljs-string">'expose-css'</span>,origCSS);
      el.data(<span class="hljs-string">'orig-class'</span>, origClasses);
      el.attr(<span class="hljs-string">'class'</span>, origClasses + <span class="hljs-string">' '</span> + <span class="hljs-keyword">this</span>.settings.expose_add_class);

      exposeCover.css({
        top: el.offset().top,
        left: el.offset().left,
        width: el.outerWidth(<span class="hljs-literal">true</span>),
        height: el.outerHeight(<span class="hljs-literal">true</span>)
      });

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.modal) <span class="hljs-keyword">this</span>.show_modal();

      <span class="hljs-keyword">this</span>.settings.$body.append(exposeCover);
      expose.addClass(randId);
      exposeCover.addClass(randId);
      el.data(<span class="hljs-string">'expose'</span>, randId);
      <span class="hljs-keyword">this</span>.settings.post_expose_callback(<span class="hljs-keyword">this</span>.settings.$li.index(), <span class="hljs-keyword">this</span>.settings.$next_tip, el);
      <span class="hljs-keyword">this</span>.add_exposed(el);
    },

    un_expose : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> exposeId,
          el,
          expose ,
          origCSS,
          origClasses,
          clearAll = <span class="hljs-literal">false</span>;

      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>] <span class="hljs-keyword">instanceof</span> $) {
        el = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>];
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.settings.$target &amp;&amp; !<span class="hljs-regexp">/body/i</span>.test(<span class="hljs-keyword">this</span>.settings.$target.selector)){
        el = <span class="hljs-keyword">this</span>.settings.$target;
      }  <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }

      <span class="hljs-keyword">if</span>(el.length &lt; <span class="hljs-number">1</span>){
        <span class="hljs-keyword">if</span> (window.console) {
          console.error(<span class="hljs-string">'element not valid'</span>, el);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }

      exposeId = el.data(<span class="hljs-string">'expose'</span>);
      expose = $(<span class="hljs-string">'.'</span> + exposeId);

      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span>) {
        clearAll = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>];
      }

      <span class="hljs-keyword">if</span> (clearAll === <span class="hljs-literal">true</span>) {
        $(<span class="hljs-string">'.joyride-expose-wrapper,.joyride-expose-cover'</span>).remove();
      } <span class="hljs-keyword">else</span> {
        expose.remove();
      }

      origCSS = el.data(<span class="hljs-string">'expose-css'</span>);

      <span class="hljs-keyword">if</span> (origCSS.zIndex == <span class="hljs-string">'auto'</span>) {
        el.css(<span class="hljs-string">'z-index'</span>, <span class="hljs-string">''</span>);
      } <span class="hljs-keyword">else</span> {
        el.css(<span class="hljs-string">'z-index'</span>, origCSS.zIndex);
      }

      <span class="hljs-keyword">if</span> (origCSS.position != el.css(<span class="hljs-string">'position'</span>)) {
        <span class="hljs-keyword">if</span>(origCSS.position == <span class="hljs-string">'static'</span>) {<span class="hljs-comment">// this is default, no need to set it.</span>
          el.css(<span class="hljs-string">'position'</span>, <span class="hljs-string">''</span>);
        } <span class="hljs-keyword">else</span> {
          el.css(<span class="hljs-string">'position'</span>, origCSS.position);
        }
      }

      origClasses = el.data(<span class="hljs-string">'orig-class'</span>);
      el.attr(<span class="hljs-string">'class'</span>, origClasses);
      el.removeData(<span class="hljs-string">'orig-classes'</span>);

      el.removeData(<span class="hljs-string">'expose'</span>);
      el.removeData(<span class="hljs-string">'expose-z-index'</span>);
      <span class="hljs-keyword">this</span>.remove_exposed(el);
    },

    add_exposed: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span>{</span>
      <span class="hljs-keyword">this</span>.settings.exposed = <span class="hljs-keyword">this</span>.settings.exposed || [];
      <span class="hljs-keyword">if</span> (el <span class="hljs-keyword">instanceof</span> $ || <span class="hljs-keyword">typeof</span> el === <span class="hljs-string">'object'</span>) {
        <span class="hljs-keyword">this</span>.settings.exposed.push(el[<span class="hljs-number">0</span>]);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> el == <span class="hljs-string">'string'</span>) {
        <span class="hljs-keyword">this</span>.settings.exposed.push(el);
      }
    },

    remove_exposed: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el)</span>{</span>
      <span class="hljs-keyword">var</span> search, count;
      <span class="hljs-keyword">if</span> (el <span class="hljs-keyword">instanceof</span> $) {
        search = el[<span class="hljs-number">0</span>]
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> el == <span class="hljs-string">'string'</span>){
        search = el;
      }

      <span class="hljs-keyword">this</span>.settings.exposed = <span class="hljs-keyword">this</span>.settings.exposed || [];
      count = <span class="hljs-keyword">this</span>.settings.exposed.length;

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>; i &lt; count; i++) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.exposed[i] == search) {
          <span class="hljs-keyword">this</span>.settings.exposed.splice(i, <span class="hljs-number">1</span>);
          <span class="hljs-keyword">return</span>;
        }
      }
    },

    center : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> $w = $(window);

      <span class="hljs-keyword">this</span>.settings.$next_tip.css({
        top : ((($w.height() - <span class="hljs-keyword">this</span>.settings.$next_tip.outerHeight()) / <span class="hljs-number">2</span>) + $w.scrollTop()),
        left : ((($w.width() - <span class="hljs-keyword">this</span>.settings.$next_tip.outerWidth()) / <span class="hljs-number">2</span>) + $w.scrollLeft())
      });

      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },

    bottom : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-regexp">/bottom/i</span>.test(<span class="hljs-keyword">this</span>.settings.tip_settings.tip_location);
    },

    top : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-regexp">/top/i</span>.test(<span class="hljs-keyword">this</span>.settings.tip_settings.tip_location);
    },

    right : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-regexp">/right/i</span>.test(<span class="hljs-keyword">this</span>.settings.tip_settings.tip_location);
    },

    left : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">return</span> <span class="hljs-regexp">/left/i</span>.test(<span class="hljs-keyword">this</span>.settings.tip_settings.tip_location);
    },

    corners : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(el)</span> {</span>
      <span class="hljs-keyword">var</span> w = $(window),
          window_half = w.height() / <span class="hljs-number">2</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>using this to calculate since scroll may not have finished yet.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          tipOffset = <span class="hljs-built_in">Math</span>.ceil(<span class="hljs-keyword">this</span>.settings.$target.offset().top - window_half + <span class="hljs-keyword">this</span>.settings.$next_tip.outerHeight()),
          right = w.width() + w.scrollLeft(),
          offsetBottom =  w.height() + tipOffset,
          bottom = w.height() + w.scrollTop(),
          top = w.scrollTop();

      <span class="hljs-keyword">if</span> (tipOffset &lt; top) {
        <span class="hljs-keyword">if</span> (tipOffset &lt; <span class="hljs-number">0</span>) {
          top = <span class="hljs-number">0</span>;
        } <span class="hljs-keyword">else</span> {
          top = tipOffset;
        }
      }

      <span class="hljs-keyword">if</span> (offsetBottom &gt; bottom) {
        bottom = offsetBottom;
      }

      <span class="hljs-keyword">return</span> [
        el.offset().top &lt; top,
        right &lt; el.offset().left + el.outerWidth(),
        bottom &lt; el.offset().top + el.outerHeight(),
        w.scrollLeft() &gt; el.offset().left
      ];
    },

    visible : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(hidden_corners)</span> {</span>
      <span class="hljs-keyword">var</span> i = hidden_corners.length;

      <span class="hljs-keyword">while</span> (i--) {
        <span class="hljs-keyword">if</span> (hidden_corners[i]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }

      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },

    nub_position : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(nub, pos, def)</span> {</span>
      <span class="hljs-keyword">if</span> (pos === <span class="hljs-string">'auto'</span>) {
        nub.addClass(def);
      } <span class="hljs-keyword">else</span> {
        nub.addClass(pos);
      }
    },

    startTimer : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.$li.length) {
        <span class="hljs-keyword">this</span>.settings.automate = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">this</span>.hide();
          <span class="hljs-keyword">this</span>.show();
          <span class="hljs-keyword">this</span>.startTimer();
        }.bind(<span class="hljs-keyword">this</span>), <span class="hljs-keyword">this</span>.settings.timer);
      } <span class="hljs-keyword">else</span> {
        clearTimeout(<span class="hljs-keyword">this</span>.settings.automate);
      }
    },

    end : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.cookie_monster) {
        $.cookie(<span class="hljs-keyword">this</span>.settings.cookie_name, <span class="hljs-string">'ridden'</span>, { expires: <span class="hljs-keyword">this</span>.settings.cookie_expires, domain: <span class="hljs-keyword">this</span>.settings.cookie_domain });
      }

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.timer &gt; <span class="hljs-number">0</span>) {
        clearTimeout(<span class="hljs-keyword">this</span>.settings.automate);
      }

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.modal &amp;&amp; <span class="hljs-keyword">this</span>.settings.expose) {
        <span class="hljs-keyword">this</span>.un_expose();
      }

      <span class="hljs-keyword">this</span>.settings.$next_tip.data(<span class="hljs-string">'closed'</span>, <span class="hljs-literal">true</span>);

      $(<span class="hljs-string">'.joyride-modal-bg'</span>).hide();
      <span class="hljs-keyword">this</span>.settings.$current_tip.hide();
      <span class="hljs-keyword">this</span>.settings.post_step_callback(<span class="hljs-keyword">this</span>.settings.$li.index(), <span class="hljs-keyword">this</span>.settings.$current_tip);
      <span class="hljs-keyword">this</span>.settings.post_ride_callback(<span class="hljs-keyword">this</span>.settings.$li.index(), <span class="hljs-keyword">this</span>.settings.$current_tip);
      $(<span class="hljs-string">'.joyride-tip-guide'</span>).remove();
    },

    off : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      $(<span class="hljs-keyword">this</span>.scope).off(<span class="hljs-string">'.joyride'</span>);
      $(window).off(<span class="hljs-string">'.joyride'</span>);
      $(<span class="hljs-string">'.joyride-close-tip, .joyride-next-tip, .joyride-modal-bg'</span>).off(<span class="hljs-string">'.joyride'</span>);
      $(<span class="hljs-string">'.joyride-tip-guide, .joyride-modal-bg'</span>).remove();
      clearTimeout(<span class="hljs-keyword">this</span>.settings.automate);
      <span class="hljs-keyword">this</span>.settings = {};
    },

    reflow : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>}
  };
}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));

;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  Foundation.libs.magellan = {
    name : <span class="hljs-string">'magellan'</span>,

    version : <span class="hljs-string">'5.0.0'</span>,

    settings : {
      active_class: <span class="hljs-string">'active'</span>,
      threshold: <span class="hljs-number">0</span>
    },

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, method, options)</span> {</span>
      <span class="hljs-keyword">this</span>.fixed_magellan = $(<span class="hljs-string">"[data-magellan-expedition]"</span>);
      <span class="hljs-keyword">this</span>.set_threshold();
      <span class="hljs-keyword">this</span>.last_destination = $(<span class="hljs-string">'[data-magellan-destination]'</span>).last();
      <span class="hljs-keyword">this</span>.events();
    },

    events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

      $(<span class="hljs-keyword">this</span>.scope)
        .off(<span class="hljs-string">'.magellan'</span>)
        .on(<span class="hljs-string">'arrival.fndtn.magellan'</span>, <span class="hljs-string">'[data-magellan-arrival]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">var</span> $destination = $(<span class="hljs-keyword">this</span>),
              $expedition = $destination.closest(<span class="hljs-string">'[data-magellan-expedition]'</span>),
              active_class = $expedition.attr(<span class="hljs-string">'data-magellan-active-class'</span>)
                || self.settings.active_class;

            $destination
              .closest(<span class="hljs-string">'[data-magellan-expedition]'</span>)
              .find(<span class="hljs-string">'[data-magellan-arrival]'</span>)
              .not($destination)
              .removeClass(active_class);
            $destination.addClass(active_class);
        });

      <span class="hljs-keyword">this</span>.fixed_magellan
        .off(<span class="hljs-string">'.magellan'</span>)
        .on(<span class="hljs-string">'update-position.fndtn.magellan'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">var</span> $el = $(<span class="hljs-keyword">this</span>);
        })
        .trigger(<span class="hljs-string">'update-position'</span>);

      $(window)
        .off(<span class="hljs-string">'.magellan'</span>)
        .on(<span class="hljs-string">'resize.fndtn.magellan'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">this</span>.fixed_magellan.trigger(<span class="hljs-string">'update-position'</span>);
        }.bind(<span class="hljs-keyword">this</span>))
        .on(<span class="hljs-string">'scroll.fndtn.magellan'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">var</span> windowScrollTop = $(window).scrollTop();
          self.fixed_magellan.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> $expedition = $(<span class="hljs-keyword">this</span>);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> $expedition.data(<span class="hljs-string">'magellan-top-offset'</span>) === <span class="hljs-string">'undefined'</span>) {
              $expedition.data(<span class="hljs-string">'magellan-top-offset'</span>, $expedition.offset().top);
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> $expedition.data(<span class="hljs-string">'magellan-fixed-position'</span>) === <span class="hljs-string">'undefined'</span>) {
              $expedition.data(<span class="hljs-string">'magellan-fixed-position'</span>, <span class="hljs-literal">false</span>);
            }
            <span class="hljs-keyword">var</span> fixed_position = (windowScrollTop + self.settings.threshold) &gt; $expedition.data(<span class="hljs-string">"magellan-top-offset"</span>);
            <span class="hljs-keyword">var</span> attr = $expedition.attr(<span class="hljs-string">'data-magellan-top-offset'</span>);

            <span class="hljs-keyword">if</span> ($expedition.data(<span class="hljs-string">"magellan-fixed-position"</span>) != fixed_position) {
              $expedition.data(<span class="hljs-string">"magellan-fixed-position"</span>, fixed_position);
              <span class="hljs-keyword">if</span> (fixed_position) {
                $expedition.addClass(<span class="hljs-string">'fixed'</span>);
                $expedition.css({position:<span class="hljs-string">"fixed"</span>, top:<span class="hljs-number">0</span>});
              } <span class="hljs-keyword">else</span> {
                $expedition.removeClass(<span class="hljs-string">'fixed'</span>);
                $expedition.css({position:<span class="hljs-string">""</span>, top:<span class="hljs-string">""</span>});
              }
              <span class="hljs-keyword">if</span> (fixed_position &amp;&amp; <span class="hljs-keyword">typeof</span> attr != <span class="hljs-string">'undefined'</span> &amp;&amp; attr != <span class="hljs-literal">false</span>) {
                $expedition.css({position:<span class="hljs-string">"fixed"</span>, top:attr + <span class="hljs-string">"px"</span>});
              }
            }
          });
        });


      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.last_destination.length &gt; <span class="hljs-number">0</span>) {
        $(window).on(<span class="hljs-string">'scroll.fndtn.magellan'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">var</span> windowScrollTop = $(window).scrollTop(),
              scrolltopPlusHeight = windowScrollTop + $(window).height(),
              lastDestinationTop = <span class="hljs-built_in">Math</span>.ceil(self.last_destination.offset().top);

          $(<span class="hljs-string">'[data-magellan-destination]'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">var</span> $destination = $(<span class="hljs-keyword">this</span>),
                destination_name = $destination.attr(<span class="hljs-string">'data-magellan-destination'</span>),
                topOffset = $destination.offset().top - $destination.outerHeight(<span class="hljs-literal">true</span>) - windowScrollTop;
            <span class="hljs-keyword">if</span> (topOffset &lt;= self.settings.threshold) {
              $(<span class="hljs-string">"[data-magellan-arrival='"</span> + destination_name + <span class="hljs-string">"']"</span>).trigger(<span class="hljs-string">'arrival'</span>);
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>In large screens we may hit the bottom of the page and dont reach the top of the last magellan-destination, so lets force it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (scrolltopPlusHeight &gt;= $(self.scope).height() &amp;&amp; lastDestinationTop &gt; windowScrollTop &amp;&amp; lastDestinationTop &lt; scrolltopPlusHeight) {
              $(<span class="hljs-string">'[data-magellan-arrival]'</span>).last().trigger(<span class="hljs-string">'arrival'</span>);
            }
          });
        });
      }
    },

    set_threshold : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.settings.threshold !== <span class="hljs-string">'number'</span>) {
        <span class="hljs-keyword">this</span>.settings.threshold = (<span class="hljs-keyword">this</span>.fixed_magellan.length &gt; <span class="hljs-number">0</span>) ?
          <span class="hljs-keyword">this</span>.fixed_magellan.outerHeight(<span class="hljs-literal">true</span>) : <span class="hljs-number">0</span>;
      }
    },

    off : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      $(<span class="hljs-keyword">this</span>.scope).off(<span class="hljs-string">'.fndtn.magellan'</span>);
      $(window).off(<span class="hljs-string">'.fndtn.magellan'</span>);
    },

    reflow : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>}
  };
}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));

;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  Foundation.libs.offcanvas = {
    name : <span class="hljs-string">'offcanvas'</span>,

    version : <span class="hljs-string">'5.0.0'</span>,

    settings : {},

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, method, options)</span> {</span>
      <span class="hljs-keyword">this</span>.events();
    },

    events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      $(<span class="hljs-keyword">this</span>.scope).off(<span class="hljs-string">'.offcanvas'</span>)
        .on(<span class="hljs-string">'click.fndtn.offcanvas'</span>, <span class="hljs-string">'.left-off-canvas-toggle'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          e.preventDefault();
          $(<span class="hljs-keyword">this</span>).closest(<span class="hljs-string">'.off-canvas-wrap'</span>).toggleClass(<span class="hljs-string">'move-right'</span>);
        })
        .on(<span class="hljs-string">'click.fndtn.offcanvas'</span>, <span class="hljs-string">'.exit-off-canvas'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          e.preventDefault();
          $(<span class="hljs-string">".off-canvas-wrap"</span>).removeClass(<span class="hljs-string">"move-right"</span>);
        })
        .on(<span class="hljs-string">'click.fndtn.offcanvas'</span>, <span class="hljs-string">'.right-off-canvas-toggle'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          e.preventDefault();
          $(<span class="hljs-keyword">this</span>).closest(<span class="hljs-string">".off-canvas-wrap"</span>).toggleClass(<span class="hljs-string">"move-left"</span>);
        })
        .on(<span class="hljs-string">'click.fndtn.offcanvas'</span>, <span class="hljs-string">'.exit-off-canvas'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          e.preventDefault();
          $(<span class="hljs-string">".off-canvas-wrap"</span>).removeClass(<span class="hljs-string">"move-left"</span>);
        });
    },

    reflow : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>}
  };
}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));
;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  <span class="hljs-keyword">var</span> noop = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>};

  <span class="hljs-keyword">var</span> Orbit = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el, settings)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Donât reinitialize plugin</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (el.hasClass(settings.slides_container_class)) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
        container,
        slides_container = el,
        number_container,
        bullets_container,
        timer_container,
        idx = <span class="hljs-number">0</span>,
        animate,
        timer,
        locked = <span class="hljs-literal">false</span>,
        adjust_height_after = <span class="hljs-literal">false</span>;

    slides_container.children().first().addClass(settings.active_slide_class);

    self.update_slide_number = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">if</span> (settings.slide_number) {
        number_container.find(<span class="hljs-string">'span:first'</span>).text(<span class="hljs-built_in">parseInt</span>(index)+<span class="hljs-number">1</span>);
        number_container.find(<span class="hljs-string">'span:last'</span>).text(slides_container.children().length);
      }
      <span class="hljs-keyword">if</span> (settings.bullets) {
        bullets_container.children().removeClass(settings.bullets_active_class);
        $(bullets_container.children().get(index)).addClass(settings.bullets_active_class);
      }
    };

    self.update_active_link = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
      <span class="hljs-keyword">var</span> link = $(<span class="hljs-string">'a[data-orbit-link="'</span>+slides_container.children().eq(index).attr(<span class="hljs-string">'data-orbit-slide'</span>)+<span class="hljs-string">'"]'</span>);
      link.parents(<span class="hljs-string">'ul'</span>).find(<span class="hljs-string">'[data-orbit-link]'</span>).removeClass(settings.bullets_active_class);
      link.addClass(settings.bullets_active_class);
    };

    self.build_markup = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      slides_container.wrap(<span class="hljs-string">'&lt;div class="'</span>+settings.container_class+<span class="hljs-string">'"&gt;&lt;/div&gt;'</span>);
      container = slides_container.parent();
      slides_container.addClass(settings.slides_container_class);
      
      <span class="hljs-keyword">if</span> (settings.navigation_arrows) {
        container.append($(<span class="hljs-string">'&lt;a href="#"&gt;&lt;span&gt;&lt;/span&gt;&lt;/a&gt;'</span>).addClass(settings.prev_class));
        container.append($(<span class="hljs-string">'&lt;a href="#"&gt;&lt;span&gt;&lt;/span&gt;&lt;/a&gt;'</span>).addClass(settings.next_class));
      }

      <span class="hljs-keyword">if</span> (settings.timer) {
        timer_container = $(<span class="hljs-string">'&lt;div&gt;'</span>).addClass(settings.timer_container_class);
        timer_container.append(<span class="hljs-string">'&lt;span&gt;'</span>);
        timer_container.append($(<span class="hljs-string">'&lt;div&gt;'</span>).addClass(settings.timer_progress_class));
        timer_container.addClass(settings.timer_paused_class);
        container.append(timer_container);
      }

      <span class="hljs-keyword">if</span> (settings.slide_number) {
        number_container = $(<span class="hljs-string">'&lt;div&gt;'</span>).addClass(settings.slide_number_class);
        number_container.append(<span class="hljs-string">'&lt;span&gt;&lt;/span&gt; '</span> + settings.slide_number_text + <span class="hljs-string">' &lt;span&gt;&lt;/span&gt;'</span>);
        container.append(number_container);
      }

      <span class="hljs-keyword">if</span> (settings.bullets) {
        bullets_container = $(<span class="hljs-string">'&lt;ol&gt;'</span>).addClass(settings.bullets_container_class);
        container.append(bullets_container);
        bullets_container.wrap(<span class="hljs-string">'&lt;div class="orbit-bullets-container"&gt;&lt;/div&gt;'</span>);
        slides_container.children().each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(idx, el)</span> {</span>
          <span class="hljs-keyword">var</span> bullet = $(<span class="hljs-string">'&lt;li&gt;'</span>).attr(<span class="hljs-string">'data-orbit-slide'</span>, idx);
          bullets_container.append(bullet);
        });
      }

      <span class="hljs-keyword">if</span> (settings.stack_on_small) {
        container.addClass(settings.stack_on_small_class);
      }

      self.update_slide_number(<span class="hljs-number">0</span>);
      self.update_active_link(<span class="hljs-number">0</span>);
    };

    self._goto = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(next_idx, start_timer)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>if (locked) {return false;}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (next_idx === idx) {<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;}
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> timer === <span class="hljs-string">'object'</span>) {timer.restart();}
      <span class="hljs-keyword">var</span> slides = slides_container.children();

      <span class="hljs-keyword">var</span> dir = <span class="hljs-string">'next'</span>;
      locked = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">if</span> (next_idx &lt; idx) {dir = <span class="hljs-string">'prev'</span>;}
      <span class="hljs-keyword">if</span> (next_idx &gt;= slides.length) {next_idx = <span class="hljs-number">0</span>;}
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (next_idx &lt; <span class="hljs-number">0</span>) {next_idx = slides.length - <span class="hljs-number">1</span>;}
      
      <span class="hljs-keyword">var</span> current = $(slides.get(idx));
      <span class="hljs-keyword">var</span> next = $(slides.get(next_idx));

      current.css(<span class="hljs-string">'zIndex'</span>, <span class="hljs-number">2</span>);
      current.removeClass(settings.active_slide_class);
      next.css(<span class="hljs-string">'zIndex'</span>, <span class="hljs-number">4</span>).addClass(settings.active_slide_class);

      slides_container.trigger(<span class="hljs-string">'before-slide-change.fndtn.orbit'</span>);
      settings.before_slide_change();
      self.update_active_link(next_idx);
      
      <span class="hljs-keyword">var</span> callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">var</span> unlock = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          idx = next_idx;
          locked = <span class="hljs-literal">false</span>;
          <span class="hljs-keyword">if</span> (start_timer === <span class="hljs-literal">true</span>) {timer = self.create_timer(); timer.start();}
          self.update_slide_number(idx);
          slides_container.trigger(<span class="hljs-string">'after-slide-change.fndtn.orbit'</span>,[{slide_number: idx, total_slides: slides.length}]);
          settings.after_slide_change(idx, slides.length);
        };
        <span class="hljs-keyword">if</span> (slides_container.height() != next.height() &amp;&amp; settings.variable_height) {
          slides_container.animate({<span class="hljs-string">'height'</span>: next.height()}, <span class="hljs-number">250</span>, <span class="hljs-string">'linear'</span>, unlock);
        } <span class="hljs-keyword">else</span> {
          unlock();
        }
      };

      <span class="hljs-keyword">if</span> (slides.length === <span class="hljs-number">1</span>) {callback(); <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;}

      <span class="hljs-keyword">var</span> start_animation = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">if</span> (dir === <span class="hljs-string">'next'</span>) {animate.next(current, next, callback);}
        <span class="hljs-keyword">if</span> (dir === <span class="hljs-string">'prev'</span>) {animate.prev(current, next, callback);}        
      };

      <span class="hljs-keyword">if</span> (next.height() &gt; slides_container.height() &amp;&amp; settings.variable_height) {
        slides_container.animate({<span class="hljs-string">'height'</span>: next.height()}, <span class="hljs-number">250</span>, <span class="hljs-string">'linear'</span>, start_animation);
      } <span class="hljs-keyword">else</span> {
        start_animation();
      }
    };
    
    self.next = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
      e.stopImmediatePropagation();
      e.preventDefault();
      self._goto(idx + <span class="hljs-number">1</span>);
    };
    
    self.prev = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
      e.stopImmediatePropagation();
      e.preventDefault();
      self._goto(idx - <span class="hljs-number">1</span>);
    };

    self.link_custom = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
      e.preventDefault();
      <span class="hljs-keyword">var</span> link = $(<span class="hljs-keyword">this</span>).attr(<span class="hljs-string">'data-orbit-link'</span>);
      <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">typeof</span> link === <span class="hljs-string">'string'</span>) &amp;&amp; (link = $.trim(link)) != <span class="hljs-string">""</span>) {
        <span class="hljs-keyword">var</span> slide = container.find(<span class="hljs-string">'[data-orbit-slide='</span>+link+<span class="hljs-string">']'</span>);
        <span class="hljs-keyword">if</span> (slide.index() != -<span class="hljs-number">1</span>) {self._goto(slide.index());}
      }
    };

    self.link_bullet = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
      <span class="hljs-keyword">var</span> index = $(<span class="hljs-keyword">this</span>).attr(<span class="hljs-string">'data-orbit-slide'</span>);
      <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">typeof</span> index === <span class="hljs-string">'string'</span>) &amp;&amp; (index = $.trim(index)) != <span class="hljs-string">""</span>) {
        self._goto(<span class="hljs-built_in">parseInt</span>(index));
      }
    }

    self.timer_callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      self._goto(idx + <span class="hljs-number">1</span>, <span class="hljs-literal">true</span>);
    }
    
    self.compute_dimensions = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> current = $(slides_container.children().get(idx));
      <span class="hljs-keyword">var</span> h = current.height();
      <span class="hljs-keyword">if</span> (!settings.variable_height) {
        slides_container.children().each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
          <span class="hljs-keyword">if</span> ($(<span class="hljs-keyword">this</span>).height() &gt; h) { h = $(<span class="hljs-keyword">this</span>).height(); }
        });
      }
      slides_container.height(h);
    };

    self.create_timer = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> t = <span class="hljs-keyword">new</span> Timer(
        container.find(<span class="hljs-string">'.'</span>+settings.timer_container_class), 
        settings, 
        self.timer_callback
      );
      <span class="hljs-keyword">return</span> t;
    };

    self.stop_timer = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> timer === <span class="hljs-string">'object'</span>) timer.stop();
    };

    self.toggle_timer = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> t = container.find(<span class="hljs-string">'.'</span>+settings.timer_container_class);
      <span class="hljs-keyword">if</span> (t.hasClass(settings.timer_paused_class)) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> timer === <span class="hljs-string">'undefined'</span>) {timer = self.create_timer();}
        timer.start();     
      }
      <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> timer === <span class="hljs-string">'object'</span>) {timer.stop();}
      }
    };

    self.init = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      self.build_markup();
      <span class="hljs-keyword">if</span> (settings.timer) {timer = self.create_timer(); timer.start();}
      animate = <span class="hljs-keyword">new</span> FadeAnimation(settings, slides_container);
      <span class="hljs-keyword">if</span> (settings.animation === <span class="hljs-string">'slide'</span>) 
        animate = <span class="hljs-keyword">new</span> SlideAnimation(settings, slides_container);        
      container.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'.'</span>+settings.next_class, self.next);
      container.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'.'</span>+settings.prev_class, self.prev);
      container.on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'[data-orbit-slide]'</span>, self.link_bullet);
      container.on(<span class="hljs-string">'click'</span>, self.toggle_timer);
      <span class="hljs-keyword">if</span> (settings.swipe) {
        container.on(<span class="hljs-string">'touchstart.fndtn.orbit'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">if</span> (!e.touches) {e = e.originalEvent;}
          <span class="hljs-keyword">var</span> data = {
            start_page_x: e.touches[<span class="hljs-number">0</span>].pageX,
            start_page_y: e.touches[<span class="hljs-number">0</span>].pageY,
            start_time: (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()).getTime(),
            delta_x: <span class="hljs-number">0</span>,
            is_scrolling: <span class="hljs-literal">undefined</span>
          };
          container.data(<span class="hljs-string">'swipe-transition'</span>, data);
          e.stopPropagation();
        })
        .on(<span class="hljs-string">'touchmove.fndtn.orbit'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">if</span> (!e.touches) { e = e.originalEvent; }</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>Ignore pinch/zoom events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span>(e.touches.length &gt; <span class="hljs-number">1</span> || e.scale &amp;&amp; e.scale !== <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;

          <span class="hljs-keyword">var</span> data = container.data(<span class="hljs-string">'swipe-transition'</span>);
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'undefined'</span>) {data = {};}

          data.delta_x = e.touches[<span class="hljs-number">0</span>].pageX - data.start_page_x;

          <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> data.is_scrolling === <span class="hljs-string">'undefined'</span>) {
            data.is_scrolling = !!( data.is_scrolling || <span class="hljs-built_in">Math</span>.abs(data.delta_x) &lt; <span class="hljs-built_in">Math</span>.abs(e.touches[<span class="hljs-number">0</span>].pageY - data.start_page_y) );
          }

          <span class="hljs-keyword">if</span> (!data.is_scrolling &amp;&amp; !data.active) {
            e.preventDefault();
            <span class="hljs-keyword">var</span> direction = (data.delta_x &lt; <span class="hljs-number">0</span>) ? (idx+<span class="hljs-number">1</span>) : (idx-<span class="hljs-number">1</span>);
            data.active = <span class="hljs-literal">true</span>;
            self._goto(direction);
          }
        })
        .on(<span class="hljs-string">'touchend.fndtn.orbit'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
          container.data(<span class="hljs-string">'swipe-transition'</span>, {});
          e.stopPropagation();
        })
      }
      container.on(<span class="hljs-string">'mouseenter.fndtn.orbit'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
        <span class="hljs-keyword">if</span> (settings.timer &amp;&amp; settings.pause_on_hover) {
          self.stop_timer();
        }
      })
      .on(<span class="hljs-string">'mouseleave.fndtn.orbit'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
        <span class="hljs-keyword">if</span> (settings.timer &amp;&amp; settings.resume_on_mouseout) {
          timer.start();
        }
      });
      
      $(document).on(<span class="hljs-string">'click'</span>, <span class="hljs-string">'[data-orbit-link]'</span>, self.link_custom);
      $(window).on(<span class="hljs-string">'resize'</span>, self.compute_dimensions);
      $(window).on(<span class="hljs-string">'load'</span>, self.compute_dimensions);
      $(window).on(<span class="hljs-string">'load'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>
        container.prev(<span class="hljs-string">'.preloader'</span>).css(<span class="hljs-string">'display'</span>, <span class="hljs-string">'none'</span>);
      });
      slides_container.trigger(<span class="hljs-string">'ready.fndtn.orbit'</span>);
    };

    self.init();
  };

  <span class="hljs-keyword">var</span> Timer = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(el, settings, callback)</span> {</span>
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
        duration = settings.timer_speed,
        progress = el.find(<span class="hljs-string">'.'</span>+settings.timer_progress_class),
        start, 
        timeout,
        left = -<span class="hljs-number">1</span>;

    <span class="hljs-keyword">this</span>.update_progress = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(w)</span> {</span>
      <span class="hljs-keyword">var</span> new_progress = progress.clone();
      new_progress.attr(<span class="hljs-string">'style'</span>, <span class="hljs-string">''</span>);
      new_progress.css(<span class="hljs-string">'width'</span>, w+<span class="hljs-string">'%'</span>);
      progress.replaceWith(new_progress);
      progress = new_progress;
    };

    <span class="hljs-keyword">this</span>.restart = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      clearTimeout(timeout);
      el.addClass(settings.timer_paused_class);
      left = -<span class="hljs-number">1</span>;
      self.update_progress(<span class="hljs-number">0</span>);
    };

    <span class="hljs-keyword">this</span>.start = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (!el.hasClass(settings.timer_paused_class)) {<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;}
      left = (left === -<span class="hljs-number">1</span>) ? duration : left;
      el.removeClass(settings.timer_paused_class);
      start = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime();
      progress.animate({<span class="hljs-string">'width'</span>: <span class="hljs-string">'100%'</span>}, left, <span class="hljs-string">'linear'</span>);
      timeout = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        self.restart();
        callback();
      }, left);
      el.trigger(<span class="hljs-string">'timer-started.fndtn.orbit'</span>)
    };

    <span class="hljs-keyword">this</span>.stop = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> (el.hasClass(settings.timer_paused_class)) {<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;}
      clearTimeout(timeout);
      el.addClass(settings.timer_paused_class);
      <span class="hljs-keyword">var</span> end = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime();
      left = left - (end - start);
      <span class="hljs-keyword">var</span> w = <span class="hljs-number">100</span> - ((left / duration) * <span class="hljs-number">100</span>);
      self.update_progress(w);
      el.trigger(<span class="hljs-string">'timer-stopped.fndtn.orbit'</span>);
    };
  };
  
  <span class="hljs-keyword">var</span> SlideAnimation = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(settings, container)</span> {</span>
    <span class="hljs-keyword">var</span> duration = settings.animation_speed;
    <span class="hljs-keyword">var</span> is_rtl = ($(<span class="hljs-string">'html[dir=rtl]'</span>).length === <span class="hljs-number">1</span>);
    <span class="hljs-keyword">var</span> margin = is_rtl ? <span class="hljs-string">'marginRight'</span> : <span class="hljs-string">'marginLeft'</span>;
    <span class="hljs-keyword">var</span> animMargin = {};
    animMargin[margin] = <span class="hljs-string">'0%'</span>;

    <span class="hljs-keyword">this</span>.next = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(current, next, callback)</span> {</span>
      current.animate({marginLeft:<span class="hljs-string">'-100%'</span>}, duration);
      next.animate(animMargin, duration, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        current.css(margin, <span class="hljs-string">'100%'</span>);
        callback();
      });
    };

    <span class="hljs-keyword">this</span>.prev = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(current, prev, callback)</span> {</span>
      current.animate({marginLeft:<span class="hljs-string">'100%'</span>}, duration);
      prev.css(margin, <span class="hljs-string">'-100%'</span>);
      prev.animate(animMargin, duration, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        current.css(margin, <span class="hljs-string">'100%'</span>);
        callback();
      });
    };
  };

  <span class="hljs-keyword">var</span> FadeAnimation = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(settings, container)</span> {</span>
    <span class="hljs-keyword">var</span> duration = settings.animation_speed;
    <span class="hljs-keyword">var</span> is_rtl = ($(<span class="hljs-string">'html[dir=rtl]'</span>).length === <span class="hljs-number">1</span>);
    <span class="hljs-keyword">var</span> margin = is_rtl ? <span class="hljs-string">'marginRight'</span> : <span class="hljs-string">'marginLeft'</span>;

    <span class="hljs-keyword">this</span>.next = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(current, next, callback)</span> {</span>
      next.css({<span class="hljs-string">'margin'</span>:<span class="hljs-string">'0%'</span>, <span class="hljs-string">'opacity'</span>:<span class="hljs-string">'0.01'</span>});
      next.animate({<span class="hljs-string">'opacity'</span>:<span class="hljs-string">'1'</span>}, duration, <span class="hljs-string">'linear'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        current.css(<span class="hljs-string">'margin'</span>, <span class="hljs-string">'100%'</span>);
        callback();
      });
    };

    <span class="hljs-keyword">this</span>.prev = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(current, prev, callback)</span> {</span>
      prev.css({<span class="hljs-string">'margin'</span>:<span class="hljs-string">'0%'</span>, <span class="hljs-string">'opacity'</span>:<span class="hljs-string">'0.01'</span>});
      prev.animate({<span class="hljs-string">'opacity'</span>:<span class="hljs-string">'1'</span>}, duration, <span class="hljs-string">'linear'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        current.css(<span class="hljs-string">'margin'</span>, <span class="hljs-string">'100%'</span>);
        callback();
      });
    };
  };


  Foundation.libs = Foundation.libs || {};

  Foundation.libs.orbit = {
    name: <span class="hljs-string">'orbit'</span>,

    version: <span class="hljs-string">'5.0.0'</span>,

    settings: {
      animation: <span class="hljs-string">'slide'</span>,
      timer_speed: <span class="hljs-number">10000</span>,
      pause_on_hover: <span class="hljs-literal">true</span>,
      resume_on_mouseout: <span class="hljs-literal">false</span>,
      animation_speed: <span class="hljs-number">500</span>,
      stack_on_small: <span class="hljs-literal">false</span>,
      navigation_arrows: <span class="hljs-literal">true</span>,
      slide_number: <span class="hljs-literal">true</span>,
      slide_number_text: <span class="hljs-string">'of'</span>,
      container_class: <span class="hljs-string">'orbit-container'</span>,
      stack_on_small_class: <span class="hljs-string">'orbit-stack-on-small'</span>,
      next_class: <span class="hljs-string">'orbit-next'</span>,
      prev_class: <span class="hljs-string">'orbit-prev'</span>,
      timer_container_class: <span class="hljs-string">'orbit-timer'</span>,
      timer_paused_class: <span class="hljs-string">'paused'</span>,
      timer_progress_class: <span class="hljs-string">'orbit-progress'</span>,
      slides_container_class: <span class="hljs-string">'orbit-slides-container'</span>,
      bullets_container_class: <span class="hljs-string">'orbit-bullets'</span>,
      bullets_active_class: <span class="hljs-string">'active'</span>,
      slide_number_class: <span class="hljs-string">'orbit-slide-number'</span>,
      caption_class: <span class="hljs-string">'orbit-caption'</span>,
      active_slide_class: <span class="hljs-string">'active'</span>,
      orbit_transition_class: <span class="hljs-string">'orbit-transitioning'</span>,
      bullets: <span class="hljs-literal">true</span>,
      timer: <span class="hljs-literal">true</span>,
      variable_height: <span class="hljs-literal">false</span>,
      swipe: <span class="hljs-literal">true</span>,
      before_slide_change: noop,
      after_slide_change: noop
    },

    init: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, method, options)</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> method === <span class="hljs-string">'object'</span>) {
        $.extend(<span class="hljs-literal">true</span>, self.settings, method);
      }

      <span class="hljs-keyword">if</span> ($(scope).is(<span class="hljs-string">'[data-orbit]'</span>)) {
        <span class="hljs-keyword">var</span> $el = $(scope);
        <span class="hljs-keyword">var</span> opts = self.data_options($el);
        <span class="hljs-keyword">new</span> Orbit($el, $.extend({},self.settings, opts));
      }

      $(<span class="hljs-string">'[data-orbit]'</span>, scope).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(idx, el)</span> {</span>
        <span class="hljs-keyword">var</span> $el = $(el);
        <span class="hljs-keyword">var</span> opts = self.data_options($el);
        <span class="hljs-keyword">new</span> Orbit($el, $.extend({},self.settings, opts));
      });
    }
  };

    
}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));

;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  Foundation.libs.reveal = {
    name : <span class="hljs-string">'reveal'</span>,

    version : <span class="hljs-string">'5.0.0'</span>,

    locked : <span class="hljs-literal">false</span>,

    settings : {
      animation: <span class="hljs-string">'fadeAndPop'</span>,
      animation_speed: <span class="hljs-number">250</span>,
      close_on_background_click: <span class="hljs-literal">true</span>,
      close_on_esc: <span class="hljs-literal">true</span>,
      dismiss_modal_class: <span class="hljs-string">'close-reveal-modal'</span>,
      bg_class: <span class="hljs-string">'reveal-modal-bg'</span>,
      open: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>},
      opened: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>},
      close: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>},
      closed: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>{</span>},
      bg : $(<span class="hljs-string">'.reveal-modal-bg'</span>),
      css : {
        open : {
          <span class="hljs-string">'opacity'</span>: <span class="hljs-number">0</span>,
          <span class="hljs-string">'visibility'</span>: <span class="hljs-string">'visible'</span>,
          <span class="hljs-string">'display'</span> : <span class="hljs-string">'block'</span>
        },
        close : {
          <span class="hljs-string">'opacity'</span>: <span class="hljs-number">1</span>,
          <span class="hljs-string">'visibility'</span>: <span class="hljs-string">'hidden'</span>,
          <span class="hljs-string">'display'</span>: <span class="hljs-string">'none'</span>
        }
      }
    },

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, method, options)</span> {</span>
      Foundation.inherit(<span class="hljs-keyword">this</span>, <span class="hljs-string">'delay'</span>);

      <span class="hljs-keyword">this</span>.bindings(method, options);
    },

    events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope)</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

      $(<span class="hljs-string">'[data-reveal-id]'</span>, <span class="hljs-keyword">this</span>.scope)
        .off(<span class="hljs-string">'.reveal'</span>)
        .on(<span class="hljs-string">'click.fndtn.reveal'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          e.preventDefault();

          <span class="hljs-keyword">if</span> (!self.locked) {
            <span class="hljs-keyword">var</span> element = $(<span class="hljs-keyword">this</span>),
                ajax = element.data(<span class="hljs-string">'reveal-ajax'</span>);

            self.locked = <span class="hljs-literal">true</span>;

            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> ajax === <span class="hljs-string">'undefined'</span>) {
              self.open.call(self, element);
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">var</span> url = ajax === <span class="hljs-literal">true</span> ? element.attr(<span class="hljs-string">'href'</span>) : ajax;

              self.open.call(self, element, {url: url});
            }
          }
        });

      $(<span class="hljs-keyword">this</span>.scope)
        .off(<span class="hljs-string">'.reveal'</span>)
        .on(<span class="hljs-string">'click.fndtn.reveal'</span>, <span class="hljs-keyword">this</span>.close_targets(), <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>

          e.preventDefault();

          <span class="hljs-keyword">if</span> (!self.locked) {
            <span class="hljs-keyword">var</span> settings = $(<span class="hljs-string">'[data-reveal].open'</span>).data(<span class="hljs-string">'reveal-init'</span>),
                bg_clicked = $(e.target)[<span class="hljs-number">0</span>] === $(<span class="hljs-string">'.'</span> + settings.bg_class)[<span class="hljs-number">0</span>];

            <span class="hljs-keyword">if</span> (bg_clicked &amp;&amp; !settings.close_on_background_click) {
              <span class="hljs-keyword">return</span>;
            }

            self.locked = <span class="hljs-literal">true</span>;
            self.close.call(self, bg_clicked ? $(<span class="hljs-string">'[data-reveal].open'</span>) : $(<span class="hljs-keyword">this</span>).closest(<span class="hljs-string">'[data-reveal]'</span>));
          }
        });

      <span class="hljs-keyword">if</span>($(<span class="hljs-string">'[data-reveal]'</span>, <span class="hljs-keyword">this</span>.scope).length &gt; <span class="hljs-number">0</span>) {
        $(<span class="hljs-keyword">this</span>.scope)</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>.off(â.revealâ)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          .on(<span class="hljs-string">'open.fndtn.reveal'</span>, <span class="hljs-keyword">this</span>.settings.open)
          .on(<span class="hljs-string">'opened.fndtn.reveal'</span>, <span class="hljs-keyword">this</span>.settings.opened)
          .on(<span class="hljs-string">'opened.fndtn.reveal'</span>, <span class="hljs-keyword">this</span>.open_video)
          .on(<span class="hljs-string">'close.fndtn.reveal'</span>, <span class="hljs-keyword">this</span>.settings.close)
          .on(<span class="hljs-string">'closed.fndtn.reveal'</span>, <span class="hljs-keyword">this</span>.settings.closed)
          .on(<span class="hljs-string">'closed.fndtn.reveal'</span>, <span class="hljs-keyword">this</span>.close_video);
      } <span class="hljs-keyword">else</span> {
        $(<span class="hljs-keyword">this</span>.scope)</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>.off(â.revealâ)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          .on(<span class="hljs-string">'open.fndtn.reveal'</span>, <span class="hljs-string">'[data-reveal]'</span>, <span class="hljs-keyword">this</span>.settings.open)
          .on(<span class="hljs-string">'opened.fndtn.reveal'</span>, <span class="hljs-string">'[data-reveal]'</span>, <span class="hljs-keyword">this</span>.settings.opened)
          .on(<span class="hljs-string">'opened.fndtn.reveal'</span>, <span class="hljs-string">'[data-reveal]'</span>, <span class="hljs-keyword">this</span>.open_video)
          .on(<span class="hljs-string">'close.fndtn.reveal'</span>, <span class="hljs-string">'[data-reveal]'</span>, <span class="hljs-keyword">this</span>.settings.close)
          .on(<span class="hljs-string">'closed.fndtn.reveal'</span>, <span class="hljs-string">'[data-reveal]'</span>, <span class="hljs-keyword">this</span>.settings.closed)
          .on(<span class="hljs-string">'closed.fndtn.reveal'</span>, <span class="hljs-string">'[data-reveal]'</span>, <span class="hljs-keyword">this</span>.close_video);
      }

      $(<span class="hljs-string">'body'</span>).on(<span class="hljs-string">'keyup.fndtn.reveal'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( event )</span> {</span>
        <span class="hljs-keyword">var</span> open_modal = $(<span class="hljs-string">'[data-reveal].open'</span>),
            settings = open_modal.data(<span class="hljs-string">'reveal-init'</span>);
        <span class="hljs-keyword">if</span> ( event.which === <span class="hljs-number">27</span>  &amp;&amp; settings.close_on_esc) { <span class="hljs-comment">// 27 is the keycode for the Escape key</span>
          open_modal.foundation(<span class="hljs-string">'reveal'</span>, <span class="hljs-string">'close'</span>);
        }
      });

      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },

    open : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(target, ajax_settings)</span> {</span>
      <span class="hljs-keyword">if</span> (target) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> target.selector !== <span class="hljs-string">'undefined'</span>) {
          <span class="hljs-keyword">var</span> modal = $(<span class="hljs-string">'#'</span> + target.data(<span class="hljs-string">'reveal-id'</span>));
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">var</span> modal = $(<span class="hljs-keyword">this</span>.scope);

          ajax_settings = target;
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> modal = $(<span class="hljs-keyword">this</span>.scope);
      }

      <span class="hljs-keyword">if</span> (!modal.hasClass(<span class="hljs-string">'open'</span>)) {
        <span class="hljs-keyword">var</span> open_modal = $(<span class="hljs-string">'[data-reveal].open'</span>);

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> modal.data(<span class="hljs-string">'css-top'</span>) === <span class="hljs-string">'undefined'</span>) {
          modal.data(<span class="hljs-string">'css-top'</span>, <span class="hljs-built_in">parseInt</span>(modal.css(<span class="hljs-string">'top'</span>), <span class="hljs-number">10</span>))
            .data(<span class="hljs-string">'offset'</span>, <span class="hljs-keyword">this</span>.cache_offset(modal));
        }

        modal.trigger(<span class="hljs-string">'open'</span>);

        <span class="hljs-keyword">if</span> (open_modal.length &lt; <span class="hljs-number">1</span>) {
          <span class="hljs-keyword">this</span>.toggle_bg();
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> ajax_settings === <span class="hljs-string">'undefined'</span> || !ajax_settings.url) {
          <span class="hljs-keyword">this</span>.hide(open_modal, <span class="hljs-keyword">this</span>.settings.css.close);
          <span class="hljs-keyword">this</span>.show(modal, <span class="hljs-keyword">this</span>.settings.css.open);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
              old_success = <span class="hljs-keyword">typeof</span> ajax_settings.success !== <span class="hljs-string">'undefined'</span> ? ajax_settings.success : <span class="hljs-literal">null</span>;

          $.extend(ajax_settings, {
            success: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(data, textStatus, jqXHR)</span> {</span>
              <span class="hljs-keyword">if</span> ( $.isFunction(old_success) ) {
                old_success(data, textStatus, jqXHR);
              }

              modal.html(data);
              $(modal).foundation(<span class="hljs-string">'section'</span>, <span class="hljs-string">'reflow'</span>);

              self.hide(open_modal, self.settings.css.close);
              self.show(modal, self.settings.css.open);
            }
          });

          $.ajax(ajax_settings);
        }
      }
    },

    close : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(modal)</span> {</span>

      <span class="hljs-keyword">var</span> modal = modal &amp;&amp; modal.length ? modal : $(<span class="hljs-keyword">this</span>.scope),
          open_modals = $(<span class="hljs-string">'[data-reveal].open'</span>);

      <span class="hljs-keyword">if</span> (open_modals.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.locked = <span class="hljs-literal">true</span>;
        modal.trigger(<span class="hljs-string">'close'</span>);
        <span class="hljs-keyword">this</span>.toggle_bg();
        <span class="hljs-keyword">this</span>.hide(open_modals, <span class="hljs-keyword">this</span>.settings.css.close);
      }
    },

    close_targets : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> base = <span class="hljs-string">'.'</span> + <span class="hljs-keyword">this</span>.settings.dismiss_modal_class;

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.close_on_background_click) {
        <span class="hljs-keyword">return</span> base + <span class="hljs-string">', .'</span> + <span class="hljs-keyword">this</span>.settings.bg_class;
      }

      <span class="hljs-keyword">return</span> base;
    },

    toggle_bg : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">if</span> ($(<span class="hljs-string">'.'</span> + <span class="hljs-keyword">this</span>.settings.bg_class).length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.settings.bg = $(<span class="hljs-string">'&lt;div /&gt;'</span>, {<span class="hljs-string">'class'</span>: <span class="hljs-keyword">this</span>.settings.bg_class})
          .appendTo(<span class="hljs-string">'body'</span>);
      }

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.bg.filter(<span class="hljs-string">':visible'</span>).length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.hide(<span class="hljs-keyword">this</span>.settings.bg);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.show(<span class="hljs-keyword">this</span>.settings.bg);
      }
    },

    show : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(el, css)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>is modal</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (css) {
        <span class="hljs-keyword">if</span> (el.parent(<span class="hljs-string">'body'</span>).length === <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">var</span> placeholder = el.wrap(<span class="hljs-string">'&lt;div style="display: none;" /&gt;'</span>).parent();
          el.on(<span class="hljs-string">'closed.fndtn.reveal.wrapped'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
            el.detach().appendTo(placeholder);
            el.unwrap().unbind(<span class="hljs-string">'closed.fndtn.reveal.wrapped'</span>);
          });

          el.detach().appendTo(<span class="hljs-string">'body'</span>);
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/pop/i</span>.test(<span class="hljs-keyword">this</span>.settings.animation)) {
          css.top = $(window).scrollTop() - el.data(<span class="hljs-string">'offset'</span>) + <span class="hljs-string">'px'</span>;
          <span class="hljs-keyword">var</span> end_css = {
            top: $(window).scrollTop() + el.data(<span class="hljs-string">'css-top'</span>) + <span class="hljs-string">'px'</span>,
            opacity: <span class="hljs-number">1</span>
          };

          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.delay(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> el
              .css(css)
              .animate(end_css, <span class="hljs-keyword">this</span>.settings.animation_speed, <span class="hljs-string">'linear'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                <span class="hljs-keyword">this</span>.locked = <span class="hljs-literal">false</span>;
                el.trigger(<span class="hljs-string">'opened'</span>);
              }.bind(<span class="hljs-keyword">this</span>))
              .addClass(<span class="hljs-string">'open'</span>);
          }.bind(<span class="hljs-keyword">this</span>), <span class="hljs-keyword">this</span>.settings.animation_speed / <span class="hljs-number">2</span>);
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/fade/i</span>.test(<span class="hljs-keyword">this</span>.settings.animation)) {
          <span class="hljs-keyword">var</span> end_css = {opacity: <span class="hljs-number">1</span>};

          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.delay(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> el
              .css(css)
              .animate(end_css, <span class="hljs-keyword">this</span>.settings.animation_speed, <span class="hljs-string">'linear'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                <span class="hljs-keyword">this</span>.locked = <span class="hljs-literal">false</span>;
                el.trigger(<span class="hljs-string">'opened'</span>);
              }.bind(<span class="hljs-keyword">this</span>))
              .addClass(<span class="hljs-string">'open'</span>);
          }.bind(<span class="hljs-keyword">this</span>), <span class="hljs-keyword">this</span>.settings.animation_speed / <span class="hljs-number">2</span>);
        }

        <span class="hljs-keyword">return</span> el.css(css).show().css({opacity: <span class="hljs-number">1</span>}).addClass(<span class="hljs-string">'open'</span>).trigger(<span class="hljs-string">'opened'</span>);
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>should we animate the background?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/fade/i</span>.test(<span class="hljs-keyword">this</span>.settings.animation)) {
        <span class="hljs-keyword">return</span> el.fadeIn(<span class="hljs-keyword">this</span>.settings.animation_speed / <span class="hljs-number">2</span>);
      }

      <span class="hljs-keyword">return</span> el.show();
    },

    hide : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(el, css)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>is modal</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (css) {
        <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/pop/i</span>.test(<span class="hljs-keyword">this</span>.settings.animation)) {
          <span class="hljs-keyword">var</span> end_css = {
            top: - $(window).scrollTop() - el.data(<span class="hljs-string">'offset'</span>) + <span class="hljs-string">'px'</span>,
            opacity: <span class="hljs-number">0</span>
          };

          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.delay(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> el
              .animate(end_css, <span class="hljs-keyword">this</span>.settings.animation_speed, <span class="hljs-string">'linear'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                <span class="hljs-keyword">this</span>.locked = <span class="hljs-literal">false</span>;
                el.css(css).trigger(<span class="hljs-string">'closed'</span>);
              }.bind(<span class="hljs-keyword">this</span>))
              .removeClass(<span class="hljs-string">'open'</span>);
          }.bind(<span class="hljs-keyword">this</span>), <span class="hljs-keyword">this</span>.settings.animation_speed / <span class="hljs-number">2</span>);
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/fade/i</span>.test(<span class="hljs-keyword">this</span>.settings.animation)) {
          <span class="hljs-keyword">var</span> end_css = {opacity: <span class="hljs-number">0</span>};

          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.delay(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
            <span class="hljs-keyword">return</span> el
              .animate(end_css, <span class="hljs-keyword">this</span>.settings.animation_speed, <span class="hljs-string">'linear'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
                <span class="hljs-keyword">this</span>.locked = <span class="hljs-literal">false</span>;
                el.css(css).trigger(<span class="hljs-string">'closed'</span>);
              }.bind(<span class="hljs-keyword">this</span>))
              .removeClass(<span class="hljs-string">'open'</span>);
          }.bind(<span class="hljs-keyword">this</span>), <span class="hljs-keyword">this</span>.settings.animation_speed / <span class="hljs-number">2</span>);
        }

        <span class="hljs-keyword">return</span> el.hide().css(css).removeClass(<span class="hljs-string">'open'</span>).trigger(<span class="hljs-string">'closed'</span>);
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>should we animate the background?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/fade/i</span>.test(<span class="hljs-keyword">this</span>.settings.animation)) {
        <span class="hljs-keyword">return</span> el.fadeOut(<span class="hljs-keyword">this</span>.settings.animation_speed / <span class="hljs-number">2</span>);
      }

      <span class="hljs-keyword">return</span> el.hide();
    },

    close_video : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
      <span class="hljs-keyword">var</span> video = $(<span class="hljs-keyword">this</span>).find(<span class="hljs-string">'.flex-video'</span>),
          iframe = video.find(<span class="hljs-string">'iframe'</span>);

      <span class="hljs-keyword">if</span> (iframe.length &gt; <span class="hljs-number">0</span>) {
        iframe.attr(<span class="hljs-string">'data-src'</span>, iframe[<span class="hljs-number">0</span>].src);
        iframe.attr(<span class="hljs-string">'src'</span>, <span class="hljs-string">'about:blank'</span>);
        video.hide();
      }
    },

    open_video : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
      <span class="hljs-keyword">var</span> video = $(<span class="hljs-keyword">this</span>).find(<span class="hljs-string">'.flex-video'</span>),
          iframe = video.find(<span class="hljs-string">'iframe'</span>);

      <span class="hljs-keyword">if</span> (iframe.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">var</span> data_src = iframe.attr(<span class="hljs-string">'data-src'</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data_src === <span class="hljs-string">'string'</span>) {
          iframe[<span class="hljs-number">0</span>].src = iframe.attr(<span class="hljs-string">'data-src'</span>);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">var</span> src = iframe[<span class="hljs-number">0</span>].src;
          iframe[<span class="hljs-number">0</span>].src = <span class="hljs-literal">undefined</span>;
          iframe[<span class="hljs-number">0</span>].src = src;
        }
        video.show();
      }
    },

    cache_offset : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(modal)</span> {</span>
      <span class="hljs-keyword">var</span> offset = modal.show().height() + <span class="hljs-built_in">parseInt</span>(modal.css(<span class="hljs-string">'top'</span>), <span class="hljs-number">10</span>);

      modal.hide();

      <span class="hljs-keyword">return</span> offset;
    },

    off : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      $(<span class="hljs-keyword">this</span>.scope).off(<span class="hljs-string">'.fndtn.reveal'</span>);
    },

    reflow : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>}
  };
}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));

<span class="hljs-comment">/*jslint unparam: true, browser: true, indent: 2 */</span>
;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  Foundation.libs.tab = {
    name : <span class="hljs-string">'tab'</span>,

    version : <span class="hljs-string">'5.0.1'</span>,

    settings : {
      active_class: <span class="hljs-string">'active'</span>
    },

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, method, options)</span> {</span>
      <span class="hljs-keyword">this</span>.bindings(method, options);
    },

    events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      $(<span class="hljs-keyword">this</span>.scope).off(<span class="hljs-string">'.tab'</span>).on(<span class="hljs-string">'click.fndtn.tab'</span>, <span class="hljs-string">'[data-tab] &gt; dd &gt; a'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
        e.preventDefault();

        <span class="hljs-keyword">var</span> tab = $(<span class="hljs-keyword">this</span>).parent(),
            target = $(<span class="hljs-string">'#'</span> + <span class="hljs-keyword">this</span>.href.split(<span class="hljs-string">'#'</span>)[<span class="hljs-number">1</span>]),
            siblings = tab.siblings(),
            settings = tab.closest(<span class="hljs-string">'[data-tab]'</span>).data(<span class="hljs-string">'tab-init'</span>);

        tab.addClass(settings.active_class);
        siblings.removeClass(settings.active_class);
        target.siblings().removeClass(settings.active_class).end().addClass(settings.active_class);
      });
    },

    off : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>},

    reflow : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>}
  };
}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));

;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  Foundation.libs.tooltip = {
    name : <span class="hljs-string">'tooltip'</span>,

    version : <span class="hljs-string">'5.0.0'</span>,

    settings : {
      additional_inheritable_classes : [],
      tooltip_class : <span class="hljs-string">'.tooltip'</span>,
      append_to: <span class="hljs-string">'body'</span>,
      touch_close_text: <span class="hljs-string">'Tap To Close'</span>,
      disable_for_touch: <span class="hljs-literal">false</span>,
      tip_template : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(selector, content)</span> {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;span data-selector="'</span> + selector + <span class="hljs-string">'" class="'</span> 
          + Foundation.libs.tooltip.settings.tooltip_class.substring(<span class="hljs-number">1</span>) 
          + <span class="hljs-string">'"&gt;'</span> + content + <span class="hljs-string">'&lt;span class="nub"&gt;&lt;/span&gt;&lt;/span&gt;'</span>;
      }
    },

    cache : {},

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(scope, method, options)</span> {</span>
      <span class="hljs-keyword">this</span>.bindings(method, options);
    },

    events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

      <span class="hljs-keyword">if</span> (Modernizr.touch) {
        $(<span class="hljs-keyword">this</span>.scope)
          .off(<span class="hljs-string">'.tooltip'</span>)
          .on(<span class="hljs-string">'click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip'</span>, 
            <span class="hljs-string">'[data-tooltip]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
            <span class="hljs-keyword">var</span> settings = $.extend({}, self.settings, self.data_options($(<span class="hljs-keyword">this</span>)));
            <span class="hljs-keyword">if</span> (!settings.disable_for_touch) {
              e.preventDefault();
              $(settings.tooltip_class).hide();
              self.showOrCreateTip($(<span class="hljs-keyword">this</span>));
            }
          })
          .on(<span class="hljs-string">'click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip'</span>, 
            <span class="hljs-keyword">this</span>.settings.tooltip_class, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
            e.preventDefault();
            $(<span class="hljs-keyword">this</span>).fadeOut(<span class="hljs-number">150</span>);
          });
      } <span class="hljs-keyword">else</span> {
        $(<span class="hljs-keyword">this</span>.scope)
          .off(<span class="hljs-string">'.tooltip'</span>)
          .on(<span class="hljs-string">'mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip'</span>, 
            <span class="hljs-string">'[data-tooltip]'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
            <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>);

            <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/enter|over/i</span>.test(e.type)) {
              self.showOrCreateTip($<span class="hljs-keyword">this</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e.type === <span class="hljs-string">'mouseout'</span> || e.type === <span class="hljs-string">'mouseleave'</span>) {
              self.hide($<span class="hljs-keyword">this</span>);
            }
          });
      }
    },

    showOrCreateTip : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($target)</span> {</span>
      <span class="hljs-keyword">var</span> $tip = <span class="hljs-keyword">this</span>.getTip($target);

      <span class="hljs-keyword">if</span> ($tip &amp;&amp; $tip.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.show($target);
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.create($target);
    },

    getTip : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($target)</span> {</span>
      <span class="hljs-keyword">var</span> selector = <span class="hljs-keyword">this</span>.selector($target),
          tip = <span class="hljs-literal">null</span>;

      <span class="hljs-keyword">if</span> (selector) {
        tip = $(<span class="hljs-string">'span[data-selector="'</span> + selector + <span class="hljs-string">'"]'</span> + <span class="hljs-keyword">this</span>.settings.tooltip_class);
      }

      <span class="hljs-keyword">return</span> (<span class="hljs-keyword">typeof</span> tip === <span class="hljs-string">'object'</span>) ? tip : <span class="hljs-literal">false</span>;
    },

    selector : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($target)</span> {</span>
      <span class="hljs-keyword">var</span> id = $target.attr(<span class="hljs-string">'id'</span>),
          dataSelector = $target.attr(<span class="hljs-string">'data-tooltip'</span>) || $target.attr(<span class="hljs-string">'data-selector'</span>);

      <span class="hljs-keyword">if</span> ((id &amp;&amp; id.length &lt; <span class="hljs-number">1</span> || !id) &amp;&amp; <span class="hljs-keyword">typeof</span> dataSelector != <span class="hljs-string">'string'</span>) {
        dataSelector = <span class="hljs-string">'tooltip'</span> + <span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substring(<span class="hljs-number">7</span>);
        $target.attr(<span class="hljs-string">'data-selector'</span>, dataSelector);
      }

      <span class="hljs-keyword">return</span> (id &amp;&amp; id.length &gt; <span class="hljs-number">0</span>) ? id : dataSelector;
    },

    create : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($target)</span> {</span>
      <span class="hljs-keyword">var</span> $tip = $(<span class="hljs-keyword">this</span>.settings.tip_template(<span class="hljs-keyword">this</span>.selector($target), $(<span class="hljs-string">'&lt;div&gt;&lt;/div&gt;'</span>).html($target.attr(<span class="hljs-string">'title'</span>)).html())),
          classes = <span class="hljs-keyword">this</span>.inheritable_classes($target);

      $tip.addClass(classes).appendTo(<span class="hljs-keyword">this</span>.settings.append_to);
      <span class="hljs-keyword">if</span> (Modernizr.touch) {
        $tip.append(<span class="hljs-string">'&lt;span class="tap-to-close"&gt;'</span>+<span class="hljs-keyword">this</span>.settings.touch_close_text+<span class="hljs-string">'&lt;/span&gt;'</span>);
      }
      $target.removeAttr(<span class="hljs-string">'title'</span>).attr(<span class="hljs-string">'title'</span>,<span class="hljs-string">''</span>);
      <span class="hljs-keyword">this</span>.show($target);
    },

    reposition : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(target, tip, classes)</span> {</span>
      <span class="hljs-keyword">var</span> width, nub, nubHeight, nubWidth, column, objPos;

      tip.css(<span class="hljs-string">'visibility'</span>, <span class="hljs-string">'hidden'</span>).show();

      width = target.data(<span class="hljs-string">'width'</span>);
      nub = tip.children(<span class="hljs-string">'.nub'</span>);
      nubHeight = nub.outerHeight();
      nubWidth = nub.outerHeight();

      objPos = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(obj, top, right, bottom, left, width)</span> {</span>
        <span class="hljs-keyword">return</span> obj.css({
          <span class="hljs-string">'top'</span> : (top) ? top : <span class="hljs-string">'auto'</span>,
          <span class="hljs-string">'bottom'</span> : (bottom) ? bottom : <span class="hljs-string">'auto'</span>,
          <span class="hljs-string">'left'</span> : (left) ? left : <span class="hljs-string">'auto'</span>,
          <span class="hljs-string">'right'</span> : (right) ? right : <span class="hljs-string">'auto'</span>,
          <span class="hljs-string">'width'</span> : (width) ? width : <span class="hljs-string">'auto'</span>
        }).end();
      };

      objPos(tip, (target.offset().top + target.outerHeight() + <span class="hljs-number">10</span>), <span class="hljs-string">'auto'</span>, <span class="hljs-string">'auto'</span>, target.offset().left, width);

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.small()) {
        objPos(tip, (target.offset().top + target.outerHeight() + <span class="hljs-number">10</span>), <span class="hljs-string">'auto'</span>, <span class="hljs-string">'auto'</span>, <span class="hljs-number">12.5</span>, $(<span class="hljs-keyword">this</span>.scope).width());
        tip.addClass(<span class="hljs-string">'tip-override'</span>);
        objPos(nub, -nubHeight, <span class="hljs-string">'auto'</span>, <span class="hljs-string">'auto'</span>, target.offset().left);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> left = target.offset().left;
        <span class="hljs-keyword">if</span> (Foundation.rtl) {
          left = target.offset().left + target.offset().width - tip.outerWidth();
        }
        objPos(tip, (target.offset().top + target.outerHeight() + <span class="hljs-number">10</span>), <span class="hljs-string">'auto'</span>, <span class="hljs-string">'auto'</span>, left, width);
        tip.removeClass(<span class="hljs-string">'tip-override'</span>);
        <span class="hljs-keyword">if</span> (classes &amp;&amp; classes.indexOf(<span class="hljs-string">'tip-top'</span>) &gt; -<span class="hljs-number">1</span>) {
          objPos(tip, (target.offset().top - tip.outerHeight()), <span class="hljs-string">'auto'</span>, <span class="hljs-string">'auto'</span>, left, width)
            .removeClass(<span class="hljs-string">'tip-override'</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (classes &amp;&amp; classes.indexOf(<span class="hljs-string">'tip-left'</span>) &gt; -<span class="hljs-number">1</span>) {
          objPos(tip, (target.offset().top + (target.outerHeight() / <span class="hljs-number">2</span>) - nubHeight*<span class="hljs-number">2.5</span>), <span class="hljs-string">'auto'</span>, <span class="hljs-string">'auto'</span>, (target.offset().left - tip.outerWidth() - nubHeight), width)
            .removeClass(<span class="hljs-string">'tip-override'</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (classes &amp;&amp; classes.indexOf(<span class="hljs-string">'tip-right'</span>) &gt; -<span class="hljs-number">1</span>) {
          objPos(tip, (target.offset().top + (target.outerHeight() / <span class="hljs-number">2</span>) - nubHeight*<span class="hljs-number">2.5</span>), <span class="hljs-string">'auto'</span>, <span class="hljs-string">'auto'</span>, (target.offset().left + target.outerWidth() + nubHeight), width)
            .removeClass(<span class="hljs-string">'tip-override'</span>);
        }
      }

      tip.css(<span class="hljs-string">'visibility'</span>, <span class="hljs-string">'visible'</span>).hide();
    },

    small : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">return</span> matchMedia(Foundation.media_queries.small).matches;
    },

    inheritable_classes : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(target)</span> {</span>
      <span class="hljs-keyword">var</span> inheritables = [<span class="hljs-string">'tip-top'</span>, <span class="hljs-string">'tip-left'</span>, <span class="hljs-string">'tip-bottom'</span>, <span class="hljs-string">'tip-right'</span>, <span class="hljs-string">'noradius'</span>].concat(<span class="hljs-keyword">this</span>.settings.additional_inheritable_classes),
          classes = target.attr(<span class="hljs-string">'class'</span>),
          filtered = classes ? $.map(classes.split(<span class="hljs-string">' '</span>), <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(el, i)</span> {</span>
            <span class="hljs-keyword">if</span> ($.inArray(el, inheritables) !== -<span class="hljs-number">1</span>) {
              <span class="hljs-keyword">return</span> el;
            }
          }).join(<span class="hljs-string">' '</span>) : <span class="hljs-string">''</span>;

      <span class="hljs-keyword">return</span> $.trim(filtered);
    },

    show : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($target)</span> {</span>
      <span class="hljs-keyword">var</span> $tip = <span class="hljs-keyword">this</span>.getTip($target);

      <span class="hljs-keyword">this</span>.reposition($target, $tip, $target.attr(<span class="hljs-string">'class'</span>));
      $tip.fadeIn(<span class="hljs-number">150</span>);
    },

    hide : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($target)</span> {</span>
      <span class="hljs-keyword">var</span> $tip = <span class="hljs-keyword">this</span>.getTip($target);

      $tip.fadeOut(<span class="hljs-number">150</span>);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>deprecate reload</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    reload : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> $self = $(<span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">return</span> ($self.data(<span class="hljs-string">'fndtn-tooltips'</span>)) ? $self.foundationTooltips(<span class="hljs-string">'destroy'</span>).foundationTooltips(<span class="hljs-string">'init'</span>) : $self.foundationTooltips(<span class="hljs-string">'init'</span>);
    },

    off : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      $(<span class="hljs-keyword">this</span>.scope).off(<span class="hljs-string">'.fndtn.tooltip'</span>);
      $(<span class="hljs-keyword">this</span>.settings.tooltip_class).each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(i)</span> {</span>
        $(<span class="hljs-string">'[data-tooltip]'</span>).get(i).attr(<span class="hljs-string">'title'</span>, $(<span class="hljs-keyword">this</span>).text());
      }).remove();
    },

    reflow : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>}
  };
}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));

;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, window, document, undefined)</span> {</span>
<span class="hljs-pi">  'use strict'</span>;

  Foundation.libs.topbar = {
    name : <span class="hljs-string">'topbar'</span>,

    version: <span class="hljs-string">'5.0.1'</span>,

    settings : {
      index : <span class="hljs-number">0</span>,
      sticky_class : <span class="hljs-string">'sticky'</span>,
      custom_back_text: <span class="hljs-literal">true</span>,
      back_text: <span class="hljs-string">'Back'</span>,
      is_hover: <span class="hljs-literal">true</span>,
      mobile_show_parent_link: <span class="hljs-literal">false</span>,
      scrolltop : <span class="hljs-literal">true</span> <span class="hljs-comment">// jump to top when sticky nav menu toggle is clicked</span>
    },

    init : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(section, method, options)</span> {</span>
      Foundation.inherit(<span class="hljs-keyword">this</span>, <span class="hljs-string">'addCustomRule register_media throttle'</span>);
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

      self.register_media(<span class="hljs-string">'topbar'</span>, <span class="hljs-string">'foundation-mq-topbar'</span>);

      <span class="hljs-keyword">this</span>.bindings(method, options);

      $(<span class="hljs-string">'[data-topbar]'</span>, <span class="hljs-keyword">this</span>.scope).each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">var</span> topbar = $(<span class="hljs-keyword">this</span>),
            settings = topbar.data(<span class="hljs-string">'topbar-init'</span>),
            section = $(<span class="hljs-string">'section'</span>, <span class="hljs-keyword">this</span>),
            titlebar = $(<span class="hljs-string">'&gt; ul'</span>, <span class="hljs-keyword">this</span>).first();

        topbar.data(<span class="hljs-string">'index'</span>, <span class="hljs-number">0</span>);

        <span class="hljs-keyword">var</span> topbarContainer = topbar.parent();
        <span class="hljs-keyword">if</span>(topbarContainer.hasClass(<span class="hljs-string">'fixed'</span>) || topbarContainer.hasClass(settings.sticky_class)) {
          self.settings.sticky_class = settings.sticky_class;
          self.settings.stick_topbar = topbar;
          topbar.data(<span class="hljs-string">'height'</span>, topbarContainer.outerHeight());
          topbar.data(<span class="hljs-string">'stickyoffset'</span>, topbarContainer.offset().top);
        } <span class="hljs-keyword">else</span> {
          topbar.data(<span class="hljs-string">'height'</span>, topbar.outerHeight());
        }

        <span class="hljs-keyword">if</span> (!settings.assembled) self.assemble(topbar);

        <span class="hljs-keyword">if</span> (settings.is_hover) {
          $(<span class="hljs-string">'.has-dropdown'</span>, topbar).addClass(<span class="hljs-string">'not-click'</span>);
        } <span class="hljs-keyword">else</span> {
          $(<span class="hljs-string">'.has-dropdown'</span>, topbar).removeClass(<span class="hljs-string">'not-click'</span>);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>Pad body when sticky (scrolled) or fixed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        self.addCustomRule(<span class="hljs-string">'.f-topbar-fixed { padding-top: '</span> + topbar.data(<span class="hljs-string">'height'</span>) + <span class="hljs-string">'px }'</span>);

        <span class="hljs-keyword">if</span> (topbarContainer.hasClass(<span class="hljs-string">'fixed'</span>)) {
          $(<span class="hljs-string">'body'</span>).addClass(<span class="hljs-string">'f-topbar-fixed'</span>);
        }
      });

    },

    toggle: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(toggleEl)</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

      <span class="hljs-keyword">if</span> (toggleEl) {
        <span class="hljs-keyword">var</span> topbar = $(toggleEl).closest(<span class="hljs-string">'[data-topbar]'</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> topbar = $(<span class="hljs-string">'[data-topbar]'</span>);
      }

      <span class="hljs-keyword">var</span> settings = topbar.data(<span class="hljs-string">'topbar-init'</span>);

      <span class="hljs-keyword">var</span> section = $(<span class="hljs-string">'section, .section'</span>, topbar);

      <span class="hljs-keyword">if</span> (self.breakpoint()) {
        <span class="hljs-keyword">if</span> (!self.rtl) {
          section.css({left: <span class="hljs-string">'0%'</span>});
          $(<span class="hljs-string">'&gt;.name'</span>, section).css({left: <span class="hljs-string">'100%'</span>});
        } <span class="hljs-keyword">else</span> {
          section.css({right: <span class="hljs-string">'0%'</span>});
          $(<span class="hljs-string">'&gt;.name'</span>, section).css({right: <span class="hljs-string">'100%'</span>});
        }

        $(<span class="hljs-string">'li.moved'</span>, section).removeClass(<span class="hljs-string">'moved'</span>);
        topbar.data(<span class="hljs-string">'index'</span>, <span class="hljs-number">0</span>);

        topbar
          .toggleClass(<span class="hljs-string">'expanded'</span>)
          .css(<span class="hljs-string">'height'</span>, <span class="hljs-string">''</span>);
      }

      <span class="hljs-keyword">if</span> (settings.scrolltop) {
        <span class="hljs-keyword">if</span> (!topbar.hasClass(<span class="hljs-string">'expanded'</span>)) {
          <span class="hljs-keyword">if</span> (topbar.hasClass(<span class="hljs-string">'fixed'</span>)) {
            topbar.parent().addClass(<span class="hljs-string">'fixed'</span>);
            topbar.removeClass(<span class="hljs-string">'fixed'</span>);
            $(<span class="hljs-string">'body'</span>).addClass(<span class="hljs-string">'f-topbar-fixed'</span>);
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (topbar.parent().hasClass(<span class="hljs-string">'fixed'</span>)) {
          <span class="hljs-keyword">if</span> (settings.scrolltop) {
            topbar.parent().removeClass(<span class="hljs-string">'fixed'</span>);
            topbar.addClass(<span class="hljs-string">'fixed'</span>);
            $(<span class="hljs-string">'body'</span>).removeClass(<span class="hljs-string">'f-topbar-fixed'</span>);

            window.scrollTo(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);
          } <span class="hljs-keyword">else</span> {
              topbar.parent().removeClass(<span class="hljs-string">'expanded'</span>);
          }
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span>(topbar.parent().hasClass(self.settings.sticky_class)) {
          topbar.parent().addClass(<span class="hljs-string">'fixed'</span>);
        }

        <span class="hljs-keyword">if</span>(topbar.parent().hasClass(<span class="hljs-string">'fixed'</span>)) {
          <span class="hljs-keyword">if</span> (!topbar.hasClass(<span class="hljs-string">'expanded'</span>)) {
            topbar.removeClass(<span class="hljs-string">'fixed'</span>);
            topbar.parent().removeClass(<span class="hljs-string">'expanded'</span>);
            self.update_sticky_positioning();
          } <span class="hljs-keyword">else</span> {
            topbar.addClass(<span class="hljs-string">'fixed'</span>);
            topbar.parent().addClass(<span class="hljs-string">'expanded'</span>);
          }
        }
      }
    },

    timer : <span class="hljs-literal">null</span>,

    events : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(bar)</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
      $(<span class="hljs-keyword">this</span>.scope)
        .off(<span class="hljs-string">'.topbar'</span>)
        .on(<span class="hljs-string">'click.fndtn.topbar'</span>, <span class="hljs-string">'[data-topbar] .toggle-topbar'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          e.preventDefault();
          self.toggle(<span class="hljs-keyword">this</span>);
        })
        .on(<span class="hljs-string">'click.fndtn.topbar'</span>, <span class="hljs-string">'[data-topbar] li.has-dropdown'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">var</span> li = $(<span class="hljs-keyword">this</span>),
              target = $(e.target),
              topbar = li.closest(<span class="hljs-string">'[data-topbar]'</span>),
              settings = topbar.data(<span class="hljs-string">'topbar-init'</span>);

          <span class="hljs-keyword">if</span>(target.data(<span class="hljs-string">'revealId'</span>)) {
            self.toggle();
            <span class="hljs-keyword">return</span>;
          }

          <span class="hljs-keyword">if</span> (self.breakpoint()) <span class="hljs-keyword">return</span>;
          <span class="hljs-keyword">if</span> (settings.is_hover &amp;&amp; !Modernizr.touch) <span class="hljs-keyword">return</span>;

          e.stopImmediatePropagation();

          <span class="hljs-keyword">if</span> (li.hasClass(<span class="hljs-string">'hover'</span>)) {
            li
              .removeClass(<span class="hljs-string">'hover'</span>)
              .find(<span class="hljs-string">'li'</span>)
              .removeClass(<span class="hljs-string">'hover'</span>);

            li.parents(<span class="hljs-string">'li.hover'</span>)
              .removeClass(<span class="hljs-string">'hover'</span>);
          } <span class="hljs-keyword">else</span> {
            li.addClass(<span class="hljs-string">'hover'</span>);

            <span class="hljs-keyword">if</span> (target[<span class="hljs-number">0</span>].nodeName === <span class="hljs-string">'A'</span> &amp;&amp; target.parent().hasClass(<span class="hljs-string">'has-dropdown'</span>)) {
              e.preventDefault();
            }
          }
        })
        .on(<span class="hljs-string">'click.fndtn.topbar'</span>, <span class="hljs-string">'[data-topbar] .has-dropdown&gt;a'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
          <span class="hljs-keyword">if</span> (self.breakpoint()) {

            e.preventDefault();

            <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>),
                topbar = $<span class="hljs-keyword">this</span>.closest(<span class="hljs-string">'[data-topbar]'</span>),
                section = topbar.find(<span class="hljs-string">'section, .section'</span>),
                dropdownHeight = $<span class="hljs-keyword">this</span>.next(<span class="hljs-string">'.dropdown'</span>).outerHeight(),
                $selectedLi = $<span class="hljs-keyword">this</span>.closest(<span class="hljs-string">'li'</span>);

            topbar.data(<span class="hljs-string">'index'</span>, topbar.data(<span class="hljs-string">'index'</span>) + <span class="hljs-number">1</span>);
            $selectedLi.addClass(<span class="hljs-string">'moved'</span>);

            <span class="hljs-keyword">if</span> (!self.rtl) {
              section.css({left: -(<span class="hljs-number">100</span> * topbar.data(<span class="hljs-string">'index'</span>)) + <span class="hljs-string">'%'</span>});
              section.find(<span class="hljs-string">'&gt;.name'</span>).css({left: <span class="hljs-number">100</span> * topbar.data(<span class="hljs-string">'index'</span>) + <span class="hljs-string">'%'</span>});
            } <span class="hljs-keyword">else</span> {
              section.css({right: -(<span class="hljs-number">100</span> * topbar.data(<span class="hljs-string">'index'</span>)) + <span class="hljs-string">'%'</span>});
              section.find(<span class="hljs-string">'&gt;.name'</span>).css({right: <span class="hljs-number">100</span> * topbar.data(<span class="hljs-string">'index'</span>) + <span class="hljs-string">'%'</span>});
            }

            topbar.css(<span class="hljs-string">'height'</span>, $<span class="hljs-keyword">this</span>.siblings(<span class="hljs-string">'ul'</span>).outerHeight(<span class="hljs-literal">true</span>) + topbar.data(<span class="hljs-string">'height'</span>));
          }
        });
      
      $(window).off(<span class="hljs-string">'.topbar'</span>).on(<span class="hljs-string">'resize.fndtn.topbar'</span>, self.throttle(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        self.resize.call(self);
      }, <span class="hljs-number">50</span>)).trigger(<span class="hljs-string">'resize'</span>);

      $(<span class="hljs-string">'body'</span>).off(<span class="hljs-string">'.topbar'</span>).on(<span class="hljs-string">'click.fndtn.topbar touchstart.fndtn.topbar'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
        <span class="hljs-keyword">var</span> parent = $(e.target).closest(<span class="hljs-string">'li'</span>).closest(<span class="hljs-string">'li.hover'</span>);

        <span class="hljs-keyword">if</span> (parent.length &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">return</span>;
        }

        $(<span class="hljs-string">'[data-topbar] li'</span>).removeClass(<span class="hljs-string">'hover'</span>);
      });</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>Go up a level on Click</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $(<span class="hljs-keyword">this</span>.scope).on(<span class="hljs-string">'click.fndtn.topbar'</span>, <span class="hljs-string">'[data-topbar] .has-dropdown .back'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> {</span>
        e.preventDefault();

        <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>),
            topbar = $<span class="hljs-keyword">this</span>.closest(<span class="hljs-string">'[data-topbar]'</span>),
            section = topbar.find(<span class="hljs-string">'section, .section'</span>),
            settings = topbar.data(<span class="hljs-string">'topbar-init'</span>),
            $movedLi = $<span class="hljs-keyword">this</span>.closest(<span class="hljs-string">'li.moved'</span>),
            $previousLevelUl = $movedLi.parent();

        topbar.data(<span class="hljs-string">'index'</span>, topbar.data(<span class="hljs-string">'index'</span>) - <span class="hljs-number">1</span>);

        <span class="hljs-keyword">if</span> (!self.rtl) {
          section.css({left: -(<span class="hljs-number">100</span> * topbar.data(<span class="hljs-string">'index'</span>)) + <span class="hljs-string">'%'</span>});
          section.find(<span class="hljs-string">'&gt;.name'</span>).css({left: <span class="hljs-number">100</span> * topbar.data(<span class="hljs-string">'index'</span>) + <span class="hljs-string">'%'</span>});
        } <span class="hljs-keyword">else</span> {
          section.css({right: -(<span class="hljs-number">100</span> * topbar.data(<span class="hljs-string">'index'</span>)) + <span class="hljs-string">'%'</span>});
          section.find(<span class="hljs-string">'&gt;.name'</span>).css({right: <span class="hljs-number">100</span> * topbar.data(<span class="hljs-string">'index'</span>) + <span class="hljs-string">'%'</span>});
        }

        <span class="hljs-keyword">if</span> (topbar.data(<span class="hljs-string">'index'</span>) === <span class="hljs-number">0</span>) {
          topbar.css(<span class="hljs-string">'height'</span>, <span class="hljs-string">''</span>);
        } <span class="hljs-keyword">else</span> {
          topbar.css(<span class="hljs-string">'height'</span>, $previousLevelUl.outerHeight(<span class="hljs-literal">true</span>) + topbar.data(<span class="hljs-string">'height'</span>));
        }

        setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
          $movedLi.removeClass(<span class="hljs-string">'moved'</span>);
        }, <span class="hljs-number">300</span>);
      });
    },

    resize : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
      $(<span class="hljs-string">'[data-topbar]'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">var</span> topbar = $(<span class="hljs-keyword">this</span>),
            settings = topbar.data(<span class="hljs-string">'topbar-init'</span>);

        <span class="hljs-keyword">var</span> stickyContainer = topbar.parent(<span class="hljs-string">'.'</span> + self.settings.sticky_class);
        <span class="hljs-keyword">var</span> stickyOffset;

        <span class="hljs-keyword">if</span> (!self.breakpoint()) {
          <span class="hljs-keyword">var</span> doToggle = topbar.hasClass(<span class="hljs-string">'expanded'</span>);
          topbar
            .css(<span class="hljs-string">'height'</span>, <span class="hljs-string">''</span>)
            .removeClass(<span class="hljs-string">'expanded'</span>)
            .find(<span class="hljs-string">'li'</span>)
            .removeClass(<span class="hljs-string">'hover'</span>);

            <span class="hljs-keyword">if</span>(doToggle) {
              self.toggle(topbar);
            }
        }

        <span class="hljs-keyword">if</span>(stickyContainer.length &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">if</span>(stickyContainer.hasClass(<span class="hljs-string">'fixed'</span>)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>Remove the fixed to allow for correct calculation of the offset.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            stickyContainer.removeClass(<span class="hljs-string">'fixed'</span>);

            stickyOffset = stickyContainer.offset().top;
            <span class="hljs-keyword">if</span>($(document.body).hasClass(<span class="hljs-string">'f-topbar-fixed'</span>)) {
              stickyOffset -= topbar.data(<span class="hljs-string">'height'</span>);
            }

            topbar.data(<span class="hljs-string">'stickyoffset'</span>, stickyOffset);
            stickyContainer.addClass(<span class="hljs-string">'fixed'</span>);
          } <span class="hljs-keyword">else</span> {
            stickyOffset = stickyContainer.offset().top;
            topbar.data(<span class="hljs-string">'stickyoffset'</span>, stickyOffset);
          }
        }

      });
    },

    breakpoint : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">return</span> !matchMedia(Foundation.media_queries[<span class="hljs-string">'topbar'</span>]).matches;
    },

    assemble : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(topbar)</span> {</span>
      <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>,
          settings = topbar.data(<span class="hljs-string">'topbar-init'</span>),
          section = $(<span class="hljs-string">'section'</span>, topbar),
          titlebar = $(<span class="hljs-string">'&gt; ul'</span>, topbar).first();</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>Pull element out of the DOM for manipulation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      section.detach();

      $(<span class="hljs-string">'.has-dropdown&gt;a'</span>, section).each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        <span class="hljs-keyword">var</span> $link = $(<span class="hljs-keyword">this</span>),
            $dropdown = $link.siblings(<span class="hljs-string">'.dropdown'</span>),
            url = $link.attr(<span class="hljs-string">'href'</span>);

        <span class="hljs-keyword">if</span> (settings.mobile_show_parent_link &amp;&amp; url &amp;&amp; url.length &gt; <span class="hljs-number">1</span>) {
          <span class="hljs-keyword">var</span> $titleLi = $(<span class="hljs-string">'&lt;li class="title back js-generated"&gt;&lt;h5&gt;&lt;a href="#"&gt;&lt;/a&gt;&lt;/h5&gt;&lt;/li&gt;&lt;li&gt;&lt;a class="parent-link js-generated" href="'</span> + url + <span class="hljs-string">'"&gt;'</span> + $link.text() +<span class="hljs-string">'&lt;/a&gt;&lt;/li&gt;'</span>);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">var</span> $titleLi = $(<span class="hljs-string">'&lt;li class="title back js-generated"&gt;&lt;h5&gt;&lt;a href="#"&gt;&lt;/a&gt;&lt;/h5&gt;&lt;/li&gt;'</span>);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>Copy link to subnav</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (settings.custom_back_text == <span class="hljs-literal">true</span>) {
          $(<span class="hljs-string">'h5&gt;a'</span>, $titleLi).html(settings.back_text);
        } <span class="hljs-keyword">else</span> {
          $(<span class="hljs-string">'h5&gt;a'</span>, $titleLi).html(<span class="hljs-string">'&amp;laquo; '</span> + $link.html());
        }
        $dropdown.prepend($titleLi);
      });</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>Put element back in the DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      section.appendTo(topbar);</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>check for sticky</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.sticky();

      <span class="hljs-keyword">this</span>.assembled(topbar);
    },

    assembled : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(topbar)</span> {</span>
      topbar.data(<span class="hljs-string">'topbar-init'</span>, $.extend({}, topbar.data(<span class="hljs-string">'topbar-init'</span>), {assembled: <span class="hljs-literal">true</span>}));
    },

    height : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(ul)</span> {</span>
      <span class="hljs-keyword">var</span> total = <span class="hljs-number">0</span>,
          self = <span class="hljs-keyword">this</span>;

      $(<span class="hljs-string">'&gt; li'</span>, ul).each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span> total += $(<span class="hljs-keyword">this</span>).outerHeight(<span class="hljs-literal">true</span>); });

      <span class="hljs-keyword">return</span> total;
    },

    sticky : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> $window = $(window),
          self = <span class="hljs-keyword">this</span>;

      $(window).on(<span class="hljs-string">'scroll'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
        self.update_sticky_positioning();
      });
    },

    update_sticky_positioning: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> klass = <span class="hljs-string">'.'</span> + <span class="hljs-keyword">this</span>.settings.sticky_class;
      <span class="hljs-keyword">var</span> $window = $(window);

      <span class="hljs-keyword">if</span> ($(klass).length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">var</span> distance = <span class="hljs-keyword">this</span>.settings.sticky_topbar.data(<span class="hljs-string">'stickyoffset'</span>);
        <span class="hljs-keyword">if</span> (!$(klass).hasClass(<span class="hljs-string">'expanded'</span>)) {
          <span class="hljs-keyword">if</span> ($window.scrollTop() &gt; (distance)) {
            <span class="hljs-keyword">if</span> (!$(klass).hasClass(<span class="hljs-string">'fixed'</span>)) {
              $(klass).addClass(<span class="hljs-string">'fixed'</span>);
              $(<span class="hljs-string">'body'</span>).addClass(<span class="hljs-string">'f-topbar-fixed'</span>);
            }
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($window.scrollTop() &lt;= distance) {
            <span class="hljs-keyword">if</span> ($(klass).hasClass(<span class="hljs-string">'fixed'</span>)) {
              $(klass).removeClass(<span class="hljs-string">'fixed'</span>);
              $(<span class="hljs-string">'body'</span>).removeClass(<span class="hljs-string">'f-topbar-fixed'</span>);
            }
          }
        }
      }
    },

    off : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
      $(<span class="hljs-keyword">this</span>.scope).off(<span class="hljs-string">'.fndtn.topbar'</span>);
      $(window).off(<span class="hljs-string">'.fndtn.topbar'</span>);
    },

    reflow : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>}
  };
}(jQuery, <span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.document));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
